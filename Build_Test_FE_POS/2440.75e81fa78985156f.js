"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[2440],{42440:(B,b,u)=>{u.r(b),u.d(b,{CollectModule:()=>Gi});var a=u(36895),m=u(39485),e=u(94650),h=u(43346),g=u(69082),d=u(42953),c=u(24006);function O(o,l){1&o&&(e.ynx(0),e.TgZ(1,"h4"),e._uU(2,"This Action will be sent to the sales consultant team in order to update work order"),e.qZA(),e.BQk())}function Y(o,l){1&o&&(e.TgZ(0,"h4"),e._uU(1,"This order will be canceled permanently."),e.qZA())}function j(o,l){1&o&&(e.TgZ(0,"span",11),e._uU(1,"Input is required"),e.qZA())}function E(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.YNc(1,O,3,0,"ng-container",2),e.YNc(2,Y,2,0,"ng-template",null,3,e.W1O),e.TgZ(4,"div")(5,"div",4)(6,"label",5),e._uU(7," Notes"),e.qZA(),e.TgZ(8,"textarea",6),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.notes=i)})("input",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.handleNotesInput(i))}),e.qZA(),e.YNc(9,j,2,0,"span",7),e.qZA()(),e.TgZ(10,"div",8)(11,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeModal.close("Close click"))}),e._uU(12,"Cancel"),e.qZA(),e.TgZ(13,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG("modify"==i.action?i.NeedModify():i.cancelOrder())}),e._uU(14),e.qZA()()()}if(2&o){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf","modify"==n.action)("ngIfElse",t),e.xp6(7),e.Q6J("ngModel",n.notes),e.xp6(1),e.Q6J("ngIf",n.invalidInput),e.xp6(4),e.Q6J("disabled",n.invalidInput||n.isPending),e.xp6(1),e.hij(" ",(n.isPending?"Saving":"modify"==n.action&&"Modify Order")||"Cancel Order"," ")}}function L(o,l){if(1&o&&(e.TgZ(0,"div",1)(1,"h4"),e._UZ(2,"i",12),e._uU(3),e.qZA()()),2&o){const t=e.oxw();e.xp6(3),e.hij(" ",t.message," ")}}function V(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"h4"),e._UZ(2,"i",13),e._uU(3),e.qZA(),e.TgZ(4,"div",8)(5,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeModal.close("Close click"))}),e._uU(6,"Close"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(3),e.hij(" ",t.messageError," ")}}let D=(()=>{class o{constructor(t,n,i,s,r){this.collectService=t,this.sharedService=n,this.modalService=i,this.activeModal=s,this.router=r,this.message="",this.invalidInput=!0,this.isPending=!1}ngOnInit(){}handleNotesInput(t){this.invalidInput=!t.target.value}NeedModify(){this.isPending=!0;const t=new FormData;t.append("SalesOrderId",this.SalesOrderId),t.append("OrderType",this.OrderType),t.append("NeedModifyNote",this.notes),console.log(t),this.collectService.NeedModify(t).subscribe(n=>{console.log(n),n.isSuccess?(this.isPending=!1,this.message="Modify request successfully sent",setTimeout(()=>{this.modalService.dismissAll(),this.router.navigateByUrl("/collect")},4e3)):(console.log("error",n),this.isPending=!1,this.messageError=n.Errors[0]?.ErrorMessageEn,setTimeout(()=>{this.modalService.dismissAll(),this.router.navigateByUrl("/collect")},4e3))})}cancelOrder(){this.isPending=!0;const t=new FormData;t.append("OrderId",this.SalesOrderId),t.append("OrderType",this.OrderType),t.append("CancelNote",this.notes),this.collectService.cancelOrder(t).subscribe(n=>{n.isSuccess?(this.isPending=!1,this.message="Order canceled",setTimeout(()=>{this.modalService.dismissAll(),this.router.navigateByUrl("/collect")},4e3)):(console.log("error",n),this.isPending=!1,this.messageError=n.Errors[0]?.ErrorMessageEn,setTimeout(()=>{this.modalService.dismissAll(),this.router.navigateByUrl("/collect")},4e3))},n=>{this.isPending=!1,this.messageError=n.error.errors[0]?.ErrorMessageEn})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.k),e.Y36(g.F),e.Y36(d.FF),e.Y36(d.Kz),e.Y36(m.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-needmodify"]],inputs:{SalesOrderId:"SalesOrderId",OrderType:"OrderType",userType:"userType",action:"action"},decls:3,vars:3,consts:[["class","modify",4,"ngIf"],[1,"modify"],[4,"ngIf","ngIfElse"],["canceled",""],[1,"form-group","my-3","text-start"],[1,"mb-1"],["rows","5","maxlength","200",1,"form-control",3,"ngModel","ngModelChange","input"],["class","primary-clr font-14 fw-500 mt-2",4,"ngIf"],[1,"btns-group","my-2"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save",3,"disabled","click"],[1,"primary-clr","font-14","fw-500","mt-2"],[1,"fa-regular","fa-circle-check"],[1,"fa-regular","fa-circle-xmark"]],template:function(t,n){1&t&&(e.YNc(0,E,15,6,"div",0),e.YNc(1,L,4,1,"div",0),e.YNc(2,V,7,1,"div",0)),2&t&&(e.Q6J("ngIf",!n.message&&!n.messageError),e.xp6(1),e.Q6J("ngIf",n.message),e.xp6(1),e.Q6J("ngIf",n.messageError))},dependencies:[a.O5,c.Fj,c.JJ,c.nD,c.On],styles:[".modify[_ngcontent-%COMP%]{text-align:center;padding:40px 30px}.modify[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;margin:10px 5px 30px}.btns-group[_ngcontent-%COMP%]{justify-content:center}.fa-circle-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:28px;vertical-align:middle;margin:2px 10px 5px}.fa-circle-check[_ngcontent-%COMP%]{color:#25bb00;font-size:28px;vertical-align:middle;margin:2px 10px 5px}"]}),o})();var y=u(3898),k=u(29444),f=u(28424),H=u(98988),$=u(68866),K=u(33980),v=u(86349);function z(o,l){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.ALo(22,"number"),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.ALo(25,"number"),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.ALo(30,"number"),e.qZA(),e.TgZ(31,"td"),e._uU(32),e.ALo(33,"number"),e.qZA()()),2&o){const t=l.$implicit;e.xp6(2),e.hij(" ",null!=t&&t.partNo?t.partNo:"No data"," "),e.xp6(2),e.hij(" ",null!=t&&t.description?t.description:"No data"," "),e.xp6(2),e.hij(" ",null!=t&&t.qty?t.qty:"No data",""),e.xp6(2),e.hij(" ",null==t||null==t.unitOfMeasure[0]?null:t.unitOfMeasure[0].lookupName,""),e.xp6(2),e.hij(" ",e.xi3(11,13,null==t?null:t.unitPrice,"2.3-3")," JOD "),e.xp6(3),e.hij(" ",e.xi3(14,16,null==t?null:t.totalPrice,"2.3-3")," JOD "),e.xp6(3),e.hij(" ",null==t?null:t.lineDiscountPercentage," % "),e.xp6(2),e.hij(" ",e.xi3(19,19,null==t?null:t.lineDiscountAmount,"2.3-3")," JOD "),e.xp6(3),e.hij(" ",e.xi3(22,22,null==t?null:t.invoiceDiscountAmount,"2.3-3")," JOD "),e.xp6(3),e.hij(" ",e.xi3(25,25,null==t?null:t.netAmount,"2.3-3")," JOD"),e.xp6(3),e.hij(" ",null==t?null:t.taxPercentage," %"),e.xp6(2),e.hij(" ",e.xi3(30,28,null==t?null:t.taxAmount,"2.3-3")," JOD "),e.xp6(3),e.hij(" ",e.xi3(33,31,null==t?null:t.totalLine,"2.3-3")," JOD ")}}function W(o,l){1&o&&(e.TgZ(0,"div",16)(1,"h4"),e._uU(2," No Order To Collect "),e.qZA()())}const X=function(o){return{active:o}};function ee(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"li",17)(1,"button",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.setPage(s))}),e._uU(2),e.qZA()()}if(2&o){const t=l.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(3,X,n.pageNo===t))("disabled",n.pageNo===t),e.xp6(1),e.hij(" ",t+1," ")}}function te(o,l){if(1&o&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3"),e._uU(5," Spare Parts "),e.qZA(),e.TgZ(6,"p")(7,"span"),e._uU(8),e.qZA()()(),e.TgZ(9,"div")(10,"div",5)(11,"table",6)(12,"thead")(13,"tr")(14,"th",7),e._uU(15," Part No "),e.qZA(),e.TgZ(16,"th",7),e._uU(17," Description "),e.qZA(),e.TgZ(18,"th",7),e._uU(19," Qty "),e.qZA(),e.TgZ(20,"th",7),e._uU(21," Unit of Measure "),e.qZA(),e.TgZ(22,"th",7),e._uU(23," Unit price "),e.qZA(),e.TgZ(24,"th",7),e._uU(25," Total "),e.qZA(),e.TgZ(26,"th",7),e._uU(27," Line Discount "),e.qZA(),e.TgZ(28,"th",7),e._uU(29," Line Discount Amount "),e.qZA(),e.TgZ(30,"th",7),e._uU(31," Invoice Discount Amount "),e.qZA(),e.TgZ(32,"th",7),e._uU(33," Net Amount "),e.qZA(),e.TgZ(34,"th",7),e._uU(35," Tax "),e.qZA(),e.TgZ(36,"th",7),e._uU(37," Tax Amount "),e.qZA(),e.TgZ(38,"th",7),e._uU(39," Grand Total"),e.qZA()()(),e.TgZ(40,"tbody"),e.YNc(41,z,34,34,"tr",8),e.qZA()()(),e.YNc(42,W,3,0,"div",9),e.TgZ(43,"div",1)(44,"div",10)(45,"div",11)(46,"p"),e._uU(47," Total Price For Spare Parts "),e.qZA(),e.TgZ(48,"div",12),e._uU(49),e.qZA()()(),e.TgZ(50,"div",13)(51,"ul",14),e.YNc(52,ee,3,5,"li",15),e.qZA()()()()()()()),2&o){const t=e.oxw();e.xp6(8),e.hij(" Total No. ",t.totalRecordCount," "),e.xp6(33),e.Q6J("ngForOf",t.Spareparts),e.xp6(1),e.Q6J("ngIf",0==(null==t.Spareparts?null:t.Spareparts.length)),e.xp6(7),e.hij(" ",t.totaAmount," JOD "),e.xp6(1),e.Q6J("hidden",0==(null==t.Spareparts?null:t.Spareparts.length)),e.xp6(2),e.Q6J("ngForOf",t.pages)}}let ne=(()=>{class o{constructor(t,n,i,s){this.collectService=t,this.router=n,this.route=i,this.sharedService=s,this.items=[1,2],this.pageNo=0}ngOnInit(){this.route.params.subscribe(t=>{this.detaisId=t.id,this.detaisId&&this.GetSparePartsSalesOrderSpareparts()})}GetSparePartsSalesOrderSpareparts(){return this.collectService.GetSparePartsSalesOrderSpareparts(this.detaisId,this.pageNo).subscribe(t=>{t&&(this.Spareparts=t.data,this.totaAmount=t.info.totaAmount,this.totalRecordCount=t.info?.totalRecordCount,this.pagin=Math.ceil(this.totalRecordCount/3),this.pages=v.w6(this.pagin))})}setPage(t){this.pageNo=t,this.GetSparePartsSalesOrderSpareparts()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.k),e.Y36(m.F0),e.Y36(m.gz),e.Y36(g.F))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-spare-parts"]],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"card-collect"],[1,"top-details"],[1,"table-responsive"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"col-sm-6"],[1,"total-card"],[1,"total"],[1,"col-md-6",3,"hidden"],[1,"pagination"],["class","page-item",4,"ngFor","ngForOf"],[1,"not-found"],[1,"page-item"],[1,"page-link",3,"ngClass","disabled","click"]],template:function(t,n){1&t&&e.YNc(0,te,53,6,"div",0),2&t&&e.Q6J("ngIf",0!=(null==n.Spareparts?null:n.Spareparts.length))},dependencies:[a.mk,a.sg,a.O5,a.JJ],styles:[".not-found[_ngcontent-%COMP%]{padding:5%;text-align:center}.not-found[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#c9c9d1;font-size:16px;font-weight:600}"]}),o})();function oe(o,l){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Oqu(t)}}function ie(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",5)(3,"p"),e._uU(4," Date "),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"date"),e.qZA(),e._uU(8," \xa0 Time "),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"date"),e.qZA()(),e.TgZ(12,"div",6)(13,"p"),e._uU(14,"Status : "),e.TgZ(15,"span"),e._uU(16),e.qZA()(),e.TgZ(17,"p"),e._uU(18,"Invoice No : "),e.TgZ(19,"span"),e._uU(20),e.qZA()(),e.TgZ(21,"p"),e._uU(22,"Receipt No : "),e.TgZ(23,"span"),e._uU(24),e.qZA()()()()(),e.TgZ(25,"div",7)(26,"div",8)(27,"h3"),e._uU(28," Customer Details "),e.qZA(),e.TgZ(29,"div",9)(30,"div",10),e._uU(31),e.qZA(),e.TgZ(32,"div")(33,"div",11)(34,"h4",12),e._uU(35,"ID: "),e.TgZ(36,"p",13),e._uU(37),e.qZA()()(),e.TgZ(38,"div",11)(39,"h4"),e._uU(40,"Customer Name"),e.qZA(),e.TgZ(41,"p"),e._uU(42),e.qZA()(),e.TgZ(43,"div",11)(44,"h4"),e._uU(45,"Mobile"),e.qZA(),e.TgZ(46,"p"),e._uU(47),e.qZA()()()()()(),e.TgZ(48,"div",14)(49,"div",15)(50,"h3",16),e._uU(51," Order Details "),e.qZA(),e.TgZ(52,"div",2)(53,"div",3)(54,"div",17)(55,"div",18)(56,"div",11)(57,"h4"),e._uU(58," Vehicle"),e.qZA(),e.TgZ(59,"p"),e._uU(60),e.qZA()()(),e.TgZ(61,"div",19)(62,"div",11)(63,"h4"),e._uU(64," Opportunity No"),e.qZA(),e.TgZ(65,"p"),e._uU(66),e.qZA()()(),e.TgZ(67,"div",19)(68,"div",11)(69,"h4"),e._uU(70," In-House Financing "),e._UZ(71,"br"),e._uU(72,"Card No"),e.qZA(),e.TgZ(73,"div",20),e.YNc(74,oe,2,1,"p",21),e.qZA()()(),e.TgZ(75,"div",19)(76,"div",11)(77,"h4"),e._uU(78," Sales Consultant"),e.qZA(),e.TgZ(79,"p"),e._uU(80),e.qZA()()()()()()()(),e.TgZ(81,"div",3)(82,"div",15)(83,"div",2)(84,"div",7)(85,"div",22)(86,"label"),e._uU(87," Sales note "),e.qZA(),e._UZ(88,"textarea",23),e.qZA()(),e.TgZ(89,"div",3)(90,"div",24)(91,"p"),e._uU(92," Grand Amount "),e.qZA(),e.TgZ(93,"div",25),e._uU(94),e.ALo(95,"number"),e.qZA(),e.TgZ(96,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openModalPayment())}),e._uU(97," Collect "),e.qZA()()()()()(),e.TgZ(98,"div",3)(99,"div",27)(100,"button",28),e._uU(101,"Cancel"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(6),e.hij(" ",e.xi3(7,16,null==t.details||null==t.details.order?null:t.details.order.orderDate," d MMM y ")," "),e.xp6(4),e.hij(" ",e.xi3(11,19,null==t.details||null==t.details.order?null:t.details.order.orderDate," h:mm a ")," "),e.xp6(6),e.hij("",null==t.details||null==t.details.order||null==t.details.order.status[0]?null:t.details.order.status[0].statusName," "),e.xp6(4),e.hij("",null==t.details||null==t.details.order?null:t.details.order.invoiceNo," "),e.xp6(4),e.hij("",null==t.details||null==t.details.order?null:t.details.order.collectionId," "),e.xp6(7),e.hij(" ",t.custmerName," "),e.xp6(6),e.hij(" ",null==t.details||null==t.details.customer?null:t.details.customer.customerId," "),e.xp6(5),e.hij(" ",null==t.details||null==t.details.customer?null:t.details.customer.customerName," "),e.xp6(5),e.hij(" ",null==t.details||null==t.details.customer?null:t.details.customer.mobile," "),e.xp6(13),e.hij(" ",(null==t.details||null==t.details.vin||null==t.details.vin.brand?null:t.details.vin.brand.brand)+" "+(null==t.details||null==t.details.vin||null==t.details.vin.brand?null:t.details.vin.brand.modelName),""),e.xp6(6),e.Oqu(null==t.details||null==t.details.order?null:t.details.order.banksUnderTakingSalesOrderOpportunityNo),e.xp6(8),e.Q6J("ngForOf",null==t.details||null==t.details.order?null:t.details.order.inHouceCards),e.xp6(6),e.hij(" ",null==t.details||null==t.details.salesConsultant?null:t.details.salesConsultant.salesConsultantName,""),e.xp6(8),e.Q6J("value",t.details.order.salesNote),e.xp6(6),e.hij(" ",e.xi3(95,22,t.details.order.grandAmount,"2.3-3")," JD"),e.xp6(2),e.Q6J("disabled",10001!=t.details.order.status[0].statusId&&10003!=t.details.order.status[0].statusId&&10005!=t.details.order.status[0].statusId)}}function le(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}let se=(()=>{class o{constructor(){this.houseFinancingDetailsEvent=new e.vpe}openModalPayment(){this.houseFinancingDetailsEvent.emit({openCollectionModal:this.details})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["house-financing-details"]],inputs:{details:"details",detailsType:"detailsType"},outputs:{houseFinancingDetailsEvent:"houseFinancingDetailsEvent"},decls:7,vars:2,consts:[[1,"card-page"],["class","row",4,"ngIf","ngIfElse"],[1,"row"],[1,"col-md-12"],["loading",""],[1,"top-details"],[1,"d-flex","gap-2"],[1,"col-md-4"],[1,"card-collect","customerDetail"],[1,"collect-details"],[1,"char"],[1,"card-sm"],[1,"d-flex","align-items-center"],[1,"m-0"],[1,"col-md-8"],[1,"card-collect"],[2,"margin-bottom","20px"],[1,"row","flex-wrap"],[1,"col-sm-4"],[1,"col-4"],[1,"d-flex","gap-2","flex-wrap"],[4,"ngFor","ngForOf"],[1,"form-group"],["rows","3","disabled","",1,"form-control",3,"value"],[1,"total-card","justify-content-end","pt-75"],[1,"total"],[1,"btn",3,"disabled","click"],[1,"btns-group","px-0","mx-0"],["type","button","routerLink","/collect",1,"btn","btn-cancel"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,ie,102,25,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div"),e.YNc(5,le,2,0,"ng-template",null,4,e.W1O),e.qZA()()()()),2&t){const i=e.MAs(6);e.xp6(1),e.Q6J("ngIf",n.details)("ngIfElse",i)}},dependencies:[a.sg,a.O5,m.rH,f.N,a.JJ,a.uU],styles:[".card-page[_ngcontent-%COMP%]{padding:15px}.pt-75[_ngcontent-%COMP%]{padding-top:75px}.pagination[_ngcontent-%COMP%]{margin:5px 0}.v-line[_ngcontent-%COMP%]{margin:0 0 10px;border-color:#777}.l-line[_ngcontent-%COMP%]{border-left:1px solid #ddd}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled{background:#f1f3f3!important;color:#9b9b9b!important;border:1px solid #f1f3f3;cursor:initial}.form-control[_ngcontent-%COMP%]:disabled{background-color:#f8f8f9;border:0px;opacity:1;border:0p}"]}),o})();const re=["ModalPayDoneComponent"];function ce(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"house-financing-details",2),e.NdJ("houseFinancingDetailsEvent",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.openPaymentModal(i))}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("details",t.details)("detailsType",t.detailsType)}}function ae(o,l){1&o&&(e.TgZ(0,"h3",46),e._uU(1," Vehicle Details "),e.qZA())}function _e(o,l){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.vin.brandName?t.vin.brandName:"No data"," ")}}function ue(o,l){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(null!=t.vin&&null!=t.vin.brand&&t.vin.brand.brand?null==t.vin||null==t.vin.brand?null:t.vin.brand.brand:"No data")}}function de(o,l){if(1&o&&(e.TgZ(0,"div",23)(1,"div",15)(2,"h4"),e._uU(3," Brand "),e.qZA(),e.YNc(4,_e,2,1,"p",47),e.YNc(5,ue,2,1,"ng-template",null,48,e.W1O),e.qZA()()),2&o){const t=e.MAs(6),n=e.oxw(3);e.xp6(4),e.Q6J("ngIf","service"==n.detailsType)("ngIfElse",t)}}function pe(o,l){if(1&o&&(e.TgZ(0,"div",15)(1,"h4"),e._uU(2," Vehicle Model"),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA()()),2&o){const t=e.oxw(2).$implicit;e.xp6(4),e.hij(" ",null!=t&&null!=t.vin&&t.vin.modelName?t.vin.modelName:"No data","")}}function me(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.hij(" ",t," ")}}function ge(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"h4"),e._uU(2," Cash Card No"),e.qZA(),e.TgZ(3,"p",50),e.YNc(4,me,2,1,"span",51),e.qZA(),e.BQk()),2&o){const t=e.oxw(3).$implicit;e.xp6(4),e.Q6J("ngForOf",t.order.directPaymentCards)}}function he(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.hij(" ",t," ")}}function fe(o,l){if(1&o&&(e.TgZ(0,"h4"),e._uU(1," Bank Card No"),e.qZA(),e.TgZ(2,"p",50),e.YNc(3,he,2,1,"span",51),e.qZA()),2&o){const t=e.oxw(3).$implicit;e.xp6(3),e.Q6J("ngForOf",t.order.banksUnderTakingCards)}}function ve(o,l){if(1&o&&(e.TgZ(0,"div",15),e.YNc(1,ge,5,1,"ng-container",47),e.YNc(2,fe,4,1,"ng-template",null,49,e.W1O),e.qZA()),2&o){const t=e.MAs(3),n=e.oxw(4);e.xp6(1),e.Q6J("ngIf","payment"==n.detailsType)("ngIfElse",t)}}function Ce(o,l){if(1&o&&(e.TgZ(0,"div",23),e.YNc(1,pe,5,1,"div",24),e.YNc(2,ve,4,2,"div",24),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf","service"==t.detailsType),e.xp6(1),e.Q6J("ngIf","payment"==t.detailsType||"undertaking"==t.detailsType)}}function xe(o,l){if(1&o&&(e.TgZ(0,"p",50),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Te(o,l){if(1&o&&(e.ynx(0),e.YNc(1,xe,2,1,"p",53),e.ALo(2,"slice"),e.BQk()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,1,t.order.workingCards,0,1))}}function Ze(o,l){1&o&&(e.TgZ(0,"p",50),e._uU(1," No data"),e.qZA())}function be(o,l){if(1&o&&(e.TgZ(0,"div",15)(1,"h4"),e._uU(2," Card No "),e.qZA(),e.YNc(3,Te,3,5,"ng-container",38),e.YNc(4,Ze,2,0,"p",52),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",0!=t.order.workingCards.length),e.xp6(1),e.Q6J("ngIf",0==t.order.workingCards.length)}}function ye(o,l){if(1&o&&(e.TgZ(0,"div",54)(1,"div",55)(2,"h4"),e._uU(3," Sales Channel"),e.qZA(),e.TgZ(4,"p",17),e._uU(5),e.qZA()(),e.TgZ(6,"div",55)(7,"h4"),e._uU(8,"Invoice Type"),e.qZA(),e.TgZ(9,"p",17),e._uU(10),e.qZA()(),e.TgZ(11,"div",55)(12,"h4"),e._uU(13," Sales Order No"),e.qZA(),e.TgZ(14,"p",17),e._uU(15),e.qZA()(),e.TgZ(16,"div",55)(17,"h4"),e._uU(18,"Special Order"),e.qZA(),e.TgZ(19,"p",17),e._uU(20),e.qZA()(),e.TgZ(21,"div",55)(22,"h4"),e._uU(23," Sales Consultant"),e.qZA(),e.TgZ(24,"p",17),e._uU(25),e.qZA()(),e.TgZ(26,"div",55)(27,"h4"),e._uU(28," Date"),e.qZA(),e.TgZ(29,"p",17),e._uU(30),e.ALo(31,"date"),e.qZA()()()),2&o){const t=e.oxw().$implicit;e.xp6(5),e.hij(" ",null==t||null==t.order||null==t.order.salesChannel?null:t.order.salesChannel.channelName,""),e.xp6(5),e.hij(" ",null==t||null==t.order?null:t.order.invoiceType," "),e.xp6(5),e.hij(" ",null==t||null==t.order?null:t.order.sparePartsSalesOrderOpportunityNo," "),e.xp6(5),e.hij(" ",null!=t&&null!=t.order&&t.order.isSpecialOrder?"True":"False"," "),e.xp6(5),e.hij(" ",null==t||null==t.salesConsultant?null:t.salesConsultant.salesConsultantName,""),e.xp6(5),e.hij(" ",e.xi3(31,6,null==t||null==t.order?null:t.order.orderDate,"mediumDate"),"")}}function Ae(o,l){if(1&o&&(e.TgZ(0,"div",15)(1,"h4"),e._uU(2," Opportunity No"),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(4),e.Oqu((null==t||null==t.order?null:t.order.directPaymentSalesOrderOpportunityNo)||(null==t||null==t.order?null:t.order.banksUnderTakingSalesOrderOpportunityNo))}}function Ne(o,l){1&o&&e._UZ(0,"hr",56)}function Ie(o,l){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",null==t||null==t.vin?null:t.vin.vinNo,"")}}function Oe(o,l){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",(null==t||null==t.vin||null==t.vin.brand?null:t.vin.brand.modelName)||"-","")}}function ke(o,l){if(1&o&&(e.TgZ(0,"div",23)(1,"div",15)(2,"h4"),e._uU(3),e.qZA(),e.YNc(4,Ie,2,1,"p",38),e.YNc(5,Oe,2,1,"p",38),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(3),e.hij(" ","service"==t.detailsType?"Vin No":"Model",""),e.xp6(1),e.Q6J("ngIf","service"==t.detailsType),e.xp6(1),e.Q6J("ngIf","payment"==t.detailsType||"undertaking"==t.detailsType)}}function Se(o,l){if(1&o&&(e.TgZ(0,"div",23)(1,"div",15)(2,"h4"),e._uU(3,"Plate No. "),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()()()),2&o){const t=e.oxw().$implicit;e.xp6(5),e.hij(" ",null==t||null==t.vin?null:t.vin.plateNumber,"")}}function qe(o,l){if(1&o&&(e.TgZ(0,"div",57)(1,"div",15)(2,"h4"),e._uU(3,"Cost Center"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"div",15)(7,"h4"),e._uU(8," Service Advisor"),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA()(),e.TgZ(11,"div",15)(12,"h4"),e._uU(13," Sales order No "),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.qZA()()()),2&o){const t=e.oxw().$implicit;e.xp6(5),e.hij(" ",null==t||null==t.costCenter?null:t.costCenter.costCenterName,""),e.xp6(5),e.hij(" ",null==t||null==t.serviceAdvisor?null:t.serviceAdvisor.serviceAdvisorName,""),e.xp6(5),e.hij(" ",null==t||null==t.order?null:t.order.servicesSalesOrderNo,"")}}function Ue(o,l){if(1&o&&(e.TgZ(0,"div",58)(1,"div",15)(2,"h4"),e._uU(3," Sales Consultant"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()()()),2&o){const t=e.oxw().$implicit;e.xp6(5),e.hij(" ",null==t||null==t.salesConsultant?null:t.salesConsultant.salesConsultantName,"")}}function De(o,l){if(1&o&&(e.TgZ(0,"div",19)(1,"h3",46),e._uU(2," VIN Details "),e.qZA(),e.TgZ(3,"div",5)(4,"div",59)(5,"div",54)(6,"div",55)(7,"h4"),e._uU(8," Brand"),e.qZA(),e.TgZ(9,"p",17),e._uU(10),e.qZA()(),e.TgZ(11,"div",55)(12,"h4"),e._uU(13,"Model"),e.qZA(),e.TgZ(14,"p",17),e._uU(15),e.qZA()(),e.TgZ(16,"div",55)(17,"h4"),e._uU(18," Year"),e.qZA(),e.TgZ(19,"p",17),e._uU(20),e.qZA()(),e.TgZ(21,"div",55)(22,"h4"),e._uU(23,"Plate No"),e.qZA(),e.TgZ(24,"p",17),e._uU(25),e.qZA()(),e.TgZ(26,"div",55)(27,"h4"),e._uU(28," VIN No"),e.qZA(),e.TgZ(29,"p",17),e._uU(30),e.qZA()()()()()()),2&o){const t=e.oxw().$implicit;e.xp6(10),e.hij(" ",null==t||null==t.vin?null:t.vin.brandName,""),e.xp6(5),e.hij(" ",null==t||null==t.vin?null:t.vin.modelName," "),e.xp6(5),e.hij(" ",(null==t||null==t.vin?null:t.vin.modelYear)||"-"," "),e.xp6(5),e.hij(" ",null==t||null==t.vin?null:t.vin.plateNumber," "),e.xp6(5),e.hij(" ",null==t||null==t.vin?null:t.vin.vinNo,"")}}function we(o,l){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"app-spare"),e.qZA())}function Me(o,l){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"app-labor"),e.qZA())}function Pe(o,l){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"app-sublet"),e.qZA())}function Je(o,l){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"app-spare-parts"),e.qZA())}function Fe(o,l){if(1&o&&(e.TgZ(0,"div",60)(1,"label"),e._uU(2," Remaining Amount to pay"),e.qZA(),e.TgZ(3,"div",61)(4,"p"),e._uU(5),e.ALo(6,"number"),e.qZA()(),e.TgZ(7,"span",62),e._uU(8),e.ALo(9,"number"),e.qZA(),e._UZ(10,"br"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(5),e.hij("",e.xi3(6,2,t.order.remainingAmount,"2.3-3")," JOD "),e.xp6(3),e.hij("Minimum Payment: ",e.xi3(9,5,t.order.minAmount,"2.3-3")," JOD")}}function Re(o,l){if(1&o&&(e.TgZ(0,"div",63)(1,"div",64)(2,"div",65)(3,"p",66),e._uU(4,"Sub Total"),e.qZA()(),e.TgZ(5,"div",65)(6,"p",67),e._uU(7),e.ALo(8,"number"),e.qZA()()(),e.TgZ(9,"div",64)(10,"div",65)(11,"p",66),e._uU(12,"Total Line Discount"),e.qZA()(),e.TgZ(13,"div",65)(14,"p",67),e._uU(15),e.ALo(16,"number"),e.qZA()()(),e.TgZ(17,"div",64)(18,"div",65)(19,"p",66),e._uU(20,"Invoice Discount Percentage"),e.qZA()(),e.TgZ(21,"div",65)(22,"p",67),e._uU(23),e.qZA()()(),e.TgZ(24,"div",64)(25,"div",65)(26,"p",66),e._uU(27,"Invoice Discount Amount"),e.qZA()(),e.TgZ(28,"div",65)(29,"p",67),e._uU(30),e.ALo(31,"number"),e.qZA()()(),e.TgZ(32,"div",64)(33,"div",65)(34,"p",66),e._uU(35,"Net Total"),e.qZA()(),e.TgZ(36,"div",65)(37,"p",67),e._uU(38),e.ALo(39,"number"),e.qZA()()(),e.TgZ(40,"div",64)(41,"div",65)(42,"p",66),e._uU(43,"Total Tax Amount"),e.qZA()(),e.TgZ(44,"div",65)(45,"p",67),e._uU(46),e.ALo(47,"number"),e.qZA()()(),e.TgZ(48,"div",64)(49,"div",65)(50,"p",66),e._uU(51,"Grand Amount"),e.qZA()(),e.TgZ(52,"div",65)(53,"p",67),e._uU(54),e.ALo(55,"number"),e.qZA()()()()),2&o){const t=e.oxw().$implicit;e.xp6(7),e.hij("",e.xi3(8,7,null==t||null==t.order?null:t.order.subTotal,"2.3-3")," JOD"),e.xp6(8),e.hij("",e.xi3(16,10,null==t||null==t.order?null:t.order.totalLineDiscount,"2.3-3")," JOD"),e.xp6(8),e.hij("",null==t||null==t.order?null:t.order.invoiceDiscountPercentage,"%"),e.xp6(7),e.hij("",e.xi3(31,13,null==t||null==t.order?null:t.order.invoiceDiscountAmount,"2.3-3")," JOD"),e.xp6(8),e.hij("",e.xi3(39,16,null==t||null==t.order?null:t.order.netTotal,"2.3-3")," JOD"),e.xp6(8),e.hij("",e.xi3(47,19,null==t||null==t.order?null:t.order.totalTaxAmount,"2.3-3")," JOD"),e.xp6(8),e.hij("",e.xi3(55,22,null==t||null==t.order?null:t.order.grandAmount,"2.3-3")," JOD")}}function Qe(o,l){1&o&&(e.TgZ(0,"p"),e._uU(1," Total Amount "),e.qZA())}function Ge(o,l){1&o&&(e.TgZ(0,"p"),e._uU(1," Grand Amount "),e.qZA())}function Be(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.cancelOrder())}),e._uU(1," Cancel Order "),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled",10001!=t.order.status[0].statusId&&10003!=t.order.status[0].statusId&&10005!=t.order.status[0].statusId)}}function Ye(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",69),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.cancelOrder())}),e._uU(1," Cancel Order "),e.qZA()}}function je(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",8)(3,"p"),e._uU(4," Date "),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"date"),e.qZA(),e._uU(8," \xa0 Time "),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"date"),e.qZA()(),e.TgZ(12,"div",9)(13,"p"),e._uU(14,"Status : "),e.TgZ(15,"span"),e._uU(16),e.qZA()(),e.TgZ(17,"p"),e._uU(18,"Invoice Type : "),e.TgZ(19,"span",10),e._uU(20),e.qZA()(),e.TgZ(21,"p"),e._uU(22,"Invoice No : "),e.TgZ(23,"span"),e._uU(24),e.qZA()(),e.TgZ(25,"p"),e._uU(26,"Receipt No : "),e.TgZ(27,"span"),e._uU(28),e.qZA()()()()(),e.TgZ(29,"div",11)(30,"div",12)(31,"h3"),e._uU(32," Customer Details "),e.qZA(),e.TgZ(33,"div",13)(34,"div",14),e._uU(35),e.qZA(),e.TgZ(36,"div")(37,"div",15)(38,"h4",16),e._uU(39,"ID: "),e.TgZ(40,"p",17),e._uU(41),e.qZA()()(),e.TgZ(42,"div",15)(43,"h4"),e._uU(44,"Customer Name"),e.qZA(),e.TgZ(45,"p"),e._uU(46),e.qZA()(),e.TgZ(47,"div",15)(48,"h4"),e._uU(49,"Mobile"),e.qZA(),e.TgZ(50,"p"),e._uU(51),e.qZA()()()()()(),e.TgZ(52,"div",18)(53,"div",19),e.YNc(54,ae,2,0,"h3",20),e.TgZ(55,"div",5)(56,"div",21)(57,"div",5),e.YNc(58,de,7,2,"div",22),e.YNc(59,Ce,3,2,"div",22),e.TgZ(60,"div",23),e.YNc(61,be,5,2,"div",24),e.YNc(62,ye,32,9,"div",25),e.YNc(63,Ae,5,1,"div",26),e.qZA()(),e.YNc(64,Ne,1,0,"hr",27),e.TgZ(65,"div",5),e.YNc(66,ke,6,3,"div",22),e.YNc(67,Se,6,1,"div",22),e.qZA()(),e.YNc(68,qe,16,3,"div",28),e.YNc(69,Ue,6,1,"div",29),e.qZA()(),e.YNc(70,De,31,5,"div",30),e.qZA(),e.YNc(71,we,2,0,"div",31),e.YNc(72,Me,2,0,"div",31),e.YNc(73,Pe,2,0,"div",31),e.YNc(74,Je,2,0,"div",31),e.TgZ(75,"div",6)(76,"div",19)(77,"div",5)(78,"div",11),e.YNc(79,Fe,11,8,"div",32),e.TgZ(80,"div",33)(81,"label"),e._uU(82," Sales note "),e.qZA(),e._UZ(83,"textarea",34),e.qZA(),e.TgZ(84,"div",35)(85,"label"),e._uU(86," Cashier notes "),e.qZA(),e._UZ(87,"textarea",34),e.qZA()(),e.YNc(88,Re,56,25,"div",36),e.TgZ(89,"div",6)(90,"div",37),e.YNc(91,Qe,2,0,"p",38),e.YNc(92,Ge,2,0,"p",38),e.TgZ(93,"div",39),e._uU(94),e.ALo(95,"number"),e.qZA(),e.TgZ(96,"button",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.openModalPayment())}),e._uU(97," Collect "),e.qZA()()(),e._UZ(98,"div",41),e.qZA()()(),e.TgZ(99,"div",6)(100,"div",42)(101,"button",43),e._uU(102,"Cancel"),e.qZA(),e.YNc(103,Be,2,1,"button",44),e.YNc(104,Ye,2,0,"button",45),e.qZA()()()}if(2&o){const t=l.$implicit,n=e.oxw(2);e.xp6(6),e.hij(" ",e.xi3(7,40,null==t||null==t.order?null:t.order.orderDate," d MMM y ")," "),e.xp6(4),e.hij(" ",e.xi3(11,43,null==t||null==t.order?null:t.order.orderDate," h:mm a ")," "),e.xp6(6),e.hij("",null==t||null==t.order||null==t.order.status[0]?null:t.order.status[0].statusName," "),e.xp6(4),e.hij("",null==t?null:t.invoiceType," "),e.xp6(4),e.hij("",null==t||null==t.order?null:t.order.invoiceNo," "),e.xp6(4),e.hij("",null==t||null==t.order?null:t.order.collectionId," "),e.xp6(7),e.hij(" ",n.custmerName," "),e.xp6(6),e.hij(" ",null==t||null==t.customer?null:t.customer.customerId," "),e.xp6(5),e.hij(" ",null==t||null==t.customer?null:t.customer.customerName," "),e.xp6(5),e.hij(" ",null==t||null==t.customer?null:t.customer.mobile," "),e.xp6(3),e.Q6J("ngIf","spare"!==n.detailsType),e.xp6(2),e.ekj("col-md-12","spare"==n.detailsType),e.xp6(2),e.Q6J("ngIf","spare"!==n.detailsType),e.xp6(1),e.Q6J("ngIf","spare"!==n.detailsType),e.xp6(1),e.ekj("col-sm-12","spare"==n.detailsType),e.xp6(1),e.Q6J("ngIf","service"==n.detailsType),e.xp6(1),e.Q6J("ngIf","spare"==n.detailsType),e.xp6(1),e.Q6J("ngIf","payment"==n.detailsType||"undertaking"==n.detailsType),e.xp6(1),e.Q6J("ngIf","spare"!==n.detailsType),e.xp6(2),e.Q6J("ngIf","spare"!==n.detailsType),e.xp6(1),e.Q6J("ngIf","service"==n.detailsType),e.xp6(1),e.Q6J("ngIf","service"==n.detailsType),e.xp6(1),e.Q6J("ngIf","payment"==n.detailsType||"undertaking"==n.detailsType),e.xp6(1),e.Q6J("ngIf","spare"==n.detailsType),e.xp6(1),e.Q6J("ngIf","service"==n.detailsType),e.xp6(1),e.Q6J("ngIf","service"==n.detailsType),e.xp6(1),e.Q6J("ngIf","service"==n.detailsType),e.xp6(1),e.Q6J("ngIf","spare"==n.detailsType),e.xp6(5),e.Q6J("ngIf","payment"==n.detailsType),e.xp6(4),e.Q6J("value",t.order.salesNote),e.xp6(4),e.Q6J("value",t.cashierNotes),e.xp6(1),e.Q6J("ngIf","spare"==n.detailsType),e.xp6(3),e.Q6J("ngIf","spare"==n.detailsType),e.xp6(1),e.Q6J("ngIf","payment"==n.detailsType||"service"==n.detailsType||"undertaking"==n.detailsType),e.xp6(2),e.hij(" ",e.xi3(95,46,t.order.grandAmount,"2.3-3")," JOD"),e.xp6(2),e.Q6J("disabled",10001!=t.order.status[0].statusId&&10003!=t.order.status[0].statusId&&10005!=t.order.status[0].statusId),e.xp6(7),e.Q6J("ngIf","service"==n.detailsType||"spare"==n.detailsType),e.xp6(1),e.Q6J("ngIf","payment"==n.detailsType&&10001==t.order.status[0].statusId)}}function Ee(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function Le(o,l){if(1&o&&(e.TgZ(0,"div",3),e.YNc(1,je,105,49,"div",4),e.TgZ(2,"div",5)(3,"div",6)(4,"div"),e.YNc(5,Ee,2,0,"ng-template",null,7,e.W1O),e.qZA()()()()),2&o){const t=e.MAs(6),n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.details)("ngIfElse",t)}}let Ve=(()=>{class o{constructor(t,n,i,s,r,_){this.collectService=t,this.router=n,this.route=i,this.sharedService=s,this.modalService=r,this._subjectService=_,this.items=[1,2]}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.route.params.subscribe(t=>{this.detailsId=t.id,this.detailsType=t.type,this.getDetails()}),this.subscription=this._subjectService.isCollectionPaymentDone.subscribe(t=>{t&&this.getDetails()})}getDetails(){this.detailsId&&"service"==this.detailsType?(this.GetServicesSalesOrderDetails(),this.colType=7001):this.detailsId&&"payment"==this.detailsType?(this.GetDirectPaymentSalesOrdersDetails(),this.colType=7002):this.detailsId&&"spare"==this.detailsType?(this.GetSparePartsSalesOrdersDetails(),this.colType=7003):this.detailsId&&"undertaking"==this.detailsType?(this.getBanksUnderTakingSalesOrdersDetails(),this.colType=7006):this.detailsId&&"housefinancing"==this.detailsType&&(this.getInHouseFinancingSalesOrdersDetails(),this.colType=7007)}openPaymentModal(t){t?.openCollectionModal&&this.openModalPayment()}getInHouseFinancingSalesOrdersDetails(){this.collectService.getInHouseFinancingSalesOrdersDetails(this.detailsId).subscribe(t=>{if(t){this.details=t.data,console.log(this.details);const n=this.details.customer.customerName.split(" ");let s=n[1];this.custmerName=`${n[0]?.charAt(0)} ${s?s?.charAt(0):""}`}})}GetServicesSalesOrderDetails(){return this.collectService.GetServicesSalesOrderDetails(this.detailsId).subscribe(t=>{if(t){this.details=t.data,console.log(this.details);const n=this.details.customer.customerName.split(" ");let s=n[1];this.custmerName=`${n[0]?.charAt(0)} ${s?s?.charAt(0):""}`}})}GetDirectPaymentSalesOrdersDetails(){return this.collectService.GetDirectPaymentSalesOrdersDetails(this.detailsId).subscribe(t=>{if(t){this.details=t.data,console.log(this.details);const n=this.details?.customer.customerName.split(" ");let s=n[1];this.custmerName=`${n[0]?.charAt(0)} ${s?s?.charAt(0):""}`}})}GetSparePartsSalesOrdersDetails(){return this.collectService.GetSparePartsSalesOrdersDetails(this.detailsId).subscribe(t=>{if(t){this.details=t.data,this.details={...this.details,invoiceType:this.details?.order?.invoiceType,sparePartsSalesOrderOpportunityNo:this.details?.order?.sparePartsSalesOrderOpportunityNo,grandAmount:this.details?.order?.grandAmount},console.log(this.details);const n=this.details?.customer.customerName.split(" ");let s=n[1];this.custmerName=`${n[0]?.charAt(0)} ${s?s?.charAt(0):""}`}})}getBanksUnderTakingSalesOrdersDetails(){this.collectService.getBanksUnderTakingSalesOrdersDetails(this.detailsId).subscribe(t=>{if(t){this.details=t.data,console.log(this.details);const n=this.details?.customer.customerName.split(" ");let s=n[1];this.custmerName=`${n[0]?.charAt(0)} ${s?s?.charAt(0):""}`}})}openModalPayment(){const t=this.modalService.open(y.k,{modalDialogClass:"payment-modal-size"});t.componentInstance.sendtoLoadData.subscribe(n=>{(7001==this.colType||7002==this.colType||7003==this.colType)&&(7001==this.colType?this._subjectService.collectedOrder.next({orderId:this.details?.order?.servicesSalesOrderNo}):7002==this.colType?this._subjectService.collectedOrder.next({orderId:this.details?.order?.directPaymentSalesOrderOpportunityNo}):7003==this.colType&&this._subjectService.collectedOrder.next({orderId:this.details?.order?.sparePartsSalesOrderOpportunityNo}))}),7002==this.colType&&(this.details={...this.details,minAmount:this.details?.order?.minAmount}),t.componentInstance.detailsItem=this.details,t.componentInstance.collectionType=this.colType}NeedModify(){const t=this.modalService.open(D);t.componentInstance.SalesOrderId=this.detailsId,t.componentInstance.OrderType=this.details.orderTypeId,t.componentInstance.action="modify",this.detailsId&&"service"==this.detailsType?t.componentInstance.userType="service advisor":(this.detailsId&&"payment"==this.detailsType||this.detailsId&&"spare"==this.detailsType)&&(t.componentInstance.userType="Sales Consultant")}cancelOrder(){const t=this.modalService.open(D);t.componentInstance.SalesOrderId=this.detailsId,t.componentInstance.OrderType=this.details.orderTypeId,t.componentInstance.action="cancel"}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.k),e.Y36(m.F0),e.Y36(m.gz),e.Y36(g.F),e.Y36(d.FF),e.Y36(k._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-collect-details"]],viewQuery:function(t,n){if(1&t&&e.Gf(re,5),2&t){let i;e.iGM(i=e.CRH())&&(n.ModalPayDoneComponent=i.first)}},decls:3,vars:2,consts:[["otherDetailsBlock",""],["class","card-page",4,"ngIf","ngIfElse"],[3,"details","detailsType","houseFinancingDetailsEvent"],[1,"card-page"],["class","row",4,"ngIf","ngIfElse"],[1,"row"],[1,"col-md-12"],["loading",""],[1,"top-details"],[1,"d-flex","gap-2"],[1,"text-capitalize"],[1,"col-md-4"],[1,"card-collect","customerDetail"],[1,"collect-details"],[1,"char"],[1,"card-sm"],[1,"d-flex","align-items-center"],[1,"m-0"],[1,"col-md-8"],[1,"card-collect"],["style","margin-bottom: 20px;",4,"ngIf"],[1,"col-md-9"],["class","col-sm-4",4,"ngIf"],[1,"col-sm-4"],["class","card-sm",4,"ngIf"],["class","d-flex gap-5 flex-wrap",4,"ngIf"],["class","card-sm ",4,"ngIf"],["class","v-line",4,"ngIf"],["class","col-sm-3 l-line",4,"ngIf"],["class","col-sm-3",4,"ngIf"],["class","card-collect",4,"ngIf"],["class","col-md-12",4,"ngIf"],["class","form-group mb-2",4,"ngIf"],[1,"form-group"],["rows","3","disabled","",1,"form-control",3,"value"],[1,"form-group","mt-3"],["class","offset-md-4 col-md-4",4,"ngIf"],[1,"total-card","justify-content-end","pt-75"],[4,"ngIf"],[1,"total"],[1,"btn",3,"disabled","click"],[1,"col-md-6"],[1,"btns-group","px-0","mx-0"],["type","button","routerLink","/collect",1,"btn","btn-cancel"],["type","button","class","btn btn-save",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-save",3,"click",4,"ngIf"],[2,"margin-bottom","20px"],[4,"ngIf","ngIfElse"],["payment",""],["bankUnderTakingCards",""],[1,"mb-1"],[4,"ngFor","ngForOf"],["class","mb-1",4,"ngIf"],["class","mb-1",4,"ngFor","ngForOf"],[1,"d-flex","gap-5","flex-wrap"],[1,"card-sm","mb-0"],[1,"v-line"],[1,"col-sm-3","l-line"],[1,"col-sm-3"],[1,"col-sm-12"],[1,"form-group","mb-2"],[1,"disabled-box","mb-2"],[1,"font-13"],[1,"offset-md-4","col-md-4"],[1,"row","align-items-center"],[1,"col-6"],[1,"fw-500"],[1,"fw-500","light-gray"],["type","button",1,"btn","btn-save",3,"disabled","click"],["type","button",1,"btn","btn-save",3,"click"]],template:function(t,n){if(1&t&&(e.YNc(0,ce,2,2,"ng-template",null,0,e.W1O),e.YNc(2,Le,7,2,"div",1)),2&t){const i=e.MAs(1);e.xp6(2),e.Q6J("ngIf",7007!=n.colType)("ngIfElse",i)}},dependencies:[a.sg,a.O5,m.rH,f.N,H.A,$._,K.r,ne,se,a.OU,a.JJ,a.uU],styles:[".card-page[_ngcontent-%COMP%]{padding:15px}.pt-75[_ngcontent-%COMP%]{padding-top:75px}.pagination[_ngcontent-%COMP%]{margin:5px 0}.v-line[_ngcontent-%COMP%]{margin:0 0 10px;border-color:#777}.l-line[_ngcontent-%COMP%]{border-left:1px solid #ddd}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled{background:#f1f3f3!important;color:#9b9b9b!important;border:1px solid #f1f3f3;cursor:initial}.form-control[_ngcontent-%COMP%]:disabled{background-color:#f8f8f9;border:0px;opacity:1;border:0p}"]}),o})();var C=u(86260),w=u(77579),M=u(82722),He=u(70262),P=u(39646),$e=u(4128),S=u(29975),A=u(72402),N=u(94349),Ke=u(67711);function ze(o,l){1&o&&(e.TgZ(0,"div",35),e._uU(1," At least one field is required. "),e.qZA())}const We=function(){return{containerClass:"theme-default",isAnimated:!0}},J=function(){return{required:"Input is required"}};let Xe=(()=>{class o{constructor(t,n,i,s,r){this._datePipe=t,this._activeModal=n,this._httpService=i,this._modalService=s,this.fb=r,this.destroy$=new w.x,this.eventData=new e.vpe,this.hardCopyLocationList=[],this.isFormChanged=!1}ngOnInit(){this.initForm(),this.getLookups()}initForm(){this.followUpForm=this.fb.group({followUPNoteText:[""],promiseDate:[""],legalActionInitiated:[!1],receivedByCustomer:[!1],hardCopyLocationID:[this.details?.pnHardCopyAddressID?.lookupID]},{validators:this.atLeastOneRequired()}),this.followUpForm.valueChanges.pipe((0,M.R)(this.destroy$)).subscribe(t=>{this.isFormChanged=!0}),this.followUpForm.get("promiseDate").valueChanges.pipe((0,M.R)(this.destroy$)).subscribe(t=>{const n=this._httpService._helperService.formatDateToISO(t);this.followUpForm.get("promiseDate").setValue(new Date(n),{emitEvent:!1})})}atLeastOneRequired(){return t=>{const n=t.get("followUPNoteText")?.value,i=t.get("promiseDate")?.value,s=t.get("hardCopyLocationID")?.value,r=t.get("receivedByCustomer")?.value,_=t.get("legalActionInitiated")?.value;return r||_||s||n||i?null:{atLeastOneRequired:!0}}}getLookups(){this._httpService._spinnerService.show();const t=this._httpService.get(`${this._httpService.apiUrl.Lookup.GetLookups}?lookupTypeId=81&pageSize=1000&active=1001`,"master").pipe((0,He.K)(n=>(0,P.of)(n)));(0,$e.D)([t]).subscribe(n=>{this.hardCopyLocationList=n[0].data}).add(()=>this._httpService._spinnerService.hide())}saveFollowUp(){let t=this.followUpForm.value,n={noteId:this.details?.pnBookNoteId,followUPNoteText:t?.followUPNoteText,...t?.promiseDate&&{promiseDate:t?.promiseDate},legalActionInitiated:t?.legalActionInitiated,receivedByCustomer:t?.receivedByCustomer,hardCopyLocationID:t?.hardCopyLocationID};this.followUpForm.invalid?this.followUpForm.markAllAsTouched():(this._httpService._spinnerService.show(),this._httpService.post(`${this._httpService.apiUrl.PNsFollowUpControler.AddPNNoteFollowUp}`,[n],"cm").subscribe({next:i=>{i.isSuccess&&(this.eventData.emit(!0),this._activeModal.close(),this.responseModal("success","Follow up added successfully!"))},error:i=>{this.responseModal("error",i?.error?.errors)}}).add(()=>{this._httpService._spinnerService.hide()}))}responseModal(t,n){const i=this._modalService.open(C.i);i.componentInstance.type=t,"success"==t?i.componentInstance.message=n:i.componentInstance.messageError=n}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.uU),e.Y36(d.Kz),e.Y36(S.O),e.Y36(d.FF),e.Y36(c.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-follow-up"]],inputs:{details:"details"},outputs:{eventData:"eventData"},features:[e._Bn([a.uU])],decls:86,vars:25,consts:[["ngbAutoFocus","",1,"modal-header"],[1,"fw-700","m-0"],[1,"modal-body"],[1,"d-flex","mt-3","flex-wrap","gap-5","justify-content-between"],[1,"d-flex","flex-column"],[1,"dark-gray","fw-600"],[1,"light-gray"],[3,"formGroup"],[1,"row","mt-4"],[1,"col-6"],[1,"fw-600"],[1,"disabled-box"],[1,"input-group"],["type","text","placeholder","Promise Date","formControlName","promiseDate","bsDatepicker","",1,"form-control",3,"bsConfig"],["drp","bsDatepicker"],[1,"input-group-text",3,"click"],["src","/assets/images/calendar.svg"],[3,"control","errorMessages"],[1,"d-flex","flex-column","mt-2"],[1,"form-check"],["type","checkbox","id","rbc","formControlName","receivedByCustomer",1,"form-check-input"],["for","rbc"],[1,"form-check","mt-2"],["type","checkbox","id","li","formControlName","legalActionInitiated",1,"form-check-input"],["for","li"],[1,"col-6","mt-3"],["placeholder","Hard Copy Location","bindLabel","lookupName","bindValue","lookupID","formControlName","hardCopyLocationID",3,"items"],[1,"col-12","mt-3"],[1,"fw-600","mb-2"],["maxlength","150","formControlName","followUPNoteText","rows","5",1,"form-control"],["class","validation-error mt-2",4,"ngIf"],[1,"modal-footer","border-top-0"],[1,"d-flex","justify-content-end","gap-2","btns-group"],["type","button",1,"btn","btn-cancel",3,"click"],["type","button",1,"btn","btn-save",3,"click"],[1,"validation-error","mt-2"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"h6",1),e._uU(2,"Add Follow-up"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"h6",5),e._uU(7,"Book No."),e.qZA(),e.TgZ(8,"p",6),e._uU(9),e.qZA()(),e.TgZ(10,"div",4)(11,"h6",5),e._uU(12,"Book Serial"),e.qZA(),e.TgZ(13,"p",6),e._uU(14),e.qZA()(),e.TgZ(15,"div",4)(16,"h6",5),e._uU(17,"PN No."),e.qZA(),e.TgZ(18,"p",6),e._uU(19),e.qZA()(),e.TgZ(20,"div",4)(21,"h6",5),e._uU(22,"Book Note Serial"),e.qZA(),e.TgZ(23,"p",6),e._uU(24),e.qZA()(),e.TgZ(25,"div",4)(26,"h6",5),e._uU(27,"Due Date"),e.qZA(),e.TgZ(28,"p",6),e._uU(29),e.ALo(30,"date"),e.qZA()(),e.TgZ(31,"div",4)(32,"h6",5),e._uU(33,"PN Amount"),e.qZA(),e.TgZ(34,"p",6),e._uU(35),e.ALo(36,"number"),e.qZA()()(),e.TgZ(37,"form",7)(38,"div",8)(39,"div",9)(40,"label",10),e._uU(41,"Customer Name"),e.qZA(),e.TgZ(42,"div",11)(43,"p"),e._uU(44),e.qZA()()(),e.TgZ(45,"div",9)(46,"label",10),e._uU(47,"Phone"),e.qZA(),e.TgZ(48,"div",11)(49,"p"),e._uU(50),e.qZA()()(),e.TgZ(51,"div",9)(52,"label",10),e._uU(53,"Promise Date"),e.qZA(),e.TgZ(54,"div",12),e._UZ(55,"input",13,14),e.TgZ(57,"span",15),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(56);return e.KtG(r.toggle())}),e._UZ(58,"img",16),e.qZA()(),e._UZ(59,"validation-error",17),e.qZA(),e.TgZ(60,"div",9)(61,"div",18)(62,"div",19),e._UZ(63,"input",20),e.TgZ(64,"label",21),e._uU(65,"Received By Customer"),e.qZA()(),e.TgZ(66,"div",22),e._UZ(67,"input",23),e.TgZ(68,"label",24),e._uU(69,"Legal Action Initiated"),e.qZA()()()(),e.TgZ(70,"div",25)(71,"label",10),e._uU(72,"Hard Copy Location"),e.qZA(),e._UZ(73,"ng-select",26)(74,"validation-error",17),e.qZA(),e.TgZ(75,"div",27)(76,"label",28),e._uU(77,"Note"),e.qZA(),e._UZ(78,"textarea",29),e.qZA(),e.YNc(79,ze,2,0,"div",30),e.qZA()()(),e.TgZ(80,"div",31)(81,"div",32)(82,"button",33),e.NdJ("click",function(){return n._activeModal.close()}),e._uU(83,"Close"),e.qZA(),e.TgZ(84,"button",34),e.NdJ("click",function(){return n.saveFollowUp()}),e._uU(85,"Add"),e.qZA()()()}2&t&&(e.xp6(9),e.Oqu(null==n.details?null:n.details.pnBookId),e.xp6(5),e.Oqu(null==n.details?null:n.details.pnBookSerial),e.xp6(5),e.Oqu(null==n.details?null:n.details.pnBookNoteId),e.xp6(5),e.Oqu(null==n.details?null:n.details.pnNoteSerial),e.xp6(5),e.Oqu(e.xi3(30,16,null==n.details?null:n.details.dueDate,"mediumDate")),e.xp6(6),e.hij("",e.xi3(36,19,null==n.details?null:n.details.amount,"2.3-3")," JOD"),e.xp6(2),e.Q6J("formGroup",n.followUpForm),e.xp6(7),e.Oqu(null==n.details?null:n.details.customerName),e.xp6(6),e.Oqu(null==n.details?null:n.details.phone),e.xp6(5),e.Q6J("bsConfig",e.DdM(22,We)),e.xp6(4),e.Q6J("control",n.followUpForm.get("promiseDate"))("errorMessages",e.DdM(23,J)),e.xp6(14),e.Q6J("items",n.hardCopyLocationList),e.xp6(1),e.Q6J("control",n.followUpForm.get("hardCopyLocationID"))("errorMessages",e.DdM(24,J)),e.xp6(5),e.Q6J("ngIf",(null==n.followUpForm.errors?null:n.followUpForm.errors.atLeastOneRequired)&&n.followUpForm.touched||!n.isFormChanged))},dependencies:[a.O5,A.Np,A.Y5,c._Y,c.Fj,c.Wl,c.JJ,c.JL,c.nD,c.sg,c.u,N.w9,Ke.L,a.JJ,a.uU]}),o})();function et(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"input",13),e.NdJ("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.handleCheckBoxChange())})("ngModelChange",function(i){const r=e.CHM(t).$implicit;return e.KtG(r.checked=i)}),e.qZA()(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"date"),e.qZA()()}if(2&o){const t=l.$implicit;e.xp6(2),e.Q6J("ngModel",t.checked),e.xp6(2),e.Oqu(null==t?null:t.pnBookSerial),e.xp6(2),e.Oqu(null==t?null:t.pnBookId),e.xp6(2),e.Oqu(null==t?null:t.pnNoteSerial),e.xp6(2),e.Oqu(e.xi3(11,6,null==t?null:t.dueDate,"mediumDate")),e.xp6(3),e.Oqu(e.xi3(14,9,null==t?null:t.promiseDate,"mediumDate")||"-")}}let tt=(()=>{class o{constructor(t,n,i,s){this._datePipe=t,this._activeModal=n,this._collectService=i,this._modalService=s,this.eventData=new e.vpe,this.notesList=[],this.checkedItems=[]}ngOnInit(){console.log(this.details),this.notesList=this.details?.selectedItems.map(t=>({...t,checked:!1}))}handleCheckBoxChange(){this.checkedItems=this.notesList.filter(t=>t.checked)}submit(){let t;t=this.notesList.filter(n=>n.checked).map(n=>({pnBookNoteId:n?.pnBookNoteId,receivedByCustomer:!0})),0!=t.length?this._collectService.receivePNByCustomer(t).subscribe(n=>{n.isSuccess&&this.eventData.emit(!0)},n=>{this.responseModal("error",n?.error?.errors)}):this.responseModal("error",[{ErrorMessageEn:"Please select pns"}])}responseModal(t,n){const i=this._modalService.open(C.i);i.componentInstance.dismissOnlyActive=!0,i.componentInstance.type=t,"success"==t?i.componentInstance.message=n:i.componentInstance.messageError=n}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.uU),e.Y36(d.Kz),e.Y36(h.k),e.Y36(d.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-pn-receiving"]],inputs:{details:"details"},outputs:{eventData:"eventData"},decls:29,vars:1,consts:[[1,"fw-700","mt-3","mb-2","px-2"],[1,"col-md-12","px-2"],[1,"card-table","mt-0"],[1,"row"],[1,"col-md-12"],[1,"table-responsive"],[1,"table"],[1,"py-2"],[4,"ngFor","ngForOf"],[1,"modal-footer","border-top-0"],[1,"d-flex","justify-content-end","gap-2","btns-group"],["type","button",1,"btn","btn-cancel",3,"click"],["type","button",1,"btn","btn-save",3,"click"],["type","checkbox",1,"form-check-input","input-checkbox",3,"ngModel","change","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"h6",0),e._uU(1,"PNs Received By Customer"),e.qZA(),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"table",6)(8,"thead")(9,"tr",7),e._UZ(10,"th"),e.TgZ(11,"th"),e._uU(12,"PN Book Serial"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"PN Book No"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"PN Note Serial"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Due Date"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Promised Date"),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,et,15,12,"tr",8),e.qZA()()()()()(),e.TgZ(23,"div",9)(24,"div",10)(25,"button",11),e.NdJ("click",function(){return n._activeModal.close()}),e._uU(26,"Close"),e.qZA(),e.TgZ(27,"button",12),e.NdJ("click",function(){return n.submit()}),e._uU(28,"Confirm"),e.qZA()()()()),2&t&&(e.xp6(22),e.Q6J("ngForOf",n.notesList))},dependencies:[a.sg,c.Wl,c.JJ,c.On,a.uU],styles:[".form-check-input[_ngcontent-%COMP%]{width:20px!important;height:20px;margin:0;padding:0}"]}),o})();var x=u(59442),q=u(55134);function nt(o,l){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"span"),e.ALo(9,"date"),e._uU(10),e.ALo(11,"date"),e.qZA()(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"number"),e.qZA()()),2&o){const t=l.$implicit,n=e.oxw(5);e.xp6(2),e.Oqu(null==t?null:t.pnBookSerial),e.xp6(2),e.Oqu(null==t?null:t.pnBookID),e.xp6(2),e.Oqu(null==t?null:t.pnSerial),e.xp6(2),e.Tol("highlightPnOrderBg "+n.highlightDate(e.xi3(9,8,null==t?null:t.dueDate,"mediumDate"))),e.xp6(2),e.hij(" ",e.xi3(11,11,null==t?null:t.dueDate,"mediumDate")," "),e.xp6(3),e.hij("",e.xi3(14,14,null==t?null:t.pnAmount,"2.3-3")," JOD"),e.xp6(3),e.hij("",e.xi3(17,17,null==t?null:t.remainingPNAmount,"2.3-3")," JOD")}}function ot(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function it(o,l){if(1&o&&(e.TgZ(0,"div",37)(1,"div",42)(2,"table",43)(3,"thead")(4,"tr",44)(5,"th"),e._uU(6,"PN Book Serial"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"PN Book No"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"PN Note Serial"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Due Date"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Amount"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Remaining Amount"),e.qZA()()(),e.TgZ(17,"tbody"),e.YNc(18,nt,18,20,"tr",45),e.qZA()()(),e.YNc(19,ot,2,0,"div",27),e.qZA()),2&o){const t=e.oxw(4);e.xp6(18),e.Q6J("ngForOf",t.earlySettlemenNotesList),e.xp6(1),e.Q6J("ngIf",0==(null==t.earlySettlemenNotesList?null:t.earlySettlemenNotesList.length))}}function lt(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function st(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",39)(2,"div",46)(3,"h6",47),e._uU(4," Showing "),e.TgZ(5,"span"),e._uU(6),e.qZA(),e._uU(7," from "),e.TgZ(8,"span"),e._uU(9),e.qZA(),e._uU(10," data "),e.qZA()(),e.TgZ(11,"div",46)(12,"ngb-pagination",48),e.NdJ("pageChange",function(i){e.CHM(t);const s=e.oxw(4);return e.KtG(s.earlySettlePageNo=i)})("pageChange",function(i){e.CHM(t);const s=e.oxw(4);return e.KtG(s.earlySettlePageChange(i))}),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw(4);e.xp6(6),e.AsE("",6*t.earlySettlePageNo-5," - ",6==(null==t.earlySettlemenNotesList?null:t.earlySettlemenNotesList.length)?6*t.earlySettlePageNo:t.earlySettleTotalRecordCount,""),e.xp6(3),e.hij(" ",t.earlySettleTotalRecordCount," "),e.xp6(3),e.Q6J("collectionSize",t.earlySettleTotalRecordCount)("page",t.earlySettlePageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}function rt(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"h6",36),e._uU(2,"Promissory Notes List Partial"),e.qZA(),e.TgZ(3,"div",37)(4,"div",38)(5,"div",39),e.YNc(6,it,20,2,"div",40),e.TgZ(7,"div",37),e.YNc(8,lt,2,0,"ng-template",null,41,e.W1O),e.qZA()()()(),e.YNc(10,st,13,9,"ng-container",27),e.BQk()),2&o){const t=e.MAs(9),n=e.oxw(3);e.xp6(6),e.Q6J("ngIf",n.earlySettlemenNotesList)("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",n.earlySettleTotalRecordCount>6)}}function ct(o,l){if(1&o&&(e.ynx(0),e.YNc(1,rt,11,3,"ng-container",27),e.TgZ(2,"div",33)(3,"div",13)(4,"h6",34),e._uU(5,"Discount Amount"),e.qZA(),e.TgZ(6,"p",15),e._uU(7),e.ALo(8,"number"),e.qZA()(),e.TgZ(9,"div",13)(10,"h6",34),e._uU(11,"Amount to Pay*"),e.qZA(),e.TgZ(12,"p",35),e._uU(13),e.ALo(14,"number"),e.qZA()()(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",24004==(null==t.earlySettlementRequest||null==t.earlySettlementRequest.typeObj?null:t.earlySettlementRequest.typeObj.lookupId)),e.xp6(6),e.hij("",e.xi3(8,3,null==t.earlySettlementRequest?null:t.earlySettlementRequest.discountAmount,"2.3-3")," JOD"),e.xp6(6),e.hij("",e.xi3(14,6,null==t.earlySettlementRequest?null:t.earlySettlementRequest.totalEarlySettlementAmount,"2.3-3")," JOD")}}function at(o,l){1&o&&(e.TgZ(0,"p",49),e._uU(1,"No early settlement for this order."),e.qZA())}function _t(o,l){if(1&o&&(e.ynx(0),e.YNc(1,ct,15,9,"ng-container",31),e.YNc(2,at,2,0,"ng-template",null,32,e.W1O),e.BQk()),2&o){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==n.earlySettlementRequest?null:n.earlySettlementRequest.earlySetlementRequestId)>0)("ngIfElse",t)}}function ut(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"input",59),e.NdJ("change",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.handleCheckBoxChange())})("ngModelChange",function(i){const r=e.CHM(t).$implicit;return e.KtG(r.checked=i)}),e.qZA()(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"span"),e.ALo(11,"date"),e._uU(12),e.ALo(13,"date"),e.qZA()(),e.TgZ(14,"td"),e._uU(15),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.ALo(22,"number"),e.qZA(),e.TgZ(23,"td")(24,"i",60),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.addFollowUp(s))}),e.qZA()()()}if(2&o){const t=l.$implicit,n=l.index,i=e.oxw(3);e.xp6(2),e.Q6J("ngModel",t.checked)("id",n),e.xp6(2),e.Oqu(null==t?null:t.pnBookSerial),e.xp6(2),e.Oqu(null==t?null:t.pnBookId),e.xp6(2),e.Oqu(null==t?null:t.pnNoteSerial),e.xp6(2),e.Tol("highlightPnOrderBg "+i.highlightDate(e.xi3(11,11,null==t?null:t.dueDate,"mediumDate"))),e.xp6(2),e.hij(" ",e.xi3(13,14,null==t?null:t.dueDate,"mediumDate")," "),e.xp6(3),e.Oqu(e.xi3(16,17,null==t?null:t.promiseDate,"mediumDate")||"-"),e.xp6(3),e.hij("",e.xi3(19,20,null==t?null:t.amount,"2.3-3")," JOD"),e.xp6(3),e.hij("",e.xi3(22,23,null==t?null:t.remainingAmount,"2.3-3")," JOD")}}function dt(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function pt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",37)(1,"div",42)(2,"table",43)(3,"thead")(4,"tr",44)(5,"th")(6,"input",57),e.NdJ("change",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.checkAll(i))})("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.selectAll=i)}),e.qZA(),e.TgZ(7,"label",58),e._uU(8,"Select"),e.qZA()(),e.TgZ(9,"th"),e._uU(10,"PN Book Serial"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"PN Book No"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"PN Note Serial"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Due Date"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Promised Date"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Amount"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Remaining Amount"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Action"),e.qZA()()(),e.TgZ(25,"tbody"),e.YNc(26,ut,25,26,"tr",45),e.qZA()()(),e.YNc(27,dt,2,0,"div",27),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(6),e.Q6J("disabled",0==(null==t.notesList?null:t.notesList.length))("ngModel",t.selectAll),e.xp6(20),e.Q6J("ngForOf",t.notesList),e.xp6(1),e.Q6J("ngIf",0==(null==t.notesList?null:t.notesList.length))}}function mt(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function gt(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",39)(2,"div",46)(3,"h6",47),e._uU(4," Showing "),e.TgZ(5,"span"),e._uU(6),e.qZA(),e._uU(7," from "),e.TgZ(8,"span"),e._uU(9),e.qZA(),e._uU(10," data "),e.qZA()(),e.TgZ(11,"div",46)(12,"ngb-pagination",48),e.NdJ("pageChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.pageNo=i)})("pageChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.pageChange(i))}),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(6),e.AsE("",6*t.pageNo-5," - ",6==(null==t.notesList?null:t.notesList.length)?6*t.pageNo:t.totalRecordCount,""),e.xp6(3),e.hij(" ",t.totalRecordCount," "),e.xp6(3),e.Q6J("collectionSize",t.totalRecordCount)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}function ht(o,l){1&o&&(e.TgZ(0,"span",62),e._uU(1,"Input is required"),e.qZA())}function ft(o,l){1&o&&(e.TgZ(0,"span",62),e._uU(1,"Amount must be greater than zero"),e.qZA())}function vt(o,l){1&o&&(e.TgZ(0,"span",62),e._uU(1,"Amount to pay excceds the remaining amount"),e.qZA())}function Ct(o,l){if(1&o&&(e.ynx(0),e.YNc(1,ht,2,0,"span",61),e.YNc(2,ft,2,0,"span",61),e.YNc(3,vt,2,0,"span",61),e.BQk()),2&o){const t=e.oxw(3);let n,i,s;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("amountToPay"))?null:n.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(i=t.formGroup.get("amountToPay"))?null:i.errors.min),e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(s=t.formGroup.get("amountToPay"))?null:s.errors.amountExceeded)}}function xt(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Ct,4,3,"ng-container",27),e.BQk()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("amountToPay"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("amountToPay"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("amountToPay"))?null:n.dirty))}}function Tt(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"h6",36),e._uU(2,"Select overdue and due promissory notes you want to pay from list"),e.qZA(),e.TgZ(3,"div",37)(4,"div",38)(5,"div",39),e.YNc(6,pt,28,4,"div",40),e.TgZ(7,"div",37),e.YNc(8,mt,2,0,"ng-template",null,41,e.W1O),e.qZA()()()(),e.YNc(10,gt,13,9,"ng-container",27),e.ynx(11),e.TgZ(12,"div",33)(13,"p",50),e._uU(14),e.qZA(),e.TgZ(15,"div",13)(16,"h6",34),e._uU(17,"Selected PNs Amount"),e.qZA(),e.TgZ(18,"p",15),e._uU(19),e.ALo(20,"number"),e.qZA()()(),e.TgZ(21,"div",51)(22,"div",52)(23,"input",53),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.amountToPay=i)})("change",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.handleAmountToPay(i))}),e.qZA(),e.TgZ(24,"label",54),e._uU(25,"Pay certain amount - Amount to Pay"),e.qZA()(),e.TgZ(26,"form",55)(27,"input",56),e.NdJ("input",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.hanldleInput(i))}),e.qZA(),e.YNc(28,xt,2,1,"ng-container",27),e.qZA()(),e.BQk()()}if(2&o){const t=e.MAs(9),n=e.oxw();let i;e.xp6(6),e.Q6J("ngIf",n.notesList)("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",n.totalRecordCount>1e3),e.xp6(4),e.hij("Total Selected No. ",null==n.checkedItems?null:n.checkedItems.length," "),e.xp6(5),e.hij("",e.xi3(20,9,n.selectedPnAmount,"2.3-3")," JOD"),e.xp6(4),e.Q6J("disabled",0==(null==n.notesList?null:n.notesList.length))("ngModel",n.amountToPay),e.xp6(3),e.Q6J("formGroup",n.formGroup),e.xp6(2),e.Q6J("ngIf",null==n.formGroup||null==(i=n.formGroup.get("amountToPay"))?null:i.errors)}}function Zt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.collect())}),e._uU(1,"Collect"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",!t.amountToPay&&0==t.checkedItems.length||t.formGroup.invalid)}}function bt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.collect())}),e._uU(1,"Collect"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",(null==t.earlySettlementRequest?null:t.earlySettlementRequest.totalEarlySettlementAmount)<=0)}}let yt=(()=>{class o{constructor(t,n,i,s,r,_,p){this._modalService=t,this._collectService=n,this._activeRoute=i,this._datePipe=s,this.fb=r,this._subjectService=_,this._activeModal=p,this.notesList=[],this.totalRecordCount=0,this.pageNo=1,this.collectionType=7008,this.payFor="due",this.pnOrderId=0,this.checkedItems=[],this.selectedPnAmount=0,this.currentDate="",this.selectAll=!1,this.earlySettlemenNotesList=[],this.earlySettleTotalRecordCount=0,this.earlySettlePageNo=1,this.requestId=0}ngOnInit(){this._activeRoute.params.subscribe(t=>{this.pnOrderId=t.id,this.getPNOrdersBooksPNS(),this.getPNOrdersBookDetails()}),this.formGroup=this.fb.group({amountToPay:[{value:"",disabled:!0},[c.kI.required,c.kI.min(1e-16)]]}),this._subjectService.paymentDoneModalClosed.subscribe(t=>{if(t.closed)if(this.checkedItems.length){let n=[...this.checkedItems];setTimeout(()=>{this.pnReceiving(n)},1e3),this.checkedItems=[]}else this._modalService.dismissAll()})}addFollowUp(t){const n=this._modalService.open(Xe,{size:"lg",centered:!0});n.componentInstance.details={...t,customerName:this.pnOrderDetails?.customerName,phone:this.pnOrderDetails?.mobile},n.componentInstance.eventData.subscribe(i=>{i&&(this.getPNOrdersBooksPNS(),this.getPNOrdersBookDetails())})}highlightDate(t){let n=new Date(this._datePipe.transform(new Date,"MMM d, y")),i=new Date(t);return n>i?"primary-bg":n<i?"blue-bg":"green-bg"}handleAmountToPay(t){t.target.checked?(this.formGroup.get("amountToPay").enable(),this.notesList=this.notesList.map(i=>({...i,checked:!1})),this.selectedPnAmount=0,this.selectAll=!1,this.checkedItems=[]):this.formGroup.get("amountToPay").disable()}getPNOrdersBooksPNS(){this._collectService.getPNOrdersBooksPNS(`?PNOrderId=${this.pnOrderId}&isDue=true&PageNo=${this.pageNo-1}&PageSize=1000`).subscribe(n=>{this.notesList=n.data.map(i=>({...i,checked:!1})),this.totalRecordCount=n.totalRecordCount})}getPNOrdersBookDetails(){this._collectService.getPNOrdersBooks(`?pnNo=${this.pnOrderId}`).subscribe(n=>{console.log(n),this.pnOrderDetails=n.data[0]})}handleCheckBoxChange(){this.calcValue()}calcValue(){this.checkedItems=this.notesList.filter(t=>t.checked),this.selectedPnAmount=0,this.checkedItems.forEach(t=>{this.selectedPnAmount+=t.remainingAmount}),this.formGroup.get("amountToPay").setValue(this.selectedPnAmount),this.amountToPay=!1,console.log(this.checkedItems)}checkAll(t){this.notesList=this.notesList.map(t.target.checked?i=>({...i,checked:!0}):i=>({...i,checked:!1})),this.calcValue()}handleInputPayFor(t,n){this.payFor=n,"early"==this.payFor&&this.getOrdersEarlySettlement()}hanldleInput(t){let n=t.target.value;this.notesList=this.notesList.map(i=>({...i,checked:!1})),this.selectedPnAmount=0,this.selectAll=!1,this.checkedItems=[],this.pnOrderDetails.remainingPNAmount<+n&&this.formGroup.controls.amountToPay.setErrors({amountExceeded:!0})}getOrdersEarlySettlement(){this._collectService.getOrdersEarlySettlement(`?orderId=${this.pnOrderId}&pageNo=0&pageSize=1000`).subscribe(n=>{console.log(n),this.earlySettlementRequest=n.data[0],21018==this.earlySettlementRequest?.statusObj?.lookupId&&(this.requestId=this.earlySettlementRequest?.earlySetlementRequestId,this.getOrdersEarlySettlementNotes())})}getOrdersEarlySettlementNotes(){this._collectService.getOrdersEarlySettlementNotes(`?earlySettlementRequestId=${this.requestId}&pageNo=0&pageSize=6`).subscribe(n=>{console.log(n),this.earlySettlemenNotesList=n.data})}pageChange(t){this.pageNo=t,this.getPNOrdersBooksPNS(),this.checkedItems=[],this.selectedPnAmount=0,this.selectAll=!1}earlySettlePageChange(t){this.earlySettlePageNo=t,this.getOrdersEarlySettlementNotes()}collect(){if("early"==this.payFor)this.details={pnOrderId:this.pnOrderId,customerName:this.pnOrderDetails?.customerName,grandAmount:this.earlySettlementRequest?.totalEarlySettlementAmount,remainingAmount:this.earlySettlementRequest?.totalEarlySettlementAmount};else{let n=+this.formGroup.get("amountToPay").value;this.details={pnOrderId:this.pnOrderId,customerName:this.pnOrderDetails?.customerName,grandAmount:n,remainingAmount:n,...this.checkedItems.length>0&&!this.amountToPay&&{pnBookNotesIds:this.checkedItems.map(i=>i.pnBookNoteId).toString()||""}}}this.details={...this.details,earlysettlement:"early"==this.payFor};const t=this._modalService.open(y.k,{modalDialogClass:"payment-modal-size"});t.componentInstance.detailsItem=this.details,t.componentInstance.collectionType=this.collectionType,t.componentInstance.sendtoLoadData.subscribe(n=>{this.selectedPnAmount=0,this.selectAll=!1,this.amountToPay=!1,this.formGroup.get("amountToPay").setValue(""),this.formGroup.get("amountToPay").disable(),this.getPNOrdersBooksPNS()}),localStorage.setItem("collectionOrderNum",this.collectionType.toString())}pnReceiving(t){const n=this._modalService.open(tt,{size:"lg",centered:!0});n.componentInstance.details={selectedItems:t},n.componentInstance.eventData.subscribe(i=>{i&&(this._modalService.dismissAll(),this.responseModal("success","PN's received successfully!"))})}responseModal(t,n){const i=this._modalService.open(C.i);i.componentInstance.dismissOnlyActive=!0,i.componentInstance.type=t,"success"==t?i.componentInstance.message=n:i.componentInstance.messageError=n}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.FF),e.Y36(h.k),e.Y36(m.gz),e.Y36(a.uU),e.Y36(c.qu),e.Y36(k._),e.Y36(d.Kz,8))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-collect-pn-order"]],decls:79,vars:29,consts:[[1,"card-collect"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex"],[1,"fw-500","m-0"],[1,"font-14","primary-clr","ms-1"],[1,"d-flex","gap-5","flex-wrap"],[1,"d-flex","flex-column"],[1,"dark-gray","fw-600"],[1,"light-gray"],[1,"d-flex","flex-column","flex-grow-1","align-items-end"],[1,"light-gray","mb-1"],[1,"light-gray","mb-0"],[1,"d-flex","gap-5","flex-wrap","mt-4"],[1,"d-flex","gap-3","align-items-center"],[1,"dark-gray","fw-700","m-0"],[1,"textWithBg","font-14","fw-600"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"fw-700","m-0"],[1,"d-flex","gap-3"],[1,"form-check","p-0","d-flex","align-items-center","gap-1","align-self-start"],["id","duepayment","value","due","type","radio",1,"form-check-input",3,"ngModel","input","ngModelChange"],["for","duepayment",1,"m-0"],[1,"d-flex","gap-2","flex-column"],[1,"form-check","p-0","d-flex","align-items-center","gap-1"],["id","earlystatemnt","value","early","type","radio",1,"form-check-input",3,"ngModel","ngModelChange","input"],["for","earlystatemnt",1,"m-0"],[1,"fw-600","gray-500","mb-0"],[4,"ngIf"],[1,"btns-group","gap-2"],["routerLink","/collect",1,"btn","btn-cancel"],["type","button","class","btn btn-save",3,"disabled","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["noEarlySettlement",""],[1,"d-flex","gap-4","align-items-center"],[1,"m-0","fw-600"],[1,"textWithBg","font-14","fw-600","green-clr"],[1,"fw-700","mt-3","mb-2"],[1,"col-md-12"],[1,"card-table","mt-0"],[1,"row"],["class","col-md-12",4,"ngIf","ngIfElse"],["loading",""],[1,"table-responsive"],[1,"table"],[1,"py-2"],[4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"],[1,"fw-600","primary-clr","mt-4"],[1,"m-0","primary-clr"],[1,"d-flex","gap-3","align-items-center","mt-2"],[1,"d-flex","gap-1","align-items-center"],["type","checkbox","id","atp",1,"form-check-input","input-checkbox","me-1",3,"disabled","ngModel","ngModelChange","change"],["for","atp"],[3,"formGroup"],["type","text","formControlName","amountToPay","appDecimalNumber","","placeholder","Amount to pay",1,"form-control",2,"width","200px",3,"input"],["type","checkbox","id","sall",1,"form-check-input","input-checkbox","me-1",3,"disabled","ngModel","change","ngModelChange"],["for","sall"],["type","checkbox",1,"form-check-input","input-checkbox",3,"ngModel","id","change","ngModelChange"],[1,"fas","fa-plus-circle","fa-2x","primary-clr","cursor-pointer",3,"click"],["class","primary-clr font-14",4,"ngIf"],[1,"primary-clr","font-14"],["type","button",1,"btn","btn-save",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),e._uU(4,"Order Date "),e.TgZ(5,"span",4),e._uU(6),e.ALo(7,"date"),e.qZA()()(),e.TgZ(8,"p",3),e._uU(9,"Order No "),e.TgZ(10,"span",4),e._uU(11),e.qZA()()(),e._UZ(12,"hr"),e.TgZ(13,"div",5)(14,"div",6)(15,"h6",7),e._uU(16,"Customer Name"),e.qZA(),e.TgZ(17,"p",8),e._uU(18),e.qZA()(),e.TgZ(19,"div",6)(20,"h6",7),e._uU(21,"Phone No"),e.qZA(),e.TgZ(22,"p",8),e._uU(23),e.qZA()(),e.TgZ(24,"div",6)(25,"h6",7),e._uU(26,"Account No"),e.qZA(),e.TgZ(27,"p",8),e._uU(28),e.qZA()(),e.TgZ(29,"div",9)(30,"p",10),e._uU(31),e.qZA(),e.TgZ(32,"p",11),e._uU(33),e.qZA()()(),e.TgZ(34,"div",12)(35,"div",13)(36,"h6",14),e._uU(37,"Promissory Notes"),e._UZ(38,"br"),e._uU(39," Total Amount"),e.qZA(),e.TgZ(40,"p",15),e._uU(41),e.ALo(42,"number"),e.qZA()(),e.TgZ(43,"div",13)(44,"h6",14),e._uU(45,"Remaining Amount"),e.qZA(),e.TgZ(46,"p",15),e._uU(47),e.ALo(48,"number"),e.qZA()(),e.TgZ(49,"div",13)(50,"h6",14),e._uU(51,"Interest Value"),e.qZA(),e.TgZ(52,"p",15),e._uU(53),e.ALo(54,"number"),e.qZA()()()(),e.TgZ(55,"div",0)(56,"div",16)(57,"h6",17),e._uU(58,"Pay For"),e.qZA()(),e._UZ(59,"hr"),e.TgZ(60,"div",18)(61,"div",19)(62,"input",20),e.NdJ("input",function(s){return n.handleInputPayFor(s,"due")})("ngModelChange",function(s){return n.payFor=s}),e.qZA(),e.TgZ(63,"label",21),e._uU(64,"Due Payments"),e.qZA()(),e.TgZ(65,"div",22)(66,"div",23)(67,"input",24),e.NdJ("ngModelChange",function(s){return n.payFor=s})("input",function(s){return n.handleInputPayFor(s,"early")}),e.qZA(),e.TgZ(68,"label",25),e._uU(69,"Early Settlement"),e.qZA()(),e.TgZ(70,"h6",26),e._uU(71),e.qZA()()()(),e.YNc(72,_t,4,2,"ng-container",27),e.YNc(73,Tt,29,12,"ng-container",27),e.TgZ(74,"div",28)(75,"a",29),e._uU(76,"Cancel"),e.qZA(),e.YNc(77,Zt,2,1,"button",30),e.YNc(78,bt,2,1,"button",30),e.qZA()),2&t&&(e.xp6(6),e.Oqu(e.xi3(7,17,null==n.pnOrderDetails?null:n.pnOrderDetails.pnOrderDate,"mediumDate")),e.xp6(5),e.Oqu(null==n.pnOrderDetails?null:n.pnOrderDetails.pnOrderId),e.xp6(7),e.Oqu(null==n.pnOrderDetails?null:n.pnOrderDetails.customerName),e.xp6(5),e.hij(" ",null==n.pnOrderDetails?null:n.pnOrderDetails.mobile,""),e.xp6(5),e.hij(" ",null==n.pnOrderDetails?null:n.pnOrderDetails.customerId,""),e.xp6(3),e.hij("Promissory Notes Total No. ",null==n.pnOrderDetails?null:n.pnOrderDetails.numberofInstallments,""),e.xp6(2),e.hij("Remaining Promissory Notes No. ",null==n.pnOrderDetails?null:n.pnOrderDetails.remainingPNnotes,""),e.xp6(8),e.hij("",e.xi3(42,20,null==n.pnOrderDetails?null:n.pnOrderDetails.totalPNAmount,"2.3-3")," JOD"),e.xp6(6),e.hij("",e.xi3(48,23,null==n.pnOrderDetails?null:n.pnOrderDetails.remainingPNAmount,"2.3-3")," JOD"),e.xp6(6),e.hij("",e.xi3(54,26,null==n.pnOrderDetails?null:n.pnOrderDetails.interestAmount,"2.3-3")," JOD"),e.xp6(9),e.Q6J("ngModel",n.payFor),e.xp6(5),e.Q6J("ngModel",n.payFor),e.xp6(4),e.Oqu(null==n.earlySettlementRequest||null==n.earlySettlementRequest.typeObj||null==n.earlySettlementRequest.typeObj.translations[0]?null:n.earlySettlementRequest.typeObj.translations[0].lookupName),e.xp6(1),e.Q6J("ngIf","early"==n.payFor),e.xp6(1),e.Q6J("ngIf","due"==n.payFor),e.xp6(4),e.Q6J("ngIf","due"==n.payFor),e.xp6(1),e.Q6J("ngIf","early"==n.payFor))},dependencies:[a.sg,a.O5,m.rH,c._Y,c.Fj,c.Wl,c._,c.JJ,c.JL,c.sg,c.u,c.On,d.N9,f.N,x.w,q.Q,a.JJ,a.uU],styles:[".card-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px!important}.form-check-input[_ngcontent-%COMP%]{width:20px!important;height:20px;margin:0;padding:0}"]}),o})();var T=u(55034),I=u(75304);function At(o,l){if(1&o&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"h4",20),e._uU(4," Collected In "),e.qZA(),e.TgZ(5,"p",21),e._uU(6),e.qZA()()(),e.TgZ(7,"div",22)(8,"div",23)(9,"h4"),e._uU(10," Branch "),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",22)(14,"div",23)(15,"h4"),e._uU(16," Register Name "),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.qZA()()(),e.TgZ(19,"div",22)(20,"div",23)(21,"h4"),e._uU(22," Register No. "),e.qZA(),e.TgZ(23,"p"),e._uU(24),e.qZA()()()()),2&o){const t=e.oxw(2);e.xp6(6),e.hij("Receipt No: ",null==t.orderDetails?null:t.orderDetails.orderCollectionId,""),e.xp6(6),e.hij(" ",t.orderDetails.branch.branchName," "),e.xp6(6),e.hij(" ",t.orderDetails.register.registersName," "),e.xp6(6),e.hij(" ",t.orderDetails.register.registersId," ")}}function Nt(o,l){if(1&o&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",24)(3,"h4"),e._uU(4," Collected By "),e.qZA()()(),e.TgZ(5,"div",22)(6,"div",23)(7,"h4"),e._uU(8," Employee "),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA()()(),e.TgZ(11,"div",22)(12,"div",23)(13,"h4"),e._uU(14," Date "),e.qZA(),e.TgZ(15,"p"),e._uU(16),e.ALo(17,"date"),e.qZA()()(),e.TgZ(18,"div",22)(19,"div",23)(20,"h4"),e._uU(21," Time "),e.qZA(),e.TgZ(22,"p"),e._uU(23),e.ALo(24,"date"),e.qZA()()()()),2&o){const t=e.oxw(2);e.xp6(10),e.hij(" ",t.orderDetails.createdBy.fullName," "),e.xp6(6),e.hij(" ",e.lcZ(17,3,t.orderDetails.createdAt)," "),e.xp6(7),e.hij(" ",e.xi3(24,5,t.orderDetails.createdAt,"shortTime")," ")}}function It(o,l){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,At,25,4,"div",16),e.YNc(2,Nt,25,8,"div",16),e._UZ(3,"hr"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.orderDetails),e.xp6(1),e.Q6J("ngIf",t.orderDetails)}}function Ot(o,l){1&o&&(e.TgZ(0,"span",26),e._uU(1,"Input is required"),e.qZA())}function kt(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Ot,2,0,"span",25),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f.revenueCategoryId||null==t.f.revenueCategoryId.errors?null:t.f.revenueCategoryId.errors.required)}}function St(o,l){if(1&o&&(e.ynx(0),e.YNc(1,kt,2,1,"ng-container",2),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.f.revenueCategoryId?null:t.f.revenueCategoryId.invalid)&&(null==t.f.revenueCategoryId?null:t.f.revenueCategoryId.touched)||(null==t.f.revenueCategoryId?null:t.f.revenueCategoryId.dirty))}}function qt(o,l){1&o&&(e.TgZ(0,"span",26),e._uU(1,"Input is required"),e.qZA())}function Ut(o,l){1&o&&(e.TgZ(0,"span",26),e._uU(1,"Can't be zero or negative"),e.qZA())}function Dt(o,l){if(1&o&&(e.ynx(0),e.YNc(1,qt,2,0,"span",25),e.YNc(2,Ut,2,0,"span",25),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f.amount||null==t.f.amount.errors?null:t.f.amount.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.f.amount||null==t.f.amount.errors?null:t.f.amount.errors.min)}}function wt(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Dt,3,2,"ng-container",2),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.f.amount?null:t.f.amount.invalid)&&(null==t.f.amount?null:t.f.amount.touched)||(null==t.f.amount?null:t.f.amount.dirty))}}let Mt=(()=>{class o{constructor(t,n){this.collectService=t,this.sharedService=n,this.calcRemainingAmount=new e.vpe,this.isForAll=!1,this.customerCtrl=new w.x,this.isLoading=!1}ngOnInit(){this.getCustomers(),this.getCategories(),this.detailsRevenue&&(this.GetOtherRevenuesOrderDetails(),this.FormRevenue.get("revenueCollection").get("customerId").disable(),this.FormRevenue.get("revenueCollection").get("revenueCategoryId").disable())}get f(){return this.FormRevenue.controls.revenueCollection.controls}getCustomers(){return this.collectService.customersList("").subscribe(t=>{t&&(this.customers=t.data)})}getCategories(){return this.collectService.GetCategories().subscribe(t=>{t&&(this.categories=t.data)})}onSearch(t){this.customerCtrl.next(t.term)}onClear(){this.filteredCustomers=(0,P.of)([])}chooseCustomer(t){this.FormRevenue.get("revenueCollection").get("mobile").patchValue(t.mobile),this.f.customerName.patchValue(t.customerName)}chooseCategory(t){console.log(t),console.log(t.taxPercent),this.FormRevenue.get("revenueCollection").get("taxPercent").patchValue(t.taxPercent);let n=this.FormRevenue.get("revenueCollection").get("taxPercent").value*this.FormRevenue.get("revenueCollection").get("amount").value/100;console.log(n),this.FormRevenue.get("revenueCollection").get("tax").patchValue(+n.toFixed(3)),this.FormRevenue.get("revenueCollection").get("totalAmount").patchValue((+this.FormRevenue.get("revenueCollection").get("amount").value+ +this.FormRevenue.get("revenueCollection").get("tax").value).toFixed(3)),this.calcRemainingAmount.emit(this.FormRevenue.get("revenueCollection").get("totalAmount").value)}calcTotalAmount(t){let n=+t.target.value;if(n>0){this.FormRevenue.get("revenueCollection").get("amount").patchValue(+n);let i=this.FormRevenue.get("revenueCollection").get("taxPercent").value*n/100;console.log(i),this.FormRevenue.get("revenueCollection").get("tax").patchValue(i.toFixed(3)),this.FormRevenue.get("revenueCollection").get("totalAmount").patchValue((+this.FormRevenue.get("revenueCollection").get("amount").value+ +this.FormRevenue.get("revenueCollection").get("tax").value).toFixed(3)),this.calcRemainingAmount.emit(this.FormRevenue.get("revenueCollection").get("totalAmount").value)}}clearCustomer(t){this.FormRevenue.get("revenueCollection").get("mobile").patchValue("")}clearCategory(t){this.FormRevenue.get("revenueCollection").get("taxPercent").patchValue(0)}isInvalid(t){}updateTax(){}GetOtherRevenuesOrderDetails(){return this.collectService.GetOtherRevenuesOrderDetails(this.detailsRevenue.orderId).subscribe(t=>{t&&(this.orderDetails=t,this.FormRevenue.get("revenueCollection").get("customerId").patchValue(this.orderDetails.customer?.customerId),this.FormRevenue.get("revenueCollection").get("customerName").patchValue(this.orderDetails.customer?.customerName),this.FormRevenue.get("revenueCollection").get("revenueCategoryId").patchValue(this.orderDetails.category?.categoryId),this.FormRevenue.get("revenueCollection").get("amount").patchValue((+this.orderDetails.amount).toFixed(3)),this.FormRevenue.get("revenueCollection").get("tax").patchValue(this.orderDetails.tax),this.FormRevenue.get("revenueCollection").get("taxPercent").patchValue(""),this.FormRevenue.get("revenueCollection").get("totalAmount").patchValue((+this.orderDetails.totalAmount).toFixed(3)),this.FormRevenue.get("revenueCollection").get("mobile").patchValue(this.orderDetails.customer?.mobile),this.FormRevenue.get("revenueCollection").get("note").patchValue(this.orderDetails.note),this.FormRevenue.get("revenueCollection").get("cashierNotes").patchValue(this.orderDetails.cashierNotes),this.FormRevenue.get("revenueCollection").get("costCenter").patchValue(this.orderDetails?.costCenter?.costCenterName))})}getOtherRevenueCollectionDetails(){return this.collectService.getOtherRevenueCollectionDetails(this.detailsRevenue.orderId).subscribe(t=>{t&&(this.orderDetails=t,this.FormRevenue.get("revenueCollection").get("customerId").patchValue(this.orderDetails.customer?.customerId),this.FormRevenue.get("revenueCollection").get("revenueCategoryId").patchValue(this.orderDetails.category?.categoryId),this.FormRevenue.get("revenueCollection").get("amount").patchValue(this.orderDetails.amount),this.FormRevenue.get("revenueCollection").get("tax").patchValue(this.orderDetails.tax),this.FormRevenue.get("revenueCollection").get("taxPercent").patchValue(""),this.FormRevenue.get("revenueCollection").get("totalAmount").patchValue(this.orderDetails.totalAmount),this.FormRevenue.get("revenueCollection").get("mobile").patchValue(this.orderDetails.customer?.mobile),this.FormRevenue.get("revenueCollection").get("costCenter").patchValue(this.orderDetails.note),this.FormRevenue.get("revenueCollection").get("note").patchValue(this.orderDetails.note))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.k),e.Y36(g.F))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-revenue"]],inputs:{FormRevenue:"FormRevenue",detailsRevenue:"detailsRevenue"},outputs:{calcRemainingAmount:"calcRemainingAmount"},decls:54,vars:18,consts:[[3,"formGroup"],[1,"card-form"],[4,"ngIf"],["formGroupName","revenueCollection",1,"row"],[1,"col-md-6"],[1,"form-group"],["type","text","formControlName","customerName","readonly","",1,"form-control","bg-gray"],["type","text","name","mobile","placeholder","","formControlName","mobile","readonly","",1,"form-control","bg-gray"],["id","categoryId","placeholder","Select category","bindLabel","categoryName","bindValue","categoryId","formControlName","revenueCategoryId",3,"items","change","clear"],["type","text","formControlName","amount","name","amount","placeholder","","appDecimalNumber","",1,"form-control",3,"readonly","change"],["type","text","formControlName","tax","name","tax","placeholder","","readonly","",1,"form-control","bg-gray"],[1,"tax-percent"],["type","number","formControlName","totalAmount","name","totalAmount","placeholder","","readonly","",1,"form-control","bg-gray"],["type","text","placeholder","Note","formControlName","note","name","note",1,"form-control",3,"readonly"],["type","text","placeholder","Note","formControlName","costCenter",1,"form-control",3,"readonly"],["type","text","placeholder","Note","formControlName","cashierNotes",1,"form-control",3,"readonly"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"card-sm","my-3","d-flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"primary-clr","m-0"],[1,"col-md-4"],[1,"card-sm"],[1,"card-sm","my-3"],["class","error",4,"ngIf"],[1,"error"]],template:function(t,n){1&t&&(e.TgZ(0,"div")(1,"form",0)(2,"div",1),e.YNc(3,It,4,2,"div",2),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"label"),e._uU(8,"Customer Name"),e.qZA(),e._UZ(9,"input",6),e.qZA()(),e.TgZ(10,"div",4)(11,"div",5)(12,"label"),e._uU(13,"Phone No."),e.qZA(),e._UZ(14,"input",7),e.qZA()(),e.TgZ(15,"div",4)(16,"div",5)(17,"label"),e._uU(18,"Revenue Category * "),e.qZA(),e.TgZ(19,"ng-select",8),e.NdJ("change",function(s){return n.chooseCategory(s)})("clear",function(s){return n.clearCategory(s)}),e.qZA(),e.YNc(20,St,2,1,"ng-container",2),e.qZA()(),e.TgZ(21,"div",4)(22,"div",5)(23,"label"),e._uU(24,"Amount JOD"),e.qZA(),e.TgZ(25,"input",9),e.NdJ("change",function(s){return n.calcTotalAmount(s)}),e.qZA(),e.YNc(26,wt,2,1,"ng-container",2),e.qZA()(),e.TgZ(27,"div",4)(28,"div",5)(29,"label"),e._uU(30,"Tax"),e.qZA(),e._UZ(31,"input",10),e.TgZ(32,"div",11),e._uU(33),e.qZA()()(),e.TgZ(34,"div",4)(35,"div",5)(36,"label"),e._uU(37,"Total Amount JOD"),e.qZA(),e._UZ(38,"input",12),e.qZA()(),e.TgZ(39,"div",4)(40,"div",5)(41,"label"),e._uU(42,"Note "),e.qZA(),e._UZ(43,"input",13),e.qZA()(),e.TgZ(44,"div",4)(45,"div",5)(46,"label"),e._uU(47,"Cost Center "),e.qZA(),e._UZ(48,"input",14),e.qZA()(),e.TgZ(49,"div",4)(50,"div",5)(51,"label"),e._uU(52,"Cashier Notes "),e.qZA(),e._UZ(53,"input",15),e.qZA()()()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.FormRevenue),e.xp6(2),e.Q6J("ngIf",n.detailsRevenue),e.xp6(16),e.Q6J("items",n.categories),e.xp6(1),e.Q6J("ngIf",null==n.f.revenueCategoryId?null:n.f.revenueCategoryId.errors),e.xp6(5),e.ekj("bg-gray",n.detailsRevenue),e.Q6J("readonly",n.detailsRevenue),e.xp6(1),e.Q6J("ngIf",null==n.f.amount?null:n.f.amount.errors),e.xp6(7),e.hij(" ",n.FormRevenue.get("revenueCollection").get("taxPercent").value," % "),e.xp6(10),e.ekj("bg-gray",n.detailsRevenue),e.Q6J("readonly",n.detailsRevenue),e.xp6(5),e.ekj("bg-gray",n.detailsRevenue),e.Q6J("readonly",n.detailsRevenue),e.xp6(5),e.ekj("bg-gray",n.detailsRevenue),e.Q6J("readonly",n.detailsRevenue))},dependencies:[a.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,c.x0,N.w9,q.Q,a.uU],styles:[".card-form[_ngcontent-%COMP%]{background:transparent;border:0px solid #c4cdd5;box-shadow:none;border-radius:8px;margin:0;padding:10px 0 30px}.card-sm[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;color:#1b212d}.card-sm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#929eae}.bg-gray[_ngcontent-%COMP%]{background:#f9f9f9}.tax-percent[_ngcontent-%COMP%]{position:absolute;right:20px;bottom:10px}.card-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{position:relative}"]}),o})();function Pt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"app-revenue",5),e.NdJ("calcRemainingAmount",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.calcRemainingAmount(i))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("FormRevenue",t.formGroup)("detailsRevenue",t.detailsRevenue)}}function Jt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeModal.close("Close click"))}),e._uU(2," Close"),e.qZA()()}}let F=(()=>{class o{constructor(t,n,i,s,r,_,p){this.collectService=t,this.sharedService=n,this.activeModal=i,this.modalService=s,this.router=r,this.fb=_,this._commonService=p,this.sendtoLoadData=new e.vpe,this.isShow=!0,this.items=[1,2,1,2,1,2],this.submitted=!1,this.selected=1,this.totalForAll=0,this.totalCash=0,this.totalCheque=0,this.totalVisa=0,this.totalMaster=0,this.totalExpress=0,this.totalAccount=0,this.JOD=1,this.USD=1.41,this.EUR=1.33,this.curruncyAry=[],this.isExceedAmount=!1,this.inValue=60}ngOnInit(){console.log(this.collectionType),console.log(this.detailsItem),this.getForm(),this.GetRegisterDetails(),this.getBanks(),this.formGroup.get("ordersCollection").get("orderCollectionType").patchValue(this.collectionType),this.detailsItem&&(7002==this.collectionType?this.GetDirectPaymentSalesOrdersDetails():7001==this.collectionType?this.GetServicesSalesOrderDetails():7003==this.collectionType&&this.GetSparePartsSalesOrdersDetails(),this.formGroup.get("ordersOnAccountCollection").get("onAccountPayerName").patchValue(this.detailsItem.customer?.customerName)),this.detailsRevenue&&(this.isViewRevenue=!0,this.GetOtherRevenueCollectionPayments())}GetServicesSalesOrderDetails(){return this.collectService.GetServicesSalesOrderDetails(this.detailsItem.servicesSalesOrderNo||this.detailsItem.order.servicesSalesOrderNo).subscribe(n=>{n&&(this.details=n.data,this.remainingAmount=this.details.order.grandAmount,this.grandAmount=this.details.order.grandAmount,this.formGroup.get("ordersCollection").get("orderNo").patchValue(this.details.order.servicesSalesOrderNo))})}GetDirectPaymentSalesOrdersDetails(){return this.collectService.GetDirectPaymentSalesOrdersDetails(this.detailsItem.directPaymentSalesOrderOpportunityNo||this.detailsItem.order.directPaymentSalesOrderOpportunityNo).subscribe(n=>{n&&(this.details=n.data,this.remainingAmount=this.details.order.remainingAmount,this.grandAmount=this.details.order.grandAmount,this.formGroup.get("ordersCollection").get("orderNo").patchValue(this.details.order.directPaymentSalesOrderOpportunityNo))})}GetSparePartsSalesOrdersDetails(){return this.collectService.GetSparePartsSalesOrdersDetails(this.detailsItem.sparePartsSalesOrderOpportunityNo||this.detailsItem.order.sparePartsSalesOrderOpportunityNo).subscribe(n=>{n&&(this.details=n.data,this.remainingAmount=this.details.order.grandAmount,this.grandAmount=this.details.order.grandAmount,this.formGroup.get("ordersCollection").get("orderNo").patchValue(this.details.order.sparePartsSalesOrderOpportunityNo))})}GetOtherRevenueCollectionPayments(){return this.collectService.GetOtherRevenueCollectionPayments(this.detailsRevenue.collectionId).subscribe(n=>{if(n){this.revenueDetailsPayment=n.data,console.log(this.revenueDetailsPayment),this.remainingAmount=this.revenueDetailsPayment.totalAmount;for(let _=this.ordersCashCollections.value.length-1;_>=0;_--)this.ordersCashCollections.removeAt(_);for(let _=0;_<this.revenueDetailsPayment?.ordersCashCollections.length;_++)this.ordersCashCollections.push(this.fb.group({currencyId:this.revenueDetailsPayment.ordersCashCollections[_].currencyId,collectedAmount:this.revenueDetailsPayment.ordersCashCollections[_].collectedAmount,vjod:this.revenueDetailsPayment.ordersCashCollections[_].collectedAmountJOD}));this.formGroup.get("ordersCollection").get("orderCollectionType").patchValue(7004),this.formGroup.get("ordersCollection").get("orderNo").patchValue(this.revenueDetailsPayment?.orderId),this.formGroup.get("ordersCollection").get("cashPayerName").patchValue(this.revenueDetailsPayment?.cashPayerName),this.formGroup.get("ordersChequeCollection").get("chequeCollectionJod").patchValue(this.revenueDetailsPayment.ordersChequeCollection.chequeCollectionJod),this.formGroup.get("ordersChequeCollection").get("chequeNo").patchValue(this.revenueDetailsPayment.ordersChequeCollection.chequeNo),this.formGroup.get("ordersChequeCollection").get("chequeDate").patchValue(this.revenueDetailsPayment.ordersChequeCollection.chequeDate),this.formGroup.get("ordersChequeCollection").get("bankId").patchValue(this.revenueDetailsPayment.ordersChequeCollection.bankId),this.formGroup.get("ordersChequeCollection").get("chequeDrawerName").patchValue(this.revenueDetailsPayment.ordersChequeCollection.chequeDrawerName),this.formGroup.get("ordersOnAccountCollection").get("onAccountCollectionJod").patchValue(this.revenueDetailsPayment.ordersOnAccountCollection.onAccountCollectionJod),this.formGroup.get("ordersOnAccountCollection").get("onAccountPayerName").patchValue(this.revenueDetailsPayment.ordersOnAccountCollection.onAccountPayerName);let i=this.revenueDetailsPayment.ordersCardsCollection.filter(_=>13001==_.paymentCardTypeId);console.log(i),this.formGroup.get("visaCollection").get("visaCollectionJod").patchValue(i[0].cardCollectionJod),this.formGroup.get("visaCollection").get("visaDate").patchValue("2023-03-06T11:32:10.414Z"),this.formGroup.get("visaCollection").get("visaInvoiceNo").patchValue(i[0].cardInvoiceNo),this.formGroup.get("visaCollection").get("visaTerminalId").patchValue(i[0].cardTerminalId),this.formGroup.get("visaCollection").get("bankId").patchValue(i[0].bankId),this.formGroup.get("visaCollection").get("visaPayerName").patchValue(i[0].cardPayerName),this.formGroup.get("visaCollection").get("visaFirst6Digits").patchValue(i[0].cardFirst6Digits),this.formGroup.get("visaCollection").get("visaLast4Digits").patchValue(i[0].cardLast4Digits);let s=this.revenueDetailsPayment.ordersCardsCollection.filter(_=>13002==_.paymentCardTypeId);console.log(s),this.formGroup.get("masterCollection").get("masterCollectionJod").patchValue(i[0].cardCollectionJod),this.formGroup.get("masterCollection").get("masterDate").patchValue("2023-03-06T11:32:10.414Z"),this.formGroup.get("masterCollection").get("masterInvoiceNo").patchValue(i[0].cardInvoiceNo),this.formGroup.get("masterCollection").get("masterTerminalId").patchValue(i[0].cardTerminalId),this.formGroup.get("masterCollection").get("bankId").patchValue(i[0].bankId),this.formGroup.get("masterCollection").get("masterPayerName").patchValue(i[0].cardPayerName),this.formGroup.get("masterCollection").get("masterFirst6Digits").patchValue(i[0].cardFirst6Digits),this.formGroup.get("masterCollection").get("masterLast4Digits").patchValue(i[0].cardLast4Digits);let r=this.revenueDetailsPayment.ordersCardsCollection.filter(_=>13003==_.paymentCardTypeId);console.log(r),this.formGroup.get("amexCollection").get("amexCollectionJod").patchValue(i[0].cardCollectionJod),this.formGroup.get("amexCollection").get("amexDate").patchValue("2023-03-06T11:32:10.414Z"),this.formGroup.get("amexCollection").get("amexInvoiceNo").patchValue(i[0].cardInvoiceNo),this.formGroup.get("amexCollection").get("amexTerminalId").patchValue(i[0].cardTerminalId),this.formGroup.get("amexCollection").get("bankId").patchValue(i[0].bankId),this.formGroup.get("amexCollection").get("amexPayerName").patchValue(i[0].cardPayerName),this.formGroup.get("amexCollection").get("amexFirst6Digits").patchValue(i[0].cardFirst6Digits),this.formGroup.get("amexCollection").get("amexLast4Digits").patchValue(i[0].cardLast4Digits)}})}chooseTab(t){let n=this.formGroup.controls.revenueCollection;if(n.controls.customerId.clearValidators(),n.controls.customerId.updateValueAndValidity(),n.controls.revenueCategoryId.clearValidators(),n.controls.revenueCategoryId.updateValueAndValidity(),n.controls.amount.clearValidators(),n.controls.amount.updateValueAndValidity(),this.formGroup.invalid)return window.scroll(0,0);this.selected=t}getForm(){this.formGroup=this.fb.group({revenueCollection:this.fb.group({customerId:[null,[c.kI.required]],customerName:[""],revenueCategoryId:[null,[c.kI.required]],amount:[null,[c.kI.min(1e-16),c.kI.required]],tax:0,taxPercent:0,totalAmount:0,mobile:"",note:[""],cashierNotes:[""],costCenter:[""]}),ordersCollection:this.fb.group({orderCollectionType:0,orderNo:0,cashPayerName:[""]}),ordersChequeCollection:this.fb.group({chequeCollectionJod:[null,c.kI.min(1e-16)],chequeNo:"",chequeDate:"",bankId:null,chequeDrawerName:""}),visaCollection:this.fb.group({visaCollectionJod:[null,c.kI.min(1e-16)],visaDate:[(new Date).toISOString().substring(0,10)],visaInvoiceNo:"",visaTerminalId:"",bankId:null,visaPayerName:"",visaFirst6Digits:"",visaLast4Digits:""}),masterCollection:this.fb.group({masterCollectionJod:[null,c.kI.min(1e-16)],masterDate:[(new Date).toISOString().substring(0,10)],masterInvoiceNo:"",masterTerminalId:"",masterPayerName:"",bankId:null,masterFirst6Digits:"",masterLast4Digits:""}),amexCollection:this.fb.group({amexCollectionJod:[null,c.kI.min(1e-16)],amexDate:[(new Date).toISOString().substring(0,10)],amexInvoiceNo:"",amexTerminalId:"",amexPayerName:"",bankId:null,amexFirst6Digits:"",amexLast4Digits:""}),ordersOnAccountCollection:this.fb.group({onAccountCollectionJod:[null,c.kI.min(1e-16)],onAccountPayerName:""}),ordersCashCollections:this.fb.array([this.addOrdersCashCollections()]),ordersCardsCollection:this.fb.array([])})}addOrdersCardsCollection(){return this.fb.group({cardDate:"",cardInvoiceNo:"",cardTerminalId:"",bankId:0,cardPayerName:"",paymentCardTypeId:0,cardCollectionJod:0,cardFirst6Digits:"",cardLast4Digits:""})}addOrdersCashCollections(){return this.fb.group({currencyId:null,collectedAmount:[null,c.kI.min(1e-16)],vjod:null})}pushrOdersCashCollections(){this.ordersCashCollections.push(this.fb.group({currencyId:null,collectedAmount:null,vjod:null}))}get ordersCashCollections(){return this.formGroup.controls.ordersCashCollections}get ordersCardsCollection(){return this.formGroup.controls.ordersCardsCollection}get formValid(){return this.formGroup.controls}removeOrdersCash(t,n){this.formGroup.get("ordersCashCollections").removeAt(t),console.log(n.value.currencyId),console.log(this.curruncyAry);const i=n.value.currencyId;this.curruncyAry=this.curruncyAry.filter(s=>s!==i),console.log(this.curruncyAry),this.totalCash=0;for(let s=0;s<this.ordersCashCollections.value.length;s++)console.log(this.ordersCashCollections.value),this.curruncyAry.push(this.ordersCashCollections.value[s].currencyId),console.log(this.ordersCashCollections.at(s).get("vjod").value),this.totalCash+=this.ordersCashCollections.at(s).get("vjod").value;console.log(this.totalCash),this.calculateForRemaining()}GetRegisterDetails(){return this.collectService.GetRegisterDetails(this.sharedService.getRegister.registerObj?.id).subscribe(t=>{t&&(this.registers=t.data,this.registerCurrencies=this.registers.registerCurrencies.map(n=>({id:n.id,name:n.currency[0].lookupName,lookupId:n.currency[0].lookupId})),console.log(this.registerCurrencies),this.isCash=this.registers.cash,this.isCheque=this.registers.cheque,this.isVisa=this.registers.visa,this.isMaster=this.registers.mastercard,this.isExpress=this.registers.americanExpress,this.isAccount=this.registers.onCustomerAccount)})}getBanks(){this.collectService.getLookupsById(11).subscribe(t=>{this.banks=t.data.map(n=>({id:n.id,name:n.name[0].lookupName}))},t=>{})}convertCash(t,n){if(this.remainingMessage="",this.ordersCashCollections.at(n).get("currencyId").value){9001==this.ordersCashCollections.at(n).get("currencyId").value?this.ordersCashCollections.at(n).get("vjod").patchValue(this._commonService.transformDecimal(1*this.ordersCashCollections.at(n).get("collectedAmount").value)):9002==this.ordersCashCollections.at(n).get("currencyId").value?this.ordersCashCollections.at(n).get("vjod").patchValue(this._commonService.transformDecimal(.71*this.ordersCashCollections.at(n).get("collectedAmount").value)):9003==this.ordersCashCollections.at(n).get("currencyId").value&&this.ordersCashCollections.at(n).get("vjod").patchValue(this._commonService.transformDecimal(.75*this.ordersCashCollections.at(n).get("collectedAmount").value)),this.totalCash=0;for(let i=0;i<this.ordersCashCollections.value.length;i++)console.log(this.ordersCashCollections.value),console.log(this.ordersCashCollections.at(i).get("vjod").value),this.totalCash+=+this.ordersCashCollections.at(i).get("vjod").value;console.log(this.totalCash),this.calculateForRemaining()}}chooseCurrency(t,n){console.log(t?.lookupId),console.log(this.ordersCashCollections.value),this.curruncyAry=[],console.log(this.curruncyAry),9001==t?.lookupId?this.ordersCashCollections.at(n).get("vjod").patchValue((1*this.ordersCashCollections.at(n).get("collectedAmount").value).toFixed(3)):9002==t?.lookupId?this.ordersCashCollections.at(n).get("vjod").patchValue(+(.71*this.ordersCashCollections.at(n).get("collectedAmount").value).toFixed(3)):9003==t?.lookupId&&this.ordersCashCollections.at(n).get("vjod").patchValue(+(.75*this.ordersCashCollections.at(n).get("collectedAmount").value).toFixed(3)),this.totalCash=0;for(let i=0;i<this.ordersCashCollections.value.length;i++)this.curruncyAry.push(this.ordersCashCollections.at(i).get("currencyId").value),this.totalCash+=Number(this.ordersCashCollections.at(i).get("vjod").value);this.calculateForRemaining()}clearCurruncyId(t,n){}calcRemainingAmount(t){console.log(t),this.remainingAmount=t,console.log(this.remainingAmount)}checkIsLessRemining(){this.remainingAmount<0&&7002!=this.collectionType&&(this.isExceedAmount=!0)}calculateForRemaining(){this.isExceedAmount=!1,this.totalForAll=0,this.totalForAll=Number(this.totalCash)+this.totalCheque+this.totalVisa+this.totalMaster+this.totalExpress+this.totalAccount,7002==this.collectionType?this.remainingAmount=this.details.order.remainingAmount:7001==this.collectionType||7003==this.collectionType?this.remainingAmount=this.details.order.grandAmount:7004==this.collectionType&&(this.remainingAmount=this.formGroup.get("revenueCollection").get("totalAmount").value),this.remainingAmount=this.remainingAmount-Number(this.totalForAll),this.checkIsLessRemining()}isSameCustomer(t){console.log(t.target.checked),console.log(t.target.value),1==t.target.checked?this.formGroup.get("ordersCollection").get("cashPayerName").patchValue(this.details?.customer?.customerName||this.formGroup.controls.revenueCollection.get("customerName").value):this.formGroup.get("ordersCollection").get("cashPayerName").patchValue("")}emptyCashCollections(){this.formGroup.get("ordersCollection").get("cashPayerName").patchValue(""),this.remainingMessage="";for(let t=this.ordersCashCollections.value.length-1;t>=0;t--)this.ordersCashCollections.removeAt(t);this.curruncyAry=[],this.pushrOdersCashCollections(),this.totalCash=0,this.calculateForRemaining()}getAmountCheque(t){this.totalCheque=+t,this.inValue=+t,console.log(this.inValue),console.log(this.totalCheque),this.remainingMessage="",this.calculateForRemaining(),this.checkIsLessRemining()}getAmountVisa(t){this.totalVisa=+t,this.calculateForRemaining(),this.checkIsLessRemining()}getAmountMaster(t){this.totalMaster=+t,this.calculateForRemaining(),this.checkIsLessRemining()}getAmountExpress(t){this.totalExpress=+t,this.calculateForRemaining(),this.checkIsLessRemining()}getAmountAccount(t){this.totalAccount=+t,this.calculateForRemaining(),this.checkIsLessRemining()}onSubmit(){if(!this.detailsItem){let t=this.formGroup.controls.revenueCollection;t.controls.customerId.addValidators([c.kI.required]),t.controls.customerId.updateValueAndValidity(),t.controls.revenueCategoryId.addValidators([c.kI.required]),t.controls.revenueCategoryId.updateValueAndValidity(),t.controls.amount.addValidators([c.kI.required,c.kI.min(1e-16)]),t.controls.amount.updateValueAndValidity()}if(7004==this.collectionType){let t=this.formGroup.controls.revenueCollection;if(t.invalid)return void t.markAllAsTouched()}else{let t=this.formGroup.controls.revenueCollection;t.controls.customerId.clearValidators(),t.controls.customerId.updateValueAndValidity(),t.controls.revenueCategoryId.clearValidators(),t.controls.revenueCategoryId.updateValueAndValidity(),t.controls.amount.clearValidators(),t.controls.amount.updateValueAndValidity()}if(this.isLoading=!0,this.submitted=!0,this.remainingMessage="",this.isExceedAmount=!1,console.log("totalForAll",this.totalForAll),0==this.totalForAll)return this.isLoading=!1,window.scroll(0,0);for(let t=this.ordersCardsCollection.value.length-1;t>=0;t--)this.ordersCardsCollection.removeAt(t);if(null==this.formGroup.get("visaCollection").get("visaCollectionJod").value||this.ordersCardsCollection.push(this.fb.group({cardDate:this.formGroup.value.visaCollection.visaDate,cardInvoiceNo:this.formGroup.value.visaCollection.visaInvoiceNo,cardTerminalId:this.formGroup.value.visaCollection.visaTerminalId,bankId:this.formGroup.value.visaCollection.bankId,cardPayerName:this.formGroup.value.visaCollection.visaPayerName,paymentCardTypeId:13001,cardCollectionJod:this.formGroup.value.visaCollection.visaCollectionJod,cardFirst6Digits:this.formGroup.value.visaCollection.visaFirst6Digits,cardLast4Digits:this.formGroup.value.visaCollection.visaLast4Digits})),delete this.formGroup.value.visaCollection,null==this.formGroup.get("masterCollection").get("masterCollectionJod").value||this.ordersCardsCollection.push(this.fb.group({cardDate:this.formGroup.value.masterCollection.masterDate,cardInvoiceNo:this.formGroup.value.masterCollection.masterInvoiceNo,cardTerminalId:this.formGroup.value.masterCollection.masterTerminalId,bankId:this.formGroup.value.masterCollection.bankId,cardPayerName:this.formGroup.value.masterCollection.masterPayerName,paymentCardTypeId:13002,cardCollectionJod:this.formGroup.value.masterCollection.masterCollectionJod,cardFirst6Digits:this.formGroup.value.masterCollection.masterFirst6Digits,cardLast4Digits:this.formGroup.value.masterCollection.masterLast4Digits})),delete this.formGroup.value.masterCollection,null==this.formGroup.get("amexCollection").get("amexCollectionJod").value||this.ordersCardsCollection.push(this.fb.group({cardDate:this.formGroup.value.amexCollection.amexDate,cardInvoiceNo:this.formGroup.value.amexCollection.amexInvoiceNo,cardTerminalId:this.formGroup.value.amexCollection.amexTerminalId,bankId:this.formGroup.value.amexCollection.bankId,cardPayerName:this.formGroup.value.amexCollection.amexPayerName,paymentCardTypeId:13003,cardCollectionJod:this.formGroup.value.amexCollection.amexCollectionJod,cardFirst6Digits:this.formGroup.value.amexCollection.amexFirst6Digits,cardLast4Digits:this.formGroup.value.amexCollection.amexLast4Digits})),delete this.formGroup.value.amexCollection,null==this.ordersCashCollections.at(0).get("collectedAmount").value)delete this.formGroup.value.ordersCashCollections;else if(this.ordersCashCollections.at(0).get("collectedAmount").value<=0)return this.isLoading=!1,window.scroll(0,0);if(null==this.formGroup.get("ordersChequeCollection").get("chequeCollectionJod").value)delete this.formGroup.value.ordersChequeCollection;else if(this.formGroup.get("ordersChequeCollection").get("chequeCollectionJod").value<=0)return console.log("ordersCashCollections2"),this.isLoading=!1,window.scroll(0,0);return null==this.formGroup.get("ordersOnAccountCollection").get("onAccountCollectionJod").value&&delete this.formGroup.value.ordersOnAccountCollection,0==this.formGroup.get("ordersCardsCollection").value.length&&delete this.formGroup.value.ordersCardsCollection,delete this.formGroup.value.visaCollection,delete this.formGroup.value.masterCollection,this.formGroup.invalid?(this.isLoading=!1,window.scroll(0,0)):0!=this.remainingAmount&&7004==this.collectionType?(this.isLoading=!1,this.remainingMessage="Payment must be completed, there is an amount left to pay",window.scroll(0,0)):this.remainingAmount<0&&7002==this.collectionType?(this.isLoading=!1,this.remainingMessage="Remaining amount exceeds the collected amount, please correct your payment.",window.scroll(0,0)):(7004!=this.collectionType?delete this.formGroup.value.revenueCollection:(delete this.formGroup.value.revenueCollection.mobile,delete this.formGroup.value.revenueCollection.taxPercent,delete this.formGroup.value.ordersCollection.orderNo),console.log(this.formGroup.value),7004==this.collectionType?this.collectService.AddOtherRevenueOrders(this.formGroup.value).subscribe(t=>{if(console.log(t),1==t.isSuccess){this.remainingMessage="",console.log(t),this.isLoading=!1;const n=this.modalService.open(T.Y);n.componentInstance.name="ok",n.componentInstance.response=t,setTimeout(()=>{this.sendtoLoadData.emit()},2e3)}else{this.isLoading=!1,console.log("response.errors",t);const n=this.modalService.open(T.Y);n.componentInstance.name="no",n.componentInstance.errors=t.Errors||t.errors}},t=>{this.isLoading=!1;const n=this.modalService.open(T.Y);n.componentInstance.name="no",n.componentInstance.errors=t.error.errors||t.error.Errors,this.isExceedAmount=!1,console.log("errors",t.error),console.log(t.errors),this.errorMessage=t.statusText}):this.collectService.CollectionOrder(this.formGroup.value).subscribe(t=>{if(1==t.isSuccess){this.remainingMessage="",console.log(t),this.isLoading=!1;const n=this.modalService.open(T.Y);n.componentInstance.name="ok",n.componentInstance.response=t,setTimeout(()=>{this.sendtoLoadData.emit()},2e3)}else{this.isLoading=!1,console.log("response.errors",t);const n=this.modalService.open(T.Y);n.componentInstance.name="no",n.componentInstance.errors=t.Errors||t.errors}},t=>{this.isLoading=!1;const n=this.modalService.open(T.Y);n.componentInstance.name="no",n.componentInstance.errors=t.error.errors||t.error.Errors,this.isExceedAmount=!1,console.log("errors",t.error),console.log(t.errors),this.errorMessage=t.statusText}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.k),e.Y36(g.F),e.Y36(d.Kz),e.Y36(d.FF),e.Y36(m.F0),e.Y36(c.qu),e.Y36(I.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-payment"]],inputs:{detailsItem:"detailsItem",collectionType:"collectionType",detailsRevenue:"detailsRevenue"},outputs:{sendtoLoadData:"sendtoLoadData"},decls:5,vars:2,consts:[[1,"modal-body"],[1,"row"],["class","col-md-12",4,"ngIf"],[1,"col-md-12"],["class","btns-group my-2",4,"ngIf"],[3,"FormRevenue","detailsRevenue","calcRemainingAmount"],[1,"btns-group","my-2"],["type","button",1,"btn","btn-save",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Pt,2,2,"div",2),e.TgZ(3,"div",3),e.YNc(4,Jt,3,0,"div",4),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("ngIf",!n.detailsItem),e.xp6(2),e.Q6J("ngIf",n.detailsRevenue))},dependencies:[a.O5,Mt],styles:[".modal-body[_ngcontent-%COMP%]{padding:20px 25px}.payment-head[_ngcontent-%COMP%]{border-bottom:1px solid #c4cdd5}.payment-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:18px;color:#1b212d;margin:0}.payment-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#929eae;margin-bottom:10px}.card-payment[_ngcontent-%COMP%]{margin:5px 0}.card-payment[_ngcontent-%COMP%]   .total-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin:5px 0}.card-payment[_ngcontent-%COMP%]   .total-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#000;margin:0}.card-payment[_ngcontent-%COMP%]   .total-card[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background-color:#f8f8f8;font-size:14px;font-weight:600;padding:10px 30px;display:block;border-radius:9px}.card-payment[_ngcontent-%COMP%]   .total-card[_ngcontent-%COMP%]   .total2[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ccc;font-size:14px;font-weight:600;padding:10px 30px;display:block;border-radius:9px}.paytitle[_ngcontent-%COMP%]{font-weight:700;font-size:18px;line-height:20px;color:#1b212d;margin-bottom:10px}.tab-nav[_ngcontent-%COMP%]{display:flex}.tab-nav[_ngcontent-%COMP%]   .payitem[_ngcontent-%COMP%]{text-align:center;margin-bottom:0;width:16.666%;padding:5px}.tab-nav[_ngcontent-%COMP%]   .payitem[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:600;font-size:18px;line-height:22px;text-align:center;color:#000;padding:15px 5px 5px;margin:0}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#ffffff;border:1px solid #d1d1d1;border-radius:15px;height:140px;width:100%;padding:3px}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .imag[_ngcontent-%COMP%]{width:70px;height:60px;display:flex;margin:0 auto;justify-content:center;align-items:center;background:#fff}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#929eae;padding:15px 5px;margin:0}.tab-nav[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{background:#ffffff;border:1px solid #dc3545;box-shadow:0 10px 20px #0000001a;border-radius:15px}.tab-nav[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#000}.card-form[_ngcontent-%COMP%]{background:#ffffff;border:0px solid #c4cdd5;box-shadow:none;border-radius:8px;margin:0;padding:0}.card-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.card-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px}.form-check[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.btn-trash[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.btn-push[_ngcontent-%COMP%]{font-size:16px;font-weight:500;padding:0}.btn-push[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#dc3545;font-size:24px;vertical-align:bottom;margin-inline-end:5px}.convert[_ngcontent-%COMP%]{font-size:12px;padding:5px}.btnacount.disabled[_ngcontent-%COMP%], .btnacount[_ngcontent-%COMP%]:disabled{background-color:#eee!important}"]}),o})(),Ft=(()=>{class o{constructor(t){this.activeModal=t}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.Kz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-details"]],inputs:{details:"details"},decls:99,vars:19,consts:[[1,"p-4"],[1,"row"],[1,"col-md-12"],[1,"card-sm","my-3","d-flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"d-flex","gap-3","align-items-center"],[1,"primary-clr","m-0"],[1,"fas","fa-times-circle","fa-2x","primary-clr","cursor-pointer",3,"click"],[1,"col-md-4"],[1,"card-sm"],[1,"card-sm","my-3"],[1,"fw-700"],[1,"mt-3","mb-4"],[1,"disabled-box"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5," Collected In "),e.qZA(),e.TgZ(6,"div",5)(7,"p",6),e._uU(8),e.qZA(),e.TgZ(9,"i",7),e.NdJ("click",function(){return n.activeModal.close("Close click")}),e.qZA()()()(),e.TgZ(10,"div",8)(11,"div",9)(12,"h4"),e._uU(13," Branch "),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.qZA()()(),e.TgZ(16,"div",8)(17,"div",9)(18,"h4"),e._uU(19," Register Name "),e.qZA(),e.TgZ(20,"p"),e._uU(21),e.qZA()()(),e.TgZ(22,"div",8)(23,"div",9)(24,"h4"),e._uU(25," Register No. "),e.qZA(),e.TgZ(26,"p"),e._uU(27),e.qZA()()()(),e.TgZ(28,"div",1)(29,"div",2)(30,"div",10)(31,"h4",11),e._uU(32," Collected By "),e.qZA()()(),e.TgZ(33,"div",8)(34,"div",9)(35,"h4"),e._uU(36," Employee "),e.qZA(),e.TgZ(37,"p"),e._uU(38),e.qZA()()(),e.TgZ(39,"div",8)(40,"div",9)(41,"h4"),e._uU(42," Date "),e.qZA(),e.TgZ(43,"p"),e._uU(44),e.ALo(45,"date"),e.qZA()()(),e.TgZ(46,"div",8)(47,"div",9)(48,"h4"),e._uU(49," Time "),e.qZA(),e.TgZ(50,"p"),e._uU(51),e.ALo(52,"date"),e.qZA()()()(),e.TgZ(53,"div",1)(54,"div",2),e._UZ(55,"hr",12),e.qZA(),e.TgZ(56,"div",8)(57,"h4"),e._uU(58," Customer Name"),e.qZA(),e.TgZ(59,"div",13)(60,"p"),e._uU(61),e.qZA()()(),e.TgZ(62,"div",8)(63,"h4"),e._uU(64," Phone No. "),e.qZA(),e.TgZ(65,"div",13)(66,"p"),e._uU(67),e.qZA()()(),e.TgZ(68,"div",8)(69,"h4"),e._uU(70," Category "),e.qZA(),e.TgZ(71,"div",13)(72,"p"),e._uU(73),e.qZA()()()(),e.TgZ(74,"div",1)(75,"div",8)(76,"h4"),e._uU(77," Amount JOD "),e.qZA(),e.TgZ(78,"div",13)(79,"p"),e._uU(80),e.qZA()()(),e.TgZ(81,"div",8)(82,"h4"),e._uU(83," Tax Amount JOD "),e.qZA(),e.TgZ(84,"div",13)(85,"p"),e._uU(86),e.qZA()()(),e.TgZ(87,"div",8)(88,"h4"),e._uU(89," Total Amount JOD "),e.qZA(),e.TgZ(90,"div",13)(91,"p"),e._uU(92),e.qZA()()(),e.TgZ(93,"div",2)(94,"h4"),e._uU(95," Cashier Notes "),e.qZA(),e.TgZ(96,"div",13)(97,"p"),e._uU(98),e.qZA()()()()()),2&t&&(e.xp6(8),e.hij("Receipt No: ",null==n.details?null:n.details.orderCollectionId,""),e.xp6(7),e.hij(" ",(null==n.details||null==n.details.branch?null:n.details.branch.branchName)||"-"," "),e.xp6(6),e.hij(" ",(null==n.details||null==n.details.register?null:n.details.register.registersName)||"-"," "),e.xp6(6),e.hij(" ",null==n.details?null:n.details.registerId," "),e.xp6(11),e.hij(" ",(null==n.details||null==n.details.createdBy?null:n.details.createdBy.fullName)||"-"," "),e.xp6(6),e.hij(" ",e.lcZ(45,14,null==n.details?null:n.details.createdAt)," "),e.xp6(7),e.hij(" ",e.xi3(52,16,null==n.details?null:n.details.createdAt,"shortTime")," "),e.xp6(10),e.hij(" ",null==n.details||null==n.details.customer?null:n.details.customer.customerName," "),e.xp6(6),e.hij(" ",null==n.details||null==n.details.customer?null:n.details.customer.mobile," "),e.xp6(6),e.hij(" ",null==n.details||null==n.details.category?null:n.details.category.categoryName," "),e.xp6(7),e.hij(" ",null==n.details?null:n.details.amount," "),e.xp6(6),e.hij(" ",null==n.details?null:n.details.tax," "),e.xp6(6),e.hij(" ",null==n.details?null:n.details.totalAmount," "),e.xp6(6),e.hij(" ",null==n.details?null:n.details.cashierNotes," "))},dependencies:[a.uU],styles:["h4[_ngcontent-%COMP%]{font-size:16px}p[_ngcontent-%COMP%]{font-size:15px;color:var(--gray-500);font-weight:500}"]}),o})();var Rt=u(50727),Qt=u(71884),Gt=u(78372),Z=u(75706);let R=(()=>{class o{constructor(t,n,i){this._acitveModal=t,this._modalService=n,this._helperService=i}viewInvoice(){this.data?.otherData?.invoice&&this._helperService.downloadURI(this.data?.otherData?.invoice)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.Kz),e.Y36(d.FF),e.Y36(I.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-invoice-response-modal"]],inputs:{data:"data"},decls:11,vars:2,consts:[[1,"modal-header","border-0","pb-0"],["ngbAutoFocus","",1,"heading","m-0"],[1,"modal-body"],[1,"body-text"],[1,"modal-footer","border-0","gap-2","justify-content-end"],["type","button",1,"redBtn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.qZA()(),e.TgZ(3,"div",2)(4,"p",3),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return n._acitveModal.close()}),e._uU(8,"Cancel"),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return n.viewInvoice()}),e._uU(10,"View"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu((null==n.data?null:n.data.heading)||"Success"),e.xp6(3),e.Oqu(null==n.data?null:n.data.body))},styles:[".heading[_ngcontent-%COMP%]{font-size:20px;font-weight:700}"]}),o})();var Bt=u(36690),Q=u(68423),Yt=u(82757);function jt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr",15),e.NdJ("click",function(i){const r=e.CHM(t).$implicit,_=e.oxw(2);return e.KtG(_.handleRowClick(i,r))}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"span"),e._uU(5),e.qZA()(),e.TgZ(6,"td")(7,"div",16)(8,"span"),e._uU(9),e.qZA(),e.TgZ(10,"span",17),e._uU(11),e.qZA()()(),e.TgZ(12,"td")(13,"span"),e._uU(14),e.qZA()(),e.TgZ(15,"td")(16,"span"),e._uU(17),e.ALo(18,"date"),e.qZA()(),e.TgZ(19,"td")(20,"span"),e._uU(21),e.ALo(22,"number"),e.qZA()(),e.TgZ(23,"td",18)(24,"button",19),e._uU(25,"View Receipt"),e.qZA(),e.TgZ(26,"img",20),e.NdJ("click",function(i){const r=e.CHM(t).$implicit,_=e.oxw(2);return e.KtG(_.generateInvoiceOrReceipt(7005,"receipt",r,i))}),e.qZA()()()}if(2&o){const t=l.$implicit,n=l.index;e.xp6(2),e.Oqu(n+1),e.xp6(3),e.Oqu(t.collectionId),e.xp6(4),e.Oqu(null==t.customer?null:t.customer.customerName),e.xp6(2),e.Oqu(null==t.customer?null:t.customer.mobile),e.xp6(3),e.hij(" ",null==t.category?null:t.category.categoryName," "),e.xp6(3),e.Oqu(e.xi3(18,7,t.createdAt," d MMM y h:mm a")),e.xp6(4),e.hij("",e.xi3(22,10,t.totalAmount,"2.3-3")," JOD")}}function Et(o,l){1&o&&(e.TgZ(0,"div",21),e._UZ(1,"app-not-found"),e.qZA())}function Lt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",4)(2,"div",5)(3,"table",6)(4,"thead")(5,"tr")(6,"th",7)(7,"span")(8,"button",8),e._uU(9," Serial No "),e.qZA()()(),e.TgZ(10,"th",7)(11,"span")(12,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByReceipt())}),e._uU(13," Receipt No. "),e._UZ(14,"i",10)(15,"i",11),e.qZA()()(),e.TgZ(16,"th",7),e.ynx(17),e.TgZ(18,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByCustomer())}),e._uU(19," Customer "),e._UZ(20,"i",10)(21,"i",11),e.qZA(),e.BQk(),e.qZA(),e.TgZ(22,"th",7)(23,"span")(24,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByCategory())}),e._uU(25," Category "),e._UZ(26,"i",10)(27,"i",11),e.qZA()()(),e.TgZ(28,"th",7)(29,"span")(30,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByDate())}),e._uU(31," Date "),e._UZ(32,"i",10)(33,"i",11),e.qZA()()(),e.TgZ(34,"th",7)(35,"span")(36,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByAmount())}),e._uU(37," Total Amount "),e._UZ(38,"i",10)(39,"i",11),e.qZA()()(),e.TgZ(40,"th",7)(41,"button",12),e._uU(42," Action "),e.qZA()()()(),e.TgZ(43,"tbody"),e.YNc(44,jt,27,13,"tr",13),e.qZA()()(),e.YNc(45,Et,2,0,"div",14),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(8),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(4),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.ekj("active",2==t.sort),e.xp6(1),e.ekj("active",3==t.sort),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.ekj("active",4==t.sort),e.xp6(1),e.ekj("active",5==t.sort),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.ekj("active",6==t.sort),e.xp6(1),e.ekj("active",7==t.sort),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.ekj("active",8==t.sort),e.xp6(1),e.ekj("active",9==t.sort),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.ekj("active",10==t.sort),e.xp6(1),e.ekj("active",11==t.sort),e.xp6(2),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(3),e.Q6J("ngForOf",t.collects),e.xp6(1),e.Q6J("ngIf",0==t.collects.length)}}function Vt(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}let Ht=(()=>{class o{constructor(t,n,i){this.modalService=t,this._spinner=n,this._httpService=i,this.collects=[],this.eventData=new e.vpe,this.sort=1}ngOnInit(){}generateInvoiceOrReceipt(t,n="",i,s){s&&s.stopPropagation(),this._httpService._spinnerService.show();let r=new FormData;r.append("OrderNo",i?.orderId),r.append("OrderCollectionType",t),this._httpService.post(this._httpService.apiUrl.Regenerate.RegenerateOrigionalReceiptCustomer,r).subscribe({next:p=>{p.isSuccess&&(this.modalService.open(R,{centered:!0}).componentInstance.data={body:`Order ${n} generated successfully!`,otherData:{invoice:p.data,invoiceType:n,orderType:t}})},error:p=>{this.responseModal("error",p?.error?.errors)}}).add(()=>this._httpService._spinnerService.hide())}responseModal(t,n){const i=this.modalService.open(C.i);i.componentInstance.type=t,i.componentInstance.dismissOnlyActive=!0,"success"==t?i.componentInstance.message=n:i.componentInstance.messageError=n}handleRowClick(t,n){this.eventData.emit("viewReceipt"===t.target.id?{invoices:n?.invoices?.clientCopy}:{customerPaymentDetails:n}),console.log(t.target.id),console.log(t.currentTarget)}sortByReceipt(){this.sort=3==this.sort?1:2==this.sort?3:2,this.eventData.emit({sort:this.sort})}sortByCustomer(){this.sort=5==this.sort?1:4==this.sort?5:4,this.eventData.emit({sort:this.sort})}sortByCategory(){this.sort=7==this.sort?1:6==this.sort?7:6,this.eventData.emit({sort:this.sort})}sortByDate(){this.sort=9==this.sort?1:8==this.sort?9:8,this.eventData.emit({sort:this.sort})}sortByAmount(){this.sort=11==this.sort?1:10==this.sort?11:10,this.eventData.emit({sort:this.sort})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.FF),e.Y36(Q.t2),e.Y36(S.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["customer-payment-table"]],inputs:{collects:"collects"},outputs:{eventData:"eventData"},decls:5,vars:2,consts:[[1,"row"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[1,"card-table"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn","btn-act",3,"disabled"],["class","cursor-pointer",3,"click",4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"cursor-pointer",3,"click"],[1,"d-flex","flex-column"],[1,"fw-500"],[1,"last-td"],["id","viewReceipt",1,"btn","btn-collect"],["ngbTooltip","Regenerate Receipt","height","40","width","40","src","/assets/images/regen-invoice.png",1,"cursor-pointer",3,"click"],[1,"not-found"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Lt,46,29,"div",1),e.TgZ(2,"div",2),e.YNc(3,Vt,2,0,"ng-template",null,3,e.W1O),e.qZA()()),2&t){const i=e.MAs(4);e.xp6(1),e.Q6J("ngIf",n.collects)("ngIfElse",i)}},dependencies:[a.sg,a.O5,d._L,f.N,x.w,a.JJ,a.uU]}),o})();function $t(o,l){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"span"),e.ALo(9,"date"),e._uU(10),e.ALo(11,"date"),e.qZA()(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"number"),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA()()),2&o){const t=l.$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(null==t?null:t.pnBookSerial),e.xp6(2),e.Oqu(null==t?null:t.pnBookId),e.xp6(2),e.Oqu(null==t?null:t.pnNoteSerial),e.xp6(2),e.Tol("highlightPnOrderBg "+n.highlightDate(e.xi3(9,9,null==t?null:t.dueDate,"mediumDate"))),e.xp6(2),e.hij(" ",e.xi3(11,12,null==t?null:t.dueDate,"mediumDate")," "),e.xp6(3),e.hij("",e.xi3(14,15,null==t?null:t.amount,"2.3-3")," JOD"),e.xp6(3),e.hij("",e.xi3(17,18,null==t?null:t.remainingAmount,"2.3-3")," JOD"),e.xp6(3),e.Oqu(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName)}}function Kt(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function zt(o,l){if(1&o&&(e.TgZ(0,"div",21)(1,"div",31)(2,"table",32)(3,"thead")(4,"tr",33)(5,"th"),e._uU(6,"PN Book Serial"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"PN Book No"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"PN Note Serial"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Due Date"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Amount"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Remaining Amount"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Status"),e.qZA()()(),e.TgZ(19,"tbody"),e.YNc(20,$t,20,21,"tr",34),e.qZA()()(),e.YNc(21,Kt,2,0,"div",26),e.qZA()),2&o){const t=e.oxw();e.xp6(20),e.Q6J("ngForOf",t.notesList),e.xp6(1),e.Q6J("ngIf",0==(null==t.notesList?null:t.notesList.length))}}function Wt(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function Xt(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",23)(2,"div",35)(3,"h6",36),e._uU(4," Showing "),e.TgZ(5,"span"),e._uU(6),e.qZA(),e._uU(7," from "),e.TgZ(8,"span"),e._uU(9),e.qZA(),e._uU(10," data "),e.qZA()(),e.TgZ(11,"div",35)(12,"ngb-pagination",37),e.NdJ("pageChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.pageNo=i)})("pageChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.pageChange(i))}),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(6),e.AsE("",6*t.pageNo-5," - ",6==(null==t.notesList?null:t.notesList.length)?6*t.pageNo:t.totalRecordCount,""),e.xp6(3),e.hij(" ",t.totalRecordCount," "),e.xp6(3),e.Q6J("collectionSize",t.totalRecordCount)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}function en(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.collect())}),e._uU(1,"Collect"),e.qZA()}}let tn=(()=>{class o{constructor(t,n,i,s,r){this._modalService=t,this._activeModal=n,this._collectService=i,this._commonService=s,this._datePipe=r,this.notesList=[],this.totalRecordCount=0,this.sort=1,this.pageNo=1,this.currentDate=""}ngOnInit(){this.getPNOrdersBooks(),this.getPNOrdersBooksPNS()}highlightDate(t){let n=new Date(this._datePipe.transform(new Date,"MMM d, y")),i=new Date(t);return n>i?"primary-bg":n<i?"blue-bg":"green-bg"}getPNOrdersBooksPNS(){this._collectService.getPNOrdersBooksPNS(`?PNOrderId=${this.data?.pnOrderId}&isDue=false&PageNo=${this.pageNo-1}&PageSize=6`).subscribe(n=>{this.notesList=n.data,this.totalRecordCount=n.totalRecordCount})}getPNOrdersBooks(){this._collectService.getPNOrdersBooks(`?PNOrderId=${this.data?.pnOrderId}`).subscribe(n=>{this.pnOrderDetails=n.data[0],console.log(n)})}pageChange(t){this.pageNo=t,this.getPNOrdersBooksPNS()}collect(){this._activeModal.close(),this._commonService.NavigateToRoute(`/collect/collect-pn-order/${this.data?.pnOrderId}`)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.FF),e.Y36(d.Kz),e.Y36(h.k),e.Y36(I.v),e.Y36(a.uU))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-pn-order-details"]],inputs:{data:"data"},decls:72,vars:26,consts:[[1,"modal-header","justify-content-between","align-items-center"],[1,"fw-600","m-0"],[1,"primary-clr","fw-600","text-end","m-0"],[1,"font-14","fw-400"],[1,"modal-body"],[1,"d-flex"],[1,"fw-500"],[1,"font-14","primary-clr","ms-1"],[1,"card-collect"],[1,"d-flex","gap-5","flex-wrap"],[1,"d-flex","flex-column"],[1,"dark-gray","fw-600"],[1,"light-gray"],[1,"d-flex","flex-column","flex-grow-1","align-items-end"],[1,"light-gray","mb-1"],[1,"light-gray","mb-0"],[1,"d-flex","gap-5","flex-wrap","mt-4"],[1,"d-flex","gap-3","align-items-center"],[1,"dark-gray","fw-700","m-0"],[1,"textWithBg","font-14","fw-600"],[1,"fw-700","mt-3","mb-2"],[1,"col-md-12"],[1,"card-table","mt-0"],[1,"row"],["class","col-md-12",4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],[1,"modal-footer"],[1,"btns-group","gap-2"],["type","button",1,"btn","btn-cancel",3,"click"],["type","button","class","btn btn-save",3,"click",4,"ngIf"],[1,"table-responsive"],[1,"table","tdPadding"],[1,"py-2"],[4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"],["type","button",1,"btn","btn-save",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"PNs Order Details"),e.qZA(),e.TgZ(3,"p",2),e._uU(4,"Order No. "),e.TgZ(5,"span",3),e._uU(6),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"p",6),e._uU(10,"Order Date "),e.TgZ(11,"span",7),e._uU(12),e.ALo(13,"date"),e.qZA()()(),e.TgZ(14,"div",8)(15,"div",9)(16,"div",10)(17,"h6",11),e._uU(18,"Customer Name"),e.qZA(),e.TgZ(19,"p",12),e._uU(20),e.qZA()(),e.TgZ(21,"div",10)(22,"h6",11),e._uU(23,"Phone No"),e.qZA(),e.TgZ(24,"p",12),e._uU(25),e.qZA()(),e.TgZ(26,"div",10)(27,"h6",11),e._uU(28,"Account No"),e.qZA(),e.TgZ(29,"p",12),e._uU(30),e.qZA()(),e.TgZ(31,"div",13)(32,"p",14),e._uU(33),e.qZA(),e.TgZ(34,"p",15),e._uU(35),e.qZA()()(),e.TgZ(36,"div",16)(37,"div",17)(38,"h6",18),e._uU(39,"Promissory Notes"),e._UZ(40,"br"),e._uU(41," Total Amount"),e.qZA(),e.TgZ(42,"p",19),e._uU(43),e.ALo(44,"number"),e.qZA()(),e.TgZ(45,"div",17)(46,"h6",18),e._uU(47,"Remaining Amount"),e.qZA(),e.TgZ(48,"p",19),e._uU(49),e.ALo(50,"number"),e.qZA()(),e.TgZ(51,"div",17)(52,"h6",18),e._uU(53,"Interest Value"),e.qZA(),e.TgZ(54,"p",19),e._uU(55),e.ALo(56,"number"),e.qZA()()()(),e.TgZ(57,"h6",20),e._uU(58,"Select overdue and due promissory notes you want to pay from list"),e.qZA(),e.TgZ(59,"div",21)(60,"div",22)(61,"div",23),e.YNc(62,zt,22,2,"div",24),e.TgZ(63,"div",21),e.YNc(64,Wt,2,0,"ng-template",null,25,e.W1O),e.qZA()()()(),e.YNc(66,Xt,13,9,"ng-container",26),e.qZA(),e.TgZ(67,"div",27)(68,"div",28)(69,"button",29),e.NdJ("click",function(){return n._activeModal.close()}),e._uU(70,"Cancel"),e.qZA(),e.YNc(71,en,2,0,"button",30),e.qZA()()),2&t){const i=e.MAs(65);e.xp6(6),e.Oqu(null==n.pnOrderDetails?null:n.pnOrderDetails.pnOrderId),e.xp6(6),e.Oqu(e.xi3(13,14,null==n.pnOrderDetails?null:n.pnOrderDetails.pnOrderDate,"mediumDate")),e.xp6(8),e.Oqu(null==n.pnOrderDetails?null:n.pnOrderDetails.customerName),e.xp6(5),e.hij(" ",null==n.pnOrderDetails?null:n.pnOrderDetails.mobile,""),e.xp6(5),e.hij(" ",null==n.pnOrderDetails?null:n.pnOrderDetails.customerId,""),e.xp6(3),e.hij("Promissory Notes Total No. ",null==n.pnOrderDetails?null:n.pnOrderDetails.numberofInstallments,""),e.xp6(2),e.hij("Remaining Promissory Notes No. ",null==n.pnOrderDetails?null:n.pnOrderDetails.remainingPNnotes,""),e.xp6(8),e.hij("",e.xi3(44,17,null==n.pnOrderDetails?null:n.pnOrderDetails.totalPNAmount,"2.3-3")," JOD"),e.xp6(6),e.hij("",e.xi3(50,20,null==n.pnOrderDetails?null:n.pnOrderDetails.remainingPNAmount,"2.3-3")," JOD"),e.xp6(6),e.hij("",e.xi3(56,23,null==n.pnOrderDetails?null:n.pnOrderDetails.interestAmount,"2.3-3")," JOD"),e.xp6(7),e.Q6J("ngIf",n.notesList)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",n.totalRecordCount>6),e.xp6(5),e.Q6J("ngIf",35004!==(null==n.pnOrderDetails?null:n.pnOrderDetails.status)&&35005!==(null==n.pnOrderDetails?null:n.pnOrderDetails.status)&&35003!==(null==n.pnOrderDetails?null:n.pnOrderDetails.status))}},dependencies:[a.sg,a.O5,d.N9,f.N,x.w,a.JJ,a.uU]}),o})();function nn(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",13)(2,"i",14),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("active",2==t.sort),e.xp6(1),e.ekj("active",3==t.sort)}}function on(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",13)(2,"i",14),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("active",4==t.sort),e.xp6(1),e.ekj("active",5==t.sort)}}function ln(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",13)(2,"i",14),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("active",6==t.sort),e.xp6(1),e.ekj("active",7==t.sort)}}function sn(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",13)(2,"i",14),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("active",8==t.sort),e.xp6(1),e.ekj("active",9==t.sort)}}function rn(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",13)(2,"i",14),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("active",10==t.sort),e.xp6(1),e.ekj("active",11==t.sort)}}function cn(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",13)(2,"i",14),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("active",12==t.sort),e.xp6(1),e.ekj("active",13==t.sort)}}function an(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",13)(2,"i",14),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("active",14==t.sort),e.xp6(1),e.ekj("active",15==t.sort)}}function _n(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",21)(2,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.collectOrder(i))}),e._uU(3,"Collect"),e.qZA(),e.TgZ(4,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.clientCopy))}),e._uU(5,"View Receipt"),e.qZA(),e.TgZ(6,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.clientCopyImage))}),e._uU(7,"View Summary"),e.qZA()(),e.BQk()}}function un(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",21)(2,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.clientCopy))}),e._uU(3,"View Receipt"),e.qZA(),e.TgZ(4,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.clientCopyImage))}),e._uU(5,"View Summary"),e.qZA()(),e.BQk()}}function dn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4).$implicit,s=e.oxw(2);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.clientCopy))}),e._uU(1,"View Invoice"),e.qZA()}if(2&o){const t=e.oxw(4).$implicit;e.Q6J("disabled",35004==(null==t?null:t.status)||35005==(null==t?null:t.status))}}function pn(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"button",26),e._uU(2,"Collect"),e.qZA(),e.YNc(3,dn,2,1,"button",27),e.BQk()),2&o){const t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("disabled",35004==(null==t?null:t.status)||35005==(null==t?null:t.status)),e.xp6(2),e.Q6J("ngIf",null==t?null:t.invoices)}}function mn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3).$implicit,s=e.oxw(2);return e.KtG(s.collectOrder(i))}),e._uU(1,"Collect"),e.qZA()}}function gn(o,l){if(1&o&&(e.YNc(0,pn,4,2,"ng-container",19),e.YNc(1,mn,2,0,"ng-template",null,25,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw(2).$implicit;e.Q6J("ngIf",35004==(null==n?null:n.status)||35005==(null==n?null:n.status))("ngIfElse",t)}}function hn(o,l){if(1&o&&(e.YNc(0,un,6,0,"ng-container",19),e.YNc(1,gn,3,2,"ng-template",null,24,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw().$implicit;e.Q6J("ngIf",35003==(null==n?null:n.status))("ngIfElse",t)}}function fn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr",15),e.NdJ("click",function(i){const r=e.CHM(t).$implicit,_=e.oxw(2);return e.KtG(_.viewDetails(i,null==r?null:r.pnOrderId))}),e.TgZ(1,"td")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"div",16)(9,"span"),e._uU(10),e.qZA(),e.TgZ(11,"span",17),e._uU(12),e.qZA()()(),e.TgZ(13,"td")(14,"span"),e._uU(15),e.ALo(16,"date"),e.qZA()(),e.TgZ(17,"td")(18,"span"),e._uU(19),e.ALo(20,"number"),e.qZA()(),e.TgZ(21,"td")(22,"span"),e._uU(23),e.ALo(24,"number"),e.qZA()(),e.TgZ(25,"td")(26,"span"),e._uU(27),e.qZA()(),e.TgZ(28,"td",18),e.YNc(29,_n,8,0,"ng-container",19),e.YNc(30,hn,3,2,"ng-template",null,20,e.W1O),e.qZA()()}if(2&o){const t=l.$implicit,n=e.MAs(31);e.xp6(3),e.Oqu(null==t?null:t.pnOrderId),e.xp6(3),e.Oqu(null==t?null:t.lastPNBookSerial),e.xp6(4),e.Oqu(null==t?null:t.customerName),e.xp6(2),e.Oqu(null==t?null:t.mobile),e.xp6(3),e.hij(" ",(null==t?null:t.nextPNDueDate)&&e.xi3(16,10,null==t?null:t.nextPNDueDate,"mediumDate")||"-"," "),e.xp6(4),e.hij("",e.xi3(20,13,(null==t?null:t.lowestAmount)||0,"2.3-3")," JOD"),e.xp6(4),e.hij("",e.xi3(24,16,(null==t?null:t.highestAmount)||0,"2.3-3")," JOD"),e.xp6(4),e.Oqu(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName),e.xp6(2),e.Q6J("ngIf",35002==t.status)("ngIfElse",n)}}function vn(o,l){1&o&&(e.TgZ(0,"div",29),e._UZ(1,"app-not-found"),e.qZA())}function Cn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",4)(2,"div",5)(3,"table",6)(4,"thead")(5,"tr")(6,"th",7)(7,"span")(8,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByPnOrderNo())}),e._uU(9," PN Order No. "),e.YNc(10,nn,3,4,"ng-container",9),e.qZA()()(),e.TgZ(11,"th",7)(12,"span")(13,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByPnBook())}),e._uU(14," PN Book Serial "),e.YNc(15,on,3,4,"ng-container",9),e.qZA()()(),e.TgZ(16,"th",7)(17,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByCustomer())}),e._uU(18," Customer Name "),e.YNc(19,ln,3,4,"ng-container",9),e.qZA()(),e.TgZ(20,"th",7)(21,"span")(22,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByDueDate())}),e._uU(23," Next PN Due Date "),e.YNc(24,sn,3,4,"ng-container",9),e.qZA()()(),e.TgZ(25,"th",7)(26,"span")(27,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByLowAmount())}),e._uU(28," Lowest Amount "),e.YNc(29,rn,3,4,"ng-container",9),e.qZA()()(),e.TgZ(30,"th",7)(31,"span")(32,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByHighAmount())}),e._uU(33," Highest Amount "),e.YNc(34,cn,3,4,"ng-container",9),e.qZA()()(),e.TgZ(35,"th",7)(36,"span")(37,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByStatus())}),e._uU(38," Status "),e.YNc(39,an,3,4,"ng-container",9),e.qZA()()(),e.TgZ(40,"th",7)(41,"button",10),e._uU(42," Action "),e.qZA()()()(),e.TgZ(43,"tbody"),e.YNc(44,fn,32,19,"tr",11),e.qZA()()(),e.YNc(45,vn,2,0,"div",12),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(8),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.Q6J("ngIf",!t.isMultiSelect),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.Q6J("ngIf",!t.isMultiSelect),e.xp6(2),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.Q6J("ngIf",!t.isMultiSelect),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.Q6J("ngIf",!t.isMultiSelect),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.Q6J("ngIf",!t.isMultiSelect),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.Q6J("ngIf",!t.isMultiSelect),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.Q6J("ngIf",!t.isMultiSelect),e.xp6(2),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(3),e.Q6J("ngForOf",t.collects),e.xp6(1),e.Q6J("ngIf",0==t.collects.length)}}function xn(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}let Tn=(()=>{class o{constructor(t){this._modalService=t,this.isMultiSelect=!1,this.sort=1,this.pnNotesEventData=new e.vpe}ngOnInit(){}viewDetails(t,n){if("button"!=t.target.tagName.toLowerCase()){let s={pnOrderId:n};this._modalService.open(tn,{size:"xl"}).componentInstance.data=s}}collectOrder(t){this.pnNotesEventData.emit({viewDetails:t})}downloadInvoices(t){if(t)this.pnNotesEventData.emit({invoices:t});else{const n=this._modalService.open(C.i);n.componentInstance.type="error",n.componentInstance.messageError=[{errorMessageEn:"No invoices to download"}]}}sortByPnOrderNo(){this.isMultiSelect||(this.sort=3==this.sort?1:2==this.sort?3:2,this.pnNotesEventData.emit({sort:this.sort}))}sortByPnBook(){this.isMultiSelect||(this.sort=5==this.sort?1:4==this.sort?5:4,this.pnNotesEventData.emit({sort:this.sort}))}sortByCustomer(){this.isMultiSelect||(this.sort=7==this.sort?1:6==this.sort?7:6,this.pnNotesEventData.emit({sort:this.sort}))}sortByDueDate(){this.isMultiSelect||(this.sort=9==this.sort?1:8==this.sort?9:8,this.pnNotesEventData.emit({sort:this.sort}))}sortByLowAmount(){this.isMultiSelect||(this.sort=11==this.sort?1:10==this.sort?11:10,this.pnNotesEventData.emit({sort:this.sort}))}sortByHighAmount(){this.isMultiSelect||(this.sort=13==this.sort?1:12==this.sort?13:12,this.pnNotesEventData.emit({sort:this.sort}))}sortByStatus(){this.isMultiSelect||(this.sort=15==this.sort?1:14==this.sort?15:14,this.pnNotesEventData.emit({sort:this.sort}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["promissory-notes"]],inputs:{collects:"collects",data:"data"},outputs:{pnNotesEventData:"pnNotesEventData"},decls:5,vars:2,consts:[[1,"row"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[1,"card-table"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled","click"],[4,"ngIf"],[1,"btn","btn-act",3,"disabled"],["class","cursor-pointer",3,"click",4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"cursor-pointer",3,"click"],[1,"d-flex","flex-column"],[1,"fw-500"],[1,"last-td"],[4,"ngIf","ngIfElse"],["notPartial",""],[1,"d-flex","gap-2"],["id","clt",1,"btn","btn-collect",3,"click"],[1,"btn","btn-collect",3,"click"],["elseBlock",""],["canCollect",""],[1,"btn","btn-collect",3,"disabled"],["class","btn btn-collect",3,"disabled","click",4,"ngIf"],[1,"btn","btn-collect",3,"disabled","click"],[1,"not-found"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Cn,46,17,"div",1),e.TgZ(2,"div",2),e.YNc(3,xn,2,0,"ng-template",null,3,e.W1O),e.qZA()()),2&t){const i=e.MAs(4);e.xp6(1),e.Q6J("ngIf",n.collects)("ngIfElse",i)}},dependencies:[a.sg,a.O5,f.N,x.w,a.JJ,a.uU],styles:[".input-checkbox[_ngcontent-%COMP%]{height:20px;width:20px!important;cursor:pointer}.btn-collect[_ngcontent-%COMP%]{background-color:#dc3545;font-size:14px;color:#fff;font-weight:600;padding:8px 15px;white-space:nowrap}.btn-collect.btn.disabled[_ngcontent-%COMP%], .btn-collect.btn[_ngcontent-%COMP%]:disabled{background:#f1f3f3!important;color:#9b9b9b!important;border:1px solid #f1f3f3;cursor:initial}"]}),o})();function Zn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.openMultiCollectionModal())}),e._uU(1,"Multi Collect"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",(null==t.checkedItems?null:t.checkedItems.length)<=0||0==t.customerId)}}function bn(o,l){if(1&o&&(e.TgZ(0,"th"),e._uU(1,"Select "),e._UZ(2,"br"),e._uU(3),e.qZA()),2&o){const t=e.oxw(2);e.xp6(3),e.Oqu(t.isFilteredByCustomer?"Orders":"Customer")}}function yn(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",19)(2,"i",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("active",2==t.sort),e.xp6(1),e.ekj("active",3==t.sort)}}function An(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",19)(2,"i",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("active",4==t.sort),e.xp6(1),e.ekj("active",5==t.sort)}}function Nn(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",19)(2,"i",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("active",6==t.sort),e.xp6(1),e.ekj("active",7==t.sort)}}function In(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",19)(2,"i",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("active",8==t.sort),e.xp6(1),e.ekj("active",9==t.sort)}}function On(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",19)(2,"i",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("active",10==t.sort),e.xp6(1),e.ekj("active",11==t.sort)}}function kn(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",19)(2,"i",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("active",12==t.sort),e.xp6(1),e.ekj("active",13==t.sort)}}function Sn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",29)(1,"input",30),e.NdJ("change",function(){e.CHM(t);const i=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.filterCustomerById(i))}),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("id","filterCustomer"))}function qn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",29)(1,"input",31),e.NdJ("change",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.handleCheckBoxChange())})("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2).$implicit;return e.KtG(s.checked=i)}),e.qZA()()}if(2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("id","filterCustomer")("ngModel",t.checked)}}function Un(o,l){if(1&o&&(e.TgZ(0,"td"),e.YNc(1,Sn,2,1,"div",27),e.YNc(2,qn,2,2,"ng-template",null,28,e.W1O),e.qZA()),2&o){const t=e.MAs(3),n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!n.isFilteredByCustomer)("ngIfElse",t)}}function Dn(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",32)(2,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.collectOrder(i))}),e._uU(3,"Collect"),e.qZA(),e.TgZ(4,"button",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.downloadInvoices(null==i?null:i.invoices))}),e._uU(5,"View Receipt"),e.qZA()(),e.BQk()}}function wn(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.downloadInvoices(null==i?null:i.invoices))}),e._uU(2,"View Receipt"),e.qZA(),e.BQk()}}function Mn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4).$implicit,s=e.oxw(2);return e.KtG(s.downloadInvoices(null==i?null:i.invoices))}),e._uU(1,"View Receipt"),e.qZA()}}function Pn(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"button",37),e._uU(2,"Collect"),e.qZA(),e.YNc(3,Mn,2,0,"button",38),e.BQk()),2&o){const t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("disabled",10002==(null==t?null:t.status)||10006==(null==t?null:t.status)),e.xp6(2),e.Q6J("ngIf",null==t?null:t.invoices)}}function Jn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3).$implicit,s=e.oxw(2);return e.KtG(s.collectOrder(i))}),e._uU(1,"Collect"),e.qZA()}}function Fn(o,l){if(1&o&&(e.YNc(0,Pn,4,2,"ng-container",25),e.YNc(1,Jn,2,0,"ng-template",null,36,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw(2).$implicit;e.Q6J("ngIf",10002==(null==n?null:n.status)||10006==(null==n?null:n.status))("ngIfElse",t)}}function Rn(o,l){if(1&o&&(e.YNc(0,wn,3,0,"ng-container",25),e.YNc(1,Fn,3,2,"ng-template",null,35,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw().$implicit;e.Q6J("ngIf",10004==(null==n?null:n.status))("ngIfElse",t)}}function Qn(o,l){if(1&o&&(e.TgZ(0,"tr",21),e.YNc(1,Un,4,2,"td",12),e.TgZ(2,"td")(3,"span"),e._uU(4),e.qZA()(),e.TgZ(5,"td")(6,"span"),e._uU(7),e.qZA()(),e.TgZ(8,"td")(9,"div",22)(10,"span"),e._uU(11),e.qZA(),e.TgZ(12,"span",23),e._uU(13),e.qZA()()(),e.TgZ(14,"td")(15,"span"),e._uU(16),e.ALo(17,"date"),e.qZA()(),e.TgZ(18,"td")(19,"span"),e._uU(20),e.ALo(21,"number"),e.qZA()(),e.TgZ(22,"td")(23,"span"),e._uU(24),e.qZA()(),e.TgZ(25,"td",24),e.YNc(26,Dn,6,0,"ng-container",25),e.YNc(27,Rn,3,2,"ng-template",null,26,e.W1O),e.qZA()()),2&o){const t=l.$implicit,n=e.MAs(28),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.isMultiSelect),e.xp6(3),e.Oqu(null==t?null:t.transferFeesOrderId),e.xp6(3),e.Oqu(null==t?null:t.orderOpportunityCardNo),e.xp6(4),e.Oqu(null==t||null==t.customer?null:t.customer.customerName),e.xp6(2),e.Oqu(null==t||null==t.customer?null:t.customer.mobile),e.xp6(3),e.hij(" ",e.xi3(17,10,null==t?null:t.createdAt,"mediumDate")," "),e.xp6(4),e.hij("",e.xi3(21,13,null==t?null:t.feesAmount,"2.3-3")," JOD"),e.xp6(4),e.Oqu(null==t||null==t.statusObj[0]?null:t.statusObj[0].statusName),e.xp6(2),e.Q6J("ngIf",10005==t.status)("ngIfElse",n)}}function Gn(o,l){1&o&&(e.TgZ(0,"div",39),e._UZ(1,"app-not-found"),e.qZA())}function Bn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",4)(2,"div",5)(3,"label",6),e._uU(4,"Multi select"),e.qZA(),e.TgZ(5,"input",7),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.isMultiSelect=i)})("change",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.checkAll(i))}),e.qZA()(),e.YNc(6,Zn,2,1,"button",8),e.qZA(),e.TgZ(7,"div",9)(8,"div",10)(9,"table",11)(10,"thead")(11,"tr"),e.YNc(12,bn,4,1,"th",12),e.TgZ(13,"th",13)(14,"span")(15,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByOrderId())}),e._uU(16," Order No. "),e.YNc(17,yn,3,4,"ng-container",12),e.qZA()()(),e.TgZ(18,"th",13)(19,"span")(20,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByOpportunityNo())}),e._uU(21," Opportunity No. "),e.YNc(22,An,3,4,"ng-container",12),e.qZA()()(),e.TgZ(23,"th",13)(24,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByCustomer())}),e._uU(25," Customer Name "),e.YNc(26,Nn,3,4,"ng-container",12),e.qZA()(),e.TgZ(27,"th",13)(28,"span")(29,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByDate())}),e._uU(30," Date "),e.YNc(31,In,3,4,"ng-container",12),e.qZA()()(),e.TgZ(32,"th",13)(33,"span")(34,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByFeesAmount())}),e._uU(35," Fees Amount "),e.YNc(36,On,3,4,"ng-container",12),e.qZA()()(),e.TgZ(37,"th",13)(38,"span")(39,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByStatus())}),e._uU(40," Status "),e.YNc(41,kn,3,4,"ng-container",12),e.qZA()()(),e.TgZ(42,"th",13)(43,"button",15),e._uU(44," Action "),e.qZA()()()(),e.TgZ(45,"tbody"),e.YNc(46,Qn,29,16,"tr",16),e.qZA()()(),e.YNc(47,Gn,2,0,"div",17),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.isMultiSelect),e.xp6(1),e.Q6J("ngIf",t.isMultiSelect),e.xp6(6),e.Q6J("ngIf",t.isMultiSelect),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.Q6J("ngIf",!t.isMultiSelect),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.Q6J("ngIf",!t.isMultiSelect),e.xp6(2),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.Q6J("ngIf",!t.isMultiSelect),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.Q6J("ngIf",!t.isMultiSelect),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.Q6J("ngIf",!t.isMultiSelect),e.xp6(3),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(2),e.Q6J("ngIf",!t.isMultiSelect),e.xp6(2),e.Q6J("disabled",0==(null==t.collects?null:t.collects.length)),e.xp6(3),e.Q6J("ngForOf",t.collects),e.xp6(1),e.Q6J("ngIf",0==t.collects.length)}}function Yn(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}let jn=(()=>{class o{constructor(t){this._modalService=t,this.sort=1,this.transferFeesEventData=new e.vpe,this.checkedItems=[],this.customerId=0,this.isFilteredByCustomer=!1,this.isMultiSelect=!1,this.collectionOrderNum=7006}ngOnChanges(t){t.data?.currentValue&&this.resetMultiSelectProps(),t.collects?.currentValue&&(this.checkedItems=this.collects.filter(n=>n.checked))}ngOnInit(){}checkAll(t){t.target.checked?this.transferFeesEventData.emit({isMultiSelect:!0}):(this.transferFeesEventData.emit({resetCustomerId:!0}),this.isFilteredByCustomer=!1)}handleCheckBoxChange(){this.checkedItems=this.collects.filter(s=>s.checked);let t=0,n=0,i=[];this.checkedItems.forEach(s=>{t+=s.feesAmount,n+=s.feesAmount,i.push(s.transferFeesOrderId)}),this.multiCollectData={grandAmount:t,remainingAmount:+n.toFixed(3),orderCollectionType:this.collectionOrderNum,customerName:this.checkedItems[0]?.customer.customerName,isMultiCollect:!0,orderNo:i.toString()},console.log(this.checkedItems),console.log(this.multiCollectData)}filterCustomerById(t){this.isFilteredByCustomer=!0,this.customerId=t?.customer?.customerId,this.transferFeesEventData.emit({customerId:this.customerId,pageNo:0})}resetMultiSelectProps(){this.multiCollectData=null,this.isFilteredByCustomer=!1,this.checkedItems=[],this.isMultiSelect=!1,this.customerId=0}openMultiCollectionModal(){this.handleCheckBoxChange(),this.transferFeesEventData.emit({multiCollectData:this.multiCollectData})}collectOrder(t){this.transferFeesEventData.emit({item:t,collectPayment:!0})}downloadInvoices(t){if(t)this.transferFeesEventData.emit({invoices:t});else{const n=this._modalService.open(C.i);n.componentInstance.type="error",n.componentInstance.messageError=[{errorMessageEn:"No invoices to download"}]}}sortByOrderId(){this.isMultiSelect||(this.sort=3==this.sort?1:2==this.sort?3:2,this.transferFeesEventData.emit({sort:this.sort}))}sortByOpportunityNo(){this.isMultiSelect||(this.sort=5==this.sort?1:4==this.sort?5:4,this.transferFeesEventData.emit({sort:this.sort}))}sortByCustomer(){this.isMultiSelect||(this.sort=7==this.sort?1:6==this.sort?7:6,this.transferFeesEventData.emit({sort:this.sort}))}sortByDate(){this.isMultiSelect||(this.sort=9==this.sort?1:8==this.sort?9:8,this.transferFeesEventData.emit({sort:this.sort}))}sortByFeesAmount(){this.isMultiSelect||(this.sort=11==this.sort?1:10==this.sort?11:10,this.transferFeesEventData.emit({sort:this.sort}))}sortByStatus(){this.isMultiSelect||(this.sort=13==this.sort?1:12==this.sort?13:12,this.transferFeesEventData.emit({sort:this.sort}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["transfer-fees"]],inputs:{collects:"collects",data:"data"},outputs:{transferFeesEventData:"transferFeesEventData"},features:[e.TTD],decls:5,vars:2,consts:[[1,"row"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[1,"d-flex","align-items-center","gap-2"],[1,"d-flex","align-items-center","gap-1"],["for","allCheck",1,"fw-600"],["id","allCheck","type","checkbox",1,"ms-1","form-check-input","input-checkbox",3,"ngModel","ngModelChange","change"],["class","btn btn-collect",3,"disabled","click",4,"ngIf"],[1,"card-table"],[1,"table-responsive"],[1,"table"],[4,"ngIf"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"btn","btn-act",3,"disabled"],["class","cursor-pointer",4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"btn","btn-collect",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"cursor-pointer"],[1,"d-flex","flex-column"],[1,"fw-500"],[1,"last-td"],[4,"ngIf","ngIfElse"],["notPartial",""],["class","d-flex align-itmes-center gap-1",4,"ngIf","ngIfElse"],["multiCheck",""],[1,"d-flex","align-itmes-center","gap-1"],["type","checkbox",1,"form-check-input","input-checkbox",3,"id","change"],["type","checkbox",1,"form-check-input","input-checkbox",3,"id","ngModel","change","ngModelChange"],[1,"d-flex","gap-2"],["id","clt",1,"btn","btn-collect",3,"click"],[1,"btn","btn-collect",3,"click"],["elseBlock",""],["canCollect",""],[1,"btn","btn-collect",3,"disabled"],["class","btn btn-collect",3,"click",4,"ngIf"],[1,"not-found"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Bn,48,18,"div",1),e.TgZ(2,"div",2),e.YNc(3,Yn,2,0,"ng-template",null,3,e.W1O),e.qZA()()),2&t){const i=e.MAs(4);e.xp6(1),e.Q6J("ngIf",n.collects)("ngIfElse",i)}},dependencies:[a.sg,a.O5,c.Wl,c.JJ,c.On,f.N,x.w,a.JJ,a.uU],styles:[".input-checkbox[_ngcontent-%COMP%]{height:20px;width:20px!important;cursor:pointer}.btn-collect[_ngcontent-%COMP%]{background-color:#dc3545;font-size:14px;color:#fff;font-weight:600;padding:8px 15px;white-space:nowrap}.btn-collect.btn.disabled[_ngcontent-%COMP%], .btn-collect.btn[_ngcontent-%COMP%]:disabled{background:#f1f3f3!important;color:#9b9b9b!important;border:1px solid #f1f3f3;cursor:initial}"]}),o})();function En(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){const i=e.CHM(t),s=i.$implicit,r=i.index,_=e.oxw();return e.KtG(_.chooseBranch(s,r))}),e._uU(1),e.qZA()}if(2&o){const t=l.$implicit,n=e.oxw();e.ekj("active",(null==t?null:t.lookupId)==n.select),e.xp6(1),e.hij(" ",null==t?null:t.lookupName," ")}}function Ln(o,l){if(1&o&&e._uU(0),2&o){const t=l.item,n=e.oxw(4);e.hij(" ",n.registerBranchId==(null==t?null:t.branchId)&&"Own Branch - "+t.branchName||t.branchName," ")}}function Vn(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"ng-select",27),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(3);return e.KtG(s.branchId=i)})("change",function(i){e.CHM(t);const s=e.oxw(3);return e.KtG(s.filterBybranchId(i))})("clear",function(i){e.CHM(t);const s=e.oxw(3);return e.KtG(s.clearBranch(i))}),e.YNc(2,Ln,1,1,"ng-template",28),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("disabled",!t.isForAll)("items",t.branches)("ngModel",t.branchId)}}function Hn(o,l){1&o&&(e.TgZ(0,"span",29),e._uU(1,"Branch is requried"),e.qZA())}function $n(o,l){1&o&&e._uU(0),2&o&&e.hij(" ",l.item.categoryName," ")}function Kn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"ng-select",30),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(3);return e.KtG(s.catId=i)})("change",function(i){e.CHM(t);const s=e.oxw(3);return e.KtG(s.filterBycategoryId(i))})("clear",function(i){e.CHM(t);const s=e.oxw(3);return e.KtG(s.clearCategory(i))}),e.YNc(1,$n,1,1,"ng-template",28),e.qZA()}if(2&o){const t=e.oxw(3);e.s9C("placeholder","Search by payment category"),e.Q6J("items",t.categories)("ngModel",t.catId)}}function zn(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"div",16)(2,"div",24),e.YNc(3,Vn,3,3,"ng-container",11),e.YNc(4,Hn,2,0,"span",25),e.YNc(5,Kn,2,3,"ng-template",null,26,e.W1O),e.qZA()(),e.BQk()),2&o){const t=e.MAs(6),n=e.oxw(2);e.xp6(3),e.Q6J("ngIf",7004!=n.select&&7005!=n.select)("ngIfElse",t),e.xp6(1),e.Q6J("ngIf",null==n.branchId&&7004!==n.select&&7005!==n.select)}}function Wn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"button",31),e._UZ(3,"i",19),e.qZA(),e.TgZ(4,"input",32),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.bankCardNo=i)})("keyup",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.searchByBankCardNo(i))}),e.qZA(),e.TgZ(5,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.clearBankCardSearch())}),e._UZ(6,"i",22),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.s9C("placeholder",(7009==t.select?"Order No":7006==t.select&&"Bank Card No...")||"Inhouse Card No..."),e.Q6J("ngModel",t.bankCardNo),e.xp6(1),e.Q6J("hidden",0==t.bankCardNo.length)}}function Xn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"button",18),e._UZ(3,"i",19),e.qZA(),e.TgZ(4,"input",34),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.vin=i)})("keyup",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.searchVin(i))}),e.qZA(),e.TgZ(5,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.removeSearchVin())}),e._UZ(6,"i",22),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.s9C("placeholder",(7008==t.select?"PN Order No":7009==t.select&&"Opportuinty Id")||"Search by vin..."),e.Q6J("ngModel",t.vin),e.xp6(1),e.Q6J("hidden",0==t.vin.length)}}function eo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"button",35),e._UZ(3,"i",19),e.qZA(),e.TgZ(4,"input",36),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.amount=i)})("keyup",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.searchAmount(i))}),e.qZA(),e.TgZ(5,"button",37),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.removeSearchAmount())}),e._UZ(6,"i",22),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.amount),e.xp6(1),e.Q6J("hidden",""==t.amount)}}function to(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",24)(2,"ng-select",38),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.userId=i)})("change",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.filterByUserId(i))})("clear",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.clearUser(i))}),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("placeholder",t.isService?"Search by service advisor ... ":"Search by Sales Consultant ...")("items",t.users)("ngModel",t.userId)}}function no(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.serarchByOrderNo.setValue(""))}),e._UZ(1,"i",22),e.qZA()}}function oo(o,l){if(1&o&&(e.TgZ(0,"div",16)(1,"div",17)(2,"button",39),e._UZ(3,"i",19),e.qZA(),e._UZ(4,"input",40),e.YNc(5,no,2,0,"button",41),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("formControl",t.serarchByOrderNo),e.xp6(1),e.Q6J("ngIf",t.serarchByOrderNo.value)}}function io(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",24)(2,"button",43),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.openModalToAddCollection())}),e._uU(3),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(3),e.hij(" ",7004==t.select?"Add New Collection":"Add Customer Payment"," ")}}function lo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"i",47),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.clearSearchByDate())}),e.qZA()}}const so=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}};function ro(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",44),e.YNc(1,lo,1,0,"i",45),e.TgZ(2,"input",46),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.dateFilter=i)})("bsValueChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.handleSearchByDate(i))}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.dateFilter),e.xp6(1),e.Q6J("ngModel",t.dateFilter)("bsConfig",e.DdM(3,so))}}function co(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",48)(2,"ng-select",49),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.orderStatus=i)})("change",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.filterByOrderStatus(i))}),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("items",t.statusList)("ngModel",t.orderStatus)}}function ao(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.serarchByOrderNo.setValue(""))}),e._UZ(1,"i",22),e.qZA()}}function _o(o,l){if(1&o&&(e.TgZ(0,"div",16)(1,"div",17)(2,"button",39),e._UZ(3,"i",19),e.qZA(),e._UZ(4,"input",50),e.YNc(5,ao,2,0,"button",41),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("formControl",t.serarchByOrderNo),e.xp6(1),e.Q6J("ngIf",t.serarchByOrderNo.value)}}function uo(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.YNc(1,zn,7,3,"ng-container",7),e.YNc(2,Wn,7,3,"div",15),e.TgZ(3,"div",16)(4,"div",17)(5,"button",18),e._UZ(6,"i",19),e.qZA(),e.TgZ(7,"input",20),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.searchText=i)})("keyup",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.search(i))}),e.qZA(),e.TgZ(8,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeSearch())}),e._UZ(9,"i",22),e.qZA()()(),e.YNc(10,Xn,7,3,"div",15),e.YNc(11,eo,7,2,"div",15),e.YNc(12,to,3,3,"div",15),e.YNc(13,oo,6,2,"div",15),e.YNc(14,io,4,1,"div",15),e.YNc(15,ro,3,4,"div",23),e.YNc(16,co,3,2,"ng-container",7),e.YNc(17,_o,6,2,"div",15),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",7009!==t.select&&7008!==t.select),e.xp6(1),e.Q6J("ngIf",7006==t.select||7007==t.select||7009==t.select),e.xp6(5),e.Q6J("ngModel",t.searchText),e.xp6(1),e.Q6J("hidden",0==t.searchText.length),e.xp6(2),e.Q6J("ngIf",7004!==t.select&&7005!==t.select),e.xp6(1),e.Q6J("ngIf",7008==t.select),e.xp6(1),e.Q6J("ngIf",7004!==t.select&&7005!==t.select&&7009!==t.select&&7008!==t.select),e.xp6(1),e.Q6J("ngIf",7004==t.select||7005==t.select),e.xp6(1),e.Q6J("ngIf",7004==t.select||7005==t.select),e.xp6(1),e.Q6J("ngIf",7009==t.select||7008==t.select),e.xp6(1),e.Q6J("ngIf",7004!=t.select&&7005!=t.select),e.xp6(1),e.Q6J("ngIf",7001==t.select||7002==t.select||7003==t.select)}}function po(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"transfer-fees",55),e.NdJ("transferFeesEventData",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.transferFeesEventData(i))}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("data",t.data)("collects",t.collects)}}function mo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"promissory-notes",56),e.NdJ("pnNotesEventData",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.pnNotesEventData(i))}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("data",t.data)("collects",t.collects)}}function go(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"customer-payment-table",57),e.NdJ("eventData",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.customerPaymentEvent(i))}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("collects",t.collects)}}function ho(o,l){if(1&o&&(e.ynx(0,51),e.YNc(1,po,1,2,"transfer-fees",52),e.YNc(2,mo,1,2,"promissory-notes",53),e.YNc(3,go,1,1,"customer-payment-table",54),e.BQk()),2&o){const t=e.oxw();e.Q6J("ngSwitch",t.select),e.xp6(1),e.Q6J("ngSwitchCase",7009),e.xp6(1),e.Q6J("ngSwitchCase",7008)}}function fo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.openMultiCollectionModal())}),e._uU(1,"Multi Collect"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",(null==t.checkedItems?null:t.checkedItems.length)<=0)}}function vo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",58)(1,"div",59)(2,"label",60),e._uU(3,"Multi select"),e.qZA(),e.TgZ(4,"input",61),e.NdJ("change",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.checkAll(i))})("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.isMultiSelect=i)}),e.qZA()(),e.YNc(5,fo,2,1,"button",62),e.qZA()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.isMultiSelect),e.xp6(1),e.Q6J("ngIf",t.isMultiSelect)}}function Co(o,l){if(1&o&&(e.TgZ(0,"p",64),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.isSameInvoiceType)}}function xo(o,l){if(1&o&&(e.TgZ(0,"th"),e._uU(1,"Select "),e._UZ(2,"br"),e._uU(3),e.qZA()),2&o){const t=e.oxw(3);e.xp6(3),e.Oqu(t.isFilteredByCustomer?"Orders":"Customer")}}function To(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",76)(2,"i",77),e.BQk()),2&o){const t=e.oxw(4);e.xp6(1),e.ekj("active",12==t.sort),e.xp6(1),e.ekj("active",1==t.sort)}}function Zo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.sortByDate())}),e._uU(2," Order Date "),e.YNc(3,To,3,4,"ng-container",7),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.Q6J("ngIf",!n.isMultiSelect)}}function bo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.sortByReceipt())}),e._uU(2," Receipt No. "),e._UZ(3,"i",76)(4,"i",77),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",2==n.sort),e.xp6(1),e.ekj("active",3==n.sort)}}function yo(o,l){if(1&o&&(e.TgZ(0,"th",69)(1,"span")(2,"button",78),e._uU(3," Order No "),e.qZA()()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length))}}function Ao(o,l){if(1&o&&(e.TgZ(0,"th",69)(1,"span")(2,"button",78),e._uU(3," Working Card "),e.qZA()()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length))}}function No(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.sortByCustomerOrder())}),e._uU(2," Customer "),e._UZ(3,"i",76)(4,"i",77),e.qZA(),e.BQk()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",13==n.sort),e.xp6(1),e.ekj("active",14==n.sort)}}function Io(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",76)(2,"i",77),e.BQk()),2&o){const t=e.oxw(4);e.xp6(1),e.ekj("active",2==t.sort),e.xp6(1),e.ekj("active",3==t.sort)}}function Oo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.sortByCustomer())}),e._uU(1," Customer "),e.YNc(2,Io,3,4,"ng-container",7),e.qZA()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.Q6J("ngIf",!n.isMultiSelect)}}function ko(o,l){if(1&o&&(e.TgZ(0,"th",69)(1,"button",78),e._uU(2,"Cost Center"),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length))}}function So(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",76)(2,"i",77),e.BQk()),2&o){const t=e.oxw(4);e.xp6(1),e.ekj("active",4==t.sort),e.xp6(1),e.ekj("active",5==t.sort)}}function qo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.sortByType())}),e._uU(2," Service Advisor "),e.YNc(3,So,3,4,"ng-container",7),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.Q6J("ngIf",!n.isMultiSelect)}}function Uo(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",76)(2,"i",77),e.BQk()),2&o){const t=e.oxw(4);e.xp6(1),e.ekj("active",4==t.sort),e.xp6(1),e.ekj("active",5==t.sort)}}function Do(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.sortByType())}),e._uU(2," Sales Consultant "),e.YNc(3,Uo,3,4,"ng-container",7),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.Q6J("ngIf",!n.isMultiSelect)}}function wo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.sortByCategory())}),e._uU(2," Category "),e._UZ(3,"i",76)(4,"i",77),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",6==n.sort),e.xp6(1),e.ekj("active",7==n.sort)}}function Mo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.sortByDateOrder())}),e._uU(2," Date "),e._UZ(3,"i",76)(4,"i",77),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",8==n.sort),e.xp6(1),e.ekj("active",9==n.sort)}}function Po(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",76)(2,"i",77),e.BQk()),2&o){const t=e.oxw(4);e.xp6(1),e.ekj("active",6==t.sort),e.xp6(1),e.ekj("active",7==t.sort)}}function Jo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.sortByStatus())}),e._uU(2," Status "),e.YNc(3,Po,3,4,"ng-container",7),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.Q6J("ngIf",!n.isMultiSelect)}}function Fo(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",76)(2,"i",77),e.BQk()),2&o){const t=e.oxw(4);e.xp6(1),e.ekj("active",8==t.sort),e.xp6(1),e.ekj("active",9==t.sort)}}function Ro(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"th",69)(1,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.sortByTax())}),e._uU(2," Tax Amount "),e.YNc(3,Fo,3,4,"ng-container",7),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.Q6J("ngIf",!n.isMultiSelect)}}function Qo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.sortByAmount())}),e._uU(2," Total Amount "),e._UZ(3,"i",76)(4,"i",77),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",10==n.sort),e.xp6(1),e.ekj("active",11==n.sort)}}function Go(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"i",76)(2,"i",77),e.BQk()),2&o){const t=e.oxw(4);e.xp6(1),e.ekj("active",10==t.sort),e.xp6(1),e.ekj("active",11==t.sort)}}function Bo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"button",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.sortByPrice())}),e._uU(2," Grand Amount "),e.YNc(3,Go,3,4,"ng-container",7),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.Q6J("ngIf",!n.isMultiSelect)}}function Yo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",85)(1,"input",86),e.NdJ("change",function(){e.CHM(t);const i=e.oxw(2).$implicit,s=e.oxw(3);return e.KtG(s.filterCustomerById(i))}),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("id","filterCustomer"))}function jo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",85)(1,"input",87),e.NdJ("change",function(){e.CHM(t);const i=e.oxw(5);return e.KtG(i.handleCheckBoxChange())})("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2).$implicit;return e.KtG(s.checked=i)}),e.qZA()()}if(2&o){const t=e.oxw(2),n=t.$implicit,i=t.index;e.xp6(1),e.Q6J("ngModel",n.checked)("id",i)}}function Eo(o,l){if(1&o&&(e.TgZ(0,"td"),e.YNc(1,Yo,2,1,"div",83),e.YNc(2,jo,2,2,"ng-template",null,84,e.W1O),e.qZA()),2&o){const t=e.MAs(3),n=e.oxw(4);e.xp6(1),e.Q6J("ngIf",!n.isFilteredByCustomer)("ngIfElse",t)}}function Lo(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.collectionId," ")}}function Vo(o,l){1&o&&e._UZ(0,"span")}function Ho(o,l){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu((null==t?null:t.servicesSalesOrderNo)||(null==t?null:t.sparePartsSalesOrderOpportunityNo))}}function $o(o,l){if(1&o&&e._uU(0),2&o){const t=e.oxw(2).$implicit;e.Oqu(t.directPaymentSalesOrderOpportunityNo)}}function Ko(o,l){if(1&o&&(e.TgZ(0,"td"),e.YNc(1,Ho,2,1,"ng-container",11),e.YNc(2,$o,1,1,"ng-template",null,88,e.W1O),e.qZA()),2&o){const t=e.MAs(3),n=e.oxw(4);e.xp6(1),e.Q6J("ngIf",7002!==n.select)("ngIfElse",t)}}function zo(o,l){1&o&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function Wo(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,zo,2,0,"span",7),e.qZA()),2&o){const t=l.$implicit,n=l.last;e.xp6(1),e.hij("",t," "),e.xp6(1),e.Q6J("ngIf",!n)}}function Xo(o,l){if(1&o&&(e.TgZ(0,"td"),e.YNc(1,Wo,3,2,"span",73),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",null==t?null:t.workingCards)}}function ei(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"td",79),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.ViewCollectDetails(i))}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t.costCenter?null:t.costCenter.costCenterName)}}function ti(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t.serviceAdvisor?null:t.serviceAdvisor.serviceAdvisorName," ")}}function ni(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t.salesConsultant?null:t.salesConsultant.salesConsultantName," ")}}function oi(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t.category?null:t.category.categoryName," ")}}function ii(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.createdAt," d MMM y h:mm a")," ")}}function li(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t.statusObj[0]?null:t.statusObj[0].statusName," ")}}function si(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"td",79),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.ViewCollectDetails(i))}),e._uU(1),e.ALo(2,"number"),e.ALo(3,"number"),e.qZA()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",7003==n.select&&e.xi3(2,1,t.totalTaxAmount,"2.3-3")||e.xi3(3,4,t.taxAmount,"2.3-3")," JOD ")}}function ri(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.totalAmount,"2.3-3")," JOD ")}}function ci(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.grandAmount,"2.3-3")," JOD ")}}function ai(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,s=e.oxw(3);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.receipt))}),e._uU(1,"View Receipt"),e.qZA()}}function _i(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",89)(2,"button",90),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.openModalPaymentTypes(i))}),e._uU(3,"Collect"),e.qZA(),e.TgZ(4,"button",90),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.summaryInvoice))}),e._uU(5),e.qZA(),e.YNc(6,ai,2,0,"button",91),e.TgZ(7,"img",92),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.generateInvoiceOrReceipt(s.select,"receipt",i))}),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw(4);e.xp6(5),e.Oqu(7001==t.select||7002==t.select||7003==t.select?"View Summary":"View Invoice"),e.xp6(1),e.Q6J("ngIf",7001==t.select||7002==t.select||7003==t.select)}}function ui(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"i",99),e.NdJ("click",function(){e.CHM(t),e.oxw();const i=e.MAs(10);return e.KtG(i.click())}),e.qZA()}}function di(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"i",100),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3).$implicit,s=e.oxw(3);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.signedInvoice))}),e.qZA()}}function pi(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",90),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3).$implicit,s=e.oxw(3);return e.KtG(s.downloadInvoices((null==i||null==i.invoices?null:i.invoices.invoices)||(null==i||null==i.invoices?null:i.invoices.clientCopy),"invoice",i))}),e._uU(2),e.qZA(),e.TgZ(3,"img",101),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3).$implicit,s=e.oxw(3);return e.KtG(s.generateInvoiceOrReceipt(s.select,7004==s.select?"receipt":"invoice",i))}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(6);e.xp6(2),e.hij(" ",7004==t.select?"View Receipt":"View Invoice"," "),e.xp6(1),e.s9C("ngbTooltip",7004==t.select?"Regenerate Receipt":"Regenerate Invoice")}}function mi(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(5).$implicit,s=e.oxw(3);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.receipt))}),e._uU(1,"View Receipt"),e.qZA()}}function gi(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"img",92),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(5).$implicit,s=e.oxw(3);return e.KtG(s.generateInvoiceOrReceipt(s.select,"receipt",i))}),e.qZA()}}function hi(o,l){if(1&o&&(e.ynx(0),e.YNc(1,mi,2,0,"button",91),e.YNc(2,gi,1,0,"img",102),e.BQk()),2&o){const t=e.oxw(4).$implicit;e.xp6(1),e.Q6J("ngIf",null==t||null==t.invoices?null:t.invoices.receipt),e.xp6(1),e.Q6J("ngIf",null==t||null==t.invoices?null:t.invoices.receipt)}}function fi(o,l){if(1&o&&(e.ynx(0)(1,51),e.YNc(2,hi,3,2,"ng-container",95),e.BQk()()),2&o){const t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngSwitch",null==t?null:t.invoiceTypeId),e.xp6(1),e.Q6J("ngSwitchCase",11)}}function vi(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4).$implicit,s=e.oxw(3);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.receipt))}),e._uU(1,"View Receipt"),e.qZA()}}function Ci(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"img",92),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4).$implicit,s=e.oxw(3);return e.KtG(s.generateInvoiceOrReceipt(s.select,"receipt",i))}),e.qZA()}}function xi(o,l){if(1&o&&(e.ynx(0),e.YNc(1,vi,2,0,"button",91),e.YNc(2,Ci,1,0,"img",102),e.BQk()),2&o){const t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngIf",null==t||null==t.invoices?null:t.invoices.receipt),e.xp6(1),e.Q6J("ngIf",null==t||null==t.invoices?null:t.invoices.receipt)}}function Ti(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3).$implicit,s=e.oxw(3);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.summaryInvoice))}),e._uU(1," View Summary "),e.qZA()}}function Zi(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",89),e.YNc(2,ui,1,0,"i",93),e.YNc(3,di,1,0,"i",94),e.YNc(4,pi,4,2,"ng-container",7),e.ynx(5,51),e.YNc(6,fi,3,2,"ng-container",95),e.YNc(7,xi,3,2,"ng-container",96),e.BQk(),e.YNc(8,Ti,2,0,"button",91),e.TgZ(9,"input",97,98),e.NdJ("change",function(i){e.CHM(t);const s=e.oxw(2).$implicit,r=e.oxw(3);return e.KtG(r.onSelectFile(i,s))}),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(2),e.Q6J("ngIf","credit"==(null==t||null==t.invoiceType?null:t.invoiceType.toLowerCase())&&!(null!=t&&null!=t.invoices&&t.invoices.signedInvoice)),e.xp6(1),e.Q6J("ngIf","credit"==(null==t||null==t.invoiceType?null:t.invoiceType.toLowerCase())&&(null==t||null==t.invoices?null:t.invoices.signedInvoice)),e.xp6(1),e.Q6J("ngIf",7002!==n.select),e.xp6(1),e.Q6J("ngSwitch",n.select),e.xp6(1),e.Q6J("ngSwitchCase",7001),e.xp6(2),e.Q6J("ngIf",7001==n.select||7002==n.select||7003==n.select)}}function bi(o,l){if(1&o&&(e.TgZ(0,"button",106),e._uU(1,"Collect"),e.qZA()),2&o){const t=e.oxw(5).$implicit;e.Q6J("disabled",10002==(null==t?null:t.status)||10006==(null==t?null:t.status))}}function yi(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(5).$implicit,s=e.oxw(3);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.invoices,"invoice",i))}),e._uU(1,"View Invoice"),e.qZA()}}function Ai(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(5).$implicit,s=e.oxw(3);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.receipt))}),e._uU(1,"View Receipt"),e.qZA()}}function Ni(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(5).$implicit,s=e.oxw(3);return e.KtG(s.downloadInvoices(null==i||null==i.invoices?null:i.invoices.summaryInvoice))}),e._uU(1,"View Summary"),e.qZA()}}function Ii(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"div",104),e.YNc(2,bi,2,1,"button",105),e.YNc(3,yi,2,0,"button",91),e.YNc(4,Ai,2,0,"button",91),e.YNc(5,Ni,2,0,"button",91),e.qZA(),e.BQk()),2&o){const t=e.oxw(4).$implicit;e.xp6(2),e.Q6J("ngIf",10002==(null==t?null:t.status)||10006==(null==t?null:t.status)),e.xp6(1),e.Q6J("ngIf",null==t?null:t.invoices),e.xp6(1),e.Q6J("ngIf",null==t||null==t.invoices?null:t.invoices.receipt),e.xp6(1),e.Q6J("ngIf",null==t||null==t.invoices?null:t.invoices.summaryInvoice)}}function Oi(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4).$implicit,s=e.oxw(3);return e.KtG(s.openModalPaymentTypes(i))}),e._uU(1,"Collect"),e.qZA()}}function ki(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Ii,6,4,"ng-container",11),e.YNc(2,Oi,2,0,"ng-template",null,103,e.W1O),e.BQk()),2&o){const t=e.MAs(3),n=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngIf",10002==(null==n?null:n.status)||10006==(null==n?null:n.status)||10007==(null==n?null:n.status))("ngIfElse",t)}}function Si(o,l){if(1&o&&e.YNc(0,ki,4,2,"ng-container",7),2&o){const t=e.oxw(5);e.Q6J("ngIf",7004!=t.select)}}function qi(o,l){if(1&o&&(e.YNc(0,Zi,11,6,"ng-container",11),e.YNc(1,Si,1,1,"ng-template",null,88,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw().$implicit;e.Q6J("ngIf",10004==(null==n||null==n.statusObj[0]?null:n.statusObj[0].statusId))("ngIfElse",t)}}function Ui(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.YNc(1,Eo,4,2,"td",7),e.TgZ(2,"td",79),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.ViewCollectDetails(s))}),e.YNc(3,Lo,2,1,"span",7),e.YNc(4,Vo,1,0,"span",7),e._uU(5),e.ALo(6,"date"),e.qZA(),e.YNc(7,Ko,4,2,"td",7),e.YNc(8,Xo,2,1,"td",7),e.TgZ(9,"td",79),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.ViewCollectDetails(s))}),e._uU(10),e.qZA(),e.YNc(11,ei,2,1,"td",80),e.TgZ(12,"td",79),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.ViewCollectDetails(s))}),e.YNc(13,ti,2,1,"span",7),e.YNc(14,ni,2,1,"span",7),e.YNc(15,oi,2,1,"span",7),e.qZA(),e.TgZ(16,"td",79),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.ViewCollectDetails(s))}),e.YNc(17,ii,3,4,"span",7),e.YNc(18,li,2,1,"span",7),e.qZA(),e.YNc(19,si,4,7,"td",80),e.TgZ(20,"td",79),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.ViewCollectDetails(s))}),e.YNc(21,ri,3,4,"span",7),e.YNc(22,ci,3,4,"span",7),e.qZA(),e.TgZ(23,"td",81),e.YNc(24,_i,8,2,"ng-container",11),e.YNc(25,qi,3,2,"ng-template",null,82,e.W1O),e.qZA()()}if(2&o){const t=l.$implicit,n=e.MAs(26),i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",(7001==i.select||7002==i.select||7003==i.select)&&i.isMultiSelect),e.xp6(2),e.Q6J("ngIf",7004==i.select),e.xp6(1),e.Q6J("ngIf",7004!=i.select),e.xp6(1),e.hij(" ",e.xi3(6,18,t.orderDate," d MMM y h:mm a")," "),e.xp6(2),e.Q6J("ngIf",7004!=i.select),e.xp6(1),e.Q6J("ngIf",7001==i.select),e.xp6(2),e.hij(" ",null==t.customer?null:t.customer.customerName," "),e.xp6(1),e.Q6J("ngIf",i.isService||7004==i.select),e.xp6(2),e.Q6J("ngIf",i.isService&&7004!==i.select),e.xp6(1),e.Q6J("ngIf",!i.isService&&7004!==i.select),e.xp6(1),e.Q6J("ngIf",!i.isService&&7004==i.select),e.xp6(2),e.Q6J("ngIf",7004==i.select),e.xp6(1),e.Q6J("ngIf",7004!=i.select),e.xp6(1),e.Q6J("ngIf",7004!=i.select),e.xp6(2),e.Q6J("ngIf",7004==i.select),e.xp6(1),e.Q6J("ngIf",7004!=i.select),e.xp6(2),e.Q6J("ngIf",10005==t.status&&(7001==i.select||7002==i.select||7003==i.select))("ngIfElse",n)}}function Di(o,l){1&o&&(e.TgZ(0,"div",107),e._UZ(1,"app-not-found"),e.qZA())}function wi(o,l){if(1&o&&(e.TgZ(0,"div",12)(1,"div",66)(2,"div",67)(3,"table",68)(4,"thead")(5,"tr"),e.YNc(6,xo,4,1,"th",7),e.TgZ(7,"th",69),e.YNc(8,Zo,4,2,"span",7),e.YNc(9,bo,5,5,"span",7),e.qZA(),e.YNc(10,yo,4,1,"th",70),e.YNc(11,Ao,4,1,"th",70),e.TgZ(12,"th",69),e.YNc(13,No,5,5,"ng-container",11),e.YNc(14,Oo,3,2,"ng-template",null,71,e.W1O),e.qZA(),e.YNc(16,ko,3,1,"th",70),e.TgZ(17,"th",69),e.YNc(18,qo,4,2,"span",7),e.YNc(19,Do,4,2,"span",7),e.YNc(20,wo,5,5,"span",7),e.qZA(),e.TgZ(21,"th",69),e.YNc(22,Mo,5,5,"span",7),e.YNc(23,Jo,4,2,"span",7),e.qZA(),e.YNc(24,Ro,4,2,"th",70),e.TgZ(25,"th",69),e.YNc(26,Qo,5,5,"span",7),e.YNc(27,Bo,4,2,"span",7),e.qZA(),e.TgZ(28,"th",69)(29,"button",72),e._uU(30," Action "),e.qZA()()()(),e.TgZ(31,"tbody"),e.YNc(32,Ui,27,21,"tr",73),e.qZA()()(),e.YNc(33,Di,2,0,"div",74),e.qZA()()),2&o){const t=l.$implicit,n=e.MAs(15),i=e.oxw(2);e.xp6(6),e.Q6J("ngIf",(7001==i.select||7002==i.select||7003==i.select)&&i.isMultiSelect),e.xp6(2),e.Q6J("ngIf",7004!=i.select),e.xp6(1),e.Q6J("ngIf",7004==i.select),e.xp6(1),e.Q6J("ngIf",7004!=i.select),e.xp6(1),e.Q6J("ngIf",7001==i.select),e.xp6(2),e.Q6J("ngIf",7004==i.select)("ngIfElse",n),e.xp6(3),e.Q6J("ngIf",i.isService||7004==i.select),e.xp6(2),e.Q6J("ngIf",i.isService&&7004!=i.select),e.xp6(1),e.Q6J("ngIf",!i.isService&&7004!=i.select),e.xp6(1),e.Q6J("ngIf",!i.isService&&7004==i.select),e.xp6(2),e.Q6J("ngIf",7004==i.select),e.xp6(1),e.Q6J("ngIf",7004!=i.select),e.xp6(1),e.Q6J("ngIf",7004!=i.select),e.xp6(2),e.Q6J("ngIf",7004==i.select),e.xp6(1),e.Q6J("ngIf",7004!=i.select),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==t.length)}}function Mi(o,l){if(1&o&&(e.ynx(0),e.YNc(1,wi,34,19,"div",65),e.BQk()),2&o){const t=e.oxw(),n=e.MAs(17);e.xp6(1),e.Q6J("ngIf",t.collects)("ngIfElse",n)}}function Pi(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function Ji(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",108)(2,"h6",109),e._uU(3," Showing "),e.TgZ(4,"span"),e._uU(5),e.qZA(),e._uU(6," from "),e.TgZ(7,"span"),e._uU(8),e.qZA(),e._uU(9," data "),e.qZA()(),e.TgZ(10,"div",108)(11,"ngb-pagination",110),e.NdJ("pageChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.pageNo=i)})("pageChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.pageChange(i))}),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(5),e.AsE("",6*t.pageNo-5," - ",6==(null==t.collects?null:t.collects.length)?6*t.pageNo:t.totalRecords,""),e.xp6(3),e.hij(" ",t.totalRecords," "),e.xp6(3),e.Q6J("collectionSize",t.totalRecordsCount)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}const Fi=[{path:"",component:(()=>{class o{constructor(t,n,i,s,r,_,p,U,G,Bi,Yi){this.collectService=t,this.router=n,this.headerService=i,this.sharedService=s,this.modalService=r,this._subjectService=_,this._commonService=p,this._datePipe=U,this._spinner=Bi,this._httpService=Yi,this.bankCardNo="",this.branches=[],this.tempBranches=[],this.searchText="",this.vin="",this.sort=1,this.branchTypes=[],this.branchId=0,this.categoryId="",this.catId=null,this.typeName="Showroom Branches",this.pageNo=1,this.serviceAdvisorId="",this.salesConsultantId="",this.titleOfPage=new e.vpe,this.isService=!0,this.checkedItems=[],this.isMultiSelect=!1,this.customerId=0,this.isFilteredByCustomer=!1,this.collects=[],this.isForAll=!1,this.dontEmitEvent=!1,this.isPageChanged=!1,this.dateObj={fromDate:"",toDate:""},this.dateFilter=null,this.orderStatus=null,this.statusList=[],this.tempStatusList=[],this.isBranchChanged=!1,this.subscription=new Rt.w0,this.serarchByOrderNo=new c.NI(""),this.isSameInvoiceType="",this.tabIndex=0,G.backdrop="static",G.keyboard=!1}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.headerService.setTitle("Collect"),this.categoryId="",this.amount="",this.getStausList(),localStorage.getItem("collectUserId")&&(this.userId=+localStorage.getItem("collectUserId"),this.serviceAdvisorId=localStorage.getItem("collectUserId"),this.salesConsultantId=localStorage.getItem("collectUserId")),localStorage.getItem("collectSearchText")&&(this.searchText=localStorage.getItem("collectSearchText")),localStorage.getItem("collectVin")&&(this.vin=localStorage.getItem("collectVin")),localStorage.getItem("collectBankCardNo")&&(this.bankCardNo=localStorage.getItem("collectBankCardNo")),this.GetRegisterDetails();let t=this._subjectService.isCollectionPaymentDone.subscribe(n=>{n&&this.GetRegisterDetails()});this.subscription.add(t),this.filterSerarchByOrderNo()}filterByOrderStatus(t){t?(this.orderStatus=t?.value,this.pageNo=1,this.loadDataWithCheck()):(this.pageNo=1,this.orderStatus=null,this.loadDataWithCheck())}generateInvoiceOrReceipt(t,n="",i){this._httpService._spinnerService.show();let s=new FormData;s.append("OrderCollectionType",t);let r="";"invoice"==n?t==Z.XQ.ServicesSalesOrders?(r=this._httpService.apiUrl.Regenerate.RegenerateOrderOrigionalInvoiceServiceOrder,s.append("OrderNo",i?.servicesSalesOrderNo)):t==Z.XQ.SparePartsSalesOrders&&(r=this._httpService.apiUrl.Regenerate.RegenerateOrigionalInvoiceSpareParts,s.append("OrderNo",i?.sparePartsSalesOrderOpportunityNo)):"receipt"==n&&(t==Z.XQ.ServicesSalesOrders?(r=this._httpService.apiUrl.Regenerate.RegenerateOrigionalReceiptServiceOrder,s.append("OrderNo",i?.servicesSalesOrderNo),s.append("isReplace",JSON.parse("false"))):t==Z.XQ.DirectPaymentSalesOrders?(r=this._httpService.apiUrl.Regenerate.RegenerateOrigionalReceiptDirectPayment,s.append("OrderNo",i?.directPaymentSalesOrderOpportunityNo)):t==Z.XQ.SparePartsSalesOrders?(r=this._httpService.apiUrl.Regenerate.RegenerateOrigionalReceiptSpareParts,s.append("OrderNo",i?.sparePartsSalesOrderOpportunityNo),s.append("isReplace",JSON.parse("false"))):t==Z.XQ.OtherRevenues&&(r=this._httpService.apiUrl.Regenerate.RegenerateORReceipt,s.append("OrderNo",i?.orderId))),this._httpService.post(r,s).subscribe({next:_=>{_.isSuccess&&(this.modalService.open(R,{centered:!0}).componentInstance.data={body:`Order ${n} generated successfully!`,otherData:{invoice:_.data,invoiceType:n,orderType:t}})},error:_=>{this.responseModal("error",_?.error?.errors)}}).add(()=>this._httpService._spinnerService.hide())}responseModal(t,n){const i=this.modalService.open(C.i);i.componentInstance.type=t,i.componentInstance.dismissOnlyActive=!0,"success"==t?i.componentInstance.message=n:i.componentInstance.messageError=n}getStausList(){this.collectService.getLookupsById(10).subscribe(t=>{this.tempStatusList=t.data.map(n=>({text:n?.name[0]?.lookupName,value:n?.id})),this.statusList=[...this.tempStatusList]})}pageChange(t){this.pageNo=t,this.isPageChanged=!0,this.loadDataWithCheck()}handleCheckBoxChange(){this.checkedItems=this.collects.filter(r=>r.checked);let t=0,n=0,i=0,s=[];this.checkedItems.forEach(r=>{t+=r.grandAmount,i+=r.remainingAmount||r.grandAmount,7001==this.collectionOrderNum?s.push(r.servicesSalesOrderNo):7002==this.collectionOrderNum?(s.push(r.directPaymentSalesOrderOpportunityNo),n+=r.minAmount):7003==this.collectionOrderNum&&s.push(r.sparePartsSalesOrderOpportunityNo)}),this.multiCollectData={grandAmount:t,remainingAmount:+i.toFixed(3),orderCollectionType:this.collectionOrderNum,customerName:this.checkedItems[0]?.customer.customerName,isMultiCollect:!0,orderNo:s.toString(),checkedItems:this.checkedItems,...7002==this.collectionOrderNum&&{minAmount:n}},console.log(this.checkedItems),console.log(this.multiCollectData)}resetMultiSelectProps(){this.customerId=0,this.multiCollectData=null,this.isFilteredByCustomer=!1,this.checkedItems=[],this.isPageChanged||(this.isMultiSelect=!1)}filterSerarchByOrderNo(){this.pageNo=1;let t=this.serarchByOrderNo.valueChanges.pipe((0,Qt.x)(),(0,Gt.b)(500)).subscribe(n=>{this.orderCollectionByOrderType()});this.subscription.add(t)}orderCollectionByOrderType(){7001==this.collectionOrderNum?this.GetServicesSalesOrders():7002==this.collectionOrderNum?this.GetDirectPaymentSalesOrders():7003==this.collectionOrderNum?this.GetSparePartsSalesOrders():7004==this.collectionOrderNum?this.GetOtherRevenues():7005==this.collectionOrderNum&&this.getCustomerPaymentsOrders()}filterCustomerById(t){this.isFilteredByCustomer=!0,this.customerId=t?.customer?.customerId,this.pageNo=1,7001==this.collectionOrderNum?this.GetServicesSalesOrders():7002==this.collectionOrderNum?this.GetDirectPaymentSalesOrders():7003==this.collectionOrderNum&&this.GetSparePartsSalesOrders(),this.customerId=0}openMultiCollectionModal(){let t=this.multiCollectData.checkedItems,n=t[0]?.invoiceType?.toLowerCase();if(!t.every(s=>s.invoiceType?.toLowerCase()==n))return this.isSameInvoiceType="You must select same invoice type order either cash or credit type",void setTimeout(()=>{this.isSameInvoiceType=""},5e3);this.multiCollectData={...this.multiCollectData,invoiceType:n},this.openModalPaymentTypes(this.multiCollectData)}checkAll(t){t.target.checked||(this.isPageChanged=!1,this.resetMultiSelectProps(),this.pageNo=1,7001==this.collectionOrderNum?this.GetServicesSalesOrders():7002==this.collectionOrderNum?this.GetDirectPaymentSalesOrders():7003==this.collectionOrderNum&&this.GetSparePartsSalesOrders())}downloadInvoices(t,n,i){if("invoice"==n&&7003==this.select){let s=i?.sparePartsSalesOrderOpportunityNo||i?.directPaymentSalesOrderOpportunityNo||i?.servicesSalesOrderNo;const r=new FormData;r.append("OrderNo",s),this.collectService.viewOrderOrigionalInvoice(r).subscribe(_=>{_.isSuccess&&this._commonService.downloadInvoices({invoices:_.data})},_=>{let p=_?.error?.errors;this.successModal("error",p)})}else if("invoice"==n&&7001==this.select){let s=i?.servicesSalesOrderNo;const r=new FormData;r.append("OrderNo",s),this.collectService.viewOrderOrigionalInvoiceServiceOrder(r).subscribe(_=>{_.isSuccess&&this._commonService.downloadInvoices({invoices:_.data})},_=>{let p=_?.error?.errors;this.successModal("error",p)})}else this._commonService.downloadInvoices({invoices:t})}onSelectFile(t,n){let i=n?.sparePartsSalesOrderOpportunityNo||n?.directPaymentSalesOrderOpportunityNo||n?.servicesSalesOrderNo;t.target.files&&t.target.files[0]&&this._commonService.fileToBase64(t.target.files[0]).then(s=>{const r=new FormData;r.append("OrderNo",i),r.append("file",s.file||""),this._spinner.show(),this.collectService.uploadSignedInvoice(r).subscribe(_=>{_.isSuccess&&(this._spinner.hide(),this.successModal("success","Signed invoice uploaded successfully!"),this.loadDataWithCheck())})})}successModal(t,n){const i=this.modalService.open(C.i,{size:"md"});i.componentInstance.type=t,"success"==t?i.componentInstance.message=n:"error"==t&&(i.componentInstance.messageError=n)}addbranch(){this.router.navigateByUrl("/addbranch"),this.headerService.setTitle("Collect > Add Collect")}ViewCollectDetails(t){localStorage.setItem("collectionOrderNum",this.collectionOrderNum.toString()),this.branchId&&localStorage.setItem("collectBranchId",this.branchId?.toString()),this.userId&&localStorage.setItem("collectUserId",this.userId?.toString()),this.searchText&&localStorage.setItem("collectSearchText",this.searchText),this.vin&&localStorage.setItem("collectVin",this.vin),this.bankCardNo&&localStorage.setItem("collectBankCardNo",this.bankCardNo),7001==this.collectionOrderNum?(this.headerService.setTitle("Collect > View services sales order"),this.router.navigateByUrl("/collect/details/service/"+t.servicesSalesOrderNo)):7002==this.collectionOrderNum?(this.headerService.setTitle("Collect > Direct payment sales order"),this.router.navigateByUrl("/collect/details/payment/"+t.directPaymentSalesOrderOpportunityNo),this.GetDirectPaymentSalesOrders()):7003==this.collectionOrderNum?(this.router.navigateByUrl("/collect/details/spare/"+t.sparePartsSalesOrderOpportunityNo),this.headerService.setTitle("Collect > Spare parts sales order")):7004==this.collectionOrderNum?this.openModalDetailsRevenue(t):7006==this.collectionOrderNum?(this.router.navigateByUrl("/collect/details/undertaking/"+t.banksUnderTakingSalesOrderOpportunityNo),this.headerService.setTitle("Collect > Bank Undertaking Orders List")):7007==this.collectionOrderNum?(this.router.navigateByUrl("/collect/details/housefinancing/"+t?.inHouceFinancingSalesOrderOpportunityNo),this.headerService.setTitle("Collect > In House Financing")):7008==this.collectionOrderNum&&(this.router.navigateByUrl("/collect/collect-pn-order/"+t?.pnOrderId),this.headerService.setTitle("Collect > PN Order"))}openModalPaymentTypes(t){const n=this.modalService.open(y.k,{modalDialogClass:"payment-modal-size"});n.componentInstance.detailsItem=t,n.componentInstance.collectionType=this.collectionOrderNum,n.componentInstance.sendtoLoadData.subscribe(i=>{n.dismiss(),this.GetRegisterDetails(),(7001==this.select||7002==this.select||7003==this.select)&&(7001==this.select?this._subjectService.collectedOrder.next({orderId:t?.servicesSalesOrderNo}):7002==this.select?this._subjectService.collectedOrder.next({orderId:t?.directPaymentSalesOrderOpportunityNo}):7003==this.select&&this._subjectService.collectedOrder.next({orderId:t?.sparePartsSalesOrderOpportunityNo}))}),localStorage.setItem("collectionOrderNum",this.collectionOrderNum.toString())}openModalToAddCollection(){const t=this.modalService.open(y.k,{modalDialogClass:"payment-modal-size"});t.componentInstance.collectionType=this.collectionOrderNum,t.componentInstance.sendtoLoadData.subscribe(n=>{t.dismiss(),this.GetRegisterDetails()}),localStorage.setItem("collectionOrderNum",this.collectionOrderNum.toString())}openModalDetailsRevenue(t){const n=this.modalService.open(F,{size:"lg"});n.componentInstance.detailsRevenue=t,n.componentInstance.collectionType=this.collectionOrderNum,n.componentInstance.sendtoLoadData.subscribe(i=>{this.modalService.dismissAll(),this.GetRegisterDetails()}),localStorage.setItem("collectionOrderNum",this.collectionOrderNum.toString())}openDetailsModal(t){this.collectService.getCustomerPaymentsOrderDetails(t?.orderId).subscribe(n=>{this.modalService.open(Ft,{size:"lg",keyboard:!0,backdrop:!0}).componentInstance.details=n})}openModalPayment(){}chooseBranch(t,n){this.resetMultiSelectProps(),localStorage.removeItem("collectionOrderNum"),localStorage.removeItem("collectUserId"),localStorage.removeItem("collectSearchText"),localStorage.removeItem("collectVin"),localStorage.removeItem("collectBranchId"),localStorage.removeItem("collectBankCardNo"),this.orderStatus=null,this.catId=null,this.vin="",this.userId=null,this.pageNo=1,this.searchText="",this.bankCardNo="",this.select=t?.lookupId,this.tabIndex=n,this.collectionOrderNum=t?.lookupId,this.serarchByOrderNo.setValue(""),this.branchId=null,this.collects=[],7001==t?.lookupId?(this.isService=!0,this.serviceAdvisorId="",this.roleId=32,this.getUsers(),this.getBranches(3002)):7002==t?.lookupId?(this.isService=!1,this.roleId=3,this.salesConsultantId="",this.collects=[],this.getUsers(),this.getBranches(3001)):7003==t?.lookupId?(this.isService=!1,this.roleId=33,this.salesConsultantId="",this.collects=[],this.getUsers(),this.getBranches(3003)):7004==t?.lookupId?(this.isRevenus=!1,this.getCategories(),this.GetOtherRevenues(),this.totalRecordsCount=0,this.collects=[]):7005==t?.lookupId?(this.getCategories(),this.getCustomerPaymentsOrders(),this.totalRecordsCount=0,this.collects=[]):7006==t?.lookupId||7007==t?.lookupId?(this.isService=!1,this.roleId=3,this.salesConsultantId="",this.collects=[],this.getUsers(),this.getBranches(3001)):7008==t?.lookupId?(this.isService=!1,this.roleId=3,this.collects=[],this.getPNOrdersBooks(),this.getPNOrderStatus()):7009==t?.lookupId&&(this.isService=!1,this.roleId=3,this.collects=[],this.getTransferFeesOrders()),this.statusList=[...this.tempStatusList]}getPNOrderStatus(){this._httpService.get(`${this._httpService.apiUrl.Lookup.GetAdminLookup}?lookupTypeId=35&pageSize=1000&active=1001`,"admin").subscribe({next:t=>{this.statusList=t.data.map(n=>({text:n?.name[0]?.lookupName,value:n?.id}))}})}GetRegisterDetails(){return this.collectService.GetRegisterDetails(this.sharedService.getRegister.registerObj?.id).subscribe(t=>{if(t){this.registers=t.data,this.collectionOrder=this.registers.collectionOrder,this.tempBranches=this.registers.registerBranches.map(i=>({...i,branchType:i?.branchTypes[0]?.branchTypeId}));let n=[];this.collectionOrder.forEach(i=>{let s=i.order[0];n=[...n,{...s}]}),this.sortedCollectionOrder=n.sort((i,s)=>i.lookupId-s.lookupId),this.registers.collectForAllBranches&&(this.isForAll=!0),localStorage.getItem("collectionOrderNum")?(this.collectionOrderNum=+localStorage.getItem("collectionOrderNum"),this.select=+localStorage.getItem("collectionOrderNum"),this.loadDataWithCheck()):(this.collectionOrderNum=this.sortedCollectionOrder[0]?.lookupId,this.select=this.sortedCollectionOrder[0]?.lookupId,this.loadDataWithCheck())}})}getBranches(t){this.branches=[],this.branches=[...this.tempBranches.filter(n=>n.branchType==t)],this.registerBranchId=this.registers.branchId,this.isForAll?this.isBranchChanged||(this.branchId=this.branches[0].branchId):this.branchId=this.branches.findIndex(i=>i.branchId==this.registerBranchId)>=0?this.registerBranchId:null,null!==this.branchId&&(7001==this.collectionOrderNum?this.GetServicesSalesOrders():7002==this.collectionOrderNum?this.GetDirectPaymentSalesOrders():7003==this.collectionOrderNum?this.GetSparePartsSalesOrders():7006==this.collectionOrderNum?this.getBanksUnderTakingSalesOrders():7007==this.collectionOrderNum&&this.getInHouceFinancingSalesOrders())}GetServicesSalesOrders(){return this.collectService.GetServicesSalesOrders(this.serarchByOrderNo.value,this.orderStatus,this.branchId,this.searchText,this.vin,this.serviceAdvisorId,this.customerId,this.sort,this.pageNo).subscribe(t=>{t&&(this.collects=t.data,this.collects=this.collects.map(n=>({...n,checked:!0})),this.isFilteredByCustomer&&(this.handleCheckBoxChange(),this.checkedItems=this.collects),this.totalRecordsCount=t.info?.totalRecordsCount,this.totalAllRecordsCount=t.info?.totalAllRecordsCount,this.totalRecords=t.info?.totalRecordsCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=v.w6(this.pagin))})}GetDirectPaymentSalesOrders(){return this.collectService.GetDirectPaymentSalesOrders(this.serarchByOrderNo.value,this.orderStatus,this.branchId,this.searchText,this.vin,this.salesConsultantId,this.customerId,this.sort,this.pageNo).subscribe(t=>{t&&(this.collects=t.data,this.collects=this.collects.map(n=>({...n,checked:!0})),this.isFilteredByCustomer&&(this.handleCheckBoxChange(),this.checkedItems=this.collects),this.totalAllRecordsCount=t.info?.totalAllRecordCount,this.totalRecordsCount=t.info?.totalRecordCount,this.totalRecords=t.info?.totalRecordCount,console.log(t,this.totalAllRecordsCount,this.totalRecordsCount,this.totalRecords),this.pagin=Math.ceil(this.totalRecords/6),this.pages=v.w6(this.pagin))})}GetSparePartsSalesOrders(){return this.collectService.GetSparePartsSalesOrders(this.serarchByOrderNo.value,this.orderStatus,this.branchId,this.searchText,this.vin,this.salesConsultantId,this.customerId,this.sort,this.pageNo).subscribe(t=>{t&&(this.collects=t.data,this.collects=this.collects.map(n=>({...n,checked:!0})),this.isFilteredByCustomer&&(this.handleCheckBoxChange(),this.checkedItems=this.collects),this.totalRecordsCount=t.info?.totalRecordsCount,this.totalAllRecordsCount=t.info?.totalAllRecordsCount,this.totalRecords=t.info?.totalRecordsCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=v.w6(this.pagin))})}getInHouceFinancingSalesOrders(){this.collectService.getInHouceFinancingSalesOrders(this.orderStatus,this.branchId,this.searchText,this.vin,this.salesConsultantId,this.bankCardNo,this.customerId,this.sort,this.pageNo).subscribe(t=>{t&&(this.collects=[...t.data],this.collects=this.collects.map(n=>({...n,checked:!0})),console.log(t),this.totalAllRecordsCount=t.info?.totalAllRecordsCount,this.totalRecordsCount=t.info?.totalRecordsCount,this.totalRecords=t.info?.totalRecordsCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=v.w6(this.pagin))})}getBanksUnderTakingSalesOrders(){return this.collectService.getBanksUnderTakingSalesOrders(this.orderStatus,this.branchId,this.searchText,this.vin,this.salesConsultantId,this.bankCardNo,this.customerId,this.sort,this.pageNo).subscribe(t=>{t&&(this.collects=[...t.data],this.collects=this.collects.map(n=>({...n,checked:!0})),console.log(t),this.totalAllRecordsCount=t.info?.totalAllRecordsCount,this.totalRecordsCount=t.info?.totalRecordsCount,console.log(this.totalRecordsCount),this.totalRecords=t.info?.totalRecordsCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=v.w6(this.pagin))})}getTransferFeesOrders(){let t=`?status=${this.orderStatus||""}&customer=${this.searchText}&TransferOrderId=${this.bankCardNo}&OpportunityNo=${this.vin}&FromDate=${this.dateObj?.fromDate}&ToDate=${this.dateObj?.toDate}&sort=${this.sort}`;t+=this.customerId>0?`&customerId=${this.customerId}&PageNo=0&PageSize=1000`:`&PageNo=${this.pageNo-1}&PageSize=6`,this.collectService.getTransferFeesOrders(t).subscribe(n=>{n?.isSuccess&&(this.collects=[...n.data],this.collects=this.collects.map(i=>({...i,checked:!0})),this.totalAllRecordsCount=n.info?.totalRecordsCount,this.totalRecordsCount=n.info?.totalRecordsCount,this.totalRecords=n.info?.totalRecordsCount,console.log(n))})}getPNOrdersBooks(){this.collectService.getPNOrdersBooks(`?status=${this.orderStatus||""}&Customer=${this.searchText}&PnNo=${this.vin}&PnBookNo=${this.amount}&FromDate=${this.dateObj?.fromDate}&ToDate=${this.dateObj?.toDate}&sort=${this.sort}&PageNo=${this.pageNo-1}&PageSize=6`).subscribe(n=>{this.collects=[...n.data],this.collects=this.collects.map(i=>({...i,checked:!0})),this.totalAllRecordsCount=n.info?.totalRecordsCount,this.totalRecordsCount=n.info?.totalRecordsCount,this.totalRecords=n.info?.totalRecordsCount,console.log(n)})}GetOtherRevenues(){return this.collectService.GetOtherRevenues(this.serarchByOrderNo.value,this.categoryId,this.searchText,this.amount,this.sort,this.pageNo).subscribe(t=>{t&&(this.collects=t.data,this.totalRecordsCount=t.totalRecordCount,this.totalAllRecordsCount=t.totalRecordCount,this.totalRecords=t.totalRecordCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=v.w6(this.pagin))})}getCustomerPaymentsOrders(){this.collectService.getCustomerPaymentsOrders(this.serarchByOrderNo.value,this.categoryId,this.searchText,this.amount,this.sort,this.pageNo).subscribe(t=>{t&&(this.collects=t.data,console.log(this.collects),this.totalRecordsCount=t.totalRecordCount,this.totalAllRecordsCount=t.totalRecordCount,this.totalRecords=t.totalRecordCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=v.w6(this.pagin))})}customerPaymentEvent(t){t?.invoices&&this.downloadInvoices(t.invoices),t?.customerPaymentDetails&&this.openDetailsModal(t?.customerPaymentDetails),t?.sort&&(this.sort=t?.sort,this.loadDataWithCheck())}houseFinanceEventData(t){t?.isMultiSelect&&(this.isMultiSelect=!0),t?.sort&&(this.sort=t?.sort,this.loadDataWithCheck()),t?.collectPayment&&this.openModalPaymentTypes(t?.item),t?.invoices&&this.downloadInvoices(t?.invoices?.clientCopy),t?.customerId>0&&(this.isFilteredByCustomer=!0,this.customerId=t?.customerId,this.pageNo=t?.pageNo,this.getInHouceFinancingSalesOrders()),t?.resetCustomerId&&(this.customerId=0,this.pageNo=1,this.getInHouceFinancingSalesOrders(),this.isFilteredByCustomer=!1,this.isMultiSelect=!1),t?.multiCollectData?.remainingAmount>0&&this.openModalPaymentTypes(t?.multiCollectData),t?.viewDetails&&this.ViewCollectDetails(t?.viewDetails)}bankUnderTakingEventData(t){t?.isMultiSelect&&(this.isMultiSelect=!0),t?.sort&&(this.sort=t?.sort,this.loadDataWithCheck()),t?.collectPayment&&this.openModalPaymentTypes(t?.item),t?.invoices&&this.downloadInvoices(t.invoices),t?.customerId>0&&(this.isFilteredByCustomer=!0,this.customerId=t?.customerId,this.pageNo=t?.pageNo,this.getBanksUnderTakingSalesOrders()),t?.resetCustomerId&&(this.customerId=0,this.pageNo=1,this.getBanksUnderTakingSalesOrders(),this.isFilteredByCustomer=!1,this.isMultiSelect=!1),t?.multiCollectData?.remainingAmount>0&&this.openModalPaymentTypes(t?.multiCollectData),t?.viewDetails&&this.ViewCollectDetails(t?.viewDetails)}searchByBankCardNo(t){const n=t.target.value;n.length>=1&&(this.bankCardNo=n,this.pageNo=1,this.loadDataWithCheck()),0==n.length&&this.loadDataWithCheck()}clearBankCardSearch(){this.pageNo=1,this.bankCardNo="",this.sort=1,this.loadDataWithCheck()}transferFeesEventData(t){t?.isMultiSelect&&(this.isMultiSelect=!0),t?.sort&&(this.sort=t?.sort,this.loadDataWithCheck()),t?.collectPayment&&this.openModalPaymentTypes(t?.item),t?.invoices&&this.downloadInvoices(t.invoices?.clientCopy),t?.customerId>0&&(this.isFilteredByCustomer=!0,this.customerId=t?.customerId,this.pageNo=t?.pageNo,this.getTransferFeesOrders()),t?.resetCustomerId&&(this.customerId=0,this.pageNo=1,this.getTransferFeesOrders(),this.isFilteredByCustomer=!1,this.isMultiSelect=!1),t?.multiCollectData?.remainingAmount>0&&this.openModalPaymentTypes(t?.multiCollectData),t?.viewDetails&&this.ViewCollectDetails(t?.viewDetails)}handleSearchByDate(t){t&&(this.dateObj.fromDate=this._datePipe.transform(t[0],"yyyy-MM-dd"),this.dateObj.toDate=this._datePipe.transform(t[1],"yyyy-MM-dd")),this.pageNo=1,7009==this.collectionOrderNum?this.getTransferFeesOrders():7008==this.collectionOrderNum&&this.getPNOrdersBooks()}clearSearchByDate(){this.pageNo=1,this.dateObj={fromDate:"",toDate:""},this.dateFilter=null,7009==this.collectionOrderNum?this.getTransferFeesOrders():7008==this.collectionOrderNum&&this.getPNOrdersBooks()}pnNotesEventData(t){t?.sort&&(this.sort=t?.sort,this.loadDataWithCheck()),t?.collectPayment&&this.openModalPaymentTypes(t?.item),t?.invoices&&this.downloadInvoices(t?.invoices),t?.multiCollectData?.remainingAmount>0&&this.openModalPaymentTypes(t?.multiCollectData),t?.viewDetails&&this.ViewCollectDetails(t?.viewDetails)}getCategories(){7004==this.collectionOrderNum?this.collectService.GetCategories().subscribe(t=>{t&&(this.categories=t.data)}):this.collectService.getCustomerPaymentCategories().subscribe(t=>{t&&(this.categories=t.data)})}getUsers(){return this.collectService.getUsers(this.roleId).subscribe(t=>{t&&(this.users=t.data)})}loadDataWithCheck(){this.resetMultiSelectProps(),7001==this.collectionOrderNum?(this.isService=!0,this.roleId=32,this.getBranches(3002),this.getUsers()):7002==this.collectionOrderNum?(this.isService=!1,this.roleId=3,this.getBranches(3001),this.getUsers()):7003==this.collectionOrderNum?(this.isService=!1,this.getBranches(3003),this.roleId=33,this.getUsers()):7004==this.collectionOrderNum?(this.isService=!1,this.getCategories(),this.GetOtherRevenues()):7005==this.collectionOrderNum?(this.isService=!1,this.getCategories(),this.getCustomerPaymentsOrders()):7006==this.collectionOrderNum||7007==this.collectionOrderNum?(this.isService=!1,this.roleId=3,this.getBranches(3001),this.getUsers()):7008==this.collectionOrderNum?(this.isService=!1,this.getPNOrdersBooks()):7009==this.collectionOrderNum&&(this.isService=!1,this.getBranches(3001),this.getTransferFeesOrders())}search(t){const n=t.target.value;n.length>=3&&(this.searchText=n,this.pageNo=1,this.loadDataWithCheck()),0==n.length&&this.loadDataWithCheck()}removeSearch(){this.searchText="",this.pageNo=1,this.sort=1,this.loadDataWithCheck()}searchVin(t){const n=t.target.value;n.length>=1&&(this.vin=n,this.pageNo=1,this.loadDataWithCheck()),0==n.length&&this.loadDataWithCheck()}removeSearchVin(){this.vin="",this.pageNo=1,this.sort=1,this.loadDataWithCheck()}searchAmount(t){const n=t.target.value;n.length>=1?(this.amount=n,this.pageNo=1,this.loadDataWithCheck()):(this.amount="",this.pageNo=1,this.sort=1,this.loadDataWithCheck())}removeSearchAmount(){this.amount="",this.pageNo=1,this.sort=1,this.loadDataWithCheck()}sortByCustomer(){this.isMultiSelect||(this.sort=3==this.sort?1:2==this.sort?3:2,this.loadDataWithCheck())}sortByCustomerOrder(){this.isMultiSelect||(this.sort=14==this.sort?1:13==this.sort?14:13,this.GetOtherRevenues())}sortByType(){this.isMultiSelect||(this.sort=5==this.sort?1:4==this.sort?5:4,this.loadDataWithCheck())}sortByCategory(){this.sort=7==this.sort?1:6==this.sort?7:6,this.GetOtherRevenues()}sortByDateOrder(){this.sort=9==this.sort?1:8==this.sort?9:8,this.GetOtherRevenues()}sortByAmount(){this.sort=11==this.sort?1:10==this.sort?11:10,this.GetOtherRevenues()}sortByStatus(){this.isMultiSelect||(this.sort=7==this.sort?1:6==this.sort?7:6,this.loadDataWithCheck())}sortByTax(){this.isMultiSelect||(this.sort=9==this.sort?1:8==this.sort?9:8,this.loadDataWithCheck())}sortByPrice(){this.isMultiSelect||(this.sort=11==this.sort?1:10==this.sort?11:10,this.loadDataWithCheck())}sortByDate(){this.isMultiSelect||(this.sort=12!=this.sort?12:12==this.sort?1:12,this.loadDataWithCheck())}sortByReceipt(){this.sort=3==this.sort?1:2==this.sort?3:2,this.GetOtherRevenues()}sortByActivation(){this.sort=6==this.sort?7:6,this.getBranches()}setPage(t){this.pageNo=t,this.loadDataWithCheck()}filterBybranchId(t){t?(this.isBranchChanged=!0,this.branchId=t.branchId,this.pageNo=1,this.resetMultiSelectProps(),this.data={...this.data,resetMulitSelect:!0},this.loadDataWithCheck()):this.collects=[]}clearBranch(t){this.branchId=null,this.resetMultiSelectProps(),this.data={...this.data,resetMulitSelect:!0}}filterBycategoryId(t){t?(this.categoryId=t.categoryId,this.pageNo=1,7004==this.collectionOrderNum?this.GetOtherRevenues():this.getCustomerPaymentsOrders()):this.categoryId=""}clearCategory(t){this.categoryId="",7004==this.collectionOrderNum?this.GetOtherRevenues():this.getCustomerPaymentsOrders()}filterByUserId(t){t&&this.branchId?(this.pageNo=1,7002==this.collectionOrderNum?(this.isService=!1,this.salesConsultantId=t?.userId,this.GetDirectPaymentSalesOrders()):7003==this.collectionOrderNum?(this.isService=!1,this.salesConsultantId=t?.userId,this.GetSparePartsSalesOrders()):7001==this.collectionOrderNum?(this.isService=!0,this.serviceAdvisorId=t?.userId,this.GetServicesSalesOrders()):7006==this.collectionOrderNum?(this.isService=!1,this.salesConsultantId=t?.userId,this.getBanksUnderTakingSalesOrders()):7007==this.collectionOrderNum&&(this.isService=!1,this.salesConsultantId=t?.userId,this.getInHouceFinancingSalesOrders())):this.collects=[]}clearUser(t){this.serviceAdvisorId="",this.salesConsultantId="",localStorage.removeItem("collectUserId"),this.branchId&&(7002==this.collectionOrderNum?(this.isService=!1,this.salesConsultantId="",this.GetDirectPaymentSalesOrders()):7003==this.collectionOrderNum?(this.isService=!1,this.salesConsultantId="",this.GetSparePartsSalesOrders()):7001==this.collectionOrderNum?(this.isService=!0,this.serviceAdvisorId="",this.GetServicesSalesOrders()):7006==this.collectionOrderNum?(this.isService=!1,this.salesConsultantId="",this.getBanksUnderTakingSalesOrders()):7007==this.collectionOrderNum&&(this.isService=!1,this.salesConsultantId="",this.getInHouceFinancingSalesOrders()))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.k),e.Y36(m.F0),e.Y36(Bt.r),e.Y36(g.F),e.Y36(d.FF),e.Y36(k._),e.Y36(I.v),e.Y36(a.uU),e.Y36(d.NM),e.Y36(Q.t2),e.Y36(S.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-collect"]],outputs:{titleOfPage:"titleOfPage"},decls:19,vars:8,consts:[[1,"card-page"],[1,"row"],[1,"col-11"],[1,"branchesTypes"],["class","btn",3,"active","click",4,"ngFor","ngForOf"],[1,"col-1"],[1,"branch-total"],[4,"ngIf"],["elseTableBlock",""],["class","d-flex align-items-center gap-2",4,"ngIf"],["class","primary-clr mt-2",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[1,"btn",3,"click"],["class","col-md-3 col-sm-6",4,"ngIf"],[1,"col-md-3","col-sm-6"],[1,"input-group","mb-3","search-box"],["type","button","id","button-addon1",1,"btn"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search by customer name / phone number",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],["class","col-3 position-relative",4,"ngIf"],[1,"form-group","mb-3"],["class","primary-clr font-14 mt-2",4,"ngIf"],["showCategoryBlock",""],["placeholder","Search by branch","bindLabel","branchName","bindValue","branchId",3,"disabled","items","ngModel","ngModelChange","change","clear"],["ng-label-tmp",""],[1,"primary-clr","font-14","mt-2"],["id","catId","bindLabel","categoryName","bindValue","categoryId",3,"placeholder","items","ngModel","ngModelChange","change","clear"],["type","button","id","button-addon3",1,"btn"],["type","text","appDecimalNumber","",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup"],["type","button","id","button-addon4",1,"btn",3,"hidden","click"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup"],["type","button","id","button-addon2",1,"btn"],["type","number","placeholder","PN Book No",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon2",1,"btn",3,"hidden","click"],["id","userId","bindLabel","fullName","bindValue","userId",3,"placeholder","items","ngModel","ngModelChange","change","clear"],["type","button",1,"btn"],["type","text","numbersOnly","","placeholder","Receipt No",1,"form-control",3,"formControl"],["class","btn","type","button",3,"click",4,"ngIf"],["type","button",1,"btn",3,"click"],[1,"btn","btn-add-collection","float-end",3,"click"],[1,"col-3","position-relative"],["class","fa-solid fa-times","style","position:absolute;top:15px;right:30px;cursor:pointer",3,"click",4,"ngIf"],["type","text","placeholder","Select Date","bsDaterangepicker","","placement","left",1,"form-control",2,"height","46px",3,"ngModel","bsConfig","ngModelChange","bsValueChange"],[1,"fa-solid","fa-times",2,"position","absolute","top","15px","right","30px","cursor","pointer",3,"click"],[1,"col-3","mb-3"],["placeholder","Status","bindLabel","text","bindValue","value",3,"items","ngModel","ngModelChange","change"],["type","text","numbersOnly","","placeholder","Order No",1,"form-control",3,"formControl"],[3,"ngSwitch"],[3,"data","collects","transferFeesEventData",4,"ngSwitchCase"],[3,"data","collects","pnNotesEventData",4,"ngSwitchCase"],[3,"collects","eventData",4,"ngSwitchDefault"],[3,"data","collects","transferFeesEventData"],[3,"data","collects","pnNotesEventData"],[3,"collects","eventData"],[1,"d-flex","align-items-center","gap-2"],[1,"d-flex","align-items-center","gap-1"],["for","allCheck",1,"fw-600"],["id","allCheck","type","checkbox",1,"ms-1","form-check-input","input-checkbox",3,"ngModel","change","ngModelChange"],["class","btn btn-collect",3,"disabled","click",4,"ngIf"],[1,"btn","btn-collect",3,"disabled","click"],[1,"primary-clr","mt-2"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"card-table"],[1,"table-responsive"],[1,"table"],["scope","col"],["scope","col",4,"ngIf"],["elseSortBlock",""],[1,"btn","btn-act",3,"disabled"],[4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn",3,"disabled"],[3,"click"],[3,"click",4,"ngIf"],[1,"last-td"],["notPartial",""],["class","d-flex align-itmes-center gap-1",4,"ngIf","ngIfElse"],["multiCheck",""],[1,"d-flex","align-itmes-center","gap-1"],["type","checkbox",1,"form-check-input","input-checkbox",3,"id","change"],["type","checkbox",1,"form-check-input","input-checkbox",3,"ngModel","id","change","ngModelChange"],["elseBlock",""],[1,"d-flex","gap-2","align-items-center"],[1,"btn","btn-collect",3,"click"],["class","btn btn-collect",3,"click",4,"ngIf"],["ngbTooltip","Regenerate Receipt","height","40","width","40","src","/assets/images/regen-invoice.png",1,"cursor-pointer",3,"click"],["placement","bottom","ngbTooltip","Upload Signed Invoice","class","fas fa-upload cursor-pointer primary-clr fa-2x",3,"click",4,"ngIf"],["placement","bottom","ngbTooltip","Download Signed Invoice","class","fas fa-download cursor-pointer primary-clr fa-2x",3,"click",4,"ngIf"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","file","accept",".png,.jpg,.jpeg,.pdf","id","uploadFile","hidden","",1,"form-control",3,"change"],["fileUpload",""],["placement","bottom","ngbTooltip","Upload Signed Invoice",1,"fas","fa-upload","cursor-pointer","primary-clr","fa-2x",3,"click"],["placement","bottom","ngbTooltip","Download Signed Invoice",1,"fas","fa-download","cursor-pointer","primary-clr","fa-2x",3,"click"],["height","40","width","40","src","/assets/images/regen-invoice.png",1,"cursor-pointer",3,"ngbTooltip","click"],["class","cursor-pointer","ngbTooltip","Regenerate Receipt","height","40","width","40","src","/assets/images/regen-invoice.png",3,"click",4,"ngIf"],["canCollect",""],[1,"d-flex","gap-2"],["class","btn btn-collect",3,"disabled",4,"ngIf"],[1,"btn","btn-collect",3,"disabled"],[1,"not-found"],[1,"col-md-6"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,En,2,3,"button",4),e.qZA()(),e.TgZ(5,"div",5)(6,"p",6),e._uU(7),e.qZA()(),e.YNc(8,uo,18,12,"ng-container",7),e.qZA(),e.YNc(9,ho,4,3,"ng-template",null,8,e.W1O),e.YNc(11,vo,6,2,"div",9),e.YNc(12,Co,2,1,"p",10),e.TgZ(13,"div",1),e.YNc(14,Mi,2,2,"ng-container",11),e.TgZ(15,"div",12),e.YNc(16,Pi,2,0,"ng-template",null,13,e.W1O),e.qZA(),e.YNc(18,Ji,12,9,"ng-container",7),e.qZA()()),2&t){const i=e.MAs(10);e.xp6(4),e.Q6J("ngForOf",n.sortedCollectionOrder),e.xp6(3),e.hij(" Total No ",n.totalAllRecordsCount," "),e.xp6(1),e.Q6J("ngIf",!n.isMultiSelect),e.xp6(3),e.Q6J("ngIf",7001==n.select||7002==n.select||7003==n.select),e.xp6(1),e.Q6J("ngIf",n.isSameInvoiceType),e.xp6(2),e.Q6J("ngIf",7005!=n.select&&7006!=n.select&&7007!=n.select&&7008!=n.select&&7009!==n.select)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",!n.isFilteredByCustomer&&n.totalRecordsCount>6)}},dependencies:[a.sg,a.O5,a.RF,a.n9,a.ED,A.FR,A.TB,c.Fj,c.wV,c.Wl,c.JJ,c.oH,c.On,N.w9,N.mR,d.N9,d._L,f.N,x.w,q.Q,Yt.N,Ht,Tn,jn,a.JJ,a.uU],styles:[".branchesTypes[_ngcontent-%COMP%]{margin-bottom:30px}.branchesTypes[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:22px;border:0px;padding:10px 15px;color:#929eae;border-radius:0;margin:0;border-bottom:2px solid #f5f5f5}.branchesTypes[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{color:#000;border-bottom:2px solid #dc3545}.branch-total[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#78778b;text-align:end}.card-table[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:1.5em!important;height:1.5em}.gap15[_ngcontent-%COMP%]{gap:15px}.card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0}.card-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{cursor:pointer}.card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 5px 10px 25px!important}.btn-collect.btn.disabled[_ngcontent-%COMP%], .btn-collect.btn[_ngcontent-%COMP%]:disabled{background:#f1f3f3!important;color:#9b9b9b!important;border:1px solid #f1f3f3;cursor:initial}.btn-act[_ngcontent-%COMP%]{cursor:initial}.last-td[_ngcontent-%COMP%]{cursor:initial!important}.btn-add-collection[_ngcontent-%COMP%]{background-color:#dc3545!important;font-size:14px!important;color:#fff!important;font-weight:600!important;padding:8px 15px!important;white-space:nowrap!important}.btn-add-collection[_ngcontent-%COMP%]:hover{background-color:#dc3545!important;color:#fff!important}.input-checkbox[_ngcontent-%COMP%]{height:20px;width:20px!important;cursor:pointer}.btn-collect[_ngcontent-%COMP%]{background-color:#dc3545;font-size:14px;color:#fff;font-weight:600;padding:8px 15px;white-space:nowrap}"]}),o})()},{path:"details/:type/:id",component:Ve},{path:"payment",component:F},{path:"collect-pn-order/:id",component:yt}];let Ri=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(Fi),m.Bz]}),o})();var Qi=u(21515);let Gi=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[a.ez,Ri,Qi.m]}),o})()},82757:(B,b,u)=>{u.d(b,{N:()=>m});var a=u(94650);let m=(()=>{class e{onInputChange(g){return!!new RegExp("[0-9]").test(g.key)||(g.preventDefault(),!1)}}return e.\u0275fac=function(g){return new(g||e)},e.\u0275dir=a.lG2({type:e,selectors:[["input","numbersOnly",""]],hostBindings:function(g,d){1&g&&a.NdJ("keypress",function(O){return d.onInputChange(O)})}}),e})()}}]);