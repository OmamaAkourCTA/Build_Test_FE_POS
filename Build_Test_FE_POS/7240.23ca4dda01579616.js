"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[7240],{27240:(b,x,r)=>{r.r(x),r.d(x,{BankDepositsModule:()=>He});var s=r(36895),d=r(39485),g=r(53912),e=r(94650),m=r(20320),f=r(75304),_=r(69082),C=r(51445),u=r(43346),h=r(42953),p=r(24006),v=r(94349),Z=r(28424),q=r(59442),k=r(55134);const D=["success"];function A(o,a){if(1&o&&(e.TgZ(0,"div",33)(1,"div",34)(2,"div",35),e._UZ(3,"img",36),e.qZA(),e.TgZ(4,"div",37)(5,"h6",38),e._uU(6),e.qZA(),e.TgZ(7,"h6",39),e._uU(8),e.ALo(9,"number"),e.qZA()()()()),2&o){const t=a.$implicit;e.xp6(3),e.Q6J("src",null==t?null:t.accountTypeImage,e.LSH),e.xp6(3),e.Oqu(null==t||null==t.accountType[0]?null:t.accountType[0].lookupName),e.xp6(2),e.hij(" ",e.xi3(9,3,null==t?null:t.remainingAmountTobeDistributed,"2.3-3")," ")}}function M(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearDepositInput())}),e._UZ(1,"i",41),e.qZA()}}function I(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearAmountInput())}),e._UZ(1,"i",41),e.qZA()}}function w(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=a.item;e.xp6(1),e.Oqu((null==t?null:t.bankNameEnglish)+" - "+(null==t?null:t.accountName)+" - "+(null==t?null:t.accountNumber))}}function N(o,a){1&o&&(e.TgZ(0,"a",42),e._uU(1,"Create Deposit"),e.qZA())}function U(o,a){if(1&o&&(e.TgZ(0,"a",58),e._uU(1,"View Voucher"),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",null==t?null:t.depositVoucher,e.LSH)}}function O(o,a){1&o&&e._uU(0,"---")}function J(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",53)(5,"span"),e._uU(6),e.qZA(),e._UZ(7,"img",54),e.qZA()(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e.YNc(18,U,2,1,"a",55),e.YNc(19,O,1,0,"ng-template",null,56,e.W1O),e.qZA(),e.TgZ(21,"td")(22,"p",57),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.getCashDepositDetails(null==l?null:l.depositeId,null==l?null:l.collectionType))}),e._uU(23,"View Details"),e.qZA()()()}if(2&o){const t=a.$implicit,n=e.MAs(20);e.xp6(2),e.Oqu(null==t?null:t.depositeId),e.xp6(4),e.Oqu(null==t?null:t.bankNameEnglish),e.xp6(1),e.Q6J("src",null==t?null:t.bankLogo,e.LSH),e.xp6(2),e.hij(" ",null==t?null:t.accountName," "),e.xp6(2),e.Oqu(null==t?null:t.accountNumber),e.xp6(2),e.hij("",e.xi3(14,9,null==t?null:t.amount,"2.3-3")," JOD"),e.xp6(3),e.Oqu(null==t||null==t.currency[0]?null:t.currency[0].lookupName),e.xp6(2),e.Q6J("ngIf",null==t?null:t.depositVoucher)("ngIfElse",n)}}function B(o,a){1&o&&(e.TgZ(0,"div",59),e._UZ(1,"app-not-found"),e.qZA())}function F(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",43)(2,"div",44)(3,"table",45)(4,"thead")(5,"tr")(6,"th",46)(7,"button",47),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByDepositId())}),e._uU(8," Deposit ID "),e._UZ(9,"i",48)(10,"i",49),e.qZA()(),e.TgZ(11,"th",46)(12,"button",47),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByBankName())}),e._uU(13," Bank Name "),e._UZ(14,"i",48)(15,"i",49),e.qZA()(),e.TgZ(16,"th",46)(17,"button",47),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByAccountName())}),e._uU(18," Account Name "),e._UZ(19,"i",48)(20,"i",49),e.qZA()(),e.TgZ(21,"th",46)(22,"button",47),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByAccountNo())}),e._uU(23," Account No. "),e._UZ(24,"i",48)(25,"i",49),e.qZA()(),e.TgZ(26,"th",46)(27,"button",47),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByAmount())}),e._uU(28," Amount "),e._UZ(29,"i",48)(30,"i",49),e.qZA()(),e.TgZ(31,"th",46)(32,"button",50),e._uU(33," Currency "),e.qZA()(),e.TgZ(34,"th",46)(35,"button",50),e._uU(36,"Deposit Voucher"),e.qZA()(),e.TgZ(37,"th",46)(38,"button",50),e._uU(39," Action "),e.qZA()()()(),e.TgZ(40,"tbody"),e.YNc(41,J,24,12,"tr",51),e.qZA()()(),e.YNc(42,B,2,0,"div",52),e.qZA()()}if(2&o){const t=a.$implicit,n=e.oxw();e.xp6(7),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",2==n.sort),e.xp6(1),e.ekj("active",3==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",4==n.sort),e.xp6(1),e.ekj("active",5==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",6==n.sort),e.xp6(1),e.ekj("active",7==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",8==n.sort),e.xp6(1),e.ekj("active",9==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",10==n.sort),e.xp6(1),e.ekj("active",11==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function P(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function Q(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",60)(2,"h6",61),e._uU(3," Showing "),e.TgZ(4,"span"),e._uU(5),e.qZA(),e._uU(6," from "),e.TgZ(7,"span"),e._uU(8),e.qZA(),e._uU(9," data "),e.qZA()(),e.TgZ(10,"div",60)(11,"ngb-pagination",62),e.NdJ("pageChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.pageNo=i)})("pageChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.pageChange(i))}),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(5),e.AsE("",6*t.pageNo-5," - ",6==(null==t.deposits?null:t.deposits.length)?6*t.pageNo:t.totalRecords,""),e.xp6(3),e.hij(" ",t.totalRecords," "),e.xp6(3),e.Q6J("collectionSize",t.totalRecords)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}let S=(()=>{class o{constructor(t,n,i,l,c,T){this._unsettleSession=t,this._commonService=n,this._sharedService=i,this._allocationService=l,this._collectService=c,this._modalService=T,this.deposits=[],this.banks=[],this.bankAccounts=[],this.sort=1,this.totalRecords=0,this.pageNo=1,this.pageSize=6,this.pages=[],this.depositId="",this.amount="",this.bankAccountId=null,this.bankId=null,this.mainFundAmounts=[],this.isCash=!0,this.allowCreate=!1,this.cashDepositTypeId=0}ngOnInit(){this.getMainFundCash(),this.getRegisterDetails(),this.getCashDeposits(),this.getBanks(),this.getUserPermission(),this.getBankAccounts()}getUserPermission(){let t=JSON.parse(localStorage.getItem("permissions"));this.allowCreate=t.find(n=>26===n.permissionCatId).permissionSubCategories.find(n=>66===n.permissionSubCatId).permissionItems.find(n=>147===n.permissionItemId).selected}getCashDeposits(){this._unsettleSession.getCashDeposits(`?bankId=${this.bankId&&this.bankId||""}&AccountId=${this.bankAccountId&&this.bankAccountId||""}\n    &DepositeId=${this.depositId}&DepositeType=${this.isCash?"cash":"cheque"}&amount=${this.amount}&Sort=${this.sort}&PageNo=${this.pageNo-1}&pageSize=${this.pageSize}`).subscribe(n=>{this.deposits=n.data,this.totalRecords=n?.totalRecordCount})}getRegisterDetails(){return this._collectService.GetRegisterDetails(this._sharedService.getRegister.registerObj?.id).subscribe(t=>{t&&(this.cashDepositTypeId=t?.data.cashDepositTypeId)})}getCashDepositDetails(t,n){"cash"==n?this._allocationService.getCashDepositDetails(t).subscribe(i=>{console.log(i),this._modalService.open(g.F,{size:"lg"}).componentInstance.depositDetails=i.data[0]}):this._commonService.NavigateToRoute("/main-fund/deposited-cheques/"+t)}depositType(t){this.isCash="cash"==t.target.value,this.pageNo=1,this.sort=1,this.getCashDeposits()}clearAmountInput(){this.amount="",this.getCashDeposits()}clearDepositInput(){this.depositId="",this.getCashDeposits()}onDepositChange(){this.getCashDeposits()}onAmountChange(){this.getCashDeposits()}getBanks(){this._unsettleSession.getBanks().subscribe(t=>{this.banks=t.data})}onBankChange(t){this.bankAccounts=[],this.bankAccountId=null,this.getBankAccounts(t?.bankId),this.getCashDeposits()}getBankAccounts(t){let n="?status=2001&pageNo=0&pageSize=1000";t&&(n+=`&bankId=${t}`),this._unsettleSession.getBankAccounts(n).subscribe(i=>{this.bankAccounts=i.data,console.log(this.bankAccounts)})}onBankAccountChange(t){this.getCashDeposits()}getMainFundCash(){this._allocationService.getMainFundCash().subscribe(t=>{console.log(t.data),t?.data.forEach(i=>{this.mainFundAmounts.some(l=>l.accountTypeID==i?.accountTypeID)||this.mainFundAmounts.push(i)})})}sortByDepositId(){this.sort=3==this.sort?1:2==this.sort?3:2,this.getCashDeposits()}sortByBankName(){this.sort=5==this.sort?1:4==this.sort?5:4,this.getCashDeposits()}sortByAccountName(){this.sort=7==this.sort?1:6==this.sort?7:6,this.getCashDeposits()}sortByAccountNo(){this.sort=9==this.sort?1:8==this.sort?9:8,this.getCashDeposits()}sortByAmount(){this.sort=11==this.sort?1:10==this.sort?11:10,this.getCashDeposits()}pageChange(t){this.pageNo=t,window.scroll(0,0),this.getCashDeposits()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.o),e.Y36(f.v),e.Y36(_.F),e.Y36(C.U),e.Y36(u.k),e.Y36(h.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-bank-deposits"]],viewQuery:function(t,n){if(1&t&&e.Gf(D,5),2&t){let i;e.iGM(i=e.CRH())&&(n.success=i.first)}},decls:49,vars:16,consts:[[1,"page-layout","pt-2"],[1,"heading-text","mb-3"],[1,"main-fund-container","gap-4","mb-4"],["class","main-fund-wrapper",4,"ngFor","ngForOf"],[1,"row"],[1,"col-12","col-sm-6","col-lg-3"],[1,"input-group","search-box","h-100"],["type","button",1,"btn"],[1,"fa-solid","fa-search"],["type","text","placeholder","Deposit Id",1,"form-control",3,"ngModel","input","ngModelChange"],["class","btn","type","button",3,"click",4,"ngIf"],["type","text","appDecimalNumber","","placeholder","Amount",1,"form-control",3,"ngModel","input","ngModelChange"],["placeholder","Bank","bindLabel","bankNameEnglish","bindValue","bankId",1,"flex-grow-1","mt-3","mt-md-0",3,"ngModel","items","ngModelChange","change"],["placeholder","Account","bindLabel","accountName","bindValue","accountId",1,"flex-grow-1","mt-3","mt-md-0",3,"ngModel","items","change","ngModelChange"],["ng-option-tmp",""],[1,"col-12","d-flex","justify-content-between","align-items-center","mt-3"],[1,"d-flex","gap-4"],[1,"fw-500"],[1,"d-flex","gap-3","align-items-center"],[1,"form-check","p-0","d-flex","align-items-center","pe-2"],["value","cash","id","cash","type","radio",1,"form-check-input",3,"checked","change"],["for","cash"],[1,"form-check","p-0","d-flex","align-items-center","ps-2"],["value","cheque","id","cheque","type","radio",1,"form-check-input",3,"checked","change"],["for","cheque"],[1,"btns-group","m-0","d-block"],["routerLink","/main-fund/create-deposit","class","btn btn-save",4,"ngIf"],[1,"d-flex","justify-content-end"],[1,"total-records"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[4,"ngIf"],[1,"main-fund-wrapper"],[1,"main-fund-div"],[1,"currency-symbol"],["alt","",3,"src"],[1,"d-flex","flex-column"],[1,"fw-700","font-18"],[1,"fw-700","font-20","gray-500","m-0"],["type","button",1,"btn",3,"click"],[1,"fa-solid","fa-xmark"],["routerLink","/main-fund/create-deposit",1,"btn","btn-save"],[1,"card-table","mt-2","register-sessions-table"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn","pe-none",3,"disabled"],[4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"d-flex","flex-column","gap-1"],["width","50",3,"src"],["class","redBtn","target","_blank",3,"href",4,"ngIf","ngIfElse"],["noVoucher",""],[1,"blue-clr","font-16","fw-600","cursor-pointer","text-decoration-none",3,"click"],["target","_blank",1,"redBtn",3,"href"],[1,"not-found"],[1,"col-md-6"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Main Fund Current Amounts"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,A,10,6,"div",3),e.qZA(),e.TgZ(5,"h3",1),e._uU(6,"Deposits List"),e.qZA(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"button",7),e._UZ(11,"i",8),e.qZA(),e.TgZ(12,"input",9),e.NdJ("input",function(){return n.onDepositChange()})("ngModelChange",function(l){return n.depositId=l}),e.qZA(),e.YNc(13,M,2,0,"button",10),e.qZA()(),e.TgZ(14,"div",5)(15,"div",6)(16,"button",7),e._UZ(17,"i",8),e.qZA(),e.TgZ(18,"input",11),e.NdJ("input",function(){return n.onAmountChange()})("ngModelChange",function(l){return n.amount=l}),e.qZA(),e.YNc(19,I,2,0,"button",10),e.qZA()(),e.TgZ(20,"div",5)(21,"ng-select",12),e.NdJ("ngModelChange",function(l){return n.bankId=l})("change",function(l){return n.onBankChange(l)}),e.qZA()(),e.TgZ(22,"div",5)(23,"ng-select",13),e.NdJ("change",function(l){return n.onBankAccountChange(l)})("ngModelChange",function(l){return n.bankAccountId=l}),e.YNc(24,w,2,1,"ng-template",14),e.qZA()(),e.TgZ(25,"div",15)(26,"div",16)(27,"div",17),e._uU(28,"Deposit Type"),e.qZA(),e.TgZ(29,"div",18)(30,"div",19)(31,"input",20),e.NdJ("change",function(l){return n.depositType(l)}),e.qZA(),e.TgZ(32,"label",21),e._uU(33,"Cash"),e.qZA()(),e.TgZ(34,"div",22)(35,"input",23),e.NdJ("change",function(l){return n.depositType(l)}),e.qZA(),e.TgZ(36,"label",24),e._uU(37,"Cheque"),e.qZA()()()(),e.TgZ(38,"div",25),e.YNc(39,N,2,0,"a",26),e.qZA()()(),e.TgZ(40,"div",27)(41,"p",28),e._uU(42),e.qZA()(),e.TgZ(43,"div",4),e.YNc(44,F,43,30,"div",29),e.TgZ(45,"div",30),e.YNc(46,P,2,0,"ng-template",null,31,e.W1O),e.qZA(),e.YNc(48,Q,12,9,"ng-container",32),e.qZA()()),2&t){const i=e.MAs(47);e.xp6(4),e.Q6J("ngForOf",n.mainFundAmounts),e.xp6(8),e.Q6J("ngModel",n.depositId),e.xp6(1),e.Q6J("ngIf",n.depositId),e.xp6(5),e.Q6J("ngModel",n.amount),e.xp6(1),e.Q6J("ngIf",n.amount),e.xp6(2),e.Q6J("ngModel",n.bankId)("items",n.banks),e.xp6(2),e.Q6J("ngModel",n.bankAccountId)("items",n.bankAccounts),e.xp6(8),e.Q6J("checked",n.isCash),e.xp6(4),e.Q6J("checked",!n.isCash),e.xp6(4),e.Q6J("ngIf",n.allowCreate&&(8001==n.cashDepositTypeId||8003==n.cashDepositTypeId)),e.xp6(3),e.hij("Total No. ",n.totalRecords,""),e.xp6(2),e.Q6J("ngIf",n.deposits)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",n.totalRecords>6)}},dependencies:[s.sg,s.O5,d.rH,p.Fj,p.JJ,p.On,v.w9,v.ir,h.N9,Z.N,q.w,k.Q,s.JJ],styles:[".heading-text[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.depositBtn[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:600;width:95px;height:34.2px;display:flex;justify-content:center;align-items:center;background:#dc3545;border-radius:8px;cursor:pointer}.main-fund-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.main-fund-container[_ngcontent-%COMP%]   .main-fund-wrapper[_ngcontent-%COMP%]{box-sizing:border-box;background:#FFFFFF;border:1px solid #E9E9E9;box-shadow:0 10px 20px #0000001a;border-radius:8px;padding:10px 15px;flex:0 1 240px;display:flex;align-items:center}.main-fund-container[_ngcontent-%COMP%]   .main-fund-wrapper[_ngcontent-%COMP%]   .main-fund-div[_ngcontent-%COMP%]{display:flex;gap:15px}.main-fund-container[_ngcontent-%COMP%]   .main-fund-wrapper[_ngcontent-%COMP%]   .main-fund-div[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#F6F6F6;box-shadow:0 10px 20px #0000001a;border-radius:8px}.mdtext[_ngcontent-%COMP%]{font-style:normal;font-weight:600;font-size:16px;color:#1b212d}.smText[_ngcontent-%COMP%]{font-style:normal;font-weight:500;font-size:15px;color:#858585}.d-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(173px,1fr));gap:20px}.uploadedfile[_ngcontent-%COMP%]{border:1px solid #11af22;border-radius:4px;display:flex;justify-content:space-between;align-items:center}.uploadedfile[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:50%;margin:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.uploadedfile[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px}.uploadedfile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;padding:10px;color:#696969;margin:0;cursor:pointer}.main-fund-div[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.main-fund-div[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#F6F6F6;box-shadow:0 10px 20px #0000001a;border-radius:8px}.heading-main-fund[_ngcontent-%COMP%]{font-size:12px;font-weight:600;margin:0}.form-check-input[_ngcontent-%COMP%]{width:20px!important;height:20px;margin:0;padding:0}.form-check-input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{line-height:1;font-weight:500;padding:0;margin:0 0 0 5px}"]}),o})();var L=r(86260),E=r(32298),G=r(68423),Y=r(96603),j=r(53823),V=r(67761),R=r(67711);const K=["inputFile"],H=["successModal"];function z(o,a){1&o&&(e.TgZ(0,"span",43),e._uU(1,"Input is required"),e.qZA())}function $(o,a){if(1&o&&(e.ynx(0),e.YNc(1,z,2,0,"span",40),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f.currencyId||null==t.f.currencyId.errors?null:t.f.currencyId.errors.required)}}function W(o,a){if(1&o&&(e.ynx(0),e.YNc(1,$,2,1,"ng-container",17),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.f.currencyId?null:t.f.currencyId.invalid)&&(null==t.f.currencyId?null:t.f.currencyId.touched)||(null==t.f.currencyId?null:t.f.currencyId.dirty))}}const y=function(){return{standalone:!0}};function X(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",44)(1,"div",45),e._uU(2,"Select Cheque Type"),e.qZA(),e.TgZ(3,"div",1)(4,"div",46)(5,"input",47),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.chequeType=i)})("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onChequeTypeChange())}),e.qZA(),e.TgZ(6,"label",48),e._uU(7,"Cheque"),e.qZA()(),e.TgZ(8,"div",49)(9,"input",50),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.chequeType=i)})("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onChequeTypeChange())}),e.qZA(),e.TgZ(10,"label",51),e._uU(11,"PDC"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.chequeType)("ngModelOptions",e.DdM(4,y)),e.xp6(4),e.Q6J("ngModel",t.chequeType)("ngModelOptions",e.DdM(5,y))}}function ee(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=a.item;e.xp6(1),e.Oqu((null==t?null:t.bankNameEnglish)+" - "+(null==t?null:t.accountName)+" - "+(null==t?null:t.accountNumber))}}function te(o,a){1&o&&(e.TgZ(0,"span",43),e._uU(1,"Input is required"),e.qZA())}function ne(o,a){if(1&o&&(e.ynx(0),e.YNc(1,te,2,0,"span",40),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f.accountId||null==t.f.accountId.errors?null:t.f.accountId.errors.required)}}function oe(o,a){if(1&o&&(e.ynx(0),e.YNc(1,ne,2,1,"ng-container",17),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.f.accountId?null:t.f.accountId.invalid)&&(null==t.f.accountId?null:t.f.accountId.touched)||(null==t.f.accountId?null:t.f.accountId.dirty))}}function ie(o,a){1&o&&(e.TgZ(0,"span",43),e._uU(1,"Input is required"),e.qZA())}function se(o,a){1&o&&(e.TgZ(0,"span",43),e._uU(1,"Value must be greater than zero"),e.qZA())}function ae(o,a){if(1&o&&(e.ynx(0),e.YNc(1,ie,2,0,"span",40),e.YNc(2,se,2,0,"span",40),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.amount||null==t.f.amount.errors?null:t.f.amount.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.f.amount||null==t.f.amount.errors?null:t.f.amount.errors.invalidAmount)}}function le(o,a){if(1&o&&(e.ynx(0),e.YNc(1,ae,3,2,"ng-container",17),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==t.f.amount?null:t.f.amount.invalid)&&(null==t.f.amount?null:t.f.amount.touched)||(null==t.f.amount?null:t.f.amount.dirty))}}function re(o,a){if(1&o&&(e.TgZ(0,"div",26)(1,"label",15),e._uU(2,"Amount*"),e.qZA(),e._UZ(3,"input",52),e.YNc(4,le,2,1,"ng-container",17),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",null==t.f.amount?null:t.f.amount.errors)}}function ce(o,a){1&o&&(e.TgZ(0,"span",43),e._uU(1,"Input is required"),e.qZA())}function ue(o,a){if(1&o&&(e.ynx(0),e.YNc(1,ce,2,0,"span",40),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f.depositDate||null==t.f.depositDate.errors?null:t.f.depositDate.errors.required)}}function pe(o,a){if(1&o&&(e.ynx(0),e.YNc(1,ue,2,1,"ng-container",17),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.f.depositDate?null:t.f.depositDate.invalid)&&(null==t.f.depositDate?null:t.f.depositDate.touched)||(null==t.f.depositDate?null:t.f.depositDate.dirty))}}function de(o,a){1&o&&(e.TgZ(0,"span",43),e._uU(1,"Input is required"),e.qZA())}function _e(o,a){if(1&o&&(e.ynx(0),e.YNc(1,de,2,0,"span",40),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f.time||null==t.f.time.errors?null:t.f.time.errors.required)}}function ge(o,a){if(1&o&&(e.ynx(0),e.YNc(1,_e,2,1,"ng-container",17),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.f.time?null:t.f.time.invalid)&&(null==t.f.time?null:t.f.time.touched)||(null==t.f.time?null:t.f.time.dirty))}}function me(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",53)(2,"label",54),e._uU(3),e.qZA(),e.TgZ(4,"div",55)(5,"img",56),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.fileAction("view"))}),e.qZA(),e.TgZ(6,"img",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.fileAction("delete"))}),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(3),e.Oqu(null==t.f.attachment?null:t.f.attachment.value)}}function he(o,a){1&o&&(e.TgZ(0,"span",43),e._uU(1,"Attachment is required"),e.qZA())}function fe(o,a){if(1&o&&(e.ynx(0),e.YNc(1,he,2,0,"span",40),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f.attachment||null==t.f.attachment.errors?null:t.f.attachment.errors.required)}}function Ce(o,a){if(1&o&&(e.ynx(0),e.YNc(1,fe,2,1,"ng-container",17),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.f.attachment?null:t.f.attachment.invalid)&&(null==t.f.attachment?null:t.f.attachment.touched)||(null==t.f.attachment?null:t.f.attachment.dirty))}}function xe(o,a){if(1&o&&(e.TgZ(0,"small",43),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.invalidFileType)}}function ve(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",62),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.handleSubmit())}),e._uU(1,"Save"),e.qZA()}}function be(o,a){1&o&&e._UZ(0,"saving-loader")}function Ze(o,a){if(1&o&&(e.TgZ(0,"div",58)(1,"div",59)(2,"button",60),e._uU(3,"Cancel"),e.qZA(),e.YNc(4,ve,2,0,"button",61),e.YNc(5,be,1,0,"saving-loader",17),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",!t.isPending),e.xp6(1),e.Q6J("ngIf",t.isPending)}}function Te(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",77),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.clearSearchChequeInput())}),e._UZ(1,"i",78),e.qZA()}}function qe(o,a){if(1&o&&e._UZ(0,"view-file",92),2&o){const t=e.oxw().$implicit;e.Q6J("file",null==t?null:t.chequeImage)}}function ke(o,a){1&o&&e._uU(0," --- ")}function ye(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"input",89),e.NdJ("change",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.handleCheckBoxChange())})("ngModelChange",function(i){const c=e.CHM(t).$implicit;return e.KtG(c.checked=i)}),e.qZA()(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"td"),e.YNc(21,qe,1,1,"view-file",90),e.YNc(22,ke,1,0,"ng-template",null,91,e.W1O),e.qZA()()}if(2&o){const t=a.$implicit,n=a.index,i=e.MAs(23);e.xp6(2),e.Q6J("ngModel",t.checked)("id",n),e.xp6(2),e.Oqu(null==t?null:t.chequeCustomer),e.xp6(2),e.Oqu((null==t?null:t.settleChequeNumber)||(null==t?null:t.lastChequeNo)||(null==t?null:t.chequeNo)),e.xp6(2),e.Oqu(null==t||null==t.bank||null==t.bank.translation[0]?null:t.bank.translation[0].lookupName),e.xp6(2),e.Oqu(e.xi3(11,11,(null==t?null:t.settleChequeDate)||(null==t?null:t.lastCheckDate)||(null==t?null:t.chequeDate),"mediumDate")),e.xp6(3),e.hij("",e.xi3(14,14,(null==t?null:t.lastAmountToPay)||(null==t?null:t.chequeCollectionJod),"2.3-3")," JOD"),e.xp6(3),e.Oqu(null==t||null==t.currency[0]?null:t.currency[0].lookupName),e.xp6(2),e.hij(" ",e.xi3(19,17,null==t?null:t.collectedAmount,"2.3-3"),""),e.xp6(3),e.Q6J("ngIf",null==t?null:t.chequeImage)("ngIfElse",i)}}function De(o,a){1&o&&(e.TgZ(0,"div",93),e._UZ(1,"app-not-found"),e.qZA())}function Ae(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",75)(1,"div",79)(2,"div",80)(3,"table",81)(4,"thead")(5,"tr"),e._UZ(6,"th"),e.TgZ(7,"th",82)(8,"button",83),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.sortByCustomer())}),e._uU(9," Customer "),e._UZ(10,"i",84)(11,"i",85),e.qZA()(),e.TgZ(12,"th",82)(13,"button",83),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.sortByCheque())}),e._uU(14," Cheque No "),e._UZ(15,"i",84)(16,"i",85),e.qZA()(),e.TgZ(17,"th",82)(18,"button",83),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.sortByBank())}),e._uU(19," Bank "),e._UZ(20,"i",84)(21,"i",85),e.qZA()(),e.TgZ(22,"th",82)(23,"button",83),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.sortByDate())}),e._uU(24," Date "),e._UZ(25,"i",84)(26,"i",85),e.qZA()(),e.TgZ(27,"th",82)(28,"button",83),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.sortByAmount())}),e._uU(29," Amount JOD "),e._UZ(30,"i",84)(31,"i",85),e.qZA()(),e.TgZ(32,"th",82)(33,"button",86),e._uU(34,"Currency"),e.qZA()(),e.TgZ(35,"th",82)(36,"button",86),e._uU(37,"Amount"),e.qZA()(),e.TgZ(38,"th",82)(39,"button",86),e._uU(40,"Cheque Image"),e.qZA()()()(),e.TgZ(41,"tbody"),e.YNc(42,ye,24,20,"tr",87),e.qZA()()(),e.YNc(43,De,2,0,"div",88),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(8),e.Q6J("disabled",0==(null==t.settledChequeList?null:t.settledChequeList.length)),e.xp6(2),e.ekj("active",2==t.sort),e.xp6(1),e.ekj("active",3==t.sort),e.xp6(2),e.Q6J("disabled",0==(null==t.settledChequeList?null:t.settledChequeList.length)),e.xp6(2),e.ekj("active",4==t.sort),e.xp6(1),e.ekj("active",5==t.sort),e.xp6(2),e.Q6J("disabled",0==(null==t.settledChequeList?null:t.settledChequeList.length)),e.xp6(2),e.ekj("active",6==t.sort),e.xp6(1),e.ekj("active",7==t.sort),e.xp6(2),e.Q6J("disabled",0==(null==t.settledChequeList?null:t.settledChequeList.length)),e.xp6(2),e.ekj("active",8==t.sort),e.xp6(1),e.ekj("active",9==t.sort),e.xp6(2),e.Q6J("disabled",0==(null==t.settledChequeList?null:t.settledChequeList.length)),e.xp6(2),e.ekj("active",10==t.sort),e.xp6(1),e.ekj("active",11==t.sort),e.xp6(2),e.Q6J("disabled",0==(null==t.settledChequeList?null:t.settledChequeList.length)),e.xp6(3),e.Q6J("disabled",0==(null==t.settledChequeList?null:t.settledChequeList.length)),e.xp6(3),e.Q6J("disabled",0==(null==t.settledChequeList?null:t.settledChequeList.length)),e.xp6(3),e.Q6J("ngForOf",t.settledChequeList),e.xp6(1),e.Q6J("ngIf",0==(null==t.settledChequeList?null:t.settledChequeList.length))}}function Me(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function Ie(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",24)(2,"div",63)(3,"div",24)(4,"div",14)(5,"div",64)(6,"button",65),e._UZ(7,"i",66),e.qZA(),e.TgZ(8,"input",67),e.NdJ("input",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSearchChequeChange())})("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.searchCheque=i)}),e.qZA(),e.YNc(9,Te,2,0,"button",68),e.qZA()(),e.TgZ(10,"div",14)(11,"ng-select",69),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.bankId=i)})("change",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.onBankChange(i))}),e.qZA()(),e.TgZ(12,"div",70)(13,"div",15),e._uU(14,"Selcted Cheques Total Amount"),e.qZA(),e.TgZ(15,"div",71),e._uU(16),e.ALo(17,"number"),e.qZA()()()(),e.TgZ(18,"div",72)(19,"span",73),e._uU(20),e.qZA()(),e.YNc(21,Ae,44,30,"div",74),e.TgZ(22,"div",75),e.YNc(23,Me,2,0,"ng-template",null,76,e.W1O),e.qZA()(),e.BQk()}if(2&o){const t=e.MAs(24),n=e.oxw();e.xp6(8),e.Q6J("ngModel",n.searchCheque),e.xp6(1),e.Q6J("ngIf",n.searchCheque),e.xp6(2),e.Q6J("ngModel",n.bankId)("items",n.banks),e.xp6(5),e.hij("",e.xi3(17,9,n.selectedChequeAmount,"2.3-3")," JOD"),e.xp6(4),e.AsE("No of Selected ",null==n.checkedItems?null:n.checkedItems.length,". No of Cheques ",n.totalRecords,""),e.xp6(1),e.Q6J("ngIf",n.settledChequeList)("ngIfElse",t)}}function we(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",95),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.handleSubmit())}),e._uU(1,"Save"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",(null==t.checkedItems?null:t.checkedItems.length)<=0)}}function Ne(o,a){1&o&&e._UZ(0,"saving-loader")}function Ue(o,a){if(1&o&&(e.TgZ(0,"div",58)(1,"div",59)(2,"button",60),e._uU(3,"Cancel"),e.qZA(),e.YNc(4,we,2,1,"button",94),e.YNc(5,Ne,1,0,"saving-loader",17),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",!t.isPending),e.xp6(1),e.Q6J("ngIf",t.isPending)}}function Oe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",96)(1,"h5",97),e._UZ(2,"i",98),e._uU(3,"Your deposit has been created successfully"),e.qZA(),e.TgZ(4,"div",99)(5,"button",100),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i._commonService.downloadInvoices({invoices:i.reponseData.data}))}),e._uU(6,"View Voucher"),e.qZA(),e.TgZ(7,"button",101),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.KtG(l.close("Close click"))}),e._uU(8,"Close"),e.qZA()()()}}const Je=function(){return{required:"Input is required"}};let Be=(()=>{class o{constructor(t,n,i,l,c,T){this._commonService=t,this.fb=n,this._modalService=i,this._allocationService=l,this._unsettleSession=c,this._spinnerService=T,this.isCash=!0,this.currencyList=[],this.bankAccounts=[],this.banks=[],this.settledChequeList=[],this.isCurrencySelected=!0,this.sort=1,this.totalRecords=0,this.pageNo=1,this.pages=[],this.checkedItems=[],this.searchCheque="",this.chequeType="",this.bankId=null,this.fileTypes=["image/jpeg","image/jpg","image/png","application/pdf"]}ngOnInit(){this.initForm(),this.getCurrencyList(),this.getBanksFromLookUp(),this.formGroup.get("amount").valueChanges.subscribe(t=>{t&&+t<=0&&this.formGroup.get("amount").setErrors({invalidAmount:!0})})}initForm(){this.formGroup=this.fb.group({attachment:["",[p.kI.required]],currencyId:[null,[p.kI.required]],accountId:[{value:null,disabled:!0},[p.kI.required]],amount:[{value:"",disabled:!0},[p.kI.required]],depositDate:[{value:this.getToday(),disabled:!0},[p.kI.required]],time:[{value:this.setTimeNow(),disabled:!0},[p.kI.required]],exchangeRate:[{value:"",disabled:!0}],currencyToConvert:[null,[p.kI.required]],amountToConvert:[""]})}onCurrencyChange(t){this.formGroup.get("accountId").setValue(null);const n=t?.value;if(n==this.formGroup.get("currencyToConvert").value?this.formGroup.get("exchangeRate").setValue(1):this.formGroup.get("exchangeRate").setValue(t?.rate),this.toggleFormDisablity(n),n){let l=`?currencyId=${n}&status=2001&pageNo=0&pageSize=1000`;9001==n?l+="&accountType="+((this.isCash?"15001":"cheque"==this.chequeType&&"15004")||"15005"):9002==n?l+="&accountType="+((this.isCash?"15002":"cheque"==this.chequeType&&"15006")||"15008"):9003==n&&(l+="&accountType="+((this.isCash?"15003":"cheque"==this.chequeType&&"15007")||"15009")),this.getBankAccounts(l)}this.isCash||this.getMainFundSettledCheques()}handleCurrencyToConvertChange(t){let n={exchangeRate:t?.rate};t.value==this.formGroup.get("currencyId").value&&(n.exchangeRate=1),this.formGroup.patchValue(n),this.convertAmount()}convertAmount(){let t=+this.formGroup.get("exchangeRate").getRawValue(),n=+this.formGroup.get("amountToConvert").value;if(n>0){let i=this.convertCurrency(n,t);this.formGroup.get("amount").setValue(i.toFixed(3)),this.formGroup.get("amount").disable()}}convertCurrency(t,n){return t*n}setTimeNow(){let t=new Date;return this.hours=("0"+t.getHours()).slice(-2),this.minutes=("0"+t.getMinutes()).slice(-2),this.hours+":"+this.minutes}getToday(){return(new Date).toISOString().split("T")[0]}depositType(t){this.chequeType="",this.bankAccounts=[],this.currencyId=null,this.formGroup.get("accountId").setValue(null),this.isCash="cash"==t.target.value,this.isCash?(this.formGroup.get("currencyId").setValue(null),this.formGroup.get("amount").setValue(""),this.toggleFormDisablity(!1)):(this.formGroup.get("currencyId").setValue(null),this.formGroup.get("amount").setValue("noValue"),this.toggleFormDisablity(!1)),this.formGroup.markAsUntouched(),this.formGroup.markAsPristine()}toggleFormDisablity(t){t?(this.formGroup.get("accountId").enable(),this.formGroup.get("amount").enable(),this.formGroup.get("depositDate").enable(),this.formGroup.get("time").enable()):(this.formGroup.get("accountId").disable(),this.formGroup.get("amount").disable(),this.formGroup.get("depositDate").disable(),this.formGroup.get("time").disable())}handleSubmit(){if(this.formGroup.invalid)this.formGroup.markAllAsTouched();else{let t=this.formGroup.getRawValue(),n=`${t.depositDate}T${t.time}`;t={...t,depositDate:n},console.log(t);let i=new FormData;i.append("accountId",t.accountId),i.append("depositDate",t.depositDate),this.uploadedFile?.file&&i.append("Files",this.uploadedFile.file),this.isPending=!0,this.isCash?(i.append("amount",t.amount),i.append("currencyId",t.currencyId),i.append("exchangeFromCurrencyID",t.currencyToConvert),i.append("amountBeforeExchange",t.amountToConvert),this._allocationService.addCashDepositToMarkaziaAccount(i).subscribe(c=>{c?.isSuccess&&(this.isPending=!1,this.reponseData=c.data,this._modalService.open(this.successModalRef),this._commonService.NavigateToRoute("/main-fund/bank-deposits"))},c=>{this.isPending=!1,this.successModal("error",c.error.errors)})):(i.append("chequeCollectionIds",this.chequeIds.toString()),this._allocationService.addChequesToMarkaziaAccount(i).subscribe(c=>{c?.isSuccess&&(this.reponseData=c.data,this._modalService.open(this.successModalRef),this._commonService.NavigateToRoute("/main-fund/bank-deposits"),this.isPending=!1)},c=>{this.isPending=!1,this.successModal("error",c.error.errors)}))}}successModal(t,n){const i=this._modalService.open(L.i,{size:"md"});i.componentInstance.type=t,"success"==t?(i.componentInstance.message=n,i.componentInstance.routeName="/main-fund/bank-deposits"):"error"==t&&(i.componentInstance.messageError=n)}get f(){return this.formGroup.controls}handleCheckBoxChange(){this.checkedItems=this.settledChequeList.filter(t=>t.checked),this.checkedItems.length>0?(this.selectedChequeAmount=this.checkedItems.reduce((t,n)=>t+n?.chequeCollectionJod,0),this.chequeIds=this.checkedItems.map(t=>t.chequeCollectionId)):this.selectedChequeAmount=0}getBankAccounts(t){this._unsettleSession.getBankAccounts(t).subscribe(n=>{this.bankAccounts=n.data})}getMainFundSettledCheques(){this._spinnerService.show();let t=`?currencyId=${this.formGroup.get("currencyId").value||""}&chequeType=${this.chequeType}&bankId=${this.bankId||""}\n    &search=${this.searchCheque}&sort=${this.sort}&pageNo=${this.pageNo-1}&pageSize=1000`;this._allocationService.getMainFundSettledChequesNew(t).subscribe(n=>{n?.data.length>0?(this.settledChequeList=n?.data.map(i=>({...i,checked:!1})),this.totalRecords=n?.totalRecordCount):(this.checkedItems=[],this.selectedChequeAmount=0,this.settledChequeList=[])}).add(()=>this._spinnerService.hide())}onSearchChequeChange(){this.getMainFundSettledCheques()}clearSearchChequeInput(){this.searchCheque="",this.getMainFundSettledCheques()}onChequeTypeChange(){this.formGroup.get("accountId").setValue(null),this.toggleFormDisablity(!0),this.checkedItems=[],this.onCurrencyChange({value:+this.formGroup.get("currencyId").value})}getCurrencyList(){this._allocationService.getCurrencyList().subscribe(t=>{this.currencyList=t.data.map(n=>({value:n.id,text:n.name[0]?.lookupName,rate:n.name[0].rate}))})}getBanks(){this._unsettleSession.getBanks().subscribe(t=>{this.banks=t.data})}getBanksFromLookUp(){this._unsettleSession.getDataFromLookUp("?lookupTypeId=11&PageNo=0&PageSize=1000").subscribe(n=>{this.banks=n.data.map(i=>({value:i.id,text:i.name[0]?.lookupName})),console.log(this.banks)})}onBankChange(t){this.getMainFundSettledCheques()}fileAction(t){"view"==t?this._modalService.open(E.g,{size:"md"}).componentInstance.imageUploadedView=this.uploadedFile:(this.inputFile.nativeElement.value=null,this.formGroup.get("attachment")?.setValue(""),this.uploadedFile={})}filesDropped(t){this.enter=!1;let n=this.checkInvalidImageFormat(t);if(n)return void(this.inputFile.nativeElement.value=null);let i=t.map(l=>l.file);n||i.forEach(l=>{this.formGroup.get("attachment")?.setValue(l.name),this._commonService.fileToBase64(l).then(c=>{this.uploadedFile=c})})}onSelectFile(t){let n=[...t.target.files],i=this.checkInvalidImageFormat(n);i?this.inputFile.nativeElement.value=null:n.length>0&&(i||n.forEach(l=>{this.formGroup.get("attachment")?.setValue(l.name),this._commonService.fileToBase64(l).then(c=>{this.uploadedFile=c})}))}removeFile(t){this.inputFile.nativeElement.value=null,this.formGroup.get("attachment")?.setValue(""),this.uploadedFile=null}sortByCustomer(){this.sort=3==this.sort?1:2==this.sort?3:2,this.getMainFundSettledCheques()}sortByCheque(){this.sort=5==this.sort?1:4==this.sort?5:4,this.getMainFundSettledCheques()}sortByBank(){this.sort=7==this.sort?1:6==this.sort?7:6,this.getMainFundSettledCheques()}sortByDate(){this.sort=9==this.sort?1:8==this.sort?9:8,this.getMainFundSettledCheques()}sortByAmount(){this.sort=11==this.sort?1:10==this.sort?11:10,this.getMainFundSettledCheques()}setPage(t){this.pageNo=t,window.scroll(0,0),this.getMainFundSettledCheques()}checkInvalidImageFormat(t){let n,i=t.map(c=>c.file);n=void 0!==i[0]?i:t;let l=!1;for(let c of n)if(!this.fileTypes.includes(c.type)){l=!0,this.invalidFileType="This file not support, supported formates: JPEG, JPG, PNG, PDF",this.formGroup.get("attachments")?.patchValue(""),setTimeout(()=>{this.invalidFileType=""},3e3);break}return l}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.v),e.Y36(p.qu),e.Y36(h.FF),e.Y36(C.U),e.Y36(m.o),e.Y36(G.t2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-deposit"]],viewQuery:function(t,n){if(1&t&&(e.Gf(K,5),e.Gf(H,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.inputFile=i.first),e.iGM(i=e.CRH())&&(n.successModalRef=i.first)}},decls:81,vars:22,consts:[[1,"page-layout"],[1,"d-flex","align-items-center","gap-5"],[1,"headingText"],[1,"border-deposit-type"],[1,"form-check","d-flex","align-items-center","pe-2"],["value","cash","id","cash","type","radio",1,"form-check-input",3,"checked","change"],["for","cash"],[1,"form-check","d-flex","align-items-center","ps-2"],["value","cheque","id","cheque","type","radio",1,"form-check-input",3,"checked","change"],["for","cheque"],[1,"separator"],[3,"formGroup"],[1,"card-Box","mt-4"],[1,"row","align-items-center"],[1,"col-sm-3"],[1,"mdtext"],["formControlName","currencyId","placeholder","Currency","bindLabel","text","bindValue","value",1,"flex-grow-1","mt-3","mt-md-0",3,"items","change"],[4,"ngIf"],["formControlName","currencyToConvert","placeholder","Currency","bindLabel","text","bindValue","value",1,"mt-3","mt-md-0",3,"items","change"],[3,"control","errorMessages"],["type","text","formControlName","amountToConvert","appDecimalNumber","",1,"form-control",3,"change"],["type","text","formControlName","exchangeRate",1,"form-control"],["class","mt-2",4,"ngIf"],[1,"card-Box","mt-5"],[1,"row"],[1,"col-sm-6"],[1,"col-6"],["formControlName","accountId","placeholder","Account","bindLabel","accountName","bindValue","accountId",1,"flex-grow-1","mt-3","mt-md-0",3,"items"],["ng-option-tmp",""],["class","col-6",4,"ngIf"],[1,"row","mt-3"],["type","date","formControlName","depositDate",1,"form-control",3,"max"],["type","time","formControlName","time",1,"form-control"],[1,"offset-2","col-sm-4"],[1,"form-group","mb-3"],["appImageDrag","","accept",".png,.jpg,.jpeg,.pdf",1,"card-upload",3,"files","enter","leave","click"],[1,"my-3"],["src","assets/images/upload.png","alt",""],["type","file","accept",".png,.jpg,.jpeg,.pdf","multiple","","hidden","",1,"form-control",3,"change"],["inputFile",""],["class","text-danger",4,"ngIf"],["class","d-flex justify-content-end mt-5",4,"ngIf"],["successModal",""],[1,"text-danger"],[1,"mt-2"],[1,"mdtext","mb-2"],[1,"form-check","d-flex","align-items-center","gap-2","ps-0"],["value","cheque","id","cheque1","type","radio",1,"form-check-input","p-0","m-0",3,"ngModel","ngModelOptions","ngModelChange","change"],["for","cheque1",1,"p-0","lh-1"],[1,"form-check","d-flex","align-items-center","gap-2"],["value","pdc","id","pdc","type","radio",1,"form-check-input","p-0","m-0",3,"ngModel","ngModelOptions","ngModelChange","change"],["for","pdc",1,"p-0","lh-1"],["type","text","formControlName","amount","appDecimalNumber","",1,"form-control"],[1,"d-flex","gap-3","file-item","align-items-center","justify-content-between"],[1,"p-0"],[1,"d-flex","gap-2"],["height","20","src","assets/images/eye.png",1,"cursor-pointer",3,"click"],["height","20","src","assets/images/trash.png",1,"cursor-pointer",3,"click"],[1,"d-flex","justify-content-end","mt-5"],[1,"btns-group","my-2","mx-0"],["type","button","routerLink","/main-fund/bank-deposits",1,"btn","btn-cancel"],["type","button","class","btn btn-save",3,"click",4,"ngIf"],["type","button",1,"btn","btn-save",3,"click"],[1,"col-12","my-5"],[1,"input-group","search-box","h-100"],["type","button",1,"btn"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search for a cheque",1,"form-control",3,"ngModel","input","ngModelChange"],["class","btn","type","button",3,"click",4,"ngIf"],["placeholder","Bank","bindLabel","text","bindValue","value",1,"flex-grow-1","mt-3","mt-md-0",3,"ngModel","items","ngModelChange","change"],[1,"col-sm-6","d-flex","align-items-center","gap-4","justify-content-end"],[1,"mdtext","amountButton"],[1,"col-12","my-3","d-flex","justify-content-end"],[1,"font-16","fw-500","gray-500"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],["type","button",1,"btn",3,"click"],[1,"fa-solid","fa-xmark"],[1,"card-table","mt-2"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn",3,"disabled"],[4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],["type","checkbox",1,"inputColor",3,"ngModel","id","change","ngModelChange"],[3,"file",4,"ngIf","ngIfElse"],["noCheque",""],[3,"file"],[1,"not-found"],["type","button","class","btn btn-save",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-save",3,"disabled","click"],[1,"p-3"],[1,"d-flex","gap-2","align-items-center","justify-content-center","mb-3"],[1,"fa-regular","fa-circle-check","green-clr"],[1,"btns-group","gap-2","mt-2","mb-0","text-center"],["type","button",1,"redBtn",3,"click"],["type","button",1,"btn","btn-cancel",3,"click"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Select Deposit Type"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"input",5),e.NdJ("change",function(c){return n.depositType(c)}),e.qZA(),e.TgZ(7,"label",6),e._uU(8,"Cash"),e.qZA()(),e.TgZ(9,"div",7)(10,"input",8),e.NdJ("change",function(c){return n.depositType(c)}),e.qZA(),e.TgZ(11,"label",9),e._uU(12,"Cheque"),e.qZA()()()(),e._UZ(13,"div",10),e.TgZ(14,"div",2),e._uU(15,"Deposit Details"),e.qZA(),e.TgZ(16,"form",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15),e._uU(21,"Select Currency *"),e.qZA(),e.TgZ(22,"ng-select",16),e.NdJ("change",function(c){return n.onCurrencyChange(c)}),e.qZA(),e.YNc(23,W,2,1,"ng-container",17),e.qZA(),e.TgZ(24,"div",14)(25,"div",15),e._uU(26,"Deposit From Currency *"),e.qZA(),e.TgZ(27,"ng-select",18),e.NdJ("change",function(c){return n.handleCurrencyToConvertChange(c)}),e.qZA(),e._UZ(28,"validation-error",19),e.qZA(),e.TgZ(29,"div",14)(30,"div",15),e._uU(31,"Amount"),e.qZA(),e.TgZ(32,"input",20),e.NdJ("change",function(){return n.convertAmount()}),e.qZA()(),e.TgZ(33,"div",14)(34,"div",15),e._uU(35,"Exchange Rate"),e.qZA(),e._UZ(36,"input",21),e.qZA(),e.YNc(37,X,12,6,"div",22),e.qZA()(),e.TgZ(38,"div",23)(39,"div",24)(40,"div",25)(41,"div",24)(42,"div",26)(43,"label",15),e._uU(44,"Select Bank Account*"),e.qZA(),e.TgZ(45,"ng-select",27),e.YNc(46,ee,2,1,"ng-template",28),e.qZA(),e.YNc(47,oe,2,1,"ng-container",17),e.qZA(),e.YNc(48,re,5,1,"div",29),e.qZA(),e.TgZ(49,"div",30)(50,"div",26)(51,"label",15),e._uU(52,"Select Deposit Date*"),e.qZA(),e._UZ(53,"input",31),e.YNc(54,pe,2,1,"ng-container",17),e.qZA(),e.TgZ(55,"div",26)(56,"label",15),e._uU(57,"Select Deposit Time*"),e.qZA(),e._UZ(58,"input",32),e.YNc(59,ge,2,1,"ng-container",17),e.qZA()()(),e.TgZ(60,"div",33)(61,"label",15),e._uU(62,"Upload Deposit Slip Attachment *"),e.qZA(),e.TgZ(63,"div",34)(64,"div",35),e.NdJ("files",function(c){return n.filesDropped(c)})("enter",function(){return n.enter=!n.enter})("leave",function(){return n.enter=!n.enter})("click",function(){e.CHM(i);const c=e.MAs(72);return e.KtG(c.click())}),e.TgZ(65,"div",36),e._UZ(66,"img",37),e.TgZ(67,"h5"),e._uU(68,"Select OR Drag & drop files"),e.qZA(),e.TgZ(69,"p"),e._uU(70,"Supported formates: JPEG, PNG, PDF"),e.qZA()()(),e.TgZ(71,"input",38,39),e.NdJ("change",function(c){return n.onSelectFile(c)}),e.qZA()(),e.YNc(73,me,7,1,"ng-container",17),e.YNc(74,Ce,2,1,"ng-container",17),e.YNc(75,xe,2,1,"small",40),e.qZA()()(),e.YNc(76,Ze,6,2,"div",41),e.qZA(),e.YNc(77,Ie,25,12,"ng-container",17),e.YNc(78,Ue,6,2,"div",41),e.qZA(),e.YNc(79,Oe,9,0,"ng-template",null,42,e.W1O)}2&t&&(e.xp6(6),e.Q6J("checked",n.isCash),e.xp6(4),e.Q6J("checked",!n.isCash),e.xp6(6),e.Q6J("formGroup",n.formGroup),e.xp6(6),e.Q6J("items",n.currencyList),e.xp6(1),e.Q6J("ngIf",null==n.f.currencyId?null:n.f.currencyId.errors),e.xp6(4),e.Q6J("items",n.currencyList),e.xp6(1),e.Q6J("control",n.formGroup.get("currencyToConvert"))("errorMessages",e.DdM(21,Je)),e.xp6(9),e.Q6J("ngIf",!n.isCash),e.xp6(8),e.Q6J("items",n.bankAccounts),e.xp6(2),e.Q6J("ngIf",null==n.f.accountId?null:n.f.accountId.errors),e.xp6(1),e.Q6J("ngIf",n.isCash),e.xp6(5),e.Q6J("max",n.getToday()),e.xp6(1),e.Q6J("ngIf",null==n.f.depositDate?null:n.f.depositDate.errors),e.xp6(5),e.Q6J("ngIf",null==n.f.time?null:n.f.time.errors),e.xp6(14),e.Q6J("ngIf",null==n.f.attachment?null:n.f.attachment.value),e.xp6(1),e.Q6J("ngIf",null==n.f.attachment?null:n.f.attachment.errors),e.xp6(1),e.Q6J("ngIf",n.invalidFileType),e.xp6(1),e.Q6J("ngIf",n.isCash),e.xp6(1),e.Q6J("ngIf",!n.isCash),e.xp6(1),e.Q6J("ngIf",!n.isCash))},dependencies:[s.sg,s.O5,d.rH,p._Y,p.Fj,p.Wl,p._,p.JJ,p.JL,p.sg,p.u,p.On,v.w9,v.ir,Z.N,q.w,k.Q,Y.z,j.V,V.g,R.L,s.JJ,s.uU],styles:[".border-deposit-type[_ngcontent-%COMP%]{border:1px solid #dadada;display:flex;align-items:center;padding:10px 20px;border-radius:5px}.border-deposit-type[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]{padding:0}.border-deposit-type[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]:first-child{border-right:1px solid #dadada}.border-deposit-type[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:20px!important;height:20px;margin:0;padding:0}.border-deposit-type[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{line-height:1;font-weight:500;padding:0;margin:0 0 0 5px}.inputColor[_ngcontent-%COMP%]{accent-color:#dc3545;height:15px;width:15px}.amountButton[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:14px 34px 14px 35px;height:48px;background:#f8f8f8;border:.5px solid #e9e9e9;border-radius:10px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-bottom:10px}form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:46px}form[_ngcontent-%COMP%]   span.text-danger[_ngcontent-%COMP%]{font-weight:500;padding-top:7px}.file-item[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid #dadada;background:white}.file-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:1;color:green;font-weight:600}.card-table[_ngcontent-%COMP%]{border:.5px solid #f4f4f4;box-shadow:3px 7px 12px #0000002e;-webkit-box-shadow:3px 7px 12px 0px rgba(0,0,0,.18);-moz-box-shadow:3px 7px 12px 0px rgba(0,0,0,.18)}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:center;gap:8px}.play-left[_ngcontent-%COMP%]{color:#eceaea;transform:rotate(180deg);margin-right:5px}.play-right[_ngcontent-%COMP%]{color:#eceaea}.card-upload[_ngcontent-%COMP%]{border:1px dashed #939aa8;text-align:center;padding:10px;border-radius:10px;margin:10px 0;cursor:pointer}.card-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;margin-bottom:15px}.card-upload[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;font-size:18px;color:#0f0f0f}.card-upload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:18px;color:#676767}.btn-upload[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border-radius:10px;padding:12px 35px;font-size:16px;font-weight:600;margin:10px 0}.card-Box[_ngcontent-%COMP%]{background:#ffffff;border:.5px solid #f5f5f5;box-shadow:0 15px 25px #0000001a;border-radius:8px;padding:24px 34px}.flex-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.headingText[_ngcontent-%COMP%]{font-style:normal;font-weight:700;font-size:18px;line-height:22px;color:#1b212d}.mdtext[_ngcontent-%COMP%]{font-style:normal;font-weight:600;font-size:16px;color:#1b212d}.smText[_ngcontent-%COMP%]{font-style:normal;font-weight:500;font-size:16px;color:#858585}.linkText[_ngcontent-%COMP%]{font-family:Kumbh Sans;font-style:normal;font-weight:400;font-size:16px;line-height:22px;color:#4e9aff}.linkText2[_ngcontent-%COMP%]{font-family:Kumbh Sans;font-size:16px;font-weight:600;line-height:20px;letter-spacing:0em;text-align:left;color:#4e9aff}.headButton[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:95px;height:34.2px;border-radius:8px}.headButtonText[_ngcontent-%COMP%]{font-family:Kumbh Sans;font-size:14px;font-weight:600;line-height:17px;letter-spacing:0em;text-align:left}.separator[_ngcontent-%COMP%]{border-bottom:1px solid #e9e9e9;margin:20px 0}"]}),o})();var Fe=r(71891),Pe=r(36690);function Qe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"h6",7),e._uU(2,"Attachment"),e.qZA(),e.TgZ(3,"div",18)(4,"label",19),e._uU(5),e.qZA(),e.TgZ(6,"div",20)(7,"img",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.viewFile())}),e.qZA(),e.TgZ(8,"a",22),e._UZ(9,"img",23),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Oqu(t.fileName),e.xp6(3),e.s9C("href",null==t.depositDetails?null:t.depositDetails.filePath,e.LSH)}}function Se(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"number"),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.Oqu(null==t?null:t.chequeCustomer),e.xp6(2),e.Oqu(null==t?null:t.chequeNo),e.xp6(2),e.Oqu(null==t||null==t.bank||null==t.bank.translation[0]?null:t.bank.translation[0].lookupName),e.xp6(2),e.Oqu(e.xi3(9,5,null==t?null:t.chequeDate,"mediumDate")),e.xp6(3),e.hij("",e.xi3(12,8,null==t?null:t.chequeCollectionJod,"2.3-3")," JD")}}function Le(o,a){1&o&&(e.TgZ(0,"div",33),e._UZ(1,"app-not-found"),e.qZA())}function Ee(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",24)(2,"div",25)(3,"table",26)(4,"thead")(5,"tr")(6,"th",27)(7,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByCustomer())}),e._uU(8," Customer "),e._UZ(9,"i",29)(10,"i",30),e.qZA()(),e.TgZ(11,"th",27)(12,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByCheque())}),e._uU(13," Cheque No "),e._UZ(14,"i",29)(15,"i",30),e.qZA()(),e.TgZ(16,"th",27)(17,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByBank())}),e._uU(18," Bank "),e._UZ(19,"i",29)(20,"i",30),e.qZA()(),e.TgZ(21,"th",27)(22,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByDate())}),e._uU(23," Date "),e._UZ(24,"i",29)(25,"i",30),e.qZA()(),e.TgZ(26,"th",27)(27,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByAmount())}),e._uU(28," Amount "),e._UZ(29,"i",29)(30,"i",30),e.qZA()()()(),e.TgZ(31,"tbody"),e.YNc(32,Se,13,11,"tr",31),e.qZA()()(),e.YNc(33,Le,2,0,"div",32),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(7),e.Q6J("disabled",0==(null==t.depositedChequeList?null:t.depositedChequeList.length)),e.xp6(2),e.ekj("active",2==t.sort),e.xp6(1),e.ekj("active",3==t.sort),e.xp6(2),e.Q6J("disabled",0==(null==t.depositedChequeList?null:t.depositedChequeList.length)),e.xp6(2),e.ekj("active",4==t.sort),e.xp6(1),e.ekj("active",5==t.sort),e.xp6(2),e.Q6J("disabled",0==(null==t.depositedChequeList?null:t.depositedChequeList.length)),e.xp6(2),e.ekj("active",6==t.sort),e.xp6(1),e.ekj("active",7==t.sort),e.xp6(2),e.Q6J("disabled",0==(null==t.depositedChequeList?null:t.depositedChequeList.length)),e.xp6(2),e.ekj("active",8==t.sort),e.xp6(1),e.ekj("active",9==t.sort),e.xp6(2),e.Q6J("disabled",0==(null==t.depositedChequeList?null:t.depositedChequeList.length)),e.xp6(2),e.ekj("active",10==t.sort),e.xp6(1),e.ekj("active",11==t.sort),e.xp6(2),e.Q6J("ngForOf",t.depositedChequeList),e.xp6(1),e.Q6J("ngIf",0==(null==t.depositedChequeList?null:t.depositedChequeList.length))}}function Ge(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}const Ye=function(o){return{active:o}};function je(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",34)(1,"button",35),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.setPage(l))}),e._uU(2),e.qZA()()}if(2&o){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,Ye,n.pageNo===t))("disabled",n.pageNo===t),e.xp6(1),e.hij(" ",t+1," ")}}const Ve=[{path:"bank-deposits",component:S},{path:"create-deposit",component:Be},{path:"deposited-cheques/:depositId",component:(()=>{class o{constructor(t,n,i,l,c){this._activeRoute=t,this._commonService=n,this._headerService=i,this._allocationService=l,this._modalService=c,this.depositedChequeList=[],this.sort=1,this.totalRecords=0,this.pageNo=0,this.pages=[]}ngOnInit(){this._headerService.setTitle("Main Fund Deposits > Deposited Cheque Details View"),this._activeRoute.params.subscribe(t=>{this.depositId=t.depositId,this.getChequeDepositDetails()})}getChequeDepositDetails(){this._allocationService.getChequeDepositDetails(`?DepositeId=${this.depositId}&Sort=${this.sort}&PageNo=${this.pageNo}&PageSize=6`).subscribe(n=>{this.depositedChequeList=n.data,console.log(n),this._allocationService.getDepositsById(this.depositId,"cheque").subscribe(i=>{console.log(i),this.depositDetails=i.data[0],this.fileName=this.depositDetails.filePath.split("/").pop(),this.totalRecords=i.totalRecordCount})})}viewFile(){this._modalService.open(Fe.W,{size:"md"}).componentInstance.file=this.depositDetails?.filePath}sortByCustomer(){this.sort=3==this.sort?1:2==this.sort?3:2,this.getChequeDepositDetails()}sortByCheque(){this.sort=5==this.sort?1:4==this.sort?5:4,this.getChequeDepositDetails()}sortByBank(){this.sort=7==this.sort?1:6==this.sort?7:6,this.getChequeDepositDetails()}sortByDate(){this.sort=9==this.sort?1:8==this.sort?9:8,this.getChequeDepositDetails()}sortByAmount(){this.sort=11==this.sort?1:10==this.sort?11:10,this.getChequeDepositDetails()}setPage(t){this.pageNo=t,window.scroll(0,0),this.getChequeDepositDetails()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.gz),e.Y36(f.v),e.Y36(Pe.r),e.Y36(C.U),e.Y36(h.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-deposited-cheques"]],decls:64,vars:23,consts:[[1,"d-flex","flex-row","my-3","gap-4"],[1,"dark-gray","fw-700"],[1,"light-gray"],[1,"card-Box"],[1,"separator","my-4"],[1,"d-flex","flex-wrap"],[1,"d-flex","flex-column","flex-basis"],[1,"dark-gray","fw-600"],["class","d-flex flex-column flex-basis",4,"ngIf"],[1,"col-12","d-flex","justify-content-between","align-items-center","my-5"],[1,"font-16","fw-500","gray-500"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[1,"col-md-6",3,"hidden"],[1,"showing"],[1,"pagination"],["class","page-item",4,"ngFor","ngForOf"],[1,"file-item","d-flex","justify-content-between","align-items-center","py-2","px-3"],[1,"fw-600","green-clr"],[1,"d-flex","gap-2","align-items-center"],["height","20","src","assets/images/eye.png",1,"cursor-pointer",3,"click"],["target","_blank","download","",3,"href"],["height","20","src","assets/images/Download.png",1,"cursor-pointer"],[1,"card-table","mt-2"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"not-found"],[1,"page-item"],[1,"page-link",3,"ngClass","disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h6",1),e._uU(2,"Cheque Type"),e.qZA(),e.TgZ(3,"p",2),e._uU(4),e.qZA()(),e.TgZ(5,"div",3)(6,"h6",1),e._uU(7,"Deposit Details"),e.qZA(),e._UZ(8,"div",4),e.TgZ(9,"div",5)(10,"div",6)(11,"h6",7),e._uU(12,"Deposit ID "),e.qZA(),e.TgZ(13,"p",2),e._uU(14),e.qZA()(),e.TgZ(15,"div",6)(16,"h6",7),e._uU(17,"Employee"),e.qZA(),e.TgZ(18,"p",2),e._uU(19),e.qZA()(),e.TgZ(20,"div",6)(21,"h6",7),e._uU(22,"Deposit Date "),e.qZA(),e.TgZ(23,"p",2),e._uU(24),e.ALo(25,"date"),e.qZA()(),e.TgZ(26,"div",6)(27,"h6",7),e._uU(28,"Deposit Time"),e.qZA(),e.TgZ(29,"p",2),e._uU(30),e.ALo(31,"date"),e.qZA()(),e.TgZ(32,"div",6)(33,"h6",7),e._uU(34,"Account Name"),e.qZA(),e.TgZ(35,"p",2),e._uU(36),e.qZA()(),e.TgZ(37,"div",6)(38,"h6",7),e._uU(39,"Account No."),e.qZA(),e.TgZ(40,"p",2),e._uU(41),e.qZA()(),e.YNc(42,Qe,10,2,"div",8),e.qZA()(),e.TgZ(43,"div",9)(44,"h6",7),e._uU(45,"All Cheques"),e.qZA(),e.TgZ(46,"span",10),e._uU(47),e.qZA()(),e.YNc(48,Ee,34,27,"div",11),e.TgZ(49,"div",12),e.YNc(50,Ge,2,0,"ng-template",null,13,e.W1O),e.qZA(),e.TgZ(52,"div",14)(53,"h6",15),e._uU(54," Showing "),e.TgZ(55,"span"),e._uU(56),e.qZA(),e._uU(57," from "),e.TgZ(58,"span"),e._uU(59),e.qZA(),e._uU(60," data "),e.qZA()(),e.TgZ(61,"div",14)(62,"ul",16),e.YNc(63,je,3,5,"li",17),e.qZA()()),2&t){const i=e.MAs(51);e.xp6(4),e.Oqu(null==n.depositDetails?null:n.depositDetails.chequeType),e.xp6(10),e.Oqu(null==n.depositDetails?null:n.depositDetails.depositeId),e.xp6(5),e.Oqu(null==n.depositDetails?null:n.depositDetails.createdByObj),e.xp6(5),e.Oqu(e.xi3(25,17,null==n.depositDetails?null:n.depositDetails.depositDate,"mediumDate")),e.xp6(6),e.Oqu(e.xi3(31,20,null==n.depositDetails?null:n.depositDetails.depositDate,"h:mm a")),e.xp6(6),e.Oqu(null==n.depositDetails?null:n.depositDetails.accountName),e.xp6(5),e.Oqu(null==n.depositDetails?null:n.depositDetails.accountNumber),e.xp6(1),e.Q6J("ngIf",(null==n.depositDetails?null:n.depositDetails.filePath)&&n.fileName),e.xp6(5),e.hij("No of Cheques ",n.totalRecords,""),e.xp6(1),e.Q6J("ngIf",n.depositedChequeList)("ngIfElse",i),e.xp6(4),e.Q6J("hidden",n.totalRecords<7),e.xp6(4),e.AsE(" ",6*(n.pageNo+1)-5," - ",6==(null==n.depositedChequeList?null:n.depositedChequeList.length)?6*(n.pageNo+1):n.totalRecords," "),e.xp6(3),e.hij(" ",n.totalRecords," "),e.xp6(2),e.Q6J("hidden",n.totalRecords<7),e.xp6(2),e.Q6J("ngForOf",n.pages)}},dependencies:[s.mk,s.sg,s.O5,Z.N,q.w,s.JJ,s.uU],styles:[".applyMargin[_ngcontent-%COMP%]{margin-top:2.5rem}.card-table[_ngcontent-%COMP%]{border:.5px solid #f4f4f4;box-shadow:3px 7px 12px #0000002e;-webkit-box-shadow:3px 7px 12px 0px rgba(0,0,0,.18);-moz-box-shadow:3px 7px 12px 0px rgba(0,0,0,.18)}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:center;gap:8px}.play-left[_ngcontent-%COMP%]{color:#eceaea;transform:rotate(180deg);margin-right:5px}.play-right[_ngcontent-%COMP%]{color:#eceaea}.card-Box[_ngcontent-%COMP%]{background:#ffffff;border:.5px solid #f5f5f5;box-shadow:0 15px 25px #0000001a;border-radius:8px;padding:24px 34px}.flex-basis[_ngcontent-%COMP%]{flex:0 0 20%}.file-item[_ngcontent-%COMP%]{border:1px solid #2eb93e;border-radius:5px}.separator[_ngcontent-%COMP%]{border-bottom:1px solid #e9e9e9}"]}),o})()}];let Re=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(Ve),d.Bz]}),o})();var Ke=r(21515);let He=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[s.ez,Re,Ke.m]}),o})()},71891:(b,x,r)=>{r.d(x,{W:()=>C});var s=r(94650),d=r(42953),g=r(36895);function e(u,h){if(1&u&&(s.ynx(0),s._UZ(1,"img",7),s.BQk()),2&u){const p=s.oxw(2);s.xp6(1),s.Q6J("src",p.file,s.LSH)}}function m(u,h){if(1&u&&(s.TgZ(0,"div",8),s._UZ(1,"img",9)(2,"br"),s.TgZ(3,"a",10),s._uU(4,"click to open pdf "),s.qZA()()),2&u){const p=s.oxw(2);s.xp6(3),s.s9C("href",p.file,s.LSH)}}function f(u,h){if(1&u&&(s.ynx(0),s.YNc(1,e,2,1,"ng-container",1),s.YNc(2,m,5,1,"ng-template",null,6,s.W1O),s.BQk()),2&u){const p=s.MAs(3),v=s.oxw();s.xp6(1),s.Q6J("ngIf","png"==v.fileType||"jpeg"==v.fileType||"jpg"==v.fileType)("ngIfElse",p)}}function _(u,h){1&u&&(s.TgZ(0,"p",11),s._uU(1,"No attachemnt..."),s.qZA())}let C=(()=>{class u{constructor(p){this._activeModal=p,this.fileType=""}ngOnInit(){this.getFileType(this.file)}getFileType(p){this.fileType=p?.split(".").pop()}}return u.\u0275fac=function(p){return new(p||u)(s.Y36(d.Kz))},u.\u0275cmp=s.Xpm({type:u,selectors:[["app-view-uploaded-file"]],inputs:{file:"file"},decls:8,vars:2,consts:[[1,"modal-body","p-2"],[4,"ngIf","ngIfElse"],["noFile",""],[1,"flex-end"],[1,"btns-group","my-2","mx-0"],["type","button",1,"btn","btn-save",3,"click"],["pdf",""],[1,"w-100",3,"src"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],["height","80","width","80","src","assets/images/pdf.png","alt",""],["target","_blank",1,"text-decoration-none","text-capitalize",3,"href"],[1,"primary-clr","mx-0","my-3"]],template:function(p,v){if(1&p&&(s.TgZ(0,"div",0),s.YNc(1,f,4,2,"ng-container",1),s.YNc(2,_,2,0,"ng-template",null,2,s.W1O),s.TgZ(4,"div",3)(5,"div",4)(6,"button",5),s.NdJ("click",function(){return v._activeModal.close("Close click")}),s._uU(7," Close "),s.qZA()()()()),2&p){const Z=s.MAs(3);s.xp6(1),s.Q6J("ngIf",v.file)("ngIfElse",Z)}},dependencies:[g.O5]}),u})()},28424:(b,x,r)=>{r.d(x,{N:()=>d});var s=r(94650);let d=(()=>{class g{}return g.\u0275fac=function(m){return new(m||g)},g.\u0275cmp=s.Xpm({type:g,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"loading"],[1,"fa-solid","fa-circle-notch","fa-spin"]],template:function(m,f){1&m&&(s.TgZ(0,"div",0),s._UZ(1,"i",1),s.qZA())},styles:[".loading[_ngcontent-%COMP%]{text-align:center;padding:30px}.loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:46px;color:#dc3545}.loading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px}"]}),g})()},59442:(b,x,r)=>{r.d(x,{w:()=>d});var s=r(94650);let d=(()=>{class g{}return g.\u0275fac=function(m){return new(m||g)},g.\u0275cmp=s.Xpm({type:g,selectors:[["app-not-found"]],decls:3,vars:0,consts:[[1,"not-found"]],template:function(m,f){1&m&&(s.TgZ(0,"div",0)(1,"p"),s._uU(2," No data to display "),s.qZA()())},styles:[".not-found[_ngcontent-%COMP%]{text-align:center;padding:10%}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c9c9d1;font-size:16px;font-weight:600}"]}),g})()},53823:(b,x,r)=>{r.d(x,{V:()=>d});var s=r(94650);let d=(()=>{class g{constructor(){this.text=""}}return g.\u0275fac=function(m){return new(m||g)},g.\u0275cmp=s.Xpm({type:g,selectors:[["saving-loader"]],inputs:{text:"text"},decls:3,vars:1,consts:[["type","button","disabled","",1,"btn","btn-save","d-flex","align-items-center","gap-2"],[1,"fa-solid","fa-circle-notch","fa-spin"]],template:function(m,f){1&m&&(s.TgZ(0,"button",0),s._uU(1),s._UZ(2,"i",1),s.qZA()),2&m&&(s.xp6(1),s.hij(" ",f.text&&f.text||"Saving",""))}}),g})()},67711:(b,x,r)=>{r.d(x,{L:()=>f});var s=r(94650),d=r(36895);function g(_,C){if(1&_&&(s.TgZ(0,"span",2),s._uU(1),s.qZA()),2&_){const u=C.$implicit,h=s.oxw(3);s.xp6(1),s.Oqu(h.errorMessages[u])}}function e(_,C){if(1&_&&(s.ynx(0),s.YNc(1,g,2,1,"span",1),s.BQk()),2&_){const u=s.oxw(2);s.xp6(1),s.Q6J("ngForOf",u.validationKeys)}}function m(_,C){if(1&_&&(s.ynx(0),s.YNc(1,e,2,1,"ng-container",0),s.BQk()),2&_){const u=s.oxw();s.xp6(1),s.Q6J("ngIf",u.control.invalid&&(u.control.dirty||u.control.touched))}}let f=(()=>{class _{get validationKeys(){let u=this.control;return u&&u.errors?Object.keys(u.errors):[]}}return _.\u0275fac=function(u){return new(u||_)},_.\u0275cmp=s.Xpm({type:_,selectors:[["validation-error"]],inputs:{control:"control",errorMessages:"errorMessages"},decls:1,vars:1,consts:[[4,"ngIf"],["class","validation-error d-block",4,"ngFor","ngForOf"],[1,"validation-error","d-block"]],template:function(u,h){1&u&&s.YNc(0,m,2,1,"ng-container",0),2&u&&s.Q6J("ngIf",null==h.control?null:h.control.errors)},dependencies:[d.sg,d.O5]}),_})()},67761:(b,x,r)=>{r.d(x,{g:()=>e});var s=r(71891),d=r(94650),g=r(42953);let e=(()=>{class m{constructor(_){this._modalService=_}ngOnInit(){}fileAction(_){"view"==_&&this.openFileModal()}openFileModal(){this._modalService.open(s.W).componentInstance.file=this.file}getFileType(_){return _?.split("/").pop()}}return m.\u0275fac=function(_){return new(_||m)(d.Y36(g.FF))},m.\u0275cmp=d.Xpm({type:m,selectors:[["view-file"]],inputs:{file:"file",data:"data"},decls:8,vars:1,consts:[[1,"file-item"],[1,"d-flex","gap-3","align-items-center","justify-content-between"],[1,"m-0","green-clr"],[1,"d-flex","gap-2","align-items-center"],[1,"fas","fa-eye","cursor-pointer","gray-500",3,"click"],["target","_blank",3,"href"],[1,"fas","fa-download","green-clr"]],template:function(_,C){1&_&&(d.TgZ(0,"div",0)(1,"div",1)(2,"label",2),d._uU(3,"Attachment"),d.qZA(),d.TgZ(4,"div",3)(5,"i",4),d.NdJ("click",function(){return C.fileAction("view")}),d.qZA(),d.TgZ(6,"a",5),d._UZ(7,"i",6),d.qZA()()()()),2&_&&(d.xp6(6),d.s9C("href",C.file,d.LSH))},styles:[".file-item[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid var(--green);background:white;max-width:100%}.file-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:1;color:green;font-weight:600}"]}),m})()}}]);