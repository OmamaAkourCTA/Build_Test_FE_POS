"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[2574],{32298:(D,v,d)=>{d.d(v,{g:()=>q});var o=d(94650),p=d(42953),h=d(11481),f=d(36895);function u(C,A){if(1&C&&(o.ynx(0),o._UZ(1,"img",6),o.BQk()),2&C){const m=o.oxw(2);o.xp6(1),o.Q6J("src",null==m.imageUploadedView?null:m.imageUploadedView.base64,o.LSH)}}function e(C,A){if(1&C&&(o.TgZ(0,"div",7),o._UZ(1,"img",8)(2,"br"),o.TgZ(3,"a",9),o._uU(4,"click to open pdf "),o.qZA()()),2&C){const m=o.oxw(2);o.xp6(3),o.Q6J("href",m.viewPdf(null==m.imageUploadedView?null:m.imageUploadedView.file),o.LSH)}}function c(C,A){if(1&C){const m=o.EpF();o.ynx(0),o.TgZ(1,"div",2),o.YNc(2,u,2,1,"ng-container",0),o.YNc(3,e,5,1,"ng-template",null,3,o.W1O),o.qZA(),o.TgZ(5,"div",4)(6,"button",5),o.NdJ("click",function(){o.CHM(m);const S=o.oxw();return o.KtG(S.activeModal.close("Close click"))}),o._uU(7," Close "),o.qZA()(),o.BQk()}if(2&C){const m=o.MAs(4),Z=o.oxw();o.xp6(2),o.Q6J("ngIf","image/png"==(null==Z.imageUploadedView?null:Z.imageUploadedView.fileType)||"image/jpeg"==(null==Z.imageUploadedView?null:Z.imageUploadedView.fileType)||"image/jpg"==(null==Z.imageUploadedView?null:Z.imageUploadedView.fileType))("ngIfElse",m)}}function x(C,A){if(1&C&&(o.ynx(0),o._UZ(1,"img",11),o.BQk()),2&C){const m=o.oxw(2);o.xp6(1),o.Q6J("src",m.fileURL,o.LSH)}}function g(C,A){if(1&C&&(o.ynx(0),o.TgZ(1,"div",7),o._UZ(2,"img",8)(3,"br"),o.TgZ(4,"a",9),o._uU(5,"click to open PDF "),o.qZA()(),o.BQk()),2&C){const m=o.oxw(3);o.xp6(4),o.s9C("href",m.fileURL,o.LSH)}}function a(C,A){if(1&C&&(o.ynx(0,12),o.YNc(1,g,6,1,"ng-container",13),o.BQk()),2&C){const m=o.oxw(2);o.Q6J("ngSwitch",m.fileType),o.xp6(1),o.Q6J("ngSwitchCase","pdf")}}function b(C,A){if(1&C){const m=o.EpF();o.TgZ(0,"div",2),o.YNc(1,x,2,1,"ng-container",0),o.YNc(2,a,2,2,"ng-template",null,10,o.W1O),o.qZA(),o.TgZ(4,"div",4)(5,"button",5),o.NdJ("click",function(){o.CHM(m);const S=o.oxw();return o.KtG(S.activeModal.close("Close click"))}),o._uU(6," Close "),o.qZA()()}if(2&C){const m=o.MAs(3),Z=o.oxw();o.xp6(1),o.Q6J("ngIf","png"==Z.fileType||"jpeg"==Z.fileType||"jpg"==Z.fileType||"svg"==Z.fileType)("ngIfElse",m)}}let q=(()=>{class C{constructor(m,Z){this.activeModal=m,this.sanitizer=Z,this.viewOnly=!1,this.fileType="",this.fileURL=""}ngOnInit(){console.log(this.imageUploadedView),this.viewOnly=this.imageUploadedView?.viewOnly,this.viewOnly&&(this.fileType=this.getFileType(this.imageUploadedView.url),this.fileURL=this.imageUploadedView.url)}viewPdf(m){let Z=URL.createObjectURL(m);return this.sanitizer.bypassSecurityTrustResourceUrl(Z)}getFileType(m){return m?.split(".").pop().trim().toLowerCase()}}return C.\u0275fac=function(m){return new(m||C)(o.Y36(p.Kz),o.Y36(h.H7))},C.\u0275cmp=o.Xpm({type:C,selectors:[["app-view-file"]],inputs:{imageUploadedView:"imageUploadedView"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["viewOnlyURL",""],[1,"modal-body","p-2"],["pdf",""],[1,"btns-group","my-2","mx-0"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"w-100",3,"src"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],["height","80","width","80","src","assets/images/pdf.png","alt",""],["target","_blank",1,"text-decoration-none","text-capitalize",3,"href"],["elseExtViewBlock",""],[1,"w-100","mb-2",3,"src"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(m,Z){if(1&m&&(o.YNc(0,c,8,2,"ng-container",0),o.YNc(1,b,7,2,"ng-template",null,1,o.W1O)),2&m){const S=o.MAs(2);o.Q6J("ngIf",!Z.viewOnly)("ngIfElse",S)}},dependencies:[f.O5,f.RF,f.n9],styles:[".imagepath[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.imagepath-no[_ngcontent-%COMP%]{text-align:center;padding:50px}.btns-group[_ngcontent-%COMP%]{display:flex;justify-content:center}.btns-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#f8f8f8;color:#dc3545;border-radius:10px;padding:12px 35px;font-weight:600}.card-pdf[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px}.card-pdf[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;font-size:18px;font-weight:600;display:block;padding:15px}"]}),C})()},71891:(D,v,d)=>{d.d(v,{W:()=>x});var o=d(94650),p=d(42953),h=d(36895);function f(g,a){if(1&g&&(o.ynx(0),o._UZ(1,"img",7),o.BQk()),2&g){const b=o.oxw(2);o.xp6(1),o.Q6J("src",b.file,o.LSH)}}function u(g,a){if(1&g&&(o.TgZ(0,"div",8),o._UZ(1,"img",9)(2,"br"),o.TgZ(3,"a",10),o._uU(4,"click to open pdf "),o.qZA()()),2&g){const b=o.oxw(2);o.xp6(3),o.s9C("href",b.file,o.LSH)}}function e(g,a){if(1&g&&(o.ynx(0),o.YNc(1,f,2,1,"ng-container",1),o.YNc(2,u,5,1,"ng-template",null,6,o.W1O),o.BQk()),2&g){const b=o.MAs(3),q=o.oxw();o.xp6(1),o.Q6J("ngIf","png"==q.fileType||"jpeg"==q.fileType||"jpg"==q.fileType)("ngIfElse",b)}}function c(g,a){1&g&&(o.TgZ(0,"p",11),o._uU(1,"No attachemnt..."),o.qZA())}let x=(()=>{class g{constructor(b){this._activeModal=b,this.fileType=""}ngOnInit(){this.getFileType(this.file)}getFileType(b){this.fileType=b?.split(".").pop()}}return g.\u0275fac=function(b){return new(b||g)(o.Y36(p.Kz))},g.\u0275cmp=o.Xpm({type:g,selectors:[["app-view-uploaded-file"]],inputs:{file:"file"},decls:8,vars:2,consts:[[1,"modal-body","p-2"],[4,"ngIf","ngIfElse"],["noFile",""],[1,"flex-end"],[1,"btns-group","my-2","mx-0"],["type","button",1,"btn","btn-save",3,"click"],["pdf",""],[1,"w-100",3,"src"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],["height","80","width","80","src","assets/images/pdf.png","alt",""],["target","_blank",1,"text-decoration-none","text-capitalize",3,"href"],[1,"primary-clr","mx-0","my-3"]],template:function(b,q){if(1&b&&(o.TgZ(0,"div",0),o.YNc(1,e,4,2,"ng-container",1),o.YNc(2,c,2,0,"ng-template",null,2,o.W1O),o.TgZ(4,"div",3)(5,"div",4)(6,"button",5),o.NdJ("click",function(){return q._activeModal.close("Close click")}),o._uU(7," Close "),o.qZA()()()()),2&b){const C=o.MAs(3);o.xp6(1),o.Q6J("ngIf",q.file)("ngIfElse",C)}},dependencies:[h.O5]}),g})()},32574:(D,v,d)=>{d.r(v),d.d(v,{RegisterSettlementsModule:()=>Ni});var o=d(36895),p=d(39485),h=d(86349),f=d(75706),u=d(86260),e=d(94650),c=d(1618),x=d(75304),g=d(36690),a=d(24006),b=d(42953),q=d(59245),C=d(72402),A=d(94349),m=d(28424),Z=d(59442);const S=["success"];function F(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.resetRegisterNo())}),e._UZ(1,"i",27),e.qZA()}}function j(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"i",28),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.resetDate())}),e.qZA()}}function Q(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",45)(2,"button",46),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.navigateTo("settle",null==l?null:l.registerSessionId))}),e._uU(3,"Settle"),e.qZA()(),e.BQk()}}function R(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",45)(2,"button",46),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.markAsOnHold(l))}),e._uU(3,"Mark as On-Hold"),e.qZA()(),e.BQk()}}function Y(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ul",44),e.YNc(1,Q,4,0,"ng-container",23),e.TgZ(2,"li",45)(3,"button",46),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw(2),_=e.MAs(30);return e.KtG(r.openModal(_,l))}),e._uU(4,"Force Close"),e.qZA()(),e.TgZ(5,"li",45)(6,"button",46),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.navigateTo("register",null==l||null==l.register?null:l.register.registerId))}),e._uU(7,"View Register Details"),e.qZA()(),e.TgZ(8,"li",45)(9,"button",46),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.navigateTo("session",null==l?null:l.registerSessionId))}),e._uU(10,"View Session Details"),e.qZA()(),e.YNc(11,R,4,0,"ng-container",23),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.status==n.status.Closed||t.status==n.status.Unclosed||t.status==n.status.Partial||t.status==n.status.OnHold||t.status==n.status.PartiallySettled||t.status==n.status.RegisterFullDeposit),e.xp6(10),e.Q6J("ngIf",t.status==n.status.Closed||t.status==n.status.Unclosed||t.status==n.status.Partial)}}const E=function(i,s){return{"background-color":i,color:s}};function G(i,s){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td")(15,"div",39),e._uU(16),e.qZA()(),e.TgZ(17,"td")(18,"div",40)(19,"div",41),e._UZ(20,"i",42),e.qZA(),e.YNc(21,Y,12,2,"ul",43),e.qZA()()()),2&i){const t=s.$implicit;e.xp6(2),e.Oqu(null==t||null==t.branch?null:t.branch.branchName),e.xp6(2),e.Oqu(null==t?null:t.register.registerId),e.xp6(2),e.Oqu(null==t?null:t.register.registersName),e.xp6(2),e.Oqu(null==t?null:t.registerSessionId),e.xp6(2),e.Oqu(e.xi3(11,8,null==t?null:t.createdAt,"short")),e.xp6(3),e.Oqu(null==t||null==t.createdBy?null:t.createdBy.fullName),e.xp6(2),e.Q6J("ngStyle",e.WLB(11,E,null==t||null==t.statusObj?null:t.statusObj.lookupBGColor,null==t||null==t.statusObj?null:t.statusObj.lookupTextColor)),e.xp6(1),e.hij(" ",null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName," ")}}function L(i,s){1&i&&(e.TgZ(0,"div",47),e._UZ(1,"app-not-found"),e.qZA())}function H(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",29)(2,"div",30)(3,"table",31)(4,"thead")(5,"tr")(6,"th",32)(7,"button",33),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByBranch())}),e._uU(8," Branch "),e._UZ(9,"i",34)(10,"i",35),e.qZA()(),e.TgZ(11,"th",32)(12,"button",33),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByRegisterNo())}),e._uU(13," Register No. "),e._UZ(14,"i",34)(15,"i",35),e.qZA()(),e.TgZ(16,"th",32)(17,"button",33),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByRegisterName())}),e._uU(18," Register Name "),e._UZ(19,"i",34)(20,"i",35),e.qZA()(),e.TgZ(21,"th",32)(22,"button",36),e._uU(23,"Session Id"),e.qZA()(),e.TgZ(24,"th",32)(25,"button",33),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByDate())}),e._uU(26," Request Date "),e._UZ(27,"i",34)(28,"i",35),e.qZA()(),e.TgZ(29,"th",32)(30,"button",33),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByRequested())}),e._uU(31," Requested By "),e._UZ(32,"i",34)(33,"i",35),e.qZA()(),e.TgZ(34,"th",32)(35,"button",33),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByStatus())}),e._uU(36," Status "),e._UZ(37,"i",34)(38,"i",35),e.qZA()(),e.TgZ(39,"th",32)(40,"button",36),e._uU(41," Action "),e.qZA()()()(),e.TgZ(42,"tbody"),e.YNc(43,G,22,14,"tr",37),e.qZA()()(),e.YNc(44,L,2,0,"div",38),e.qZA()()}if(2&i){const t=s.$implicit,n=e.oxw();e.xp6(7),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",2==n.sort),e.xp6(1),e.ekj("active",3==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",4==n.sort),e.xp6(1),e.ekj("active",5==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",6==n.sort),e.xp6(1),e.ekj("active",7==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",8==n.sort),e.xp6(1),e.ekj("active",9==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",10==n.sort),e.xp6(1),e.ekj("active",11==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",12==n.sort),e.xp6(1),e.ekj("active",13==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function K(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function z(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",48)(2,"div",49)(3,"h6",50),e._uU(4," Showing "),e.TgZ(5,"span"),e._uU(6),e.qZA(),e._uU(7," from "),e.TgZ(8,"span"),e._uU(9),e.qZA(),e._uU(10," data "),e.qZA()(),e.TgZ(11,"div",49)(12,"ngb-pagination",51),e.NdJ("pageChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.pageNo=l)})("pageChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.pageChange(l))}),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(6),e.AsE("",6*t.pageNo-5," - ",6==(null==t.sessionList?null:t.sessionList.length)?6*t.pageNo:t.totalRecords,""),e.xp6(3),e.hij(" ",t.totalRecords," "),e.xp6(3),e.Q6J("collectionSize",t.totalRecords)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}function V(i,s){if(1&i&&(e.TgZ(0,"p",75),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.errorMessage)}}function $(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",52)(1,"div",53)(2,"h4",54),e._uU(3,"Force Close"),e.qZA()(),e.TgZ(4,"div",55)(5,"div",56)(6,"div",57)(7,"h6",58),e._uU(8,"Branch Name"),e.qZA(),e.TgZ(9,"p",59),e._uU(10),e.qZA()(),e.TgZ(11,"div",57)(12,"h6",58),e._uU(13,"Register Name"),e.qZA(),e.TgZ(14,"p",59),e._uU(15),e.qZA()(),e.TgZ(16,"div",57)(17,"h6",58),e._uU(18,"Register No"),e.qZA(),e.TgZ(19,"p",59),e._uU(20),e.qZA()(),e.TgZ(21,"div",57)(22,"h6",58),e._uU(23,"Session No"),e.qZA(),e.TgZ(24,"p",59),e._uU(25),e.qZA()(),e.TgZ(26,"div",57)(27,"h6",58),e._uU(28,"Employee"),e.qZA(),e.TgZ(29,"p",59),e._uU(30),e.qZA()()(),e.TgZ(31,"h5",60),e._uU(32,"You are about to force close the following register"),e.qZA(),e.TgZ(33,"div",61)(34,"div",62)(35,"div",63)(36,"input",64),e.NdJ("ngModelChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.radioValue=l)}),e.qZA(),e.TgZ(37,"label",65),e._uU(38,"Close Register for all day "),e.qZA()()(),e.TgZ(39,"div",62)(40,"div",63)(41,"input",66),e.NdJ("ngModelChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.radioValue=l)}),e.qZA(),e.TgZ(42,"label",67),e._uU(43,"Close Session"),e.qZA()()(),e.TgZ(44,"div",62)(45,"div",63)(46,"input",68),e.NdJ("ngModelChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.radioValue=l)}),e.qZA(),e.TgZ(47,"label",69),e._uU(48,"Deactivate Register"),e.qZA()()()(),e.YNc(49,V,2,1,"p",70),e.qZA(),e.TgZ(50,"div",71)(51,"div",72)(52,"button",73),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Save click"))}),e._uU(53,"Cancel"),e.qZA(),e.TgZ(54,"button",74),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.handleSubmit())}),e._uU(55,"Submit"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(10),e.Oqu(null==t.sessionDetails||null==t.sessionDetails.branch?null:t.sessionDetails.branch.branchName),e.xp6(5),e.Oqu(null==t.sessionDetails||null==t.sessionDetails.register?null:t.sessionDetails.register.registersName),e.xp6(5),e.Oqu(null==t.sessionDetails||null==t.sessionDetails.register?null:t.sessionDetails.register.registerId),e.xp6(5),e.Oqu(null==t.sessionDetails?null:t.sessionDetails.registerSessionId),e.xp6(5),e.Oqu(null==t.sessionDetails||null==t.sessionDetails.createdBy?null:t.sessionDetails.createdBy.fullName),e.xp6(6),e.Q6J("value","cr_"+(null==t.sessionDetails||null==t.sessionDetails.register?null:t.sessionDetails.register.registerId))("ngModel",t.radioValue),e.xp6(5),e.Q6J("value","cs_"+(null==t.sessionDetails?null:t.sessionDetails.registerSessionId))("ngModel",t.radioValue)("disabled",t.sessionDetails.status!=t.status.Opened&&t.sessionDetails.status!=t.status.Partial),e.xp6(5),e.Q6J("disabled",2002==t.registerDetails.status)("value","dr_"+(null==t.sessionDetails||null==t.sessionDetails.register?null:t.sessionDetails.register.registerId))("ngModel",t.radioValue),e.xp6(3),e.Q6J("ngIf",t.errorMessage)}}function W(i,s){if(1&i&&(e.TgZ(0,"h5",79),e._UZ(1,"i",80),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.message)}}function X(i,s){if(1&i&&(e.TgZ(0,"h5",81),e._UZ(1,"i",82),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.response?null:t.response.errors[0].errorMessageEn)}}function ee(i,s){if(1&i&&(e.TgZ(0,"div",76),e.YNc(1,W,3,1,"h5",77),e.YNc(2,X,3,1,"ng-template",null,78,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.response?null:n.response.isSuccess)("ngIfElse",t)}}const te=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}};let ne=(()=>{class i{constructor(t,n,l,r,_,T,k){this._registerSettlementService=t,this._activeRoute=n,this._commonService=l,this._headerService=r,this.fb=_,this.datepipe=T,this.modalService=k,this.searchText="",this.filterParams=void 0,this.sort=1,this.totalRecords=0,this.pageNo=1,this.pageSize=6,this.pages=[],this.sessionList=[],this.branchesList=[],this.employeesList=[],this.statusList=[],this.status=f.qb,this.message="",this.errorMessage="",this.statusQp=""}initFilterForm(){this.sessionFilterForm=this.fb.group({register:[""],branch:[null],createdBy:[null],date:[""],status:[null]})}ngOnInit(){this._activeRoute.queryParams.subscribe(t=>{t.status&&(this.statusQp=t.status)}),this._headerService.setTitle(" Register Settlements"),this.getAllSessions(this.filterParams),this.getBaranches(),this.getEmployees(),this.getStatusList(16),this.initFilterForm(),this.sessionFilterForm.valueChanges.subscribe(t=>{this.statusQp="",this.pageNo=1;let l,n={fromDate:"",toDate:""};t.date&&(n.fromDate=this.datepipe.transform(t.date[0],"yyyy-MM-dd"),n.toDate=this.datepipe.transform(t.date[1],"yyyy-MM-dd")),l={...t,...n},delete l.date,null==l.branch&&(l={...l,branch:""}),null==l.createdBy&&(l={...l,createdBy:""}),null==l.status&&(l={...l,status:""}),this.filterParams="?"+new URLSearchParams(l).toString(),this.getAllSessions(this.filterParams)})}navigateTo(t,n){"settle"==t?this._commonService.NavigateToRoute("register-settlements/settle/",n):"session"==t?this._commonService.NavigateToRoute("register-settlements/session/",n):"register"==t&&this._commonService.NavigateToRoute("register-settlements/register",n)}openModal(t,n){this.radioValue="",this.sessionDetails={},this.sessionDetails=n,this._registerSettlementService.getRegisterDetails(n?.register?.registerId).subscribe(l=>{this.registerDetails={},this.registerDetails=l.data,this.modalService.open(t,{centered:!0,size:"lg"})})}markAsOnHold(t){console.log(t);const n=new FormData;n.append("registerId",t?.register?.registerId),n.append("registerSessionId",t?.registerSessionId),this._registerSettlementService.onholdRegisterSession(n).subscribe({next:l=>{l.isSuccess&&(this.getAllSessions(),this.responseModal("success","Status updated successfully!"))},error:l=>{console.log(l?.error?.errors),this.responseModal("error",l?.error?.errors[0].ErrorMessageEn)}})}responseModal(t,n){const l=this.modalService.open(u.i);l.componentInstance.type=t,l.componentInstance.dismissOnlyActive=!0,l.componentInstance.message=n}handleSubmit(){let t=this.radioValue.split("_"),n=t[0],l=t[1];if("cr"==n){const r=new FormData;r.append("registerId",l),this._registerSettlementService.forceCloseRegiter(r).subscribe(_=>{this.response=_,this.message="Close Register for all day request successfully sent",this.modalService.dismissAll(),this.getAllSessions();const T=this.modalService.open(this.success);setTimeout(()=>{T.close()},3e3)},_=>{this.errorMessage=_.error?.errors[0]?.ErrorMessageEn,setTimeout(()=>{this.errorMessage=""},4e3)})}else if("cs"==n){const r=new FormData;r.append("sessionId",l),this._registerSettlementService.forceCloseSession(r).subscribe(_=>{this.response=_,this.message="Session successfully forced to close, it\u2019s in waiting status now.",this.modalService.dismissAll(),this.getAllSessions();const T=this.modalService.open(this.success);setTimeout(()=>{T.close()},3e3)},_=>{this.errorMessage=_.error?.errors[0]?.ErrorMessageEn,setTimeout(()=>{this.errorMessage=""},4e3)})}else"dr"==n&&this._registerSettlementService.updateRegister(l).subscribe(r=>{this.response=r,this.message="Register successfully deactivated.",this.modalService.dismissAll();const _=this.modalService.open(this.success);this.getAllSessions(),setTimeout(()=>{_.close()},3e3)},r=>{this.errorMessage=r.error?.Errors[0]?.ErrorMessageEn,setTimeout(()=>{this.errorMessage=""},4e3)})}resetDate(){this.sessionFilterForm.controls.date.setValue("")}resetRegisterNo(){this.sessionFilterForm.controls.register.setValue("")}getAllSessions(t=this.filterParams){let n=`pageNo=${this.pageNo-1}&sort=${this.sort}&pageSize=${this.pageSize}`;this.statusQp&&(n+=`&status=${this.statusQp}`),this._registerSettlementService.getAllSessions(t&&t+`&${n}`||`?${n}`).subscribe(l=>{this.sessionList=l?.data,console.log(this.sessionList),this.totalRecords=l?.totalRecordCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=h.w6(this.pagin)})}getBaranches(){this._registerSettlementService.getBranches().subscribe(t=>{this.branchesList=t.data})}getEmployees(){this._registerSettlementService.getEmployees().subscribe(t=>{this.employeesList=t.data})}getStatusList(t){this._registerSettlementService.getStatusList(t).subscribe(n=>{this.statusList=n.data})}sortByBranch(){this.sort=3==this.sort?1:2==this.sort?3:2,this.getAllSessions()}sortByRegisterNo(){this.sort=5==this.sort?1:4==this.sort?5:4,this.getAllSessions()}sortByRegisterName(){this.sort=7==this.sort?1:6==this.sort?7:6,this.getAllSessions()}sortByDate(){this.sort=9==this.sort?1:8==this.sort?9:8,this.getAllSessions()}sortByRequested(){this.sort=11==this.sort?1:10==this.sort?11:10,this.getAllSessions()}sortByStatus(){this.sort=13==this.sort?1:12==this.sort?13:12,this.getAllSessions()}pageChange(t){this.pageNo=t,window.scroll(0,0),this.getAllSessions()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.D),e.Y36(p.gz),e.Y36(x.v),e.Y36(g.r),e.Y36(a.qu),e.Y36(o.uU),e.Y36(b.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reg-settlement"]],viewQuery:function(t,n){if(1&t&&e.Gf(S,5),2&t){let l;e.iGM(l=e.CRH())&&(n.success=l.first)}},decls:33,vars:12,consts:[[1,"page-layout"],[1,"heading-text"],[3,"formGroup"],[1,"row","align-items-stretch"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"input-group","search-box","h-100"],["type","button",1,"btn"],[1,"fa-solid","fa-search"],["type","text","formControlName","register","placeholder","Register Name or No.",1,"form-control"],["class","btn","type","button",3,"click",4,"ngIf"],["formControlName","branch","placeholder","Branch Name","bindLabel","branchName","bindValue","branchId",1,"flex-grow-1","mt-3","mt-sm-0",3,"items"],["formControlName","createdBy","placeholder","Employee","bindLabel","fullName","bindValue","userId",1,"flex-grow-1","mt-3","mt-md-0",3,"items"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","position-relative"],["class","fa-solid fa-times","style","position:absolute;top:15px;right:30px;cursor:pointer",3,"click",4,"ngIf"],["type","text","formControlName","date","placeholder","Select Date","bsDaterangepicker","","placement","left",1,"form-control","mt-3","mt-lg-0",2,"height","46px",3,"bsConfig"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","mt-3"],["formControlName","status","placeholder","Status","bindLabel","description","bindValue","id",1,"flex-grow-1",3,"items"],[1,"d-flex","justify-content-end"],[1,"total-records"],[1,"row"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[4,"ngIf"],["content",""],["success",""],["type","button",1,"btn",3,"click"],[1,"fa-solid","fa-xmark"],[1,"fa-solid","fa-times",2,"position","absolute","top","15px","right","30px","cursor","pointer",3,"click"],[1,"card-table","mt-2","register-sessions-table"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn",3,"disabled"],[4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"status-tag","w-auto","text-center",3,"ngStyle"],["dropdown","","container","body",1,"btn-group","remove-caret-dropdown"],["dropdownToggle","","aria-controls","dropdown-basic",1,"dot-details","cursor-pointer","dropdown-toggle"],[1,"fas","fa-ellipsis-h"],["id","dropdown-basic","class","dropdown-menu dropdown-menu-right custom-session-dd","role","menu","aria-labelledby","button-alignment",4,"dropdownMenu"],["id","dropdown-basic","role","menu","aria-labelledby","button-alignment",1,"dropdown-menu","dropdown-menu-right","custom-session-dd"],["role","menuitem"],["type","button",1,"dropdown-item",3,"click"],[1,"not-found"],[1,"row","justify-content-between","align-items-center"],[1,"col-md-6"],[1,"showing","mb-0"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"],[1,"fc-modal","p-4"],[1,"modal-header","p-0"],["ngbAutofocus","",1,"modal-title","fw-bolder","pb-3"],[1,"modal-body","p-0"],[1,"body-layout","mt-3"],[1,"d-flex","flex-column"],[1,"dark-gray","fw-bolder"],[1,"light-gray"],[1,"dark-gray","fw-bolder","my-4"],[1,"row","my-5"],[1,"col-md-4"],[1,"form-check","form-check-inline"],["type","radio","id","close",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","close",1,"form-check-label"],["type","radio","id","session",1,"form-check-input",3,"value","ngModel","disabled","ngModelChange"],["for","session",1,"form-check-label"],["type","radio","id","register",1,"form-check-input",3,"disabled","value","ngModel","ngModelChange"],["for","register",1,"form-check-label"],["class","alert alert-danger",4,"ngIf"],[1,"modal-footer","p-0"],[1,"btns-group"],["type","button",1,"btn","btn-cancel",3,"click"],["type","button",1,"btn","btn-save",3,"click"],[1,"alert","alert-danger"],[1,"modal-body"],["class","m-0 py-5 text-center",4,"ngIf","ngIfElse"],["errorMessage",""],[1,"m-0","py-5","text-center"],[1,"green-clr","fa-regular","fa-circle-check","me-2"],[1,"text-danger","m-0","py-5","text-center"],[1,"fa-regular","fa-circle-xmark","me-2"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Sessions List"),e.qZA(),e.TgZ(3,"form",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"button",6),e._UZ(8,"i",7),e.qZA(),e._UZ(9,"input",8),e.YNc(10,F,2,0,"button",9),e.qZA()(),e.TgZ(11,"div",4),e._UZ(12,"ng-select",10),e.qZA(),e.TgZ(13,"div",4),e._UZ(14,"ng-select",11),e.qZA(),e.TgZ(15,"div",12),e.YNc(16,j,1,0,"i",13),e._UZ(17,"input",14),e.qZA(),e.TgZ(18,"div",15),e._UZ(19,"ng-select",16),e.qZA()()(),e.TgZ(20,"div",17)(21,"p",18),e._uU(22),e.qZA()(),e.TgZ(23,"div",19),e.YNc(24,H,45,34,"div",20),e.TgZ(25,"div",21),e.YNc(26,K,2,0,"ng-template",null,22,e.W1O),e.qZA(),e.YNc(28,z,13,9,"ng-container",23),e.qZA()(),e.YNc(29,$,56,14,"ng-template",null,24,e.W1O),e.YNc(31,ee,4,2,"ng-template",null,25,e.W1O)),2&t){const l=e.MAs(27);e.xp6(3),e.Q6J("formGroup",n.sessionFilterForm),e.xp6(7),e.Q6J("ngIf",""!==n.sessionFilterForm.controls.register.value),e.xp6(2),e.Q6J("items",n.branchesList),e.xp6(2),e.Q6J("items",n.employeesList),e.xp6(2),e.Q6J("ngIf",n.sessionFilterForm.controls.date.value.length),e.xp6(1),e.Q6J("bsConfig",e.DdM(11,te)),e.xp6(2),e.Q6J("items",n.statusList),e.xp6(3),e.hij("Total No. ",n.totalRecords,""),e.xp6(2),e.Q6J("ngIf",n.sessionList)("ngIfElse",l),e.xp6(4),e.Q6J("ngIf",n.totalRecords>6)}},dependencies:[o.sg,o.O5,o.PC,q.Hz,q.Mq,q.TO,C.FR,C.TB,a._Y,a.Fj,a._,a.JJ,a.JL,a.sg,a.u,a.On,A.w9,b.N9,m.N,Z.w,o.uU]}),i})();var N=d(69082);function ie(i,s){if(1&i&&(e.TgZ(0,"div",6)(1,"div",7)(2,"h6",8),e._uU(3,"Register Basic Details"),e.qZA(),e._UZ(4,"div",9),e.qZA(),e._UZ(5,"hr"),e.TgZ(6,"div",10)(7,"div",9)(8,"h6",11),e._uU(9,"Active"),e.qZA(),e.TgZ(10,"div",12),e._UZ(11,"input",13),e.qZA()(),e.TgZ(12,"div",9)(13,"h6",11),e._uU(14,"Branch Name"),e.qZA(),e.TgZ(15,"h6",14),e._uU(16),e.qZA()(),e.TgZ(17,"div",9)(18,"h6",11),e._uU(19,"Location"),e.qZA(),e.TgZ(20,"h6",14),e._uU(21),e.qZA()(),e.TgZ(22,"div",9)(23,"h6",11),e._uU(24,"Register Name"),e.qZA(),e.TgZ(25,"h6",14),e._uU(26),e.qZA()(),e.TgZ(27,"div",9)(28,"h6",11),e._uU(29,"Register No."),e.qZA(),e.TgZ(30,"h6",14),e._uU(31),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(11),e.Q6J("checked",t.status.Active==(null==t.registerDetails||null==t.registerDetails.register?null:t.registerDetails.register.status)),e.xp6(5),e.Oqu((null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.basicDetails?null:t.registerDetails.register.basicDetails.branchName)||"-"),e.xp6(5),e.AsE("",(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.basicDetails?null:t.registerDetails.register.basicDetails.city)||"-",",",null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.basicDetails?null:t.registerDetails.register.basicDetails.branchArea,""),e.xp6(5),e.Oqu((null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.basicDetails?null:t.registerDetails.register.basicDetails.registersName)||"-"),e.xp6(5),e.Oqu((null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.basicDetails?null:t.registerDetails.register.basicDetails.registersId)||"-")}}const y=function(i,s,t,n){return{"green-clr":i,"gray-500":s,"primary-clr":t,"orange-clr":n}};function le(i,s){if(1&i&&(e.TgZ(0,"div",23)(1,"div",30)(2,"div",31)(3,"span",19),e._uU(4,"Session No"),e.qZA(),e.TgZ(5,"span",24),e._uU(6),e.qZA()(),e.TgZ(7,"div",31)(8,"span",19),e._uU(9,"Status"),e.qZA(),e.TgZ(10,"span",20),e._uU(11),e.qZA()()()()),2&i){const t=s.$implicit;e.xp6(6),e.Oqu(t.registerSessionId),e.xp6(4),e.Q6J("ngClass",e.l5B(3,y,"Open"===(null==t||null==t.statusObj[0]?null:t.statusObj[0].lookupName)||"Opened"===(null==t||null==t.statusObj[0]?null:t.statusObj[0].lookupName)||"Online"===(null==t||null==t.statusObj[0]?null:t.statusObj[0].lookupName)||"Settled"===(null==t||null==t.statusObj[0]?null:t.statusObj[0].lookupName),"Offline"===(null==t||null==t.statusObj[0]?null:t.statusObj[0].lookupName),"ForcedClose"===(null==t||null==t.statusObj[0]?null:t.statusObj[0].lookupName)||"Closed"===(null==t||null==t.statusObj[0]?null:t.statusObj[0].lookupName)||"UnClosed"===(null==t||null==t.statusObj[0]?null:t.statusObj[0].lookupName),"Waiting"===(null==t||null==t.statusObj[0]?null:t.statusObj[0].lookupName)||"Partial"===(null==t||null==t.statusObj[0]?null:t.statusObj[0].lookupName))),e.xp6(1),e.Oqu(null==t||null==t.statusObj[0]?null:t.statusObj[0].lookupName)}}function se(i,s){if(1&i&&(e.TgZ(0,"div",6)(1,"div",7)(2,"h6",8),e._uU(3,"Sessions"),e.qZA(),e.TgZ(4,"a",15),e._uU(5,"View All Sessions"),e.qZA()(),e._UZ(6,"hr"),e.TgZ(7,"div",16)(8,"div",17)(9,"div",18)(10,"div",9)(11,"span",19),e._uU(12,"Current Situation"),e.qZA(),e.TgZ(13,"span",20),e._uU(14),e.qZA()(),e.TgZ(15,"div",21)(16,"span",19),e._uU(17,"Status"),e.qZA(),e.TgZ(18,"span",20),e._uU(19),e.qZA()()(),e.TgZ(20,"h6",22),e._uU(21,"Current Open Session Details"),e.qZA(),e.TgZ(22,"div",23)(23,"div",18)(24,"span",19),e._uU(25,"Session No"),e.qZA(),e.TgZ(26,"span",24),e._uU(27),e.qZA()(),e.TgZ(28,"div",18)(29,"span",19),e._uU(30,"Cashier"),e.qZA(),e.TgZ(31,"span",24),e._uU(32),e.qZA()(),e.TgZ(33,"div",18)(34,"span",19),e._uU(35,"Number of collection"),e.qZA(),e.TgZ(36,"span",24),e._uU(37),e.qZA()(),e.TgZ(38,"div",18)(39,"span",19),e._uU(40,"Grand collection"),e.qZA(),e.TgZ(41,"span",24),e._uU(42),e.ALo(43,"number"),e.qZA()()()(),e.TgZ(44,"div",17)(45,"div",18)(46,"div",9)(47,"span",19),e._uU(48,"Previous Session"),e.qZA(),e.TgZ(49,"span",20),e._uU(50),e.qZA()(),e.TgZ(51,"div",21)(52,"span",19),e._uU(53,"Status"),e.qZA(),e.TgZ(54,"span",20),e._uU(55),e.qZA()()(),e._UZ(56,"h6",25),e.TgZ(57,"div",23)(58,"div",18)(59,"span",19),e._uU(60,"Session No"),e.qZA(),e.TgZ(61,"span",24),e._uU(62),e.qZA()(),e.TgZ(63,"div",18)(64,"span",19),e._uU(65,"Cashier"),e.qZA(),e.TgZ(66,"span",24),e._uU(67),e.qZA()(),e.TgZ(68,"div",18)(69,"span",19),e._uU(70,"Number of collection"),e.qZA(),e.TgZ(71,"span",24),e._uU(72),e.qZA()(),e.TgZ(73,"div",18)(74,"span",19),e._uU(75,"Grand collection"),e.qZA(),e.TgZ(76,"span",24),e._uU(77),e.ALo(78,"number"),e.qZA()()()(),e.TgZ(79,"div",26)(80,"div",18)(81,"div",9)(82,"span",19),e._uU(83,"Unsettled Sessions"),e.qZA(),e.TgZ(84,"span",27),e._uU(85,"-"),e.qZA()(),e.TgZ(86,"div",21)(87,"span",19),e._uU(88,"Total No"),e.qZA(),e.TgZ(89,"span",28),e._uU(90),e.qZA()()(),e.YNc(91,le,12,8,"div",29),e.qZA()()()),2&i){const t=e.oxw();e.xp6(13),e.Q6J("ngClass",e.l5B(24,y,"Open"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.status)||"Opened"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.status)||"Online"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.status)||"Settled"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.status),"Offline"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.status),"ForcedClose"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.status)||"Closed"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.status)||"UnClosed"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.status),"Waiting"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.status)||"Partial"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.status))),e.xp6(1),e.hij(" ",(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.status)||"-"," "),e.xp6(4),e.Q6J("ngClass",e.l5B(29,y,"Open"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.currentStatus)||"Opened"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.currentStatus)||"Online"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.currentStatus)||"Settled"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.currentStatus),"Offline"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.currentStatus),"ForcedClose"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.currentStatus)||"Closed"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.currentStatus)||"UnClosed"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.currentStatus),"Waiting"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.currentStatus)||"Partial"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.currentStatus))),e.xp6(1),e.Oqu((null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.currentStatus)||"-"),e.xp6(8),e.Oqu((null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.registerSessionId)||"-"),e.xp6(5),e.Oqu((null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation||null==t.registerDetails.register.currentSituation.cratedBy?null:t.registerDetails.register.currentSituation.cratedBy.fullName)||"-"),e.xp6(5),e.Oqu((null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.numberOfCollections)||"0"),e.xp6(5),e.hij("",e.xi3(43,18,null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.currentSituation?null:t.registerDetails.register.currentSituation.grandCollection,"2.3-3")||"0"," JOD"),e.xp6(7),e.Q6J("ngClass",e.l5B(34,y,"Open"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.status)||"Opened"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.status)||"Online"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.status)||"Settled"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.status),"Offline"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.status),"ForcedClose"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.status)||"Closed"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.status)||"UnClosed"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.status),"Waiting"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.status)||"Partial"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.status))),e.xp6(1),e.Oqu((null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.status)||"-"),e.xp6(4),e.Q6J("ngClass",e.l5B(39,y,"Open"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.currentStatus)||"Opened"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.currentStatus)||"Online"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.currentStatus)||"Settled"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.currentStatus),"Offline"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.currentStatus),"ForcedClose"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.currentStatus)||"Closed"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.currentStatus)||"UnClosed"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.currentStatus),"Waiting"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.currentStatus)||"Partial"===(null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.currentStatus))),e.xp6(1),e.Oqu((null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.currentStatus)||"-"),e.xp6(7),e.Oqu((null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.registerSessionId)||"-"),e.xp6(5),e.Oqu((null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation||null==t.registerDetails.register.previousSituation.cratedBy?null:t.registerDetails.register.previousSituation.cratedBy.fullName)||"-"),e.xp6(5),e.Oqu((null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.numberOfCollections)||"0"),e.xp6(5),e.hij("",e.xi3(78,21,null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.previousSituation?null:t.registerDetails.register.previousSituation.grandCollection,"2.3-3")||"0"," JOD"),e.xp6(13),e.Oqu((null==t.registerDetails||null==t.registerDetails.register?null:t.registerDetails.register.unsettledSessionsCount)||"0"),e.xp6(1),e.Q6J("ngForOf",t.unsettledSessions)}}function oe(i,s){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA()()),2&i){const t=s.$implicit;e.xp6(2),e.Oqu(null==t?null:t.type),e.xp6(2),e.Oqu(null==t||null==t.currency[0]?null:t.currency[0].lookupName),e.xp6(2),e.Oqu((null==t?null:t.totalCount)||"0"),e.xp6(2),e.Oqu(null==t?null:t.collectedAmount)}}function re(i,s){if(1&i&&(e.TgZ(0,"div",2)(1,"div",32)(2,"div",7)(3,"h6",8),e._uU(4,"Cash Situation"),e.qZA()(),e._UZ(5,"hr"),e.TgZ(6,"div",33)(7,"div",34)(8,"h6",35),e._uU(9,"Collections"),e.qZA(),e.TgZ(10,"div",36)(11,"h6",37),e._uU(12,"Current Amounts"),e.qZA(),e.TgZ(13,"table",38)(14,"thead")(15,"tr")(16,"th",39),e._uU(17,"type"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"currency"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"total no"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Grand Amount"),e.qZA()()(),e.TgZ(24,"tbody"),e.YNc(25,oe,9,4,"tr",40),e.ALo(26,"slice"),e.qZA()()()(),e.TgZ(27,"div",41)(28,"h6",42),e._uU(29,"Expenses"),e.qZA(),e.TgZ(30,"div",23)(31,"div",43)(32,"span",44),e._uU(33,"Current Provided Petty Cash Amounts"),e.qZA(),e.TgZ(34,"span",24),e._uU(35),e.ALo(36,"number"),e.qZA()(),e.TgZ(37,"div",43)(38,"span",44),e._uU(39,"Current Expenses Amounts"),e.qZA(),e.TgZ(40,"span",24),e._uU(41),e.ALo(42,"number"),e.qZA()(),e.TgZ(43,"div",30)(44,"span",44),e._uU(45,"Petty Cash Remaining"),e.qZA(),e.TgZ(46,"span",24),e._uU(47),e.ALo(48,"number"),e.qZA()()()()()()()),2&i){const t=e.oxw();e.xp6(25),e.Q6J("ngForOf",e.Dn7(26,4,t.cashSituation,0,6)),e.xp6(10),e.hij("",e.xi3(36,8,null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.expenses?null:t.registerDetails.register.expenses.currentProvidedPettyCashAmount,"2.3-3")||"0"," JOD"),e.xp6(6),e.hij("",e.xi3(42,11,null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.expenses?null:t.registerDetails.register.expenses.currentExpensesAmount,"2.3-3")||"0"," JOD"),e.xp6(6),e.hij("",e.xi3(48,14,null==t.registerDetails||null==t.registerDetails.register||null==t.registerDetails.register.expenses?null:t.registerDetails.register.expenses.pettyCashRemaining,"2.3-3")||"0"," JOD")}}function ae(i,s){if(1&i&&(e.TgZ(0,"div",56)(1,"p"),e._uU(2),e.qZA()()),2&i){const t=s.$implicit;e.xp6(2),e.Oqu(null==t?null:t.lookupName)}}function ue(i,s){if(1&i&&(e.TgZ(0,"div",48)(1,"p"),e._uU(2),e.qZA()()),2&i){const t=s.$implicit;e.xp6(2),e.Oqu((null==t?null:t.bankNameEnglish)+" - "+(null==t?null:t.accountName)+" - "+(null==t?null:t.accountNumber))}}function ce(i,s){if(1&i&&(e.TgZ(0,"div",55)(1,"label"),e._uU(2,"Bank"),e.qZA(),e.TgZ(3,"div",57),e.YNc(4,ue,3,1,"div",68),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",null==t.registerDetails||null==t.registerDetails.register?null:t.registerDetails.register.depositBanks)}}function de(i,s){if(1&i&&(e.TgZ(0,"div",69)(1,"div",60)(2,"p"),e._uU(3),e.qZA()(),e.TgZ(4,"div",60)(5,"div",48)(6,"p"),e._uU(7),e.qZA()()()()),2&i){const t=s.$implicit;e.xp6(3),e.Oqu(null==t||null==t.role?null:t.role.name),e.xp6(4),e.Oqu(null==t||null==t.user?null:t.user.fullName)}}function _e(i,s){if(1&i&&(e.TgZ(0,"div",63)(1,"div",71)(2,"p"),e._uU(3),e.qZA()()()),2&i){const t=s.$implicit,n=e.oxw(3);e.xp6(1),e.ekj("activePrimaryClr",n.compareCurrency(t)),e.xp6(2),e.Oqu(null==t||null==t.name[0]?null:t.name[0].lookupName)}}function ge(i,s){if(1&i&&(e.ynx(0),e.YNc(1,_e,4,3,"div",70),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.currenciesList)}}function pe(i,s){if(1&i&&(e.TgZ(0,"div",72)(1,"div",73)(2,"p",74),e._uU(3),e.qZA(),e._UZ(4,"img",75),e.qZA()()),2&i){const t=s.$implicit;e.xp6(3),e.Oqu(null==t||null==t.translations[0]?null:t.translations[0].lookupName),e.xp6(1),e.Q6J("src",null==t?null:t.paymentTypeImage,e.LSH)}}function me(i,s){if(1&i&&(e.TgZ(0,"div",2)(1,"div",45)(2,"div",46)(3,"h6",8),e._uU(4,"Register Setup"),e.qZA(),e._UZ(5,"hr"),e.qZA(),e.TgZ(6,"div",1)(7,"div",47)(8,"label"),e._uU(9,"Number of Sessions Per Day"),e.qZA(),e.TgZ(10,"div",48)(11,"p"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",49)(14,"label"),e._uU(15,"Remaining"),e.qZA(),e.TgZ(16,"div",50)(17,"p"),e._uU(18),e.qZA()()(),e.TgZ(19,"div",51)(20,"label"),e._uU(21,"All Sessions Timeline"),e.qZA(),e.TgZ(22,"div",52)(23,"p"),e._uU(24,"From"),e.qZA(),e.TgZ(25,"div",53)(26,"p"),e._uU(27),e.qZA()(),e.TgZ(28,"p"),e._uU(29,"To"),e.qZA(),e.TgZ(30,"div",53)(31,"p"),e._uU(32),e.qZA()()()()(),e.TgZ(33,"div",54)(34,"h6",8),e._uU(35,"Opening Without Settlement"),e.qZA(),e._UZ(36,"hr"),e.qZA(),e.TgZ(37,"div",1)(38,"div",55)(39,"label"),e._uU(40,"Allowed Sessions Time"),e.qZA(),e.TgZ(41,"div",52)(42,"div",56)(43,"p"),e._uU(44),e.qZA()(),e.TgZ(45,"p"),e._uU(46,"Per Weekdays"),e.qZA()()(),e.TgZ(47,"div",55)(48,"label"),e._uU(49,"Remaining"),e.qZA(),e.TgZ(50,"div",50)(51,"p"),e._uU(52),e.qZA()()()(),e.TgZ(53,"div",54)(54,"h6",8),e._uU(55,"Cash Deposit"),e.qZA(),e._UZ(56,"hr"),e.qZA(),e.TgZ(57,"div",1)(58,"div",55)(59,"label"),e._uU(60,"Deposit Type"),e.qZA(),e.TgZ(61,"div",57),e.YNc(62,ae,3,1,"div",58),e.qZA()(),e.YNc(63,ce,5,1,"div",59),e.qZA(),e.TgZ(64,"div",54)(65,"h6",8),e._uU(66,"Employees"),e.qZA(),e._UZ(67,"hr"),e.qZA(),e.TgZ(68,"div",1)(69,"div",60)(70,"label"),e._uU(71,"Role"),e.qZA()(),e.TgZ(72,"div",60)(73,"label"),e._uU(74,"User"),e.qZA()()(),e._UZ(75,"hr"),e.YNc(76,de,8,2,"div",61),e.TgZ(77,"div",54)(78,"h6",8),e._uU(79,"Payments"),e.qZA(),e._UZ(80,"hr"),e.qZA(),e.TgZ(81,"div",62)(82,"div",63)(83,"div",64)(84,"label"),e._uU(85,"Cash"),e.qZA()()(),e.YNc(86,ge,2,1,"ng-container",65),e.qZA(),e._UZ(87,"hr"),e.TgZ(88,"div",62)(89,"div",63)(90,"div",64)(91,"label"),e._uU(92,"Payment Types"),e.qZA()()(),e.TgZ(93,"div",66)(94,"div",1),e.YNc(95,pe,5,2,"div",67),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(12),e.Oqu((null==t.registerDetails||null==t.registerDetails.register?null:t.registerDetails.register.numberOfSessionsPerDay)||"0"),e.xp6(6),e.Oqu(null==t.registerDetails||null==t.registerDetails.register?null:t.registerDetails.register.remainingSessionsPerDay),e.xp6(9),e.Oqu(t._commonService.stringToTime(null==t.registerDetails||null==t.registerDetails.register?null:t.registerDetails.register.allowedSessionTimeFrom)),e.xp6(5),e.Oqu(t._commonService.stringToTime(null==t.registerDetails||null==t.registerDetails.register?null:t.registerDetails.register.allowedSessionTimeTo)),e.xp6(12),e.Oqu(null==t.registerDetails||null==t.registerDetails.register?null:t.registerDetails.register.numberOfOpeningWithoutSettlementPerWeek),e.xp6(8),e.Oqu(null==t.registerDetails||null==t.registerDetails.register?null:t.registerDetails.register.remainingPerWeek),e.xp6(10),e.Q6J("ngForOf",null==t.registerDetails||null==t.registerDetails.register?null:t.registerDetails.register.cashDepositType),e.xp6(1),e.Q6J("ngIf",8001!==(null==t.registerDetails||null==t.registerDetails.register?null:t.registerDetails.register.cashDepositTypeId)),e.xp6(13),e.Q6J("ngForOf",null==t.registerDetails||null==t.registerDetails.register?null:t.registerDetails.register.registerEmployees),e.xp6(10),e.Q6J("ngIf",null==t.currenciesList?null:t.currenciesList.length),e.xp6(9),e.Q6J("ngForOf",t.registerPaymentTypes)}}function he(i,s){1&i&&e._UZ(0,"app-loading")}let fe=(()=>{class i{constructor(t,n,l,r){this.activeRoute=t,this._registerSettlementService=n,this._commonService=l,this._sharedService=r,this.status=f.qb,this.cashSituation=[],this.unsettledSessions=[],this.registerPaymentTypes=[]}ngOnInit(){this.activeRoute.params.subscribe(t=>{this.registerId=t.registerId,this.getRegisterDetails1()})}getRegisterDetails1(){this._registerSettlementService.getRegisterDetails1(this.registerId).subscribe(t=>{this.getRegisterPaymentTypes(),this.getCurrencies(),this.getRegisterDetails2(),this.registerDetails=t,console.log(this.registerDetails),this.cashSituation=[...this.registerDetails?.register?.cashSituation,...this.registerDetails?.register?.chequeSituation]})}getRegisterDetails2(){this._registerSettlementService.getRegisterDetails2(this.registerId).subscribe(t=>{this.unsettledSessions=t.unsettledSessions.slice(0,7)})}getRegisterDetails(){this._registerSettlementService.getSettleRegisterDetails(this.registerId).subscribe(t=>{this.registerDetails=t,this.getRegisterPaymentTypes(),this.unsettledSessions=this.registerDetails.unsettledSessions.slice(0,7),this.getCurrencies(),this.cashSituation=[...this.registerDetails?.register?.cashSituation,...this.registerDetails?.register?.chequeSituation]})}getRegisterPaymentTypes(){this._registerSettlementService.getRegisterPaymentTypes(this.registerId).subscribe(t=>{this.registerPaymentTypes=t?.data,console.log(t)})}getCurrencies(){this._registerSettlementService.getLookupById(9).subscribe(t=>{this.currenciesList=t?.data})}compareCurrency(t){let n=[];return this.registerDetails?.register?.registerCurrencies.forEach(r=>{n=[...n,r.currency[0]]}),!!n.find(r=>r.lookupId==t?.id)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.gz),e.Y36(c.D),e.Y36(x.v),e.Y36(N.F))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-register-details"]],decls:10,vars:8,consts:[[1,"card-page"],[1,"row"],[1,"col-md-12"],["class","card-collect card-with-details",4,"ngIf","ngIfElse"],["class","col-md-12",4,"ngIf","ngIfElse"],["loadingData",""],[1,"card-collect","card-with-details"],[1,"d-flex","align-items-center","justify-content-between"],[1,"card-inner-heading"],[1,"d-flex","flex-column"],[1,"gap-3","sd-item"],[1,"dark-gray"],[1,"form-check","form-switch"],["type","checkbox","disabled","","id","switchCheckGreen",1,"form-check-input",3,"checked"],[1,"light-gray","fw-400"],["routerLink","/register-settlements",1,"light-gray","font-14","fw-700","td-none"],[1,"row","flex-column","gap-5","gap-xl-0","flex-xl-row","gx-xl-5","justify-content-sm-center","justify-content-xl-start"],[1,"col-12","col-xl-4","border-end"],[1,"d-flex","justify-content-between"],[1,"dark-gray","font-16","fw-600"],[1,"font-16","fw-400",3,"ngClass"],[1,"d-flex","flex-column","align-items-end"],[1,"card-inner-heading","my-3"],[1,"d-flex","flex-column","gap-2"],[1,"light-gray","font-16","fw-400"],[1,"my-3"],[1,"col-12","col-xl-4"],[1,"font-16","fw-400"],[1,"primary-clr","font-16","fw-400"],["class","d-flex flex-column gap-2",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","gap-3","flex-wrap"],[1,"d-flex","justify-content-between","gap-3"],[1,"card-collect"],[1,"row","gx-0","gx-5"],[1,"col-lg-6"],[1,"font-18","fw-600","mb-3"],[1,"cash-situations"],[1,"font-14","fw-600","px-3","pt-3"],[1,"table","table-striped","mb-0"],[1,"px-3"],[4,"ngFor","ngForOf"],[1,"col-lg-6","border-start"],[1,"font-18","fw-600"],[1,"d-flex","justify-content-between","gap-3","flex-wrap","border-bottom","pb-3"],[1,"dark-gray","font-16","fw-500"],[1,"card-collect","register-setup"],[1,"mb-4"],[1,"col-12","col-md-6","col-xl-4","col-xxl-3"],[1,"bordered-box"],[1,"col-12","col-md-6","col-xl-2","col-xxl-3"],[1,"bordered-box","disabled"],[1,"col-12","col-md-9","col-xl-7","col-xxl-6"],[1,"d-flex","align-items-center","gap-3","flex-wrap"],[1,"bordered-box","text-center","flex-grow-1"],[1,"my-4"],[1,"col-12","col-md-6","col-lg-4","col-xl-3"],[1,"bordered-box","flex-grow-1"],[1,"d-flex","flex-column","gap-3"],["class","bordered-box flex-grow-1",4,"ngFor","ngForOf"],["class","col-12 col-md-6 col-lg-4 col-xl-3",4,"ngIf"],[1,"col-md-5","col-lg-3"],["class","row mb-3 align-items-center",4,"ngFor","ngForOf"],[1,"row","payments"],[1,"col-sm-3"],[1,"d-flex","align-items-center","gap-2"],[4,"ngIf"],[1,"col-sm-9"],["class","col-4 mb-3",4,"ngFor","ngForOf"],["class","bordered-box",4,"ngFor","ngForOf"],[1,"row","mb-3","align-items-center"],["class","col-sm-3",4,"ngFor","ngForOf"],[1,"bordered-box","text-center"],[1,"col-4","mb-3"],[1,"bordered-box","d-flex","justify-content-center","gap-2","align-items-center"],[1,"fw-500","m-0"],["width","30",3,"src"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,ie,32,6,"div",3),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,se,92,44,"div",3),e.qZA(),e.YNc(6,re,49,17,"div",4),e.YNc(7,me,96,11,"div",4),e.qZA()(),e.YNc(8,he,1,0,"ng-template",null,5,e.W1O)),2&t){const l=e.MAs(9);e.xp6(3),e.Q6J("ngIf",null==n.registerDetails?null:n.registerDetails.register)("ngIfElse",l),e.xp6(2),e.Q6J("ngIf",null==n.registerDetails?null:n.registerDetails.register)("ngIfElse",l),e.xp6(1),e.Q6J("ngIf",null==n.registerDetails?null:n.registerDetails.register)("ngIfElse",l),e.xp6(1),e.Q6J("ngIf",null==n.registerDetails?null:n.registerDetails.register)("ngIfElse",l)}},dependencies:[o.mk,o.sg,o.O5,p.rH,m.N,o.OU,o.JJ]}),i})();var xe=d(87192),U=d(43346),O=d(15070),be=d(68423),Ce=d(82757),Ze=d(80145);function ve(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"th",23)(1,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.sortByStatus())}),e._uU(2," Status "),e._UZ(3,"i",25)(4,"i",26),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",14==n.sort),e.xp6(1),e.ekj("active",15==n.sort)}}function Te(i,s){if(1&i&&(e.TgZ(0,"th",23)(1,"button",27),e._uU(2," Action "),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length))}}const Ae=function(i,s){return{background:i,color:s}};function qe(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"number"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"number"),e.qZA(),e.TgZ(19,"td")(20,"div",32),e._uU(21),e.qZA()(),e.TgZ(22,"td")(23,"i",33),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw(2),_=e.MAs(27);return e.KtG(r.handleCardDetails(l,_))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",(null==t||null==t.customer?null:t.customer.customerName)||"-",""),e.xp6(2),e.hij(" ",null==t.paymentCardType[0]?null:t.paymentCardType[0].lookupName," "),e.xp6(2),e.hij(" ","Settled"==(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName)&&"edit"==(null==t?null:t.settleActionType)&&(null==t?null:t.settled4Digits)||(null==t?null:t.cardLast4Digits),""),e.xp6(2),e.hij(" ","Settled"==(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName)&&"edit"==(null==t?null:t.settleActionType)&&(null==t?null:t.settleMachineReceiptNumber)||(null==t?null:t.machineReceiptNumber),""),e.xp6(2),e.hij(" ","Settled"==(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName)&&"edit"==(null==t?null:t.settleActionType)&&(null==t||null==t.settledCardProvide?null:t.settledCardProvide.providerName)||(null==t||null==t.cardProvide?null:t.cardProvide.providerName),""),e.xp6(2),e.hij(" ",e.xi3(13,10,null==t?null:t.cardCollectionJod,"2.3-3")," JOD"),e.xp6(3),e.hij(" ",(null==t?null:t.currency)&&(null==t||null==t.currency[0]?null:t.currency[0].lookupName),""),e.xp6(2),e.hij(" ",e.xi3(18,13,null==t?null:t.collectedAmount,"2.3-3"),""),e.xp6(3),e.Q6J("ngStyle",e.WLB(16,Ae,null==t||null==t.statusObj?null:t.statusObj.lookupBGColor,null==t||null==t.statusObj?null:t.statusObj.lookupTextColor)),e.xp6(1),e.hij(" ",null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName," ")}}function De(i,s){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"number"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",(null==t||null==t.customer?null:t.customer.customerName)||"-",""),e.xp6(2),e.hij(" ",null==t.paymentCardType[0]?null:t.paymentCardType[0].lookupName," "),e.xp6(2),e.hij(" ",(null==t?null:t.settled4Digits)||(null==t?null:t.cardLast4Digits),""),e.xp6(2),e.hij(" ",null==t?null:t.machineReceiptNumber,""),e.xp6(2),e.hij(" ",null==t||null==t.cardProvide?null:t.cardProvide.providerName,""),e.xp6(2),e.hij(" ",e.xi3(12,8,null==t?null:t.cardCollectionJod,"2.3-3")," JOD"),e.xp6(3),e.hij(" ",(null==t?null:t.currency)&&(null==t||null==t.currency[0]?null:t.currency[0].lookupName),""),e.xp6(2),e.hij(" ",e.xi3(17,11,null==t?null:t.collectedAmount,"2.3-3"),"")}}function ke(i,s){if(1&i&&(e.TgZ(0,"button",40),e._UZ(1,"i",41),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.Q6J("disabled","right"==t.settleActionType)}}function Se(i,s){if(1&i&&(e.TgZ(0,"button",42),e._UZ(1,"i",43),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.Q6J("disabled","wrong"==t.settleActionType)}}function ye(i,s){if(1&i&&(e.TgZ(0,"button",44),e._UZ(1,"i",45),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.Q6J("disabled","edit"==t.settleActionType)}}function Ne(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",35),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.hadleReverseActionOnCard(null==l?null:l.ordersCardsCollectionId))}),e._uU(2," Undo "),e._UZ(3,"img",36),e.qZA(),e.YNc(4,ke,2,1,"button",37),e.YNc(5,Se,2,1,"button",38),e.YNc(6,ye,2,1,"button",39),e.BQk()}if(2&i){const t=e.oxw(2).$implicit;e.xp6(4),e.Q6J("ngIf","right"==t.settleActionType),e.xp6(1),e.Q6J("ngIf","wrong"==t.settleActionType),e.xp6(1),e.Q6J("ngIf","edit"==t.settleActionType)}}function Ue(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.handleActionClick("right",null==l?null:l.ordersCardsCollectionId))}),e._UZ(1,"i",41),e.qZA(),e.TgZ(2,"button",47),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.handleActionClick("wrong",null==l?null:l.ordersCardsCollectionId))}),e._UZ(3,"i",43),e.qZA(),e.TgZ(4,"button",48),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2),_=e.MAs(25);return e.KtG(r.handleEditAction(_,l))}),e._UZ(5,"i",45),e.qZA()}}function Oe(i,s){if(1&i&&(e.TgZ(0,"td"),e.YNc(1,Ne,7,3,"ng-container",30),e.YNc(2,Ue,6,0,"ng-template",null,34,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.settleActionTaken)("ngIfElse",t)}}function we(i,s){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,qe,24,19,"ng-container",30),e.YNc(2,De,18,14,"ng-template",null,31,e.W1O),e.YNc(4,Oe,4,2,"td",17),e.qZA()),2&i){const t=s.$implicit,n=e.MAs(3),l=e.oxw(2);e.ekj("highlight-tr",null==t?null:t.wrongActionInClosing),e.xp6(1),e.Q6J("ngIf",!l.isSettle)("ngIfElse",n),e.xp6(3),e.Q6J("ngIf",l.isSettle&&l.canManageAndView)}}function Me(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function Pe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",20)(2,"table",21)(3,"thead")(4,"tr",22)(5,"th",23)(6,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByCustomer())}),e._uU(7," Customer "),e._UZ(8,"i",25)(9,"i",26),e.qZA()(),e.TgZ(10,"th",23)(11,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByCardType())}),e._uU(12," Card Type "),e._UZ(13,"i",25)(14,"i",26),e.qZA()(),e.TgZ(15,"th",23)(16,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByLastFour())}),e._uU(17," Last 4 Digits "),e._UZ(18,"i",25)(19,"i",26),e.qZA()(),e.TgZ(20,"th",23)(21,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByInvoice())}),e._uU(22," Machine Receipt No "),e._UZ(23,"i",25)(24,"i",26),e.qZA()(),e.TgZ(25,"th",23)(26,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByTerminal())}),e._uU(27," Terminal Provider "),e._UZ(28,"i",25)(29,"i",26),e.qZA()(),e.TgZ(30,"th",23)(31,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByAmount())}),e._uU(32," Amount JOD "),e._UZ(33,"i",25)(34,"i",26),e.qZA()(),e.TgZ(35,"th",23)(36,"button",27),e._uU(37," Currency "),e.qZA()(),e.TgZ(38,"th",23)(39,"button",27),e._uU(40," Amount "),e.qZA()(),e.YNc(41,ve,5,5,"th",28),e.YNc(42,Te,3,1,"th",28),e.qZA()(),e.TgZ(43,"tbody"),e.YNc(44,we,5,5,"tr",29),e.qZA()()(),e.YNc(45,Me,2,0,"div",17),e.qZA()}if(2&i){const t=s.$implicit,n=e.oxw();e.xp6(6),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",2==n.sort),e.xp6(1),e.ekj("active",3==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",4==n.sort),e.xp6(1),e.ekj("active",5==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",6==n.sort),e.xp6(1),e.ekj("active",7==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",8==n.sort),e.xp6(1),e.ekj("active",9==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",10==n.sort),e.xp6(1),e.ekj("active",11==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",12==n.sort),e.xp6(1),e.ekj("active",13==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.Q6J("ngIf",!n.isSettle),e.xp6(1),e.Q6J("ngIf",n.canManageAndView),e.xp6(2),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function Ie(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function Je(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"h6",49),e._uU(3," Showing "),e.TgZ(4,"span"),e._uU(5),e.qZA(),e._uU(6," from "),e.TgZ(7,"span"),e._uU(8),e.qZA(),e._uU(9," data "),e.qZA()(),e.TgZ(10,"div",1)(11,"ngb-pagination",50),e.NdJ("pageChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.pageNo=l)})("pageChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.pageChange(l))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(5),e.AsE("",6*t.pageNo-5," - ",6==(null==t.sessionCards?null:t.sessionCards.length)?6*t.pageNo:t.totalRecordCount,""),e.xp6(3),e.hij(" ",t.totalRecordCount," "),e.xp6(3),e.Q6J("collectionSize",t.totalRecordCount)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}function Be(i,s){1&i&&(e.TgZ(0,"span",70),e._uU(1," Field is required. "),e.qZA())}function Fe(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Be,2,0,"span",69),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formValid.LastTerminalId.errors.required)}}function je(i,s){1&i&&(e.TgZ(0,"span",70),e._uU(1," Field is required. "),e.qZA())}function Qe(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,je,2,0,"span",69),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formValid.CardDate.errors.required)}}function Re(i,s){1&i&&(e.TgZ(0,"span",70),e._uU(1," Field is required. "),e.qZA())}function Ye(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Re,2,0,"span",69),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formValid.CardLast4Digits.errors.required||t.formValid.CardLast4Digits.errors.minlength)}}function Ee(i,s){1&i&&(e.TgZ(0,"span",70),e._uU(1," Field is required. "),e.qZA())}function Ge(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ee,2,0,"span",69),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formValid.CardDrawerName.errors.required)}}function Le(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",51)(1,"div",52)(2,"h3",53),e._uU(3,"Edit Card"),e.qZA(),e.TgZ(4,"p",54),e._uU(5," Customer Name "),e.TgZ(6,"span",55),e._uU(7),e.qZA()()(),e.TgZ(8,"form",56),e.NdJ("submit",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.handleSubmit())}),e.TgZ(9,"div",0)(10,"div",1)(11,"div",57)(12,"label"),e._uU(13,"Amount JOD"),e.qZA(),e._UZ(14,"input",58),e.qZA()(),e.TgZ(15,"div",59)(16,"div",57)(17,"label"),e._uU(18,"Currency"),e.qZA(),e._UZ(19,"input",60),e.qZA()(),e.TgZ(20,"div",59)(21,"div",57)(22,"label"),e._uU(23,"Amount"),e.qZA(),e._UZ(24,"input",60),e.ALo(25,"number"),e.qZA()(),e.TgZ(26,"div",1)(27,"div",57)(28,"label"),e._uU(29,"Machine Reciept No."),e.qZA(),e._UZ(30,"input",61),e.qZA()(),e.TgZ(31,"div",1)(32,"div",57)(33,"label"),e._uU(34,"Terminal Provider*"),e.qZA(),e._UZ(35,"ng-select",62),e.YNc(36,Fe,2,1,"div",17),e.qZA()(),e.TgZ(37,"div",1)(38,"div",57)(39,"label"),e._uU(40,"Date *"),e.qZA(),e._UZ(41,"input",63),e.YNc(42,Qe,2,1,"div",17),e.qZA()(),e.TgZ(43,"div",1)(44,"div",57)(45,"label"),e._uU(46,"The last 4 digits of the card"),e.qZA(),e._UZ(47,"input",64),e.YNc(48,Ye,2,1,"div",17),e.qZA()(),e.TgZ(49,"div",1)(50,"div",57)(51,"label"),e._uU(52,"Payer Name"),e.qZA(),e._UZ(53,"input",65),e.YNc(54,Ge,2,1,"div",17),e.qZA()(),e.TgZ(55,"div",13)(56,"div",66)(57,"button",67),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Close click"))}),e._uU(58,"Cancel"),e.qZA(),e.TgZ(59,"button",68),e._uU(60," Submit "),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.xp6(7),e.hij(" ",null==t.cardDetails||null==t.cardDetails.customer?null:t.cardDetails.customer.customerName," "),e.xp6(1),e.Q6J("formGroup",t.cardForm),e.xp6(11),e.s9C("value",null==t.cardDetails||null==t.cardDetails.currency[0]?null:t.cardDetails.currency[0].lookupName),e.xp6(5),e.s9C("value",e.xi3(25,9,null==t.cardDetails?null:t.cardDetails.collectedAmount,"2.3-3")),e.xp6(11),e.Q6J("items",t.terminals),e.xp6(1),e.Q6J("ngIf",t.formValid.LastTerminalId.invalid&&(t.formValid.LastTerminalId.touched||t.formValid.LastTerminalId.dirty)),e.xp6(6),e.Q6J("ngIf",t.formValid.CardDate.invalid&&(t.formValid.CardDate.touched||t.formValid.CardDate.dirty)),e.xp6(6),e.Q6J("ngIf",t.formValid.CardLast4Digits.invalid&&(t.formValid.CardLast4Digits.touched||t.formValid.CardLast4Digits.dirty)),e.xp6(6),e.Q6J("ngIf",t.formValid.CardDrawerName.invalid&&(t.formValid.CardDrawerName.touched||t.formValid.CardDrawerName.dirty))}}function He(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",71)(1,"div",72)(2,"h4",73),e._uU(3,"Card Details"),e.qZA(),e.TgZ(4,"h6",74),e._uU(5,"Customer Name: "),e.TgZ(6,"span",75),e._uU(7),e.qZA()()(),e.TgZ(8,"div",76)(9,"div",77)(10,"div",78)(11,"label"),e._uU(12,"Amount JOD"),e.qZA(),e.TgZ(13,"h6",79),e._uU(14),e.ALo(15,"number"),e.qZA()(),e.TgZ(16,"div",80)(17,"label"),e._uU(18,"Currency"),e.qZA(),e.TgZ(19,"h6",79),e._uU(20),e.qZA()(),e.TgZ(21,"div",81)(22,"label"),e._uU(23,"Amount"),e.qZA(),e.TgZ(24,"h6",79),e._uU(25),e.ALo(26,"number"),e.qZA()(),e.TgZ(27,"div",81)(28,"label"),e._uU(29,"Last 4 Digits of the Card"),e.qZA(),e.TgZ(30,"h6",79),e._uU(31),e.qZA()()(),e.TgZ(32,"div",77)(33,"div",78)(34,"label"),e._uU(35,"Machine Receipt No"),e.qZA(),e.TgZ(36,"h6",79),e._uU(37),e.qZA()(),e.TgZ(38,"div",78)(39,"label"),e._uU(40,"Provider Name"),e.qZA(),e.TgZ(41,"h6",79),e._uU(42),e.qZA()(),e.TgZ(43,"div",78)(44,"label"),e._uU(45,"Payer Name"),e.qZA(),e.TgZ(46,"h6",79),e._uU(47),e.qZA()()()()(),e.TgZ(48,"div",82)(49,"div",83)(50,"button",84),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Save click"))}),e._uU(51,"Close"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(7),e.Oqu(null==t.cardDetails||null==t.cardDetails.customer?null:t.cardDetails.customer.customerName),e.xp6(7),e.Oqu(e.xi3(15,8,null==t.cardDetails?null:t.cardDetails.cardCollectionJod,"2.3-3")),e.xp6(6),e.Oqu(null==t.cardDetails||null==t.cardDetails.currency[0]?null:t.cardDetails.currency[0].lookupName),e.xp6(5),e.Oqu(e.xi3(26,11,null==t.cardDetails?null:t.cardDetails.collectedAmount,"2.3-3")),e.xp6(6),e.Oqu((null==t.cardDetails?null:t.cardDetails.settled4Digits)||(null==t.cardDetails?null:t.cardDetails.cardLast4Digits)),e.xp6(6),e.Oqu((null==t.cardDetails?null:t.cardDetails.settleMachineReceiptNumber)||(null==t.cardDetails?null:t.cardDetails.machineReceiptNumber)),e.xp6(5),e.Oqu((null==t.cardDetails||null==t.cardDetails.settledCardProvide?null:t.cardDetails.settledCardProvide.providerName)||(null==t.cardDetails||null==t.cardDetails.cardProvide?null:t.cardDetails.cardProvide.providerName)),e.xp6(5),e.Oqu(null==t.cardDetails?null:t.cardDetails.cardPayerName)}}let P=(()=>{class i{constructor(t,n,l,r,_,T,k,M,Ui){this.fb=t,this._registerSettlementService=n,this.datePipe=l,this._collectService=r,this._modalService=_,this._closeRegisterService=T,this._commonService=k,this._spinnerService=M,this._activeRoute=Ui,this.pageNo=1,this.sort=1,this.searchText="",this.loadCardData=new e.vpe,this.isSettle=!0,this.terminals=[],this.groupActionFlag=!1,this.cardCollectionIds="",this.sessionID=0}ngOnChanges(t){this.response=t.response.currentValue,this.sessionCards=this.response?.cards,this.totalRecordCount=this.response?.totalRecordCount,this.pagin=Math.ceil(this.totalRecordCount/6),this.pages=h.w6(this.pagin)}ngOnInit(){this.initCardForm(),this.canManageAndView=JSON.parse(localStorage.getItem("cmav")),this.getTerminalProviders(),this.sessionID=+this._activeRoute.snapshot.params.sessionId,this.getCurrentSessionCollectedCardAll()}confirmGrouping(){if(!this.cardCollectionIds)return;const t=this._modalService.open(xe.z,{centered:!0});t.componentInstance.data={body:"Are you sure you want to accept all cards?"},t.componentInstance.eventData.subscribe(n=>{n&&this.groupActionsOnCard()})}getCurrentSessionCollectedCardAll(){return this._registerSettlementService.getSessionAllCardsPayments(this.sessionID).subscribe(t=>{if(t){let n=t?.cards;this.groupActionFlag=n.every(l=>l?.settleActionTaken),this.cardCollectionIds=n.map(l=>l?.ordersCardsCollectionId).toString()}})}groupActionsOnCard(){this._spinnerService.show();const t=new FormData;t.append("OrdersCardsCollectionIds",this.cardCollectionIds),t.append("Action","right"),this._registerSettlementService.actionsOnCardGroup(t).subscribe({next:n=>{n.isSuccess&&(this.responseModal("success","The action done successfully"),this.getCurrentSessionCollectedCardAll(),this.loadCardData.emit({page:this.pageNo}))},error:n=>{this.responseModal("error",n?.error?.errors)}}).add(()=>this._spinnerService.hide())}responseModal(t,n){const l=this._modalService.open(u.i);l.componentInstance.type=t,"success"==t?l.componentInstance.message=n:l.componentInstance.messageError=n}initCardForm(){this.cardForm=this.fb.group({OrdersCardsCollectionId:0,LastTerminalId:[""],LastCollectedAmount:[""],CardDrawerName:"",MachineReceiptNumber:[""],CardDate:[""],CardLast4Digits:[""]})}get formValid(){return this.cardForm.controls}getTerminalProviders(){this._collectService.getTerminalProviders().subscribe(t=>{this.terminals=t.data.map(n=>({id:n.providerId,name:n.providerName}))})}handleCardDetails(t,n){this.cardDetails={},this.cardDetails=t,this._modalService.open(n,{centered:!0,size:"lg"})}handleEditAction(t,n){this.getBanks(),this.cardDetails={},this.cardDetails=n,console.log(n);let l={OrdersCardsCollectionId:n.ordersCardsCollectionId,LastTerminalId:n?.cardProvide?.providerId,CardDrawerName:n?.cardPayerName,LastCollectedAmount:n.cardCollectionJod,MachineReceiptNumber:n.machineReceiptNumber,CardDate:this.datePipe.transform(n?.collectionAt,"yyyy-MM-dd"),CardLast4Digits:n?.cardLast4Digits};this.cardForm.patchValue(l),this._modalService.open(t,{centered:!0,size:"lg"})}handleCheckBoxChange(t){t.target.checked?this.cardForm.controls.cardDrawerName.setValue(this.cardDetails?.cardPayerName):(this.cardForm.controls.cardDrawerName.setValue(""),this.cardForm.controls.cardDrawerName.markAsTouched())}handleActionClick(t,n){let l=new FormData;l.append("action",t),l.append("ordersCardsCollectionId",n),this._registerSettlementService.actionOnCard(l).subscribe(r=>{this.getCurrentSessionCollectedCardAll(),this.loadCardData.emit({page:this.pageNo,customer:"",action:!0})})}hadleReverseActionOnCard(t){let n=new FormData;n.append("ordersCardsCollectionId",t),this._registerSettlementService.reverseActionOnCard(n).subscribe(l=>{this.getCurrentSessionCollectedCardAll(),this.loadCardData.emit({page:this.pageNo,customer:""})})}handleSubmit(){if(this.cardForm.valid){let t=new FormData;const n=this.cardForm.value;t.append("OrdersCardsCollectionId",n?.OrdersCardsCollectionId),t.append("LastTerminalId",n?.LastTerminalId),t.append("CardDrawerName",n?.CardDrawerName),t.append("MachineReceiptNumber",n?.MachineReceiptNumber),t.append("CardLast4Digits",n?.CardLast4Digits),this._registerSettlementService.editCollectionCard(t).subscribe(l=>{this.editCollectionResponse=l,this.editCollectionResponse.isSuccess&&(this._modalService.dismissAll(),this.successModal("success","Data saved successfully!"),this.loadCardData.emit({page:this.pageNo,customer:"",action:!0}))})}else this.cardForm.markAllAsTouched()}successModal(t,n){const l=this._modalService.open(u.i,{size:"md"});l.componentInstance.type=t,"success"==t?l.componentInstance.message=n:"error"==t&&(l.componentInstance.messageError=n)}getBanks(){this._closeRegisterService.getLookupsById(11).subscribe(t=>{this.bankList=t.data.map(n=>({id:n.id,name:n.name[0].lookupName}))})}sortByCustomer(){this.sort=3==this.sort?1:2==this.sort?3:2,this.loadCardData.emit({page:this.pageNo,customer:this.searchText,sort:this.sort})}sortByCardType(){this.sort=5==this.sort?1:4==this.sort?5:4,this.loadCardData.emit({page:this.pageNo,customer:this.searchText,sort:this.sort})}sortByLastFour(){this.sort=7==this.sort?1:6==this.sort?7:6,this.loadCardData.emit({page:this.pageNo,customer:this.searchText,sort:this.sort})}sortByInvoice(){this.sort=9==this.sort?1:8==this.sort?9:8,this.loadCardData.emit({page:this.pageNo,customer:this.searchText,sort:this.sort})}sortByTerminal(){this.sort=11==this.sort?1:10==this.sort?11:10,this.loadCardData.emit({page:this.pageNo,customer:this.searchText,sort:this.sort})}sortByAmount(){this.sort=13==this.sort?1:12==this.sort?13:12,this.loadCardData.emit({page:this.pageNo,customer:this.searchText,sort:this.sort})}sortByStatus(){this.sort=15==this.sort?1:14==this.sort?15:14,this.loadCardData.emit({page:this.pageNo,customer:this.searchText,sort:this.sort})}pageChange(t){this.pageNo=t,this.loadCardData.emit({page:t,customer:"",sort:1}),window.scroll(0,0)}removeSearch(){this.searchText="",this.loadCardData.emit({page:1,customer:"",sort:1})}searchData(t){const n=t.target.value;n.length>=3?(this.searchText=n,this.loadCardData.emit({page:1,customer:n})):0==n.length&&(this.searchText="",this.loadCardData.emit({page:1,customer:""}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.qu),e.Y36(c.D),e.Y36(o.uU),e.Y36(U.k),e.Y36(b.FF),e.Y36(O.x),e.Y36(x.v),e.Y36(be.t2),e.Y36(p.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-session-card-payments"]],inputs:{response:"response",isSettle:"isSettle"},outputs:{loadCardData:"loadCardData"},features:[e.TTD],decls:28,vars:7,consts:[[1,"row"],[1,"col-md-6"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"col-md-6","d-flex","justify-content-end","align-items-center","gap-2"],[1,"btns-group","m-0"],["type","button",1,"font-14","btn","btn-save","py-2","px-3",3,"disabled","click"],[1,"top-details","justify-content-end"],[1,"m-0"],[1,"col-md-12"],[1,"card-table","mt-3"],["class","col-md-12",4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],["content",""],["sessionCardDetails",""],[1,"table-responsive"],[1,"table"],[1,"py-2"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn",3,"disabled"],["scope","col",4,"ngIf"],[3,"highlight-tr",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["settleData",""],[1,"status-tag",3,"ngStyle"],[1,"fa-regular","fa-eye","cursor-pointer",3,"click"],["elseBlock",""],[1,"btn","btn-undo",3,"click"],["src","assets/images/undo.png","alt",""],["class","btn btn-right",3,"disabled",4,"ngIf"],["class","btn btn-xmark",3,"disabled",4,"ngIf"],["class","btn btn-edit",3,"disabled",4,"ngIf"],[1,"btn","btn-right",3,"disabled"],[1,"fa-regular","fa-circle-check"],[1,"btn","btn-xmark",3,"disabled"],[1,"fa-regular","fa-circle-xmark"],[1,"btn","btn-edit",3,"disabled"],[1,"fa-solid","fa-pen"],[1,"btn","btn-right",3,"click"],[1,"btn","btn-xmark",3,"click"],[1,"btn","btn-edit",3,"click"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"],[1,"modal-body"],[1,"modal-head"],[1,"fw-700","font-18"],[1,"fw-600","font-16"],[1,"px-2","gray-500","text-capitalize"],[3,"formGroup","submit"],[1,"form-group"],["name","name","type","text","formControlName","LastCollectedAmount","readonly","",1,"form-control"],[1,"col-md-3"],["type","text","readonly","",1,"form-control",3,"value"],["name","name","type","text","formControlName","MachineReceiptNumber","numbersOnly","",1,"form-control"],["placeholder","--Terminal---","bindLabel","name","bindValue","id","required","","formControlName","LastTerminalId",3,"items"],["type","date","formControlName","CardDate","name","CardDate","required","","readonly","",1,"form-control"],["name","name","type","text","formControlName","CardLast4Digits","minlength","4","maxlength","4","numbersOnly","","required","",1,"form-control"],["name","name","type","text","formControlName","CardDrawerName","OnlyCharacter","","required","","readonly","",1,"form-control"],[1,"btns-group","my-2"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save"],["class","error",4,"ngIf"],[1,"error"],[1,"fc-modal","p-4","custom-form-input"],[1,"modal-header","p-0","flex-column","align-items-start"],["ngbAutofocus","",1,"modal-title","fw-bolder","pb-1"],[1,"pb-2","fw-600"],[1,"light-gray"],[1,"modal-body","p-0"],[1,"row","mt-3"],[1,"col-sm-4"],[1,"pb-2","fw-600","light-gray"],[1,"col-sm-2"],[1,"col-sm-3"],[1,"modal-footer","p-4"],[1,"btns-group"],["type","submit",1,"btn","btn-save",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"input",5),e.NdJ("ngModelChange",function(r){return n.searchText=r})("keyup",function(r){return n.searchData(r)}),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(7,"i",7),e.qZA()()(),e.TgZ(8,"div",8)(9,"div",9)(10,"button",10),e.NdJ("click",function(){return n.confirmGrouping()}),e._uU(11,"Accept All"),e.qZA()(),e.TgZ(12,"div",11)(13,"p",12)(14,"span"),e._uU(15),e.qZA()()()(),e.TgZ(16,"div",13)(17,"div",14)(18,"div",0),e.YNc(19,Pe,46,36,"div",15),e.TgZ(20,"div",13),e.YNc(21,Ie,2,0,"ng-template",null,16,e.W1O),e.qZA()()()(),e.YNc(23,Je,12,9,"ng-container",17),e.qZA(),e.YNc(24,Le,61,12,"ng-template",null,18,e.W1O),e.YNc(26,He,52,14,"ng-template",null,19,e.W1O)),2&t){const l=e.MAs(22);e.xp6(5),e.Q6J("ngModel",n.searchText),e.xp6(1),e.Q6J("hidden",0==n.searchText.length),e.xp6(4),e.Q6J("disabled",n.groupActionFlag),e.xp6(5),e.hij(" No. Of Transactions ",n.totalRecordCount,""),e.xp6(4),e.Q6J("ngIf",n.sessionCards)("ngIfElse",l),e.xp6(4),e.Q6J("ngIf",n.totalRecordCount>6)}},dependencies:[o.sg,o.O5,o.PC,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.wO,a.nD,a.sg,a.u,a.On,A.w9,b.N9,m.N,Z.w,Ce.N,Ze.Q,o.JJ],styles:[".card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px}.card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0}.btn-right[_ngcontent-%COMP%]{color:#29a073;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-edit[_ngcontent-%COMP%]{color:#4e9aff;font-size:18px;padding:0 5px;margin:0 5px;border:0px}.btn-undo[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:0;border:0px}.btn-undo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.card-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 5px 10px 15px!important}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled, fieldset[_ngcontent-%COMP%]:disabled   .btn[_ngcontent-%COMP%]{color:#a9a9a9!important}.highlight-tr[_ngcontent-%COMP%]{background-color:#ffd2d2}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid #ddd}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#1b212d}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#1b212d}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#929eae}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:7px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:46px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-weight:500;color:var(--primary);font-size:15px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:20px;height:20px;accent-color:var(--primary)}.modal-body[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{border:1px solid #2eb93e;border-radius:5px}"]}),i})();var Ke=d(32298),w=d(71891),ze=d(96603),Ve=d(67761);const $e=["fileInput"];function We(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"th",23)(1,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.sortByStatus())}),e._uU(2," Status "),e._UZ(3,"i",25)(4,"i",26),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",12==n.sort),e.xp6(1),e.ekj("active",13==n.sort)}}function Xe(i,s){if(1&i&&(e.TgZ(0,"th",23)(1,"button",27),e._uU(2," Action "),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length))}}const et=function(i,s){return{background:i,color:s}};function tt(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td")(20,"div",32),e._uU(21),e.qZA()(),e.TgZ(22,"td")(23,"i",33),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw(2),_=e.MAs(34);return e.KtG(r.handleChequeDetails(l,_))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",null==t?null:t.chequeCustomer,""),e.xp6(2),e.hij(" ","Settled"==(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName)&&"edit"==(null==t?null:t.settleActionType)&&(null==t?null:t.settleChequeNumber)||(null==t?null:t.chequeNo)," "),e.xp6(2),e.hij(" ",e.xi3(7,9,null==t?null:t.chequeCollectionJod,"2.3-3")," JOD"),e.xp6(3),e.hij(" ",(null==t?null:t.currency)&&(null==t||null==t.currency[0]?null:t.currency[0].lookupName),""),e.xp6(2),e.hij(" ",e.xi3(12,12,null==t?null:t.collectedAmount,"2.3-3"),""),e.xp6(3),e.hij(" ","Settled"==(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName)&&"edit"==(null==t?null:t.settleActionType)&&e.xi3(15,15,null==t?null:t.settleChequeDate,"mediumDate")||e.xi3(16,18,t.chequeDate,"mediumDate"),""),e.xp6(4),e.hij(" ","Settled"==(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName)&&"edit"==(null==t?null:t.settleActionType)&&(null==t||null==t.settleBank[0]?null:t.settleBank[0].lookupName)||(null==t.bank[0]?null:t.bank[0].lookupName),""),e.xp6(2),e.Q6J("ngStyle",e.WLB(21,et,null==t||null==t.statusObj?null:t.statusObj.lookupBGColor,null==t||null==t.statusObj?null:t.statusObj.lookupTextColor)),e.xp6(1),e.hij(" ",null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName," ")}}function nt(i,s){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"number"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"date"),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t?null:t.chequeCustomer,""),e.xp6(2),e.hij(" ",(null==t?null:t.settleChequeNumber)||(null==t?null:t.chequeNo)," "),e.xp6(2),e.hij(" ",e.xi3(6,7,null==t?null:t.chequeCollectionJod,"2.3-3")," JOD"),e.xp6(3),e.hij(" ",(null==t?null:t.currency)&&(null==t||null==t.currency[0]?null:t.currency[0].lookupName),""),e.xp6(2),e.hij(" ",e.xi3(11,10,null==t?null:t.collectedAmount,"2.3-3"),""),e.xp6(3),e.hij(" ",e.xi3(14,13,null==t?null:t.settleChequeDate,"mediumDate")||e.xi3(15,16,t.chequeDate,"mediumDate"),""),e.xp6(4),e.hij(" ",(null==t||null==t.settleBank[0]?null:t.settleBank[0].lookupName)||(null==t.bank[0]?null:t.bank[0].lookupName),"")}}function it(i,s){if(1&i&&(e.TgZ(0,"button",40),e._UZ(1,"i",41),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.Q6J("disabled","right"==t.settleActionType)}}function lt(i,s){if(1&i&&(e.TgZ(0,"button",42),e._UZ(1,"i",43),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.Q6J("disabled","wrong"==t.settleActionType)}}function st(i,s){if(1&i&&(e.TgZ(0,"button",44),e._UZ(1,"i",45),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.Q6J("disabled","edit"==t.settleActionType)}}function ot(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",35),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.hadleReverseActionOnCheque(null==l?null:l.chequeCollectionId))}),e._uU(2," Undo "),e._UZ(3,"img",36),e.qZA(),e.YNc(4,it,2,1,"button",37),e.YNc(5,lt,2,1,"button",38),e.YNc(6,st,2,1,"button",39),e.BQk()}if(2&i){const t=e.oxw(2).$implicit;e.xp6(4),e.Q6J("ngIf","right"==t.settleActionType),e.xp6(1),e.Q6J("ngIf","wrong"==t.settleActionType),e.xp6(1),e.Q6J("ngIf","edit"==t.settleActionType)}}function rt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.handleActionClick("right",null==l?null:l.chequeCollectionId))}),e._UZ(1,"i",41),e.qZA(),e.TgZ(2,"button",47),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.handleActionClick("wrong",null==l?null:l.chequeCollectionId))}),e._UZ(3,"i",43),e.qZA(),e.TgZ(4,"button",48),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2),_=e.MAs(32);return e.KtG(r.handleEditAction(_,l))}),e._UZ(5,"i",45),e.qZA()}}function at(i,s){if(1&i&&(e.TgZ(0,"td"),e.YNc(1,ot,7,3,"ng-container",30),e.YNc(2,rt,6,0,"ng-template",null,34,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.settleActionTaken)("ngIfElse",t)}}function ut(i,s){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,tt,24,24,"ng-container",30),e.YNc(2,nt,18,19,"ng-template",null,31,e.W1O),e.YNc(4,at,4,2,"td",13),e.qZA()),2&i){const t=s.$implicit,n=e.MAs(3),l=e.oxw(2);e.ekj("highlight-tr",null==t?null:t.wrongActionInClosing),e.xp6(1),e.Q6J("ngIf",!l.isSettle)("ngIfElse",n),e.xp6(3),e.Q6J("ngIf",l.isSettle&&l.canManageAndView)}}function ct(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function dt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",20)(2,"table",21)(3,"thead")(4,"tr",22)(5,"th",23)(6,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByCustomer())}),e._uU(7," Customer "),e._UZ(8,"i",25)(9,"i",26),e.qZA()(),e.TgZ(10,"th",23)(11,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByChequeNo())}),e._uU(12," Cheque No "),e._UZ(13,"i",25)(14,"i",26),e.qZA()(),e.TgZ(15,"th",23)(16,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByAmount())}),e._uU(17," Amount JOD "),e._UZ(18,"i",25)(19,"i",26),e.qZA()(),e.TgZ(20,"th",23)(21,"button",27),e._uU(22," Currency "),e.qZA()(),e.TgZ(23,"th",23)(24,"button",27),e._uU(25," Amount "),e.qZA()(),e.TgZ(26,"th",23)(27,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByDate())}),e._uU(28," Date "),e._UZ(29,"i",25)(30,"i",26),e.qZA()(),e.TgZ(31,"th",23)(32,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByBank())}),e._uU(33," Bank "),e._UZ(34,"i",25)(35,"i",26),e.qZA()(),e.YNc(36,We,5,5,"th",28),e.YNc(37,Xe,3,1,"th",28),e.qZA()(),e.TgZ(38,"tbody"),e.YNc(39,ut,5,5,"tr",29),e.qZA()()(),e.YNc(40,ct,2,0,"div",13),e.qZA()}if(2&i){const t=s.$implicit,n=e.oxw();e.xp6(6),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",2==n.sort),e.xp6(1),e.ekj("active",3==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",4==n.sort),e.xp6(1),e.ekj("active",5==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",6==n.sort),e.xp6(1),e.ekj("active",7==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",8==n.sort),e.xp6(1),e.ekj("active",9==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",10==n.sort),e.xp6(1),e.ekj("active",11==n.sort),e.xp6(1),e.Q6J("ngIf",!n.isSettle),e.xp6(1),e.Q6J("ngIf",n.canManageAndView),e.xp6(2),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function _t(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function gt(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"h6",49),e._uU(3," Showing "),e.TgZ(4,"span"),e._uU(5),e.qZA(),e._uU(6," from "),e.TgZ(7,"span"),e._uU(8),e.qZA(),e._uU(9," data "),e.qZA()(),e.TgZ(10,"div",1)(11,"ngb-pagination",50),e.NdJ("pageChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.pageNo=l)})("pageChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.pageChange(l))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(5),e.AsE("",6*t.pageNo-5," - ",6==(null==t.sessionCheques?null:t.sessionCheques.length)?6*t.pageNo:t.totalRecordCount,""),e.xp6(3),e.hij(" ",t.totalRecordCount," "),e.xp6(3),e.Q6J("collectionSize",t.totalRecordCount)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}function pt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td")(19,"button",52),e.NdJ("click",function(){const r=e.CHM(t).$implicit,_=e.oxw(2);return e.KtG(_.viewDepositedAttachment(null==r?null:r.depositeFile))}),e._uU(20,"View Deposit Attachement"),e.qZA()()()}if(2&i){const t=s.$implicit;e.xp6(2),e.hij(" ",null==t?null:t.chequeCustomer,""),e.xp6(2),e.hij(" ",null==t?null:t.chequeNo,""),e.xp6(2),e.hij(" ",e.xi3(7,7,null==t?null:t.chequeCollectionJod,"2.3-3")," JOD"),e.xp6(3),e.hij(" ",null==t||null==t.currency[0]?null:t.currency[0].lookupName,""),e.xp6(2),e.hij(" ",e.xi3(12,10,null==t?null:t.collectedAmount,"2.3-3"),""),e.xp6(3),e.hij(" ",e.xi3(15,13,null==t?null:t.collectionAt,"mediumDate"),""),e.xp6(3),e.hij(" ",null==t||null==t.bank[0]?null:t.bank[0].lookupName,"")}}function mt(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function ht(i,s){if(1&i&&(e.TgZ(0,"div",9)(1,"div",20)(2,"table",21)(3,"thead")(4,"tr",22)(5,"th",23),e._uU(6," Customer "),e.qZA(),e.TgZ(7,"th",23),e._uU(8," Cheque No "),e.qZA(),e.TgZ(9,"th",23),e._uU(10,"Amount JOD"),e.qZA(),e.TgZ(11,"th",23),e._uU(12,"Currency"),e.qZA(),e.TgZ(13,"th",23),e._uU(14,"Amount"),e.qZA(),e.TgZ(15,"th",23),e._uU(16," Date "),e.qZA(),e.TgZ(17,"th",23),e._uU(18," Bank "),e.qZA(),e.TgZ(19,"th",23),e._uU(20," Action "),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,pt,21,16,"tr",51),e.qZA()()(),e.YNc(23,mt,2,0,"div",13),e.qZA()),2&i){const t=e.oxw();e.xp6(22),e.Q6J("ngForOf",t.depositedCheques),e.xp6(1),e.Q6J("ngIf",0==(null==t.depositedCheques?null:t.depositedCheques.length))}}function ft(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function xt(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"h6",49),e._uU(3," Showing "),e.TgZ(4,"span"),e._uU(5),e.qZA(),e._uU(6," from "),e.TgZ(7,"span"),e._uU(8),e.qZA(),e._uU(9," data "),e.qZA()(),e.TgZ(10,"div",1)(11,"ngb-pagination",50),e.NdJ("pageChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.dcPageNo=l)})("pageChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.dcPageChange(l))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(5),e.AsE("",6*t.dcPageNo-5," - ",6==(null==t.depositedCheques?null:t.depositedCheques.length)?6*t.dcPageNo:t.dcTotalRecordCount,""),e.xp6(3),e.hij(" ",t.dcTotalRecordCount," "),e.xp6(3),e.Q6J("collectionSize",t.dcTotalRecordCount)("page",t.dcPageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}function bt(i,s){1&i&&(e.TgZ(0,"span",80),e._uU(1,"Input is required"),e.qZA())}function Ct(i,s){if(1&i&&(e.ynx(0),e.YNc(1,bt,2,0,"span",75),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.chequeNo||null==t.f.chequeNo.errors?null:t.f.chequeNo.errors.required)}}function Zt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Ct,2,1,"ng-container",13),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==t.f.chequeNo?null:t.f.chequeNo.invalid)&&(null==t.f.chequeNo?null:t.f.chequeNo.touched)||(null==t.f.chequeNo?null:t.f.chequeNo.dirty))}}function vt(i,s){1&i&&(e.TgZ(0,"span",80),e._uU(1,"Input is required"),e.qZA())}function Tt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,vt,2,0,"span",75),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.bankId||null==t.f.bankId.errors?null:t.f.bankId.errors.required)}}function At(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Tt,2,1,"ng-container",13),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==t.f.bankId?null:t.f.bankId.invalid)&&(null==t.f.bankId?null:t.f.bankId.touched)||(null==t.f.bankId?null:t.f.bankId.dirty))}}function qt(i,s){1&i&&(e.TgZ(0,"span",80),e._uU(1,"Input is required"),e.qZA())}function Dt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,qt,2,0,"span",75),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.chequeDate||null==t.f.chequeDate.errors?null:t.f.chequeDate.errors.required)}}function kt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Dt,2,1,"ng-container",13),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==t.f.chequeDate?null:t.f.chequeDate.invalid)&&(null==t.f.chequeDate?null:t.f.chequeDate.touched)||(null==t.f.chequeDate?null:t.f.chequeDate.dirty))}}function St(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",81)(2,"label"),e._uU(3,"Previous Cheque Image"),e.qZA(),e._UZ(4,"view-file",82),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("file",null==t.chequeDetails?null:t.chequeDetails.chequeImage)}}function yt(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",83)(2,"label",84),e._uU(3),e.qZA(),e.TgZ(4,"div",85)(5,"img",86),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.fileAction("view"))}),e.qZA(),e.TgZ(6,"img",87),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.fileAction("delete"))}),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.fileName)}}function Nt(i,s){if(1&i&&(e.TgZ(0,"small",80),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.invalidFileType)}}function Ut(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",53)(1,"form",54),e.NdJ("submit",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.handleSubmit())}),e.TgZ(2,"div",55)(3,"h3",56),e._uU(4,"Edit Cheque"),e.qZA(),e.TgZ(5,"p",57),e._uU(6," Customer Name "),e.TgZ(7,"span",58),e._uU(8),e.qZA()()(),e.TgZ(9,"div",59)(10,"div",60)(11,"label"),e._uU(12,"Amount JOD"),e.qZA(),e._UZ(13,"input",61),e.qZA(),e.TgZ(14,"div",62)(15,"label"),e._uU(16,"Currency"),e.qZA(),e._UZ(17,"input",63),e.qZA(),e.TgZ(18,"div",64)(19,"label"),e._uU(20,"Amount"),e.qZA(),e._UZ(21,"input",63),e.ALo(22,"number"),e.qZA(),e.TgZ(23,"div",64)(24,"label"),e._uU(25,"Cheque No *"),e.qZA(),e.TgZ(26,"input",65),e.NdJ("keypress",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r._commonService.numberOnly(l))}),e.qZA(),e.YNc(27,Zt,2,1,"ng-container",13),e.qZA()(),e.TgZ(28,"div",59)(29,"div",66)(30,"label"),e._uU(31,"Bank"),e.qZA(),e._UZ(32,"ng-select",67),e.YNc(33,At,2,1,"ng-container",13),e.qZA(),e.TgZ(34,"div",66)(35,"label"),e._uU(36,"Date*"),e.qZA(),e._UZ(37,"input",68),e.YNc(38,kt,2,1,"ng-container",13),e.qZA()(),e.TgZ(39,"div",59)(40,"div",1),e.YNc(41,St,5,1,"ng-container",13),e.qZA(),e.TgZ(42,"div",66)(43,"label"),e._uU(44,"Cheque Image"),e.qZA(),e.TgZ(45,"div",69)(46,"div",70),e.NdJ("files",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.filesDropped(l))})("enter",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.enter=!l.enter)})("leave",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.enter=!l.enter)})("click",function(){e.CHM(t);const l=e.MAs(54);return e.KtG(l.click())}),e.TgZ(47,"div",71),e._UZ(48,"img",72),e.TgZ(49,"h5"),e._uU(50,"Select OR Drag & drop files"),e.qZA(),e.TgZ(51,"p"),e._uU(52,"Supported formates: JPEG, PNG, PDF"),e.qZA()()(),e.TgZ(53,"input",73,74),e.NdJ("change",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.onSelectFile(l))}),e.qZA()(),e.YNc(55,yt,7,1,"ng-container",13),e.YNc(56,Nt,2,1,"small",75),e.qZA()(),e.TgZ(57,"div",59)(58,"div",76)(59,"div",77)(60,"button",78),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("yes"))}),e._uU(61,"Cancel"),e.qZA(),e.TgZ(62,"button",79),e._uU(63,"Submit"),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.chequeForm),e.xp6(7),e.hij(" ",null==t.chequeDetails?null:t.chequeDetails.chequeCustomer," "),e.xp6(9),e.s9C("value",null==t.chequeDetails||null==t.chequeDetails.currency[0]?null:t.chequeDetails.currency[0].lookupName),e.xp6(4),e.s9C("value",e.xi3(22,11,null==t.chequeDetails?null:t.chequeDetails.collectedAmount,"2.3-3")),e.xp6(6),e.Q6J("ngIf",null==t.f.chequeNo?null:t.f.chequeNo.errors),e.xp6(5),e.Q6J("items",t.bankList),e.xp6(1),e.Q6J("ngIf",null==t.f.bankId?null:t.f.bankId.errors),e.xp6(5),e.Q6J("ngIf",null==t.f.chequeDate?null:t.f.chequeDate.errors),e.xp6(3),e.Q6J("ngIf",null==t.chequeDetails?null:t.chequeDetails.chequeImage),e.xp6(14),e.Q6J("ngIf",t.fileName),e.xp6(1),e.Q6J("ngIf",t.invalidFileType)}}function Ot(i,s){if(1&i&&(e.TgZ(0,"div",60)(1,"label"),e._uU(2,"Cheque Image"),e.qZA(),e._UZ(3,"view-file",82),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("file",null==t.chequeDetails?null:t.chequeDetails.chequeImage)}}function wt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",88)(1,"div",89)(2,"h4",90),e._uU(3,"Cheque Details"),e.qZA(),e.TgZ(4,"h6",91),e._uU(5,"Customer Name: "),e.TgZ(6,"span",92),e._uU(7),e.qZA()()(),e.TgZ(8,"div",93)(9,"div",59)(10,"div",60)(11,"label"),e._uU(12,"Amount JOD"),e.qZA(),e.TgZ(13,"h6",94),e._uU(14),e.ALo(15,"number"),e.qZA()(),e.TgZ(16,"div",62)(17,"label"),e._uU(18,"Currency"),e.qZA(),e.TgZ(19,"h6",94),e._uU(20),e.qZA()(),e.TgZ(21,"div",64)(22,"label"),e._uU(23,"Amount"),e.qZA(),e.TgZ(24,"h6",94),e._uU(25),e.ALo(26,"number"),e.qZA()(),e.TgZ(27,"div",64)(28,"label"),e._uU(29,"Cheque No"),e.qZA(),e.TgZ(30,"h6",94),e._uU(31),e.qZA()()(),e.TgZ(32,"div",59)(33,"div",60)(34,"label"),e._uU(35,"Bank Name"),e.qZA(),e.TgZ(36,"h6",94),e._uU(37),e.qZA()(),e.TgZ(38,"div",60)(39,"label"),e._uU(40,"Date"),e.qZA(),e.TgZ(41,"h6",94),e._uU(42),e.ALo(43,"date"),e.ALo(44,"date"),e.qZA()(),e.TgZ(45,"div",60)(46,"label"),e._uU(47,"Drawer Name"),e.qZA(),e.TgZ(48,"h6",94),e._uU(49),e.qZA()(),e.YNc(50,Ot,4,1,"div",95),e.qZA()()(),e.TgZ(51,"div",96)(52,"div",97)(53,"button",98),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Save click"))}),e._uU(54,"Close"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(7),e.Oqu(null==t.chequeDetails?null:t.chequeDetails.chequeCustomer),e.xp6(7),e.hij("",e.xi3(15,9,null==t.chequeDetails?null:t.chequeDetails.chequeCollectionJod,"2.3-3")," JOD"),e.xp6(6),e.Oqu(null==t.chequeDetails||null==t.chequeDetails.currency[0]?null:t.chequeDetails.currency[0].lookupName),e.xp6(5),e.Oqu(e.xi3(26,12,null==t.chequeDetails?null:t.chequeDetails.collectedAmount,"2.3-3")),e.xp6(6),e.Oqu((null==t.chequeDetails?null:t.chequeDetails.settleChequeNumber)||(null==t.chequeDetails?null:t.chequeDetails.chequeNo)),e.xp6(6),e.Oqu((null==t.chequeDetails||null==t.chequeDetails.settleBank[0]?null:t.chequeDetails.settleBank[0].lookupName)||(null==t.chequeDetails.bank[0]?null:t.chequeDetails.bank[0].lookupName)),e.xp6(5),e.Oqu(e.xi3(43,15,null==t.chequeDetails?null:t.chequeDetails.settleChequeDate,"mediumDate")||e.xi3(44,18,t.chequeDetails.chequeDate,"mediumDate")),e.xp6(7),e.Oqu((null==t.chequeDetails?null:t.chequeDetails.settleDrawerName)||(null==t.chequeDetails?null:t.chequeDetails.chequeDrawerName)),e.xp6(1),e.Q6J("ngIf",null==t.chequeDetails?null:t.chequeDetails.chequeImage)}}let I=(()=>{class i{constructor(t,n,l,r,_,T){this.fb=t,this._registerSettlementService=n,this._activeRoute=l,this._modalService=r,this._closeRegisterService=_,this._commonService=T,this.pageNo=1,this.dcPageNo=1,this.sort=1,this.searchText="",this.depositedCheques=[],this.dcTotalRecordCount=0,this.sessionId=0,this.loadData=new e.vpe,this.isSettle=!0,this.fileName="",this.invalidFileType=""}ngOnChanges(t){this.response=t.response.currentValue,this.sessionCheques=this.response?.data,this.totalRecordCount=this.response?.totalRecordCount,this.pagin=Math.ceil(this.totalRecordCount/6),this.pages=h.w6(this.pagin)}ngOnInit(){this._activeRoute.params.subscribe(t=>{this.sessionId=t.sessionId,this.getDepositedCheques()}),this.initChequeForm(),this.canManageAndView=JSON.parse(localStorage.getItem("cmav"))}initChequeForm(){this.chequeForm=this.fb.group({chequeCollectionId:["",[a.kI.required]],chequeCollectionJod:[{value:"",disabled:!0},[a.kI.required]],chequeDate:["",[a.kI.required]],bankId:[null,[a.kI.required]],chequeDrawerName:["",[a.kI.required]],chequeNo:["",[a.kI.required]]})}get f(){return this.chequeForm.controls}getDepositedCheques(){this._registerSettlementService.getSessionDepositedCheques(`?sessionId=${this.sessionId}&pageNo=${this.dcPageNo-1}&pageSize=6`).subscribe(n=>{console.log(n),n?.data?.length&&(this.depositedCheques=n?.data,this.dcTotalRecordCount=n?.totalRecordCount)})}viewDepositedAttachment(t){this._modalService.open(w.W).componentInstance.file=t}dcPageChange(t){this.dcPageNo=t,this.getDepositedCheques()}handleChequeDetails(t,n){this.chequeDetails={},this.chequeDetails=t,console.log(this.chequeDetails),this._modalService.open(n,{centered:!0,size:"lg"})}handleEditAction(t,n){console.log(n),this.getBanks(),this.chequeDetails={},this.chequeDetails=n;let l={chequeCollectionId:n.chequeCollectionId,chequeCollectionJod:n?.chequeCollectionJod,chequeDate:(0,o.p6)(n?.chequeDate,"yyyy-MM-dd","en"),bankId:n?.bank[0]?.lookupId,chequeNo:n?.chequeNo,chequeDrawerName:n?.chequeCustomer};this.chequeForm.patchValue(l),this._modalService.open(t,{centered:!0,size:"lg"}).result.then(_=>{"yes"===_&&(this.uploadedFile=null,this.fileName="")},_=>{})}handleCheckBoxChange(t){t.target.checked?this.chequeForm.controls.chequeDrawerName.setValue(this.chequeDetails?.chequeCustomer):(this.chequeForm.controls.chequeDrawerName.setValue(""),this.chequeForm.controls.chequeDrawerName.markAsTouched())}handleSubmit(){if(this.chequeForm.valid){let t=new FormData;t.append("chequeCollectionId",this.f.chequeCollectionId.value),t.append("chequeDate",this.f.chequeDate.value),t.append("bankId",this.f.bankId.value),t.append("chequeDrawerName",this.f.chequeDrawerName.value),t.append("chequeNo",this.f.chequeNo.value),this._registerSettlementService.editCollectionCheuqe(t).subscribe(n=>{this.editCollectionResponse=n,this.uploadedFile?.file&&this.addSettleCheckImage(),this._modalService.dismissAll(),this.successModal("success","Data saved successfully!"),this.loadData.emit({page:this.pageNo,chequeNumber:"",action:!0})})}else this.chequeForm.markAllAsTouched()}addSettleCheckImage(){let t=new FormData;t.append("chequeCollectionId",this.f.chequeCollectionId.value),t.append("Image",this.uploadedFile?.file),this._registerSettlementService.addSettledChequesImages(t).subscribe(n=>{n.isSuccess&&(this.uploadedFile=null,this.fileName="")})}successModal(t,n){const l=this._modalService.open(u.i,{size:"md"});l.componentInstance.type=t,"success"==t?l.componentInstance.message=n:"error"==t&&(l.componentInstance.messageError=n)}handleActionClick(t,n){let l=new FormData;l.append("action",t),l.append("chequeCollectionId",n),this._registerSettlementService.actionOnCheque(l).subscribe(r=>{this.loadData.emit({page:this.pageNo,chequeNumber:"",action:!0})})}hadleReverseActionOnCheque(t){let n=new FormData;n.append("chequeCollectionId",t),this._registerSettlementService.reverseActionOnCheque(n).subscribe(l=>{this.loadData.emit({page:this.pageNo,chequeNumber:""})})}getBanks(){this._closeRegisterService.getLookupsById(11).subscribe(t=>{this.bankList=t.data.map(n=>({id:n.id,name:n.name[0].lookupName}))})}sortByCustomer(){this.sort=3==this.sort?1:2==this.sort?3:2,this.loadData.emit({page:this.pageNo,chequeNumber:this.searchText,sort:this.sort})}sortByChequeNo(){this.sort=5==this.sort?1:4==this.sort?5:4,this.loadData.emit({page:this.pageNo,chequeNumber:this.searchText,sort:this.sort})}sortByAmount(){this.sort=7==this.sort?1:6==this.sort?7:6,this.loadData.emit({page:this.pageNo,chequeNumber:this.searchText,sort:this.sort})}sortByDate(){this.sort=9==this.sort?1:8==this.sort?9:8,this.loadData.emit({page:this.pageNo,chequeNumber:this.searchText,sort:this.sort})}sortByBank(){this.sort=11==this.sort?1:10==this.sort?11:10,this.loadData.emit({page:this.pageNo,chequeNumber:this.searchText,sort:this.sort})}sortByStatus(){this.sort=13==this.sort?1:12==this.sort?13:12,this.loadData.emit({page:this.pageNo,chequeNumber:this.searchText,sort:this.sort})}pageChange(t){this.pageNo=t,this.loadData.emit({page:t,chequeNumber:"",sort:1}),window.scroll(0,0)}removeSearch(){this.searchText="",this.loadData.emit({page:1,chequeNumber:"",sort:1})}searchData(t){const n=t.target.value;n.length>=3?(this.searchText=n,this.loadData.emit({page:1,chequeNumber:n,sort:1})):0==n.length&&(this.searchText="",this.loadData.emit({page:1,chequeNumber:"",sort:1}))}fileAction(t){"view"==t?this._modalService.open(Ke.g,{size:"md"}).componentInstance.imageUploadedView=this.uploadedFile:(document.getElementById("chequeFile").value=null,this.fileName="",this.uploadedFile={})}filesDropped(t){this.enter=!1;let n=this._commonService.checkInvalidImageFormat(t,!0).invalidExtentions;if(this.invalidFileType=this._commonService.checkInvalidImageFormat(t,!0).invalidError,n)return void(this.inputFile.nativeElement.value=null);let l=t.map(r=>r.file);n||l.forEach(r=>{this.fileName=r.name,this._commonService.fileToBase64(r).then(_=>{this.uploadedFile=_})})}onSelectFile(t){let n=[...t.target.files],l=this._commonService.checkInvalidImageFormat(n,!0).invalidExtentions;this.invalidFileType=this._commonService.checkInvalidImageFormat(n,!0).invalidError,l?this.inputFile.nativeElement.value=null:n.length>0&&(l||n.forEach(r=>{this.fileName=r.name,this._commonService.fileToBase64(r).then(_=>{this.uploadedFile=_})}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.qu),e.Y36(c.D),e.Y36(p.gz),e.Y36(b.FF),e.Y36(O.x),e.Y36(x.v))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-session-cheques"]],viewQuery:function(t,n){if(1&t&&e.Gf($e,5),2&t){let l;e.iGM(l=e.CRH())&&(n.inputFile=l.first)}},inputs:{response:"response",isSettle:"isSettle"},outputs:{loadData:"loadData"},features:[e.TTD],decls:35,vars:9,consts:[[1,"row"],[1,"col-md-6"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"top-details","justify-content-end","pt-3"],[1,"col-md-12"],[1,"card-table","mt-3"],["class","col-md-12",4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],[1,"col-md-12","mt-4"],[1,"fw-600","mb-3"],[1,"card-table","mt-0"],["loading1",""],["content",""],["sessionChequedetails",""],[1,"table-responsive"],[1,"table"],[1,"py-2"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn",3,"disabled"],["scope","col",4,"ngIf"],[3,"highlight-tr",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["settleData",""],[1,"status-tag",3,"ngStyle"],[1,"fa-regular","fa-eye","cursor-pointer",3,"click"],["elseBlock",""],[1,"btn","btn-undo",3,"click"],["src","assets/images/undo.png","alt",""],["class","btn btn-right",3,"disabled",4,"ngIf"],["class","btn btn-xmark",3,"disabled",4,"ngIf"],["class","btn btn-edit",3,"disabled",4,"ngIf"],[1,"btn","btn-right",3,"disabled"],[1,"fa-regular","fa-circle-check"],[1,"btn","btn-xmark",3,"disabled"],[1,"fa-regular","fa-circle-xmark"],[1,"btn","btn-edit",3,"disabled"],[1,"fa-solid","fa-pen"],[1,"btn","btn-right",3,"click"],[1,"btn","btn-xmark",3,"click"],[1,"btn","btn-edit",3,"click"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"],[4,"ngFor","ngForOf"],[1,"redBtn",3,"click"],[1,"modal-body"],[3,"formGroup","submit"],[1,"modal-head"],[1,"fw-700","font-18"],[1,"fw-600","font-16"],[1,"px-2","gray-500","text-capitalize"],[1,"row","mt-3"],[1,"col-sm-4"],["formControlName","chequeCollectionJod","placeholder","Amount to Pay",1,"form-control"],[1,"col-sm-2"],["disabled","",1,"form-control",3,"value"],[1,"col-sm-3"],["formControlName","chequeNo","placeholder","Cheque no",1,"form-control",3,"keypress"],[1,"col-sm-6"],["formControlName","bankId","placeholder","Bank","bindLabel","name","bindValue","id",1,"flex-grow-1","mt-3","mt-md-0",3,"items"],["type","date","formControlName","chequeDate","placeholder","date",1,"form-control"],[1,"form-group","mb-3"],["appImageDrag","","accept",".png,.jpg,.jpeg,.pdf",1,"card-upload",3,"files","enter","leave","click"],[1,"my-3"],["src","assets/images/upload.png","alt",""],["type","file","id","chequeFile","accept",".png,.jpg,.jpeg,.pdf","hidden","",1,"form-control",3,"change"],["fileInput",""],["class","text-danger",4,"ngIf"],[1,"col-12"],[1,"btns-group","mx-0","my-2"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save"],[1,"text-danger"],[1,"mt-2"],[3,"file"],[1,"d-flex","gap-3","file-item","align-items-center","justify-content-between"],[1,"p-0"],[1,"d-flex","gap-2"],["height","20","src","assets/images/eye.png",1,"cursor-pointer",3,"click"],["height","20","src","assets/images/trash.png",1,"cursor-pointer",3,"click"],[1,"fc-modal","p-4","custom-form-input"],[1,"modal-header","p-0","flex-column","align-items-start"],["ngbAutofocus","",1,"modal-title","fw-bolder","pb-1"],[1,"pb-2","fw-600"],[1,"light-gray"],[1,"modal-body","p-0"],[1,"pb-2","fw-600","light-gray"],["class","col-sm-4",4,"ngIf"],[1,"modal-footer","p-4"],[1,"btns-group"],["type","submit",1,"btn","btn-save",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"input",5),e.NdJ("ngModelChange",function(r){return n.searchText=r})("keyup",function(r){return n.searchData(r)}),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(7,"i",7),e.qZA()()(),e.TgZ(8,"div",1)(9,"div",8)(10,"p")(11,"span"),e._uU(12),e.qZA()()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"div",0),e.YNc(16,dt,41,31,"div",11),e.TgZ(17,"div",9),e.YNc(18,_t,2,0,"ng-template",null,12,e.W1O),e.qZA()()()(),e.YNc(20,gt,12,9,"ng-container",13),e.TgZ(21,"div",14)(22,"h6",15),e._uU(23,"Deposited Cheques"),e.qZA(),e.TgZ(24,"div",16)(25,"div",0),e.YNc(26,ht,24,2,"div",11),e.TgZ(27,"div",9),e.YNc(28,ft,2,0,"ng-template",null,17,e.W1O),e.qZA()()()(),e.YNc(30,xt,12,9,"ng-container",13),e.qZA(),e.YNc(31,Ut,64,14,"ng-template",null,18,e.W1O),e.YNc(33,wt,55,21,"ng-template",null,19,e.W1O)),2&t){const l=e.MAs(19),r=e.MAs(29);e.xp6(5),e.Q6J("ngModel",n.searchText),e.xp6(1),e.Q6J("hidden",0==n.searchText.length),e.xp6(6),e.hij(" No. Of Transactions ",n.totalRecordCount,""),e.xp6(4),e.Q6J("ngIf",n.sessionCheques)("ngIfElse",l),e.xp6(4),e.Q6J("ngIf",n.totalRecordCount>6),e.xp6(6),e.Q6J("ngIf",n.depositedCheques)("ngIfElse",r),e.xp6(4),e.Q6J("ngIf",n.dcTotalRecordCount>6)}},dependencies:[o.sg,o.O5,o.PC,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,a.On,A.w9,b.N9,m.N,Z.w,ze.z,Ve.g,o.JJ,o.uU],styles:[".card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px}.card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0}.btn-right[_ngcontent-%COMP%]{color:#29a073;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-edit[_ngcontent-%COMP%]{color:#4e9aff;font-size:18px;padding:0 5px;margin:0 5px;border:0px}.btn-undo[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:0;border:0px}.btn-undo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.card-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 5px 10px 15px!important}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled, fieldset[_ngcontent-%COMP%]:disabled   .btn[_ngcontent-%COMP%]{color:#a9a9a9!important}.highlight-tr[_ngcontent-%COMP%]{background-color:#ffd2d2}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid #ddd}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#1b212d}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#1b212d}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#929eae}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:7px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:46px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-weight:500;color:var(--primary);font-size:15px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:20px;height:20px;accent-color:var(--primary)}.modal-body[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{border:1px solid #2eb93e;border-radius:5px}.card-upload[_ngcontent-%COMP%]{border:1px dashed #939aa8;text-align:center;padding:10px;border-radius:10px;margin:10px 0;cursor:pointer}.card-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;margin-bottom:15px}.card-upload[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;font-size:18px;color:#0f0f0f}.card-upload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:18px;color:#676767}.file-item[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid #dadada;background:white}.file-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:1;color:green;font-weight:600}"]}),i})();function Mt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"th")(1,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.sortByStatus())}),e._uU(2," Status "),e._UZ(3,"i",20)(4,"i",21),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",12==n.sort),e.xp6(1),e.ekj("active",13==n.sort)}}const Pt=function(i,s){return{background:i,color:s}};function It(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"date"),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td")(17,"div",27),e._uU(18),e.qZA()(),e.TgZ(19,"td")(20,"i",28),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw(2),_=e.MAs(22);return e.KtG(r.handleBankTransferDetails(l,_))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",null==t?null:t.customerName,""),e.xp6(2),e.hij(" ","Settled"==(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName)&&"edit"==(null==t?null:t.settleActionType)&&(null==t?null:t.settleTransfereReference)||(null==t?null:t.transfereReference),""),e.xp6(2),e.hij(" ",e.xi3(7,8,null==t?null:t.paidAmountJod,"2.3-3")," JOD"),e.xp6(3),e.hij(" ",(null==t?null:t.currency)&&(null==t||null==t.currency[0]?null:t.currency[0].lookupName),""),e.xp6(2),e.hij(" ","Settled"==(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName)&&"edit"==(null==t?null:t.settleActionType)&&e.xi3(12,11,null==t?null:t.settleTransfereDate,"mediumDate")||e.xi3(13,14,null==t?null:t.transfereDate,"mediumDate"),""),e.xp6(4),e.hij(" ","Settled"==(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName)&&"edit"==(null==t?null:t.settleActionType)&&(null==t||null==t.settleBankAccount?null:t.settleBankAccount.bankNameEnglish)+" - "+(null==t||null==t.settleBankAccount?null:t.settleBankAccount.accountName)+" - "+(null==t||null==t.settleBankAccount?null:t.settleBankAccount.accountNumber)||(null==t||null==t.bankAccount?null:t.bankAccount.bankNameEnglish)+" - "+(null==t||null==t.bankAccount?null:t.bankAccount.accountName)+" - "+(null==t||null==t.bankAccount?null:t.bankAccount.accountNumber)," "),e.xp6(2),e.Q6J("ngStyle",e.WLB(17,Pt,null==t||null==t.statusObj?null:t.statusObj.lookupBGColor,null==t||null==t.statusObj?null:t.statusObj.lookupTextColor)),e.xp6(1),e.hij(" ",null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName," ")}}function Jt(i,s){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",(null==t||null==t.bankAccount?null:t.bankAccount.bankNameEnglish)+" - "+(null==t||null==t.bankAccount?null:t.bankAccount.accountName)+" - "+(null==t||null==t.bankAccount?null:t.bankAccount.accountNumber),"")}}function Bt(i,s){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",(null==t||null==t.settleBankAccount?null:t.settleBankAccount.bankNameEnglish)+" - "+(null==t||null==t.settleBankAccount?null:t.settleBankAccount.accountName)+" - "+(null==t||null==t.settleBankAccount?null:t.settleBankAccount.accountNumber),"")}}function Ft(i,s){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"number"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.YNc(12,Jt,2,1,"td",13),e.YNc(13,Bt,2,1,"td",13)),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t?null:t.customerName,""),e.xp6(2),e.hij(" ",(null==t?null:t.lastTransfereReference)||(null==t?null:t.transfereReference),""),e.xp6(2),e.hij(" ",e.xi3(6,7,null==t?null:t.paidAmountJod,"2.3-3")+" JOD",""),e.xp6(3),e.hij(" ",(null==t?null:t.currency)&&(null==t||null==t.currency[0]?null:t.currency[0].lookupName),""),e.xp6(2),e.hij(" ",e.xi3(11,10,null==t?null:t.transfereDate,"mediumDate"),""),e.xp6(2),e.Q6J("ngIf",!(null!=t&&null!=t.settleBankAccount&&t.settleBankAccount.bankNameEnglish)),e.xp6(1),e.Q6J("ngIf",null==t||null==t.settleBankAccount?null:t.settleBankAccount.bankNameEnglish)}}function jt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.reverseActionOnBankTransfer(l))}),e._uU(1," Undo "),e._UZ(2,"img",34),e.qZA()}}function Qt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.actionsOnBankTransfer(l,"right"))}),e._UZ(1,"i",36),e.qZA()}if(2&i){const t=e.oxw(2).$implicit;e.Q6J("disabled","right"==t.settleActionType||"edit"==t.settleActionType)}}function Rt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.actionsOnBankTransfer(l,"wrong"))}),e._UZ(1,"i",38),e.qZA()}if(2&i){const t=e.oxw(2).$implicit;e.Q6J("disabled","wrong"==t.settleActionType)}}function Yt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2),_=e.MAs(24);return e.KtG(r.openModalEdit(l,_))}),e._UZ(1,"i",40),e.qZA()}if(2&i){const t=e.oxw(2).$implicit;e.Q6J("disabled","edit"==t.settleActionType)}}function Et(i,s){if(1&i&&(e.TgZ(0,"td"),e.YNc(1,jt,3,0,"button",29),e.YNc(2,Qt,2,1,"button",30),e.YNc(3,Rt,2,1,"button",31),e.YNc(4,Yt,2,1,"button",32),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==t.settleActionTaken),e.xp6(1),e.Q6J("ngIf",!t.settleActionTaken||"right"==t.settleActionType||"edit"==t.settleActionType),e.xp6(1),e.Q6J("ngIf",!t.settleActionTaken||"wrong"==t.settleActionType),e.xp6(1),e.Q6J("ngIf",!t.settleActionTaken||"edit"==t.settleActionType)}}function Gt(i,s){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,It,21,20,"ng-container",25),e.YNc(2,Ft,14,13,"ng-template",null,26,e.W1O),e.YNc(4,Et,5,4,"td",13),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!n.isSettle)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",n.isSettle)}}function Lt(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function Ht(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",16)(2,"table",17)(3,"thead")(4,"tr",18)(5,"th")(6,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByCustomer())}),e._uU(7," Customer "),e._UZ(8,"i",20)(9,"i",21),e.qZA()(),e.TgZ(10,"th")(11,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByReference())}),e._uU(12," Transfer Reference "),e._UZ(13,"i",20)(14,"i",21),e.qZA()(),e.TgZ(15,"th")(16,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByAmount())}),e._uU(17," Paid Amount JOD "),e._UZ(18,"i",20)(19,"i",21),e.qZA()(),e.TgZ(20,"th",22)(21,"button",23),e._uU(22," Currency "),e.qZA()(),e.TgZ(23,"th")(24,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByDate())}),e._uU(25," Transfer Date "),e._UZ(26,"i",20)(27,"i",21),e.qZA()(),e.TgZ(28,"th")(29,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByBank())}),e._uU(30," Markazia Bank "),e._UZ(31,"br"),e._uU(32,"Account No. "),e._UZ(33,"i",20)(34,"i",21),e.qZA()(),e.YNc(35,Mt,5,5,"th",13),e.TgZ(36,"th"),e._uU(37," Action "),e.qZA()()(),e.TgZ(38,"tbody"),e.YNc(39,Gt,5,3,"tr",24),e.qZA()()(),e.YNc(40,Lt,2,0,"div",13),e.qZA()}if(2&i){const t=s.$implicit,n=e.oxw();e.xp6(6),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",2==n.sort),e.xp6(1),e.ekj("active",3==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",4==n.sort),e.xp6(1),e.ekj("active",5==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",6==n.sort),e.xp6(1),e.ekj("active",7==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",8==n.sort),e.xp6(1),e.ekj("active",9==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(4),e.ekj("active",10==n.sort),e.xp6(1),e.ekj("active",11==n.sort),e.xp6(1),e.Q6J("ngIf",!n.isSettle),e.xp6(4),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function Kt(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function zt(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"h6",41),e._uU(3," Showing "),e.TgZ(4,"span"),e._uU(5),e.qZA(),e._uU(6," from "),e.TgZ(7,"span"),e._uU(8),e.qZA(),e._uU(9," data "),e.qZA()(),e.TgZ(10,"div",1)(11,"ngb-pagination",42),e.NdJ("pageChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.pageNo=l)})("pageChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.pageChange(l))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(5),e.AsE("",6*t.pageNo-5," - ",6==(null==t.sessionData?null:t.sessionData.length)?6*t.pageNo:t.totalRecordsCount,""),e.xp6(3),e.hij(" ",t.totalRecordsCount," "),e.xp6(3),e.Q6J("collectionSize",t.totalRecordsCount)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}function Vt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",56)(1,"label"),e._uU(2,"Attachment"),e.qZA(),e.TgZ(3,"div",57)(4,"label",58),e._uU(5),e.qZA(),e.TgZ(6,"div",59)(7,"img",60),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.viewFile())}),e.qZA(),e.TgZ(8,"a",61),e._UZ(9,"img",62),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(null==t.fileDetails?null:t.fileDetails.fileName),e.xp6(3),e.s9C("href",null==t.fileDetails?null:t.fileDetails.file,e.LSH)}}function $t(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",43)(1,"div",44)(2,"h4",45),e._uU(3,"Bank Transfer Details"),e.qZA(),e.TgZ(4,"h6",46),e._uU(5,"Customer Name: "),e.TgZ(6,"span",47),e._uU(7),e.qZA()()(),e.TgZ(8,"div",48)(9,"div",49)(10,"div",50)(11,"label"),e._uU(12,"Paid Amount JOD"),e.qZA(),e.TgZ(13,"h6",51),e._uU(14),e.ALo(15,"number"),e.qZA()(),e.TgZ(16,"div",50)(17,"label"),e._uU(18,"Currency"),e.qZA(),e.TgZ(19,"h6",51),e._uU(20),e.qZA()(),e.TgZ(21,"div",50)(22,"label"),e._uU(23,"Transfer Reference"),e.qZA(),e.TgZ(24,"h6",51),e._uU(25),e.qZA()()(),e.TgZ(26,"div",49)(27,"div",50)(28,"label"),e._uU(29,"Transfer Date"),e.qZA(),e.TgZ(30,"h6",51),e._uU(31),e.ALo(32,"date"),e.ALo(33,"date"),e.qZA()(),e.TgZ(34,"div",50)(35,"label"),e._uU(36,"Markazia Bank "),e._UZ(37,"br"),e._uU(38,"Account No. "),e.qZA(),e.TgZ(39,"h6",51),e._uU(40),e.qZA()(),e.TgZ(41,"div",50)(42,"label"),e._uU(43,"Payer Name"),e.qZA(),e.TgZ(44,"h6",51),e._uU(45),e.qZA()(),e.YNc(46,Vt,10,2,"div",52),e.qZA()()(),e.TgZ(47,"div",53)(48,"div",54)(49,"button",55),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Save click"))}),e._uU(50,"Close"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(7),e.Oqu(null==t.details?null:t.details.customerName),e.xp6(7),e.Oqu(e.xi3(15,8,null==t.details?null:t.details.paidAmountJod,"2.3-3")),e.xp6(6),e.Oqu(null==t.details||null==t.details.currency[0]?null:t.details.currency[0].lookupName),e.xp6(5),e.Oqu((null==t.details?null:t.details.settleTransfereReference)||(null==t.details?null:t.details.transfereReference)),e.xp6(6),e.Oqu(e.xi3(32,11,null==t.details?null:t.details.settleTransfereDate,"mediumDate")||e.xi3(33,14,null==t.details?null:t.details.transfereDate,"mediumDate")),e.xp6(9),e.Oqu((null==t.details?null:t.details.settleBankAccount)&&(null==t.details||null==t.details.settleBankAccount?null:t.details.settleBankAccount.bankNameEnglish)+" - "+(null==t.details||null==t.details.settleBankAccount?null:t.details.settleBankAccount.accountName)+" - "+(null==t.details||null==t.details.settleBankAccount?null:t.details.settleBankAccount.accountNumber)||(null==t.details||null==t.details.bankAccount?null:t.details.bankAccount.bankNameEnglish)+" - "+(null==t.details||null==t.details.bankAccount?null:t.details.bankAccount.accountName)+" - "+(null==t.details||null==t.details.bankAccount?null:t.details.bankAccount.accountNumber)),e.xp6(5),e.Oqu(null==t.details?null:t.details.cardPayerName),e.xp6(1),e.Q6J("ngIf",null==t.fileDetails?null:t.fileDetails.fileName)}}function Wt(i,s){1&i&&(e.TgZ(0,"span",82),e._uU(1,"Input is required"),e.qZA())}function Xt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Wt,2,0,"span",81),e.BQk()),2&i){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("transfereReference"))?null:n.errors.required)}}function en(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Xt,2,1,"ng-container",13),e.BQk()),2&i){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("transfereReference"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("transfereReference"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("transfereReference"))?null:n.dirty))}}function tn(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=s.item;e.xp6(1),e.Oqu((null==t?null:t.name)+" - "+(null==t?null:t.accountName)+" - "+(null==t?null:t.accountNumber))}}function nn(i,s){1&i&&(e.TgZ(0,"span",82),e._uU(1,"Input is required"),e.qZA())}function ln(i,s){if(1&i&&(e.ynx(0),e.YNc(1,nn,2,0,"span",81),e.BQk()),2&i){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.errors.required)}}function sn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ln,2,1,"ng-container",13),e.BQk()),2&i){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.dirty))}}function on(i,s){1&i&&(e.TgZ(0,"span",82),e._uU(1,"Input is required"),e.qZA())}function rn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,on,2,0,"span",81),e.BQk()),2&i){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("drawerName"))?null:n.errors.required)}}function an(i,s){if(1&i&&(e.ynx(0),e.YNc(1,rn,2,1,"ng-container",13),e.BQk()),2&i){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("drawerName"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("drawerName"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("drawerName"))?null:n.dirty))}}function un(i,s){1&i&&(e.TgZ(0,"span",82),e._uU(1,"Input is required"),e.qZA())}function cn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,un,2,0,"span",81),e.BQk()),2&i){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("transfereDate"))?null:n.errors.required)}}function dn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,cn,2,1,"ng-container",13),e.BQk()),2&i){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("transfereDate"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("transfereDate"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("transfereDate"))?null:n.dirty))}}function _n(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",56)(1,"label"),e._uU(2,"Attachment"),e.qZA(),e.TgZ(3,"div",57)(4,"label",58),e._uU(5),e.qZA(),e.TgZ(6,"div",59)(7,"img",60),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.viewFile())}),e.qZA(),e.TgZ(8,"a",61),e._UZ(9,"img",62),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(null==t.fileDetails?null:t.fileDetails.fileName),e.xp6(3),e.s9C("href",null==t.fileDetails?null:t.fileDetails.file,e.LSH)}}function gn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",63)(1,"div",64)(2,"h3",65),e._uU(3,"Edit Bank Transfer"),e.qZA(),e.TgZ(4,"p",66),e._uU(5," Customer Name "),e.TgZ(6,"span",67),e._uU(7),e.qZA()()(),e.TgZ(8,"form",68),e.NdJ("submit",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onSubmit())}),e.TgZ(9,"div",0)(10,"div",1)(11,"div",69)(12,"label"),e._uU(13,"Paid Amount"),e.qZA(),e._UZ(14,"input",70),e.qZA()(),e.TgZ(15,"div",1)(16,"div",69)(17,"label"),e._uU(18,"Currency"),e.qZA(),e._UZ(19,"input",71),e.qZA()(),e.TgZ(20,"div",1)(21,"div",69)(22,"label"),e._uU(23,"Transfer Reference* "),e.qZA(),e._UZ(24,"input",72),e.YNc(25,en,2,1,"ng-container",13),e.qZA()(),e.TgZ(26,"div",1)(27,"div",69)(28,"label"),e._uU(29,"Markazia Bank Account No.*"),e.qZA(),e.TgZ(30,"ng-select",73),e.YNc(31,tn,2,1,"ng-template",74),e.qZA(),e.YNc(32,sn,2,1,"ng-container",13),e.qZA()(),e.TgZ(33,"div",1)(34,"div",69)(35,"label"),e._uU(36,"Payer Name*"),e.qZA(),e._UZ(37,"input",75),e.YNc(38,an,2,1,"ng-container",13),e.qZA()(),e.TgZ(39,"div",1)(40,"div",69)(41,"label"),e._uU(42,"Transfer Date "),e.qZA(),e._UZ(43,"input",76),e.YNc(44,dn,2,1,"ng-container",13),e.qZA()(),e.TgZ(45,"div",1)(46,"div",69)(47,"label"),e._uU(48,"Same Customer"),e.qZA(),e.TgZ(49,"div")(50,"input",77),e.NdJ("change",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.sameCustomer(l))}),e.qZA()()()(),e.YNc(51,_n,10,2,"div",52),e.TgZ(52,"div",9)(53,"div",78)(54,"button",79),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Close click"))}),e._uU(55,"Cancel"),e.qZA(),e.TgZ(56,"button",80),e._uU(57," Submit "),e.qZA()()()()()()}if(2&i){const t=e.oxw();let n,l,r,_;e.xp6(7),e.hij(" ",t.payerName," "),e.xp6(1),e.Q6J("formGroup",t.formGroup),e.xp6(11),e.s9C("value",t.currency),e.xp6(6),e.Q6J("ngIf",null==(n=t.formGroup.get("transfereReference"))?null:n.errors),e.xp6(5),e.Q6J("items",t.banks),e.xp6(2),e.Q6J("ngIf",null==(l=t.formGroup.get("bankId"))?null:l.errors),e.xp6(6),e.Q6J("ngIf",null==(r=t.formGroup.get("drawerName"))?null:r.errors),e.xp6(6),e.Q6J("ngIf",null==(_=t.formGroup.get("transfereDate"))?null:_.errors),e.xp6(7),e.Q6J("ngIf",null==t.fileDetails?null:t.fileDetails.fileName)}}let J=(()=>{class i{constructor(t,n,l,r,_,T,k){this._registerSettlementService=t,this.activeRoute=n,this.closeRegisterService=l,this.sharedService=r,this._modalService=_,this.fb=T,this._collectService=k,this.banks=[],this.payerName="",this.currency="",this.pageNo=1,this.sort=1,this.searchText="",this.fileDetails={fileName:"",file:""},this.loadMainData=new e.vpe}ngOnInit(){this.initForm(),this.getBankAccounts(),this.activeRoute.params.subscribe(t=>{this.sessionId=t.sessionId,this.getSessionBankTransfere()}),console.log(this.isSettle,"Is setle")}initForm(){this.formGroup=this.fb.group({collectionId:[""],paidAmountJod:[{value:"",disabled:!0}],bankId:[null,[a.kI.required]],drawerName:["",[a.kI.required]],transfereDate:[null,[a.kI.required]],transfereReference:[null,[a.kI.required]],transfereAttachment:[null],attachment:[null]})}handleBankTransferDetails(t,n){this.details=t,this.fileDetails.file=t?.transfereAttachment,this.fileDetails.fileName=this.getFilName(t?.transfereAttachment),this._modalService.open(n,{size:"lg",centered:!0})}getFilName(t){if(t)return t?.split("/").pop()}viewFile(){this._modalService.open(w.W,{size:"md"}).componentInstance.file=this.fileDetails?.file}getSessionBankTransfere(){this._registerSettlementService.getSessionBankTransfer(`?sessionId=${this.sessionId}&search=${this.searchText}&pageNo=${this.pageNo-1}&pageSize=6&sort=${this.sort||1}`).subscribe(n=>{n&&(this.sessionData=n.data,this.totalAllRecordsCount=n?.totalAllRecordsCount,this.totalRecordsCount=n?.totalRecordCount)})}pageChange(t){this.pageNo=t,this.getSessionBankTransfere(),window.scroll(0,0)}searchData(t){const n=t.target.value;n.length>=1&&(this.searchText=n,this.pageNo=1,this.getSessionBankTransfere()),0==n.length&&(this.pageNo=1,this.getSessionBankTransfere())}removeSearch(){this.searchText="",this.pageNo=1,this.getSessionBankTransfere()}actionsOnBankTransfer(t,n){const l=new FormData;return l.append("CollectionId",t.orderBankTransfereCollectionId),l.append("Action",n),this._registerSettlementService.actionsOnBankTransfer(l).subscribe(r=>{r.isSuccess?this.getSessionBankTransfere():console.log("error",r)})}reverseActionOnBankTransfer(t){const n=new FormData;return n.append("OrderstransfereCollectionId",t.orderBankTransfereCollectionId),this._registerSettlementService.reverseActionsOnBankTransfer(n).subscribe(l=>{l.isSuccess?this.getSessionBankTransfere():console.log("error",l)})}openModalEdit(t,n){console.log(t),this.fileDetails.file=t?.transfereAttachment,this.fileDetails.fileName=this.getFilName(t?.transfereAttachment),this.payerName=t?.cardPayerName,this.currency=t?.currency[0]?.lookupName;let l={collectionId:t?.orderBankTransfereCollectionId,paidAmountJod:t?.paidAmountJod.toFixed(3),bankId:t?.bankAccount?.accountId,transfereDate:t?.transfereDate.split("T")[0],transfereReference:t?.transfereReference,drawerName:t?.cardPayerName};this.formGroup.patchValue(l),this._modalService.open(n,{centered:!0,size:"lg"})}onSubmit(){if(this.formGroup.invalid)this.formGroup.markAllAsTouched();else{let t=this.formGroup.value;const n=new FormData;n.append("CollectionId",t?.collectionId),n.append("BankId",t?.bankId),n.append("DrawerName",t?.drawerName),n.append("TransfereDate",t?.transfereDate),n.append("TransfereReference",t?.transfereReference),this._registerSettlementService.editCollectionBankTransfer(n).subscribe(l=>{console.log(l),l.isSuccess&&(this._modalService.dismissAll(),this.successModal("success","Data saved successfully!"),this.getSessionBankTransfere())},l=>{this.successModal("error",l.error.errors)})}}successModal(t,n){const l=this._modalService.open(u.i,{size:"md"});l.componentInstance.type=t,"success"==t?l.componentInstance.message=n:"error"==t&&(l.componentInstance.messageError=n)}getBankAccounts(){this._collectService.getBankAccounts("?AccountType=15001&currencyId=9001&Status=2001&PageNo=0&PageSize=1000").subscribe(n=>{n.isSuccess&&(this.banks=n.data.map(l=>({id:l.accountId,name:l.bankNameEnglish,accountName:l.accountName,accountNumber:l.accountNumber})))})}sameCustomer(t){t?.target?.checked?this.formGroup.get("drawerName").setValue(this.payerName):this.formGroup.get("drawerName").setValue("")}sortByCustomer(){this.sort=3==this.sort?1:2==this.sort?3:2,this.getSessionBankTransfere()}sortByReference(){this.sort=5==this.sort?1:4==this.sort?5:4,this.getSessionBankTransfere()}sortByAmount(){this.sort=7==this.sort?1:6==this.sort?7:6,this.getSessionBankTransfere()}sortByDate(){this.sort=9==this.sort?1:8==this.sort?9:8,this.getSessionBankTransfere()}sortByBank(){this.sort=11==this.sort?1:10==this.sort?11:10,this.getSessionBankTransfere()}sortByStatus(){this.sort=13==this.sort?1:12==this.sort?13:12,this.getSessionBankTransfere()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.D),e.Y36(p.gz),e.Y36(O.x),e.Y36(N.F),e.Y36(b.FF),e.Y36(a.qu),e.Y36(U.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-session-bank-transfer"]],inputs:{isSettle:"isSettle"},outputs:{loadMainData:"loadMainData"},decls:25,vars:6,consts:[[1,"row"],[1,"col-md-6"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"top-details","justify-content-end","pt-3"],[1,"col-md-12"],[1,"card-table","mt-3"],["class","col-md-12",4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],["sessionBankTransferDetails",""],["editModal",""],[1,"table-responsive"],[1,"table"],[1,"py-2"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],["scope","col"],[1,"btn",3,"disabled"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["settleData",""],[1,"status-tag",3,"ngStyle"],[1,"fa-regular","fa-eye","cursor-pointer",3,"click"],["class","btn btn-undo",3,"click",4,"ngIf"],["class","btn btn-right",3,"disabled","click",4,"ngIf"],["class","btn btn-xmark",3,"disabled","click",4,"ngIf"],["class","btn btn-edit",3,"disabled","click",4,"ngIf"],[1,"btn","btn-undo",3,"click"],["src","assets/images/undo.png","alt",""],[1,"btn","btn-right",3,"disabled","click"],[1,"fa-regular","fa-circle-check"],[1,"btn","btn-xmark",3,"disabled","click"],[1,"fa-regular","fa-circle-xmark"],[1,"btn","btn-edit",3,"disabled","click"],[1,"fa-solid","fa-pen"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"],[1,"fc-modal","p-4","custom-form-input"],[1,"modal-header","p-0","flex-column","align-items-start"],["ngbAutofocus","",1,"modal-title","fw-bolder","pb-1"],[1,"pb-2","fw-600"],[1,"light-gray"],[1,"modal-body","p-0"],[1,"row","mt-3"],[1,"col-sm-4"],[1,"pb-2","fw-600","light-gray"],["class","col-6 mt-3",4,"ngIf"],[1,"modal-footer","p-4"],[1,"btns-group"],["type","submit",1,"btn","btn-save",3,"click"],[1,"col-6","mt-3"],[1,"file-item","d-flex","justify-content-between","align-items-center","py-2","px-3"],[1,"fw-600","green-clr","mb-0"],[1,"d-flex","gap-2","align-items-center"],["height","20","src","assets/images/eye.png",1,"cursor-pointer",3,"click"],["target","_blank","download","",3,"href"],["height","20","src","assets/images/Download.png",1,"cursor-pointer"],["ngbAutoFocus","",1,"modal-body"],[1,"modal-head"],[1,"fw-700","font-18"],[1,"fw-600","font-16"],[1,"px-2","gray-500","text-capitalize"],[3,"formGroup","submit"],[1,"form-group"],["name","name","type","text","formControlName","paidAmountJod",1,"form-control"],["type","text","disabled","",1,"form-control",3,"value"],["name","name","type","text","formControlName","transfereReference",1,"form-control"],["placeholder"," Select bank ","bindLabel","name","bindValue","id","formControlName","bankId",3,"items"],["ng-option-tmp",""],["type","text","formControlName","drawerName",1,"form-control"],["type","date","formControlName","transfereDate",1,"form-control"],["type","checkbox",1,"form-check-input",3,"change"],[1,"btns-group","m-0"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save"],["class","error",4,"ngIf"],[1,"error"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"input",5),e.NdJ("ngModelChange",function(r){return n.searchText=r})("keyup",function(r){return n.searchData(r)}),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(7,"i",7),e.qZA()()(),e.TgZ(8,"div",1)(9,"div",8)(10,"p")(11,"span"),e._uU(12),e.qZA()()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"div",0),e.YNc(16,Ht,41,29,"div",11),e.TgZ(17,"div",9),e.YNc(18,Kt,2,0,"ng-template",null,12,e.W1O),e.qZA()()()(),e.YNc(20,zt,12,9,"ng-container",13),e.qZA(),e.YNc(21,$t,51,17,"ng-template",null,14,e.W1O),e.YNc(23,gn,58,9,"ng-template",null,15,e.W1O)),2&t){const l=e.MAs(19);e.xp6(5),e.Q6J("ngModel",n.searchText),e.xp6(1),e.Q6J("hidden",0==n.searchText.length),e.xp6(6),e.hij("No. Of Transfers ",n.totalRecordsCount,""),e.xp6(4),e.Q6J("ngIf",n.sessionData)("ngIfElse",l),e.xp6(4),e.Q6J("ngIf",n.totalRecordsCount>6)}},dependencies:[o.sg,o.O5,o.PC,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,a.On,A.w9,A.ir,b.N9,m.N,Z.w,o.JJ,o.uU],styles:[".card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px}.card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0}.btn-right[_ngcontent-%COMP%]{color:#29a073;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-edit[_ngcontent-%COMP%]{color:#4e9aff;padding:0 5px;margin:0 5px;border:0px}.btn-undo[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:0;border:0px}.btn-undo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.card-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 5px 10px 15px!important}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled, fieldset[_ngcontent-%COMP%]:disabled   .btn[_ngcontent-%COMP%]{color:#a9a9a9!important}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid #ddd}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#1b212d}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#1b212d}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#929eae}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:7px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:46px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-weight:500;color:var(--primary);font-size:15px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:20px;height:20px;accent-color:var(--primary)}.modal-body[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{border:1px solid #2eb93e;border-radius:5px}.custom-file[_ngcontent-%COMP%]{border:1px solid #dadada;display:flex;height:46px;border-radius:.375rem;justify-content:center;gap:5px;background:#fff}.file-input__input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.file-input__label[_ngcontent-%COMP%]{cursor:pointer;display:inline-flex;align-items:center;border-radius:4px;font-weight:600;color:var(--gray-500);font-size:14px}"]}),i})();function pn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"th")(1,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.sortByStatus())}),e._uU(2," Status "),e._UZ(3,"i",20)(4,"i",21),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",12==n.sort),e.xp6(1),e.ekj("active",13==n.sort)}}const mn=function(i,s){return{background:i,color:s}};function hn(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"date"),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td")(17,"div",27),e._uU(18),e.qZA()(),e.TgZ(19,"td")(20,"i",28),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw(2),_=e.MAs(22);return e.KtG(r.handleBankTransferDetails(l,_))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",null==t?null:t.customerName,""),e.xp6(2),e.hij(" ","Settled"==(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName)&&"edit"==(null==t?null:t.settleActionType)&&(null==t?null:t.settleBankPledgeNumber)||(null==t?null:t.bankPledgeNumber),""),e.xp6(2),e.hij(" ",e.xi3(7,8,null==t?null:t.pledgeAmountJod,"2.3-3")," JOD"),e.xp6(3),e.hij(" ",(null==t?null:t.currency)&&(null==t||null==t.currency[0]?null:t.currency[0].lookupName),""),e.xp6(2),e.hij(" ","Settled"==(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName)&&"edit"==(null==t?null:t.settleActionType)&&e.xi3(12,11,null==t?null:t.settleBankPledgeDate,"mediumDate")||e.xi3(13,14,null==t?null:t.bankPledgeDate,"mediumDate"),""),e.xp6(4),e.hij(" ","Unsettled"==(null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName)&&"edit"==(null==t?null:t.performedAction)&&(null==t||null==t.settleBank[0]?null:t.settleBank[0].lookupName)||(null==t||null==t.bank[0]?null:t.bank[0].lookupName),""),e.xp6(2),e.Q6J("ngStyle",e.WLB(17,mn,null==t||null==t.statusObj?null:t.statusObj.lookupBGColor,null==t||null==t.statusObj?null:t.statusObj.lookupTextColor)),e.xp6(1),e.hij(" ",null==t||null==t.statusObj||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName," ")}}function fn(i,s){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"number"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t?null:t.customerName,""),e.xp6(2),e.hij(" ",null==t?null:t.bankPledgeNumber,""),e.xp6(2),e.hij(" ",e.xi3(6,6,null==t?null:t.pledgeAmountJod,"2.3-3")," JOD"),e.xp6(3),e.hij(" ",(null==t?null:t.currency)&&(null==t||null==t.currency[0]?null:t.currency[0].lookupName),""),e.xp6(2),e.hij(" ",e.xi3(11,9,null==t?null:t.bankPledgeDate,"mediumDate"),""),e.xp6(3),e.hij(" ",(null==t||null==t.settleBank[0]?null:t.settleBank[0].lookupName)||(null==t||null==t.bank[0]?null:t.bank[0].lookupName),"")}}function xn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.reverseActionsOnBankPledge(l))}),e._uU(1," Undo "),e._UZ(2,"img",34),e.qZA()}}function bn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.actionsOnBankPledge(l,"right"))}),e._UZ(1,"i",36),e.qZA()}if(2&i){const t=e.oxw(2).$implicit;e.Q6J("disabled","right"==t.settleActionType||"edit"==t.settleActionType)}}function Cn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.actionsOnBankPledge(l,"wrong"))}),e._UZ(1,"i",38),e.qZA()}if(2&i){const t=e.oxw(2).$implicit;e.Q6J("disabled","wrong"==t.settleActionType)}}function Zn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).$implicit,r=e.oxw(2),_=e.MAs(24);return e.KtG(r.openModalEdit(l,_))}),e._UZ(1,"i",40),e.qZA()}if(2&i){const t=e.oxw(2).$implicit;e.Q6J("disabled","edit"==t.settleActionType)}}function vn(i,s){if(1&i&&(e.TgZ(0,"td"),e.YNc(1,xn,3,0,"button",29),e.YNc(2,bn,2,1,"button",30),e.YNc(3,Cn,2,1,"button",31),e.YNc(4,Zn,2,1,"button",32),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.settleActionTaken),e.xp6(1),e.Q6J("ngIf",!t.settleActionTaken||"right"==t.settleActionType||"edit"==t.settleActionType),e.xp6(1),e.Q6J("ngIf",!t.settleActionTaken||"wrong"==t.settleActionType),e.xp6(1),e.Q6J("ngIf",!t.settleActionTaken||"edit"==t.settleActionType)}}function Tn(i,s){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,hn,21,20,"ng-container",25),e.YNc(2,fn,14,12,"ng-template",null,26,e.W1O),e.YNc(4,vn,5,4,"td",13),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!n.isSettle)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",n.isSettle)}}function An(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function qn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",16)(2,"table",17)(3,"thead")(4,"tr",18)(5,"th")(6,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByCustomer())}),e._uU(7," Customer "),e._UZ(8,"i",20)(9,"i",21),e.qZA()(),e.TgZ(10,"th")(11,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByPledgeNumber())}),e._uU(12," Bank Pledge Number "),e._UZ(13,"i",20)(14,"i",21),e.qZA()(),e.TgZ(15,"th")(16,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByAmount())}),e._uU(17," Pledge Amount JOD "),e._UZ(18,"i",20)(19,"i",21),e.qZA()(),e.TgZ(20,"th",22)(21,"button",23),e._uU(22," Currency "),e.qZA()(),e.TgZ(23,"th")(24,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByDate())}),e._uU(25," Bank Pledge Date "),e._UZ(26,"i",20)(27,"i",21),e.qZA()(),e.TgZ(28,"th")(29,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.sortByBank())}),e._uU(30," Bank Name "),e._UZ(31,"i",20)(32,"i",21),e.qZA()(),e.YNc(33,pn,5,5,"th",13),e.TgZ(34,"th"),e._uU(35," Action "),e.qZA()()(),e.TgZ(36,"tbody"),e.YNc(37,Tn,5,3,"tr",24),e.qZA()()(),e.YNc(38,An,2,0,"div",13),e.qZA()}if(2&i){const t=s.$implicit,n=e.oxw();e.xp6(6),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",2==n.sort),e.xp6(1),e.ekj("active",3==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",4==n.sort),e.xp6(1),e.ekj("active",5==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",6==n.sort),e.xp6(1),e.ekj("active",7==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",8==n.sort),e.xp6(1),e.ekj("active",9==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",10==n.sort),e.xp6(1),e.ekj("active",11==n.sort),e.xp6(1),e.Q6J("ngIf",!n.isSettle),e.xp6(4),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function Dn(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function kn(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"h6",41),e._uU(3," Showing "),e.TgZ(4,"span"),e._uU(5),e.qZA(),e._uU(6," from "),e.TgZ(7,"span"),e._uU(8),e.qZA(),e._uU(9," data "),e.qZA()(),e.TgZ(10,"div",1)(11,"ngb-pagination",42),e.NdJ("pageChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.pageNo=l)})("pageChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.pageChange(l))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(5),e.AsE("",6*t.pageNo-5," - ",6==(null==t.sessionData?null:t.sessionData.length)?6*t.pageNo:t.totalRecordsCount,""),e.xp6(3),e.hij(" ",t.totalRecordsCount," "),e.xp6(3),e.Q6J("collectionSize",t.totalRecordsCount)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}function Sn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",56)(1,"label"),e._uU(2,"Attachment"),e.qZA(),e.TgZ(3,"div",57)(4,"label",58),e._uU(5),e.qZA(),e.TgZ(6,"div",59)(7,"img",60),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.viewFile())}),e.qZA(),e.TgZ(8,"a",61),e._UZ(9,"img",62),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(null==t.fileDetails?null:t.fileDetails.fileName),e.xp6(3),e.s9C("href",null==t.fileDetails?null:t.fileDetails.file,e.LSH)}}function yn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",43)(1,"div",44)(2,"h4",45),e._uU(3,"Bank Pledge Details"),e.qZA(),e.TgZ(4,"h6",46),e._uU(5,"Customer Name: "),e.TgZ(6,"span",47),e._uU(7),e.qZA()()(),e.TgZ(8,"div",48)(9,"div",49)(10,"div",50)(11,"label"),e._uU(12,"Paid Amount JOD"),e.qZA(),e.TgZ(13,"h6",51),e._uU(14),e.ALo(15,"number"),e.qZA()(),e.TgZ(16,"div",50)(17,"label"),e._uU(18,"Currency"),e.qZA(),e.TgZ(19,"h6",51),e._uU(20),e.qZA()(),e.TgZ(21,"div",50)(22,"label"),e._uU(23,"Bank Pledge Number"),e.qZA(),e.TgZ(24,"h6",51),e._uU(25),e.qZA()()(),e.TgZ(26,"div",49)(27,"div",50)(28,"label"),e._uU(29,"Bank Pledge Date"),e.qZA(),e.TgZ(30,"h6",51),e._uU(31),e.ALo(32,"date"),e.ALo(33,"date"),e.qZA()(),e.TgZ(34,"div",50)(35,"label"),e._uU(36,"Bank Name"),e.qZA(),e.TgZ(37,"h6",51),e._uU(38),e.qZA()(),e.YNc(39,Sn,10,2,"div",52),e.qZA()()(),e.TgZ(40,"div",53)(41,"div",54)(42,"button",55),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Save click"))}),e._uU(43,"Close"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(7),e.Oqu(null==t.details?null:t.details.customerName),e.xp6(7),e.Oqu(e.xi3(15,7,null==t.details?null:t.details.pledgeAmountJod,"2.3-3")+" JOD"),e.xp6(6),e.Oqu(null==t.details||null==t.details.currency[0]?null:t.details.currency[0].lookupName),e.xp6(5),e.Oqu((null==t.details?null:t.details.settleBankPledgeNumber)||(null==t.details?null:t.details.bankPledgeNumber)),e.xp6(6),e.Oqu(e.xi3(32,10,null==t.details?null:t.details.settleBankPledgeDate,"mediumDate")||e.xi3(33,13,null==t.details?null:t.details.bankPledgeDate,"mediumDate")),e.xp6(7),e.Oqu((null==t.details||null==t.details.settleBank[0]?null:t.details.settleBank[0].lookupName)||(null==t.details||null==t.details.bank[0]?null:t.details.bank[0].lookupName)),e.xp6(1),e.Q6J("ngIf",null==t.fileDetails?null:t.fileDetails.fileName)}}function Nn(i,s){1&i&&(e.TgZ(0,"span",80),e._uU(1,"Input is required"),e.qZA())}function Un(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Nn,2,0,"span",79),e.BQk()),2&i){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("bankPledgeNumber"))?null:n.errors.required)}}function On(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Un,2,1,"ng-container",13),e.BQk()),2&i){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("bankPledgeNumber"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("bankPledgeNumber"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("bankPledgeNumber"))?null:n.dirty))}}function wn(i,s){1&i&&(e.TgZ(0,"span",80),e._uU(1,"Input is required"),e.qZA())}function Mn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,wn,2,0,"span",79),e.BQk()),2&i){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.errors.required)}}function Pn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Mn,2,1,"ng-container",13),e.BQk()),2&i){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.dirty))}}function In(i,s){1&i&&(e.TgZ(0,"span",80),e._uU(1,"Input is required"),e.qZA())}function Jn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,In,2,0,"span",79),e.BQk()),2&i){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("bankPledgeDate"))?null:n.errors.required)}}function Bn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Jn,2,1,"ng-container",13),e.BQk()),2&i){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("bankPledgeDate"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("bankPledgeDate"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("bankPledgeDate"))?null:n.dirty))}}function Fn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",81)(1,"label"),e._uU(2,"Attachment"),e.qZA(),e.TgZ(3,"div",57)(4,"label",58),e._uU(5),e.qZA(),e.TgZ(6,"div",59)(7,"img",60),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.viewFile())}),e.qZA(),e.TgZ(8,"a",61),e._UZ(9,"img",62),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(null==t.fileDetails?null:t.fileDetails.fileName),e.xp6(3),e.s9C("href",null==t.fileDetails?null:t.fileDetails.file,e.LSH)}}function jn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",63)(1,"div",64)(2,"h3",65),e._uU(3,"Edit Bank Pledge"),e.qZA(),e.TgZ(4,"p",66),e._uU(5," Customer Name "),e.TgZ(6,"span",67),e._uU(7),e.qZA()()(),e.TgZ(8,"form",68),e.NdJ("submit",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onSubmit())}),e.TgZ(9,"div",0)(10,"div",1)(11,"div",69)(12,"label"),e._uU(13,"Paid Amount JOD"),e.qZA(),e._UZ(14,"input",70),e.qZA()(),e.TgZ(15,"div",1)(16,"div",69)(17,"label"),e._uU(18,"Currency"),e.qZA(),e._UZ(19,"input",71),e.qZA()(),e.TgZ(20,"div",1)(21,"div",69)(22,"label"),e._uU(23,"Bank Pledge Number*"),e.qZA(),e._UZ(24,"input",72),e.YNc(25,On,2,1,"ng-container",13),e.qZA()(),e.TgZ(26,"div",1)(27,"div",69)(28,"label"),e._uU(29,"Bank Name"),e.qZA(),e._UZ(30,"ng-select",73),e.YNc(31,Pn,2,1,"ng-container",13),e.qZA()(),e.TgZ(32,"div",1)(33,"div",69)(34,"label"),e._uU(35,"Bank Pledge Date*"),e.qZA(),e._UZ(36,"input",74),e.YNc(37,Bn,2,1,"ng-container",13),e.qZA()(),e.YNc(38,Fn,10,2,"div",75),e.TgZ(39,"div",9)(40,"div",76)(41,"button",77),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Close click"))}),e._uU(42,"Cancel"),e.qZA(),e.TgZ(43,"button",78),e._uU(44," Submit "),e.qZA()()()()()()}if(2&i){const t=e.oxw();let n,l,r;e.xp6(7),e.hij(" ",t.payerName," "),e.xp6(1),e.Q6J("formGroup",t.formGroup),e.xp6(11),e.s9C("value",t.currency),e.xp6(6),e.Q6J("ngIf",null==(n=t.formGroup.get("bankPledgeNumber"))?null:n.errors),e.xp6(5),e.Q6J("items",t.banks),e.xp6(1),e.Q6J("ngIf",null==(l=t.formGroup.get("bankId"))?null:l.errors),e.xp6(6),e.Q6J("ngIf",null==(r=t.formGroup.get("bankPledgeDate"))?null:r.errors),e.xp6(1),e.Q6J("ngIf",null==t.fileDetails?null:t.fileDetails.fileName)}}let B=(()=>{class i{constructor(t,n,l,r,_,T,k){this._registerSettlementService=t,this.activeRoute=n,this.closeRegisterService=l,this.sharedService=r,this._modalService=_,this.fb=T,this._collectService=k,this.banks=[],this.payerName="",this.currency="",this.sort=1,this.pageNo=1,this.searchText="",this.fileDetails={fileName:"",file:""},this.loadMainData=new e.vpe}ngOnInit(){this.initForm(),this.activeRoute.params.subscribe(t=>{this.sessionId=t.sessionId,this.getSessionBankPledge()}),this.getBanks()}initForm(){this.formGroup=this.fb.group({collectionId:[""],paidAmountJod:[{value:"",disabled:!0}],bankId:[null,[a.kI.required]],bankPledgeDate:[null,[a.kI.required]],bankPledgeNumber:[null,[a.kI.required]],pledgeAttachment:[null],attachment:[null]})}handleBankTransferDetails(t,n){this.details=t,this.fileDetails.file=t?.pledgeAttachment,this.fileDetails.fileName=this.getFilName(t?.pledgeAttachment),this._modalService.open(n,{size:"lg",centered:!0})}getFilName(t){return t?.split("/").pop()}viewFile(){this._modalService.open(w.W,{size:"md"}).componentInstance.file=this.fileDetails?.file}getSessionBankPledge(){return this._registerSettlementService.getSessionBankPledge(`?sessionId=${this.sessionId}&search=${this.searchText}&pageNo=${this.pageNo-1}&pageSize=6&sort=${this.sort||1}`).subscribe(n=>{n&&(this.sessionData=n.data,console.log(this.sessionData),this.totalAllRecordsCount=n?.totalAllRecordsCount,this.totalRecordsCount=n?.totalRecordCount)})}pageChange(t){this.pageNo=t,this.getSessionBankPledge(),window.scroll(0,0)}searchData(t){const n=t.target.value;n.length>=1&&(this.searchText=n,this.pageNo=1,this.getSessionBankPledge()),0==n.length&&(this.pageNo=1,this.getSessionBankPledge())}removeSearch(){this.searchText="",this.getSessionBankPledge()}actionsOnBankPledge(t,n){const l=new FormData;return l.append("ChequeCollectionId",t.ordersBanksPledgeCollectionId),l.append("Action",n),this._registerSettlementService.actionsOnBankPledge(l).subscribe(r=>{r.isSuccess?this.getSessionBankPledge():console.log("error",r)})}reverseActionsOnBankPledge(t){const n=new FormData;return n.append("OrdersPledgeCollectionId",t.ordersBanksPledgeCollectionId),this._registerSettlementService.reverseActionsOnBankPledge(n).subscribe(l=>{l.isSuccess?this.getSessionBankPledge():console.log("error",l)})}openModalEdit(t,n){console.log(t),this.payerName=t?.custoemrName,this.currency=t?.currency[0]?.lookupName,this.fileDetails.file=t?.pledgeAttachment,this.fileDetails.fileName=this.getFilName(t?.pledgeAttachment);let l={collectionId:t?.ordersBanksPledgeCollectionId,paidAmountJod:t?.pledgeAmountJod.toFixed(3),bankId:t?.lastBankId||t?.bankId,bankPledgeDate:t?.bankPledgeDate.split("T")[0],bankPledgeNumber:t?.bankPledgeNumber};console.log(l),this.formGroup.patchValue(l),this._modalService.open(n,{centered:!0,size:"lg"})}onSubmit(){if(this.formGroup.invalid)this.formGroup.markAllAsTouched();else{let t=this.formGroup.value;const n=new FormData;n.append("CollectionId",t?.collectionId),n.append("BankId",t?.bankId),n.append("DrawerName",t?.drawerName),n.append("BankPledgeDate",t?.bankPledgeDate),n.append("BankPledgeNumber",t?.bankPledgeNumber),this._registerSettlementService.editCollectionBankPledge(n).subscribe(l=>{console.log(l),l.isSuccess&&(this._modalService.dismissAll(),this.successModal("success","Data saved successfully!"),this.getSessionBankPledge())},l=>{this.successModal("error",l.error.errors)})}}successModal(t,n){const l=this._modalService.open(u.i,{size:"md"});l.componentInstance.type=t,"success"==t?l.componentInstance.message=n:"error"==t&&(l.componentInstance.messageError=n)}getBanks(){this._collectService.getLookupsById(11).subscribe(t=>{this.banks=t.data.map(n=>({id:n.id,name:n.name[0].lookupName}))})}sortByCustomer(){this.sort=3==this.sort?1:2==this.sort?3:2,this.getSessionBankPledge()}sortByPledgeNumber(){this.sort=5==this.sort?1:4==this.sort?5:4,this.getSessionBankPledge()}sortByAmount(){this.sort=7==this.sort?1:6==this.sort?7:6,this.getSessionBankPledge()}sortByDate(){this.sort=9==this.sort?1:8==this.sort?9:8,this.getSessionBankPledge()}sortByBank(){this.sort=11==this.sort?1:10==this.sort?11:10,this.getSessionBankPledge()}sortByStatus(){this.sort=13==this.sort?1:12==this.sort?13:12,this.getSessionBankPledge()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.D),e.Y36(p.gz),e.Y36(O.x),e.Y36(N.F),e.Y36(b.FF),e.Y36(a.qu),e.Y36(U.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-session-bank-pledges"]],inputs:{isSettle:"isSettle"},outputs:{loadMainData:"loadMainData"},decls:25,vars:6,consts:[[1,"row"],[1,"col-md-6"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"top-details","justify-content-end","pt-3"],[1,"col-md-12"],[1,"card-table","mt-3"],["class","col-md-12",4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],["sessionBankPledgeDetails",""],["editModal",""],[1,"table-responsive"],[1,"table"],[1,"py-2"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],["scope","col"],[1,"btn",3,"disabled"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["settleData",""],[1,"status-tag",3,"ngStyle"],[1,"fa-regular","fa-eye","cursor-pointer",3,"click"],["class","btn btn-undo",3,"click",4,"ngIf"],["class","btn btn-right",3,"disabled","click",4,"ngIf"],["class","btn btn-xmark",3,"disabled","click",4,"ngIf"],["class","btn btn-edit",3,"disabled","click",4,"ngIf"],[1,"btn","btn-undo",3,"click"],["src","assets/images/undo.png","alt",""],[1,"btn","btn-right",3,"disabled","click"],[1,"fa-regular","fa-circle-check"],[1,"btn","btn-xmark",3,"disabled","click"],[1,"fa-regular","fa-circle-xmark"],[1,"btn","btn-edit",3,"disabled","click"],[1,"fa-solid","fa-pen"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"],[1,"fc-modal","p-4","custom-form-input"],[1,"modal-header","p-0","flex-column","align-items-start"],["ngbAutofocus","",1,"modal-title","fw-bolder","pb-1"],[1,"pb-2","fw-600"],[1,"light-gray"],[1,"modal-body","p-0"],[1,"row","mt-3"],[1,"col-sm-4"],[1,"pb-2","fw-600","light-gray"],["class","col-6",4,"ngIf"],[1,"modal-footer","p-4"],[1,"btns-group"],["type","submit",1,"btn","btn-save",3,"click"],[1,"col-6"],[1,"file-item","d-flex","justify-content-between","align-items-center","py-2","px-3"],[1,"fw-600","green-clr","mb-0"],[1,"d-flex","gap-2","align-items-center"],["height","20","src","assets/images/eye.png",1,"cursor-pointer",3,"click"],["target","_blank","download","",3,"href"],["height","20","src","assets/images/Download.png",1,"cursor-pointer"],["ngbAutoFocus","",1,"modal-body"],[1,"modal-head"],[1,"fw-700","font-18"],[1,"fw-600","font-16"],[1,"px-2","gray-500","text-capitalize"],[3,"formGroup","submit"],[1,"form-group"],["name","name","type","text","formControlName","paidAmountJod",1,"form-control"],["type","text",1,"form-control",3,"value"],["name","name","type","text","formControlName","bankPledgeNumber",1,"form-control"],["placeholder"," Select bank ","bindLabel","name","bindValue","id","formControlName","bankId",3,"items"],["type","date","formControlName","bankPledgeDate",1,"form-control"],["class","col-6 mt-3",4,"ngIf"],[1,"btns-group","my-2"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save"],["class","error",4,"ngIf"],[1,"error"],[1,"col-6","mt-3"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"input",5),e.NdJ("ngModelChange",function(r){return n.searchText=r})("keyup",function(r){return n.searchData(r)}),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(7,"i",7),e.qZA()()(),e.TgZ(8,"div",1)(9,"div",8)(10,"p")(11,"span"),e._uU(12),e.qZA()()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"div",0),e.YNc(16,qn,39,29,"div",11),e.TgZ(17,"div",9),e.YNc(18,Dn,2,0,"ng-template",null,12,e.W1O),e.qZA()()()(),e.YNc(20,kn,12,9,"ng-container",13),e.qZA(),e.YNc(21,yn,44,16,"ng-template",null,14,e.W1O),e.YNc(23,jn,45,8,"ng-template",null,15,e.W1O)),2&t){const l=e.MAs(19);e.xp6(5),e.Q6J("ngModel",n.searchText),e.xp6(1),e.Q6J("hidden",0==n.searchText.length),e.xp6(6),e.hij("No. Of Pledges ",n.totalRecordsCount,""),e.xp6(4),e.Q6J("ngIf",n.sessionData)("ngIfElse",l),e.xp6(4),e.Q6J("ngIf",n.totalRecordsCount>6)}},dependencies:[o.sg,o.O5,o.PC,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,a.On,A.w9,b.N9,m.N,Z.w,o.JJ,o.uU],styles:[".card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px}.card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0}.btn-right[_ngcontent-%COMP%]{color:#29a073;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-edit[_ngcontent-%COMP%]{color:#4e9aff;padding:0 5px;margin:0 5px;border:0px}.btn-undo[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:0;border:0px}.btn-undo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.card-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 5px 10px 15px!important}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled, fieldset[_ngcontent-%COMP%]:disabled   .btn[_ngcontent-%COMP%]{color:#a9a9a9!important}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid #ddd}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#1b212d}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#1b212d}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#929eae}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:7px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:46px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-weight:500;color:var(--primary);font-size:15px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:20px;height:20px;accent-color:var(--primary)}.modal-body[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{border:1px solid #2eb93e;border-radius:5px}.custom-file[_ngcontent-%COMP%]{border:1px solid #dadada;display:flex;height:46px;border-radius:.375rem;justify-content:center;gap:5px;background:#fff}.file-input__input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.file-input__label[_ngcontent-%COMP%]{cursor:pointer;display:inline-flex;align-items:center;border-radius:4px;font-weight:600;color:var(--gray-500);font-size:14px}"]}),i})();const Qn=function(i,s){return{background:i,color:s,borderRadius:"5px",padding:"8px 20px",fontWeight:"600"}};function Rn(i,s){if(1&i&&(e.TgZ(0,"div",7)(1,"div",8)(2,"h6",9),e._uU(3,"Session Details"),e.qZA(),e.TgZ(4,"div",10)(5,"div",11),e._uU(6),e.qZA()()(),e._UZ(7,"hr"),e.TgZ(8,"div",12)(9,"div",10)(10,"h6",13),e._uU(11,"Session No"),e.qZA(),e.TgZ(12,"h6",14),e._uU(13),e.qZA()(),e.TgZ(14,"div",10)(15,"h6",13),e._uU(16,"Session Date"),e.qZA(),e.TgZ(17,"h6",14),e._uU(18),e.ALo(19,"date"),e.qZA()(),e.TgZ(20,"div",10)(21,"h6",13),e._uU(22,"Session Time"),e.qZA(),e.TgZ(23,"h6",14),e._uU(24),e.ALo(25,"date"),e.qZA()(),e.TgZ(26,"div",10)(27,"h6",13),e._uU(28,"Session Status"),e.qZA(),e.TgZ(29,"h6",14),e._uU(30),e.qZA()(),e.TgZ(31,"div",10)(32,"h6",13),e._uU(33,"Register Name"),e.qZA(),e.TgZ(34,"h6",14),e._uU(35),e.qZA()(),e.TgZ(36,"div",10)(37,"h6",13),e._uU(38,"Employee"),e.qZA(),e.TgZ(39,"h6",14),e._uU(40),e.qZA()(),e.TgZ(41,"div",10)(42,"h6",13),e._uU(43,"Register No"),e.qZA(),e.TgZ(44,"h6",14),e._uU(45),e.qZA()(),e.TgZ(46,"div",10)(47,"h6",13),e._uU(48,"Branch Name"),e.qZA(),e.TgZ(49,"h6",14),e._uU(50),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngStyle",e.WLB(16,Qn,null==t.sessionDetails||null==t.sessionDetails.statusObj?null:t.sessionDetails.statusObj.lookupBGColor,null==t.sessionDetails||null==t.sessionDetails.statusObj?null:t.sessionDetails.statusObj.lookupTextColor)),e.xp6(1),e.hij(" ",null==t.sessionDetails||null==t.sessionDetails.statusObj||null==t.sessionDetails.statusObj.translations[0]?null:t.sessionDetails.statusObj.translations[0].lookupName," "),e.xp6(7),e.Oqu((null==t.sessionDetails?null:t.sessionDetails.registerSessionId)||"-"),e.xp6(5),e.Oqu(e.xi3(19,10,null==t.sessionDetails?null:t.sessionDetails.createdAt,"mediumDate")||"-"),e.xp6(6),e.Oqu(e.xi3(25,13,null==t.sessionDetails?null:t.sessionDetails.createdAt,"mediumTime")||"-"),e.xp6(6),e.Oqu((null==t.sessionDetails||null==t.sessionDetails.statusObj||null==t.sessionDetails.statusObj.translations[0]?null:t.sessionDetails.statusObj.translations[0].lookupName)||"-"),e.xp6(5),e.Oqu((null==t.sessionDetails||null==t.sessionDetails.register?null:t.sessionDetails.register.registersName)||"-"),e.xp6(5),e.Oqu((null==t.sessionDetails||null==t.sessionDetails.createdBy?null:t.sessionDetails.createdBy.fullName)||"-"),e.xp6(5),e.Oqu((null==t.sessionDetails||null==t.sessionDetails.register?null:t.sessionDetails.register.registerId)||"-"),e.xp6(5),e.Oqu((null==t.sessionDetails||null==t.sessionDetails.branch?null:t.sessionDetails.branch.branchName)||"-")}}function Yn(i,s){if(1&i&&(e.TgZ(0,"div",42)(1,"div",43)(2,"div",44)(3,"h3"),e._uU(4),e.qZA()()(),e.TgZ(5,"div",34)(6,"div",29)(7,"p"),e._uU(8,"Registered Amount "),e.qZA(),e.TgZ(9,"div",30),e._uU(10),e.ALo(11,"number"),e.qZA()()(),e.TgZ(12,"div",34)(13,"div",29)(14,"p"),e._uU(15,"Refunded Cash "),e.qZA(),e.TgZ(16,"div",30),e._uU(17),e.ALo(18,"number"),e.qZA()()(),e.TgZ(19,"div",34)(20,"div",29)(21,"p"),e._uU(22,"Actual Cashier Amount "),e.qZA(),e.TgZ(23,"div",30),e._uU(24),e.ALo(25,"number"),e.qZA()(),e.TgZ(26,"div",29)(27,"p"),e._uU(28,"Actual Main Fund Amount "),e.qZA(),e.TgZ(29,"div",30),e._uU(30),e.ALo(31,"number"),e.qZA()()(),e.TgZ(32,"div",34)(33,"div",29)(34,"p"),e._uU(35,"Differences"),e.qZA(),e.TgZ(36,"div",45),e._uU(37),e.ALo(38,"number"),e.qZA()()()()),2&i){const t=s.$implicit,n=s.index;e.xp6(4),e.AsE("",n+1,". ",(null==t||null==t.currency[0]?null:t.currency[0].lookupName)||"0"," Currency "),e.xp6(6),e.AsE(" ",e.xi3(11,13,null==t?null:t.registerdAmount,"2.3-3")||"0"," "," "+(null==t||null==t.currency[0]?null:t.currency[0].lookupName)," "),e.xp6(7),e.AsE(" ",e.xi3(18,16,(null==t?null:t.refundedAmount)||0,"2.3-3")," "," "+(null==t||null==t.currency[0]?null:t.currency[0].lookupName)," "),e.xp6(7),e.AsE(" ",e.xi3(25,19,null==t?null:t.actualAmount,"2.3-3")||"0"," "," "+(null==t||null==t.currency[0]?null:t.currency[0].lookupName)," "),e.xp6(6),e.AsE(" ",e.xi3(31,22,null==t?null:t.mainFundActualAmount,"2.3-3")||"0"," "," "+(null==t||null==t.currency[0]?null:t.currency[0].lookupName)," "),e.xp6(6),e.Q6J("ngClass",0===(null==t?null:t.isDifferencePositiveOrZero)?"":null!=t&&t.isDifferencePositiveOrZero?"greenHighlight":"redHighlight"),e.xp6(1),e.AsE(" ",e.xi3(38,25,null==t?null:t.differenceAmount,"2.3-3")||"0"," "," "+(null==t||null==t.currency[0]?null:t.currency[0].lookupName)," ")}}function En(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-session-cheques",48),e.NdJ("loadData",function(l){e.CHM(t);const r=e.oxw(3);return e.KtG(r.handleLoadData(l))}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("response",t.sessionCheques)("isSettle",!1)}}function Gn(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,En,1,2,"app-session-cheques",47),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.sessionCheques?null:t.sessionCheques.data)}}function Ln(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-session-card-payments",50),e.NdJ("loadCardData",function(l){e.CHM(t);const r=e.oxw(3);return e.KtG(r.handleCardsLoad(l))}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("response",t.sessionCardsPayments)("isSettle",!1)}}function Hn(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,Ln,1,2,"app-session-card-payments",49),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.sessionCardsPayments?null:t.sessionCardsPayments.cards)}}function Kn(i,s){1&i&&(e.TgZ(0,"div",46),e._UZ(1,"app-session-bank-transfer",51),e.qZA()),2&i&&(e.xp6(1),e.Q6J("isSettle",!1))}function zn(i,s){1&i&&(e.TgZ(0,"div",46),e._UZ(1,"app-session-bank-pledges",51),e.qZA()),2&i&&(e.xp6(1),e.Q6J("isSettle",!1))}function Vn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",15)(3,"button",16),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.chooseTab(1))}),e.TgZ(4,"div",17)(5,"div",18),e._UZ(6,"img",19),e.qZA(),e.TgZ(7,"div",20)(8,"p"),e._uU(9," Total Cash "),e.qZA(),e.TgZ(10,"h5"),e._uU(11),e.ALo(12,"number"),e.qZA()()()(),e.TgZ(13,"button",16),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.chooseTab(2))}),e.TgZ(14,"div",17)(15,"div",18),e._UZ(16,"img",21),e.qZA(),e.TgZ(17,"div",20)(18,"p"),e._uU(19," Total Cheque "),e.qZA(),e.TgZ(20,"h5"),e._uU(21),e.ALo(22,"number"),e.qZA()()()(),e.TgZ(23,"button",16),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.chooseTab(3))}),e.TgZ(24,"div",17)(25,"div",18),e._UZ(26,"img",22),e.qZA(),e.TgZ(27,"div",20)(28,"p"),e._uU(29," Total Card "),e.qZA(),e.TgZ(30,"h5"),e._uU(31),e.ALo(32,"number"),e.qZA()()()(),e.TgZ(33,"button",16),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.chooseTab(4))}),e.TgZ(34,"div",17)(35,"div",18),e._UZ(36,"img",23),e.qZA(),e.TgZ(37,"div",20)(38,"p"),e._uU(39," TTL Bank Transfers "),e.qZA(),e.TgZ(40,"h5"),e._uU(41),e.ALo(42,"number"),e.qZA()()()(),e.TgZ(43,"button",16),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.chooseTab(5))}),e.TgZ(44,"div",17)(45,"div",18),e._UZ(46,"img",24),e.qZA(),e.TgZ(47,"div",20)(48,"p"),e._uU(49," TTL Bank Pledges "),e.qZA(),e.TgZ(50,"h5"),e._uU(51),e.ALo(52,"number"),e.qZA()()()()(),e.TgZ(53,"div",1)(54,"div",2)(55,"div",25)(56,"div",26)(57,"div",1)(58,"div",2)(59,"div",27)(60,"div",1)(61,"div",28)(62,"div",29)(63,"p"),e._uU(64,"Initial Fund"),e.qZA(),e.TgZ(65,"div",30),e._uU(66),e.ALo(67,"number"),e.qZA()()()()()(),e.TgZ(68,"div",2)(69,"div",31)(70,"div",32)(71,"h6",9),e._uU(72," Cash"),e.qZA(),e.TgZ(73,"p")(74,"span"),e._uU(75),e.qZA()()(),e.YNc(76,Yn,39,28,"div",33),e.qZA()(),e.TgZ(77,"div",2)(78,"div",31)(79,"div",32)(80,"h6",9),e._uU(81," Cash Deposited"),e.qZA()(),e.TgZ(82,"div",1)(83,"div",34)(84,"div",29)(85,"p"),e._uU(86,"Deposited Cash "),e.qZA(),e.TgZ(87,"div",30),e._uU(88),e.ALo(89,"number"),e.qZA()()(),e.TgZ(90,"div",34)(91,"div",29)(92,"p"),e._uU(93,"Remaining Cash"),e.qZA(),e.TgZ(94,"div",30),e._uU(95),e.ALo(96,"number"),e.qZA()()()()()()()()(),e.YNc(97,Gn,2,1,"div",35),e.YNc(98,Hn,2,1,"div",35),e.YNc(99,Kn,2,1,"div",35),e.YNc(100,zn,2,1,"div",35),e.qZA()(),e.TgZ(101,"div",36)(102,"div",31)(103,"div",1)(104,"div",37)(105,"div",38)(106,"h6",9),e._uU(107,"Closing Notes"),e.qZA(),e._UZ(108,"textarea",39),e.qZA()(),e.TgZ(109,"div",37)(110,"div",38)(111,"h6",9),e._uU(112,"Settlement Notes"),e.qZA(),e._UZ(113,"textarea",39),e.qZA()()()()(),e.TgZ(114,"div",2)(115,"div",40)(116,"button",41),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.goBack())}),e._uU(117,"Close"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.ekj("active",1==t.selected),e.xp6(8),e.hij(" ",e.xi3(12,27,(null==t.sessionDetails||null==t.sessionDetails.registerAmounts?null:t.sessionDetails.registerAmounts.totalCash)||0,"2.3-3")," JOD "),e.xp6(2),e.ekj("active",2==t.selected),e.xp6(8),e.hij("",e.xi3(22,30,(null==t.sessionDetails||null==t.sessionDetails.registerAmounts?null:t.sessionDetails.registerAmounts.totalCheques)||0,"2.3-3")," JOD "),e.xp6(2),e.ekj("active",3==t.selected),e.xp6(8),e.hij(" ",e.xi3(32,33,(null==t.sessionDetails||null==t.sessionDetails.registerAmounts?null:t.sessionDetails.registerAmounts.totalCards)||0,"2.3-3")," JOD "),e.xp6(2),e.ekj("active",4==t.selected),e.xp6(8),e.hij(" ",e.xi3(42,36,(null==t.sessionDetails||null==t.sessionDetails.registerAmounts?null:t.sessionDetails.registerAmounts.totalBankTransfere)||0,"2.3-3")," JOD "),e.xp6(2),e.ekj("active",5==t.selected),e.xp6(8),e.hij(" ",e.xi3(52,39,(null==t.sessionDetails||null==t.sessionDetails.registerAmounts?null:t.sessionDetails.registerAmounts.totalBanksPledge)||0,"2.3-3")," JOD "),e.xp6(5),e.Q6J("hidden",1!=t.selected),e.xp6(10),e.hij("",e.xi3(67,42,(null==t.sessionDetails?null:t.sessionDetails.initialFund)||0,"2.3-3")," JOD "),e.xp6(9),e.hij(" No. Of Currencies ",null==t.sessionDetails?null:t.sessionDetails.cashAtClosing.length," "),e.xp6(1),e.Q6J("ngForOf",null==t.sessionDetails?null:t.sessionDetails.cashAtClosing),e.xp6(12),e.hij(" ",e.xi3(89,45,null==t.sessionDetails?null:t.sessionDetails.debositedCash,"2.3-3")," JOD "),e.xp6(7),e.hij(" ",e.xi3(96,48,null==t.sessionDetails?null:t.sessionDetails.remainingCash,"2.3-3")," JOD "),e.xp6(2),e.Q6J("ngIf",2==t.selected),e.xp6(1),e.Q6J("ngIf",3==t.selected),e.xp6(1),e.Q6J("ngIf",4==t.selected),e.xp6(1),e.Q6J("ngIf",5==t.selected),e.xp6(8),e.Q6J("value",null==t.sessionDetails?null:t.sessionDetails.closingNotes),e.xp6(5),e.Q6J("value",null==t.sessionDetails?null:t.sessionDetails.settlementNotes)}}function $n(i,s){1&i&&e._UZ(0,"app-loading")}let Wn=(()=>{class i{constructor(t,n,l,r){this.activeRoute=t,this._registerSettlementService=n,this._headerService=l,this._location=r,this.selected=1,this.pageNo=1,this.sort=1,this.searchText="",console.log(this._location.go)}ngOnInit(){this._headerService.setTitle("Unsettled Sessions"),this.activeRoute.params.subscribe(t=>{this.sessionId=t.sessionId,this.getSessionDetailsSettlements()})}goBack(){this._location.back()}getSessionDetailsSettlements(){this._registerSettlementService.getSessionDetailSettlement(this.sessionId).subscribe(t=>{let n=t.data.cashAtClosing.map(l=>({...l,differenceAmount:Math.abs(l.differenceAmount),isDifferencePositiveOrZero:l?.actualAmount==l?.registerdAmount?0:l?.actualAmount>=l?.registerdAmount}));this.sessionDetails={...t.data,cashAtClosing:n}})}getSessionCheques(){this._registerSettlementService.getSessionCheques(this.sessionId,this.pageNo,this.searchText,this.sort).subscribe(t=>{this.sessionCheques={...t}})}getSessionCardsPayments(){this._registerSettlementService.getSessionCardsPayments(this.sessionId,this.pageNo,this.searchText,this.sort).subscribe(t=>{this.sessionCardsPayments={...t}})}chooseTab(t){this.searchText="",this.pageNo=1,this.selected=t,2==t?this.getSessionCheques():3==t&&this.getSessionCardsPayments()}handleLoadData(t){this.pageNo=t.page,this.searchText=t.chequeNumber,this.sort=t.sort,this.getSessionCheques()}handleCardsLoad(t){this.pageNo=t.page,this.searchText=t.customer,this.sort=t.sort,this.getSessionCardsPayments()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.gz),e.Y36(c.D),e.Y36(g.r),e.Y36(o.Ye))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-session-details"]],decls:9,vars:4,consts:[[1,"card-page"],[1,"row"],[1,"col-md-12"],["class","card-collect card-with-details",4,"ngIf","ngIfElse"],[1,"heading-text","mb-3"],["class","row",4,"ngIf","ngIfElse"],["loadingData",""],[1,"card-collect","card-with-details"],[1,"d-flex","align-items-center","justify-content-between"],[1,"card-inner-heading"],[1,"d-flex","flex-column"],[3,"ngStyle"],[1,"gap-3","sd-item"],[1,"dark-gray"],[1,"light-gray"],[1,"tab-nav","d-flex","flex-wrap"],[1,"btn",3,"click"],[1,"d-flex","gap-3","align-items-center"],[1,"imag"],["src","assets/images/wallet.png","alt",""],[1,"info"],["src","assets/images/cheque.png","alt",""],["src","assets/images/card.png","alt",""],["src","assets/images/bt.svg","alt",""],["src","assets/images/bp.svg","alt",""],[1,"tab-content"],[1,"tab-item",3,"hidden"],[1,"card-collect","py-2"],[1,"col-sm-4"],[1,"total-card"],[1,"total"],[1,"card-collect"],[1,"top-details"],["class","row mb-4",4,"ngFor","ngForOf"],[1,"col-sm-3"],["class","tab-item",4,"ngIf"],[1,"col-md-12","mt-3"],[1,"col-md-8"],[1,"form-group","mb-3"],["disabled","","rows","4","minlength","200","maxlength","200",1,"form-control",3,"value"],[1,"btns-group","m-0","my-1"],[1,"btn","btn-save",3,"click"],[1,"row","mb-4"],[1,"col-sm-12"],[1,"curncy"],[1,"total",3,"ngClass"],[1,"tab-item"],[3,"response","isSettle","loadData",4,"ngIf"],[3,"response","isSettle","loadData"],[3,"response","isSettle","loadCardData",4,"ngIf"],[3,"response","isSettle","loadCardData"],[3,"isSettle"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,Rn,51,19,"div",3),e.qZA(),e.TgZ(4,"h3",4),e._uU(5,"Register Amounts"),e.qZA(),e.YNc(6,Vn,118,51,"div",5),e.qZA()(),e.YNc(7,$n,1,0,"ng-template",null,6,e.W1O)),2&t){const l=e.MAs(8);e.xp6(3),e.Q6J("ngIf",null==n.sessionDetails?null:n.sessionDetails.register)("ngIfElse",l),e.xp6(3),e.Q6J("ngIf",null==n.sessionDetails?null:n.sessionDetails.registerAmounts)("ngIfElse",l)}},dependencies:[o.mk,o.sg,o.O5,o.PC,m.N,P,I,J,B,o.JJ,o.uU],styles:[".tab-nav[_ngcontent-%COMP%]{display:flex;gap:30px;margin-bottom:30px}.tab-nav[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{border:1px solid #dc3545;box-shadow:0 15px 25px #0000001a}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:1px solid #ced5dd;border-radius:10px;padding:15px 20px}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .imag[_ngcontent-%COMP%]{width:55px;height:55px;background:#f8f8f8;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:10px}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .imag[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{text-align:start}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:500;padding:3px}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0;padding:3px}.actual-amount[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:130px}.error[_ngcontent-%COMP%]{color:#f44336;font-size:14px;padding:5px;display:block;font-weight:500}.nosession[_ngcontent-%COMP%]{text-align:center;padding:60px 30px}"]}),i})();var Xn=d(55134);const ei=["successModal"],ti=["depositedAttachment"];function ni(i,s){if(1&i&&(e.TgZ(0,"div",10)(1,"div",11)(2,"h6",12),e._uU(3,"Settle"),e.qZA(),e.TgZ(4,"div",13)(5,"p",14),e._uU(6,"Closing Date & Time"),e.qZA(),e.TgZ(7,"span"),e._uU(8),e.ALo(9,"date"),e.qZA()()(),e._UZ(10,"hr"),e.TgZ(11,"div",15)(12,"div",13)(13,"h6",16),e._uU(14,"Branch Name"),e.qZA(),e.TgZ(15,"h6",17),e._uU(16),e.qZA()(),e.TgZ(17,"div",13)(18,"h6",16),e._uU(19,"Register Name"),e.qZA(),e.TgZ(20,"h6",17),e._uU(21),e.qZA()(),e.TgZ(22,"div",13)(23,"h6",16),e._uU(24,"Register No"),e.qZA(),e.TgZ(25,"h6",17),e._uU(26),e.qZA()(),e.TgZ(27,"div",13)(28,"h6",16),e._uU(29,"Session No"),e.qZA(),e.TgZ(30,"h6",17),e._uU(31),e.qZA()(),e.TgZ(32,"div",13)(33,"h6",16),e._uU(34,"Employee"),e.qZA(),e.TgZ(35,"h6",17),e._uU(36),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(8),e.Oqu(e.xi3(9,6,null==t.settlementDetails?null:t.settlementDetails.createdAt,"short")||"-"),e.xp6(8),e.Oqu((null==t.settlementDetails||null==t.settlementDetails.branch?null:t.settlementDetails.branch.branchName)||"-"),e.xp6(5),e.Oqu((null==t.settlementDetails||null==t.settlementDetails.register?null:t.settlementDetails.register.registersName)||"-"),e.xp6(5),e.Oqu((null==t.settlementDetails||null==t.settlementDetails.register?null:t.settlementDetails.register.registerId)||"-"),e.xp6(5),e.Oqu((null==t.settlementDetails?null:t.settlementDetails.registerSessionId)||"-"),e.xp6(5),e.Oqu((null==t.settlementDetails||null==t.settlementDetails.createdBy?null:t.settlementDetails.createdBy.fullName)||"-")}}function ii(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.chooseTab(1))}),e.TgZ(1,"div",21)(2,"div",22),e._UZ(3,"img",49),e.qZA(),e.TgZ(4,"div",24)(5,"p"),e._uU(6," Total Cash "),e.qZA(),e.TgZ(7,"h5"),e._uU(8),e.ALo(9,"number"),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.ekj("active",1==t.selected),e.xp6(8),e.hij(" ",e.xi3(9,3,(null==t.settlementDetails||null==t.settlementDetails.registerAmounts?null:t.settlementDetails.registerAmounts.totalCash)||0,"2.3-3")," JOD ")}}function li(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.chooseTab(2))}),e.TgZ(1,"div",21)(2,"div",22),e._UZ(3,"img",50),e.qZA(),e.TgZ(4,"div",24)(5,"p"),e._uU(6," Total Cheque "),e.qZA(),e.TgZ(7,"h5"),e._uU(8),e.ALo(9,"number"),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.ekj("active",2==t.selected),e.xp6(8),e.hij("",e.xi3(9,3,(null==t.settlementDetails||null==t.settlementDetails.registerAmounts?null:t.settlementDetails.registerAmounts.totalCheques)||0,"2.3-3")," JOD ")}}function si(i,s){1&i&&(e.TgZ(0,"span",68),e._uU(1,"Input is required"),e.qZA())}function oi(i,s){1&i&&(e.TgZ(0,"span",68),e._uU(1,"Input does not allow negative values"),e.qZA())}function ri(i,s){if(1&i&&(e.ynx(0),e.YNc(1,si,2,0,"span",67),e.YNc(2,oi,2,0,"span",67),e.BQk()),2&i){const t=e.oxw(2).$implicit;let n,l;e.xp6(1),e.Q6J("ngIf",null==(n=t.get("actualAmount"))||null==n.errors?null:n.errors.required),e.xp6(1),e.Q6J("ngIf",null==(l=t.get("actualAmount"))||null==l.errors?null:l.errors.min)}}function ai(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ri,3,2,"ng-container",62),e.BQk()),2&i){const t=e.oxw().$implicit;let n;e.xp6(1),e.Q6J("ngIf",(null==(n=t.get("actualAmount"))?null:n.invalid)&&(null==(n=t.get("actualAmount"))?null:n.touched)||(null==(n=t.get("actualAmount"))?null:n.dirty))}}function ui(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"span",69),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.viewDepositAttachment(l))}),e._uU(1,"View Deposit Attachment"),e.qZA()}}function ci(i,s){1&i&&(e.TgZ(0,"span",70),e._uU(1,"No Attachment"),e.qZA())}function di(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",51)(1,"div",52)(2,"div",1)(3,"div",53)(4,"div",54)(5,"h3"),e._uU(6),e.qZA()()()(),e.TgZ(7,"div",55)(8,"div",56)(9,"div",1)(10,"div",57)(11,"div",31)(12,"p"),e._uU(13),e.qZA(),e.TgZ(14,"div",58),e._UZ(15,"input",59),e.qZA()()(),e.TgZ(16,"div",57)(17,"div",31)(18,"p"),e._uU(19),e.qZA(),e.TgZ(20,"div",60),e._uU(21),e.qZA()()(),e.TgZ(22,"div",57)(23,"div",31)(24,"p"),e._uU(25),e.qZA(),e.TgZ(26,"div",58)(27,"input",61),e.NdJ("input",function(){const l=e.CHM(t),r=l.$implicit,_=l.index,T=e.oxw(2);return e.KtG(T.actualAmountChange(r.get("registerdAmount").value,r.get("actualAmount").value,_))}),e.qZA(),e.YNc(28,ai,2,1,"ng-container",62),e.qZA()()(),e.TgZ(29,"div",57)(30,"div",31)(31,"p"),e._uU(32),e.qZA(),e.TgZ(33,"div",60),e._uU(34),e.qZA()()(),e.TgZ(35,"div",63)(36,"p",64),e._uU(37),e.ALo(38,"number"),e.qZA(),e.YNc(39,ui,2,0,"span",65),e.YNc(40,ci,2,0,"span",66),e.qZA(),e.TgZ(41,"div",63)(42,"p",64),e._uU(43),e.ALo(44,"number"),e.qZA()()()()()()()}if(2&i){const t=s.$implicit,n=s.index,l=e.oxw(2);let r;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(5),e.AsE("",n+1,". ",t.get("currency").value," Currency "),e.xp6(7),e.hij("Registered Amount ",t.get("currency").value,""),e.xp6(6),e.hij("Closing Difference ",t.get("currency").value,""),e.xp6(1),e.Q6J("ngClass",0==t.get("differenceAmount").value?"":+t.get("differenceAmount").value>0?"greenHighlight":"redHighlight"),e.xp6(1),e.hij(" ",l.removeMinusFromNegativeValue(t.get("differenceAmount").value)," "),e.xp6(4),e.hij("Actual Amount ",t.get("currency").value,""),e.xp6(3),e.Q6J("ngIf",null==(r=t.get("actualAmount"))?null:r.errors),e.xp6(4),e.hij("Differnce ",t.get("currency").value,""),e.xp6(1),e.Q6J("ngClass",0===t.get("isDifferencePositiveOrZero").value?"":t.get("isDifferencePositiveOrZero").value?"greenHighlight":"redHighlight"),e.xp6(1),e.hij(" ",t.get("differenceViewOnly").value," "),e.xp6(3),e.AsE("Deposited Amount: ",e.xi3(38,18,null==t?null:t.get("debositedAmount").value,"2.3-3")," ",t.get("currency").value,""),e.xp6(2),e.Q6J("ngIf",(null==l.settlementDetails||null==l.settlementDetails.cashAtClosing[n].depositAttachmentFiles?null:l.settlementDetails.cashAtClosing[n].depositAttachmentFiles.length)>0),e.xp6(1),e.Q6J("ngIf",0==(null==l.settlementDetails||null==l.settlementDetails.cashAtClosing[n].depositAttachmentFiles?null:l.settlementDetails.cashAtClosing[n].depositAttachmentFiles.length)),e.xp6(3),e.AsE("Refunded Amount: ",e.xi3(44,21,null==t?null:t.get("refundedAmount").value,"2.3-3")," ",t.get("currency").value,"")}}function _i(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-session-cheques",73),e.NdJ("loadData",function(l){e.CHM(t);const r=e.oxw(3);return e.KtG(r.handleLoadData(l))}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("response",t.sessionCheques)}}function gi(i,s){if(1&i&&(e.TgZ(0,"div",71),e.YNc(1,_i,1,1,"app-session-cheques",72),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.sessionCheques?null:t.sessionCheques.data)}}function pi(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-session-card-payments",75),e.NdJ("loadCardData",function(l){e.CHM(t);const r=e.oxw(3);return e.KtG(r.handleCardsLoad(l))}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("response",t.sessionCardsPayments)}}function mi(i,s){if(1&i&&(e.TgZ(0,"div",71),e.YNc(1,pi,1,1,"app-session-card-payments",74),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.sessionCardsPayments?null:t.sessionCardsPayments.cards)}}function hi(i,s){1&i&&(e.TgZ(0,"div",71),e._UZ(1,"app-session-bank-transfer",76),e.qZA()),2&i&&(e.xp6(1),e.Q6J("isSettle",!0))}function fi(i,s){1&i&&(e.TgZ(0,"div",71),e._UZ(1,"app-session-bank-pledges",76),e.qZA()),2&i&&(e.xp6(1),e.Q6J("isSettle",!0))}function xi(i,s){if(1&i&&(e.TgZ(0,"p",77),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.successMessage)}}function bi(i,s){if(1&i&&(e.TgZ(0,"p",78),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.errorMessage)}}function Ci(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2),r=e.MAs(12);return e.KtG(l.openConfirmModal(r))}),e._uU(1," Settle Register"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.cashForm.valid&&8002!==t.cashDepositTypeId)}}function Zi(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",18),e.YNc(3,ii,10,6,"button",19),e.YNc(4,li,10,6,"button",19),e.TgZ(5,"button",20),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.chooseTab(3))}),e.TgZ(6,"div",21)(7,"div",22),e._UZ(8,"img",23),e.qZA(),e.TgZ(9,"div",24)(10,"p"),e._uU(11," Total Card "),e.qZA(),e.TgZ(12,"h5"),e._uU(13),e.ALo(14,"number"),e.qZA()()()(),e.TgZ(15,"button",20),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.chooseTab(4))}),e.TgZ(16,"div",21)(17,"div",22),e._UZ(18,"img",25),e.qZA(),e.TgZ(19,"div",24)(20,"p"),e._uU(21," TTL Bank Transfers "),e.qZA(),e.TgZ(22,"h5"),e._uU(23),e.ALo(24,"number"),e.qZA()()()(),e.TgZ(25,"button",20),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.chooseTab(5))}),e.TgZ(26,"div",21)(27,"div",22),e._UZ(28,"img",26),e.qZA(),e.TgZ(29,"div",24)(30,"p"),e._uU(31," TTL Bank Pledges "),e.qZA(),e.TgZ(32,"h5"),e._uU(33),e.ALo(34,"number"),e.qZA()()()()(),e.TgZ(35,"div",1)(36,"div",2)(37,"div",27)(38,"div",28)(39,"div",1)(40,"div",2)(41,"div",29)(42,"div",1)(43,"div",30)(44,"div",31)(45,"p"),e._uU(46,"Initial Fund"),e.qZA(),e.TgZ(47,"div",32),e._uU(48),e.ALo(49,"number"),e.qZA()()()()()(),e.TgZ(50,"div",2)(51,"div",33)(52,"div",34)(53,"h6",12),e._uU(54," Cash"),e.qZA(),e.TgZ(55,"p")(56,"span"),e._uU(57),e.qZA()()(),e.TgZ(58,"form",35)(59,"div",36),e.YNc(60,di,45,24,"div",37),e.qZA()()()()()(),e.YNc(61,gi,2,1,"div",38),e.YNc(62,mi,2,1,"div",38),e.YNc(63,hi,2,1,"div",38),e.YNc(64,fi,2,1,"div",38),e.qZA()(),e.TgZ(65,"div",39)(66,"div",33)(67,"div",1)(68,"div",40)(69,"div",41)(70,"h6",12),e._uU(71,"Closing Notes"),e.qZA(),e._UZ(72,"textarea",42),e.qZA()(),e.TgZ(73,"div",40)(74,"div",41)(75,"h6",12),e._uU(76,"Settlement Notes"),e.qZA(),e.TgZ(77,"textarea",43),e.NdJ("ngModelChange",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.settlementNotes=l)}),e.qZA()()()()()(),e.TgZ(78,"div",2),e.YNc(79,xi,2,1,"p",44),e.YNc(80,bi,2,1,"p",45),e.TgZ(81,"div",46)(82,"a",47),e._uU(83," Cancel"),e.qZA(),e.YNc(84,Ci,2,1,"button",48),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",8002!==t.cashDepositTypeId),e.xp6(1),e.Q6J("ngIf",8002!==t.cashDepositTypeId),e.xp6(1),e.ekj("active",3==t.selected),e.xp6(8),e.hij(" ",e.xi3(14,25,(null==t.settlementDetails||null==t.settlementDetails.registerAmounts?null:t.settlementDetails.registerAmounts.totalCards)||0,"2.3-3")," JOD "),e.xp6(2),e.ekj("active",4==t.selected),e.xp6(8),e.hij(" ",e.xi3(24,28,(null==t.settlementDetails||null==t.settlementDetails.registerAmounts?null:t.settlementDetails.registerAmounts.totalBankTransfere)||0,"2.3-3")," JOD "),e.xp6(2),e.ekj("active",5==t.selected),e.xp6(8),e.hij(" ",e.xi3(34,31,(null==t.settlementDetails||null==t.settlementDetails.registerAmounts?null:t.settlementDetails.registerAmounts.totalBanksPledge)||0,"2.3-3")," JOD "),e.xp6(5),e.Q6J("hidden",1!=t.selected),e.xp6(10),e.hij("",e.xi3(49,34,(null==t.settlementDetails?null:t.settlementDetails.initialFund)||0,"2.3-3")," JOD "),e.xp6(9),e.hij(" No. Of Currencies ",(null==t.settlementDetails?null:t.settlementDetails.cashAtClosing.length)||"0"," "),e.xp6(1),e.Q6J("formGroup",t.cashForm),e.xp6(2),e.Q6J("ngForOf",t.cashArray.controls),e.xp6(1),e.Q6J("ngIf",2==t.selected),e.xp6(1),e.Q6J("ngIf",3==t.selected),e.xp6(1),e.Q6J("ngIf",4==t.selected),e.xp6(1),e.Q6J("ngIf",5==t.selected),e.xp6(8),e.Q6J("value",null==t.settlementDetails?null:t.settlementDetails.closingNotes),e.xp6(5),e.Q6J("ngModel",t.settlementNotes),e.xp6(2),e.Q6J("ngIf",t.successMessage),e.xp6(1),e.Q6J("ngIf",t.errorMessage),e.xp6(4),e.Q6J("ngIf",t.canManageAndView)}}function vi(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",80)(1,"div",81),e._UZ(2,"i",82),e.TgZ(3,"h5"),e._uU(4,"Settle successfully!"),e.qZA(),e.TgZ(5,"h6",14),e._uU(6," Your settlement is completed successfully. "),e.qZA(),e.TgZ(7,"div",83)(8,"button",84),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Save click"))}),e._uU(9,"Close"),e.qZA()()()()}}function Ti(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",88)(1,"label",89),e._uU(2),e.qZA(),e.TgZ(3,"div",90)(4,"img",91),e.NdJ("click",function(){const r=e.CHM(t).$implicit,_=e.oxw(2);return e.KtG(_.viewFile(r))}),e.qZA()()()}if(2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(n.getFileName(t))}}function Ai(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",80)(1,"div",85)(2,"h5"),e._uU(3,"Deposited Attachment"),e.qZA(),e.YNc(4,Ti,5,1,"div",86),e.TgZ(5,"div",87)(6,"button",84),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("yes"))}),e._uU(7,"Cancel"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.depositAttachmentFiles)}}function qi(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",80)(1,"div",81),e._UZ(2,"i",82),e.TgZ(3,"h5"),e._uU(4,"Confirmation!"),e.qZA(),e.TgZ(5,"h6",92),e._uU(6," Are you sure you want to settle this session? "),e.qZA(),e.TgZ(7,"div",87)(8,"button",84),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("yes"))}),e._uU(9,"Yes"),e.qZA(),e.TgZ(10,"button",84),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.dismiss("dismiss"))}),e._uU(11,"No"),e.qZA()()()()}}function Di(i,s){1&i&&e._UZ(0,"app-loading")}const ki=[{path:"",component:ne},{path:"settle/:sessionId",component:(()=>{class i{constructor(t,n,l,r,_,T,k,M){this.fb=t,this.activeRoute=n,this._registerSettlementService=l,this._headerService=r,this._collectService=_,this._commonService=T,this._modalService=k,this._sharedService=M,this.selected=1,this.pageNo=1,this.sort=1,this.searchText="",this.settlementNotes="",this.successMessage="",this.differenceAmount=null,this.errorMessage="",this.cashDepositTypeId=0,this.depositAttachmentFiles=[]}ngOnInit(){this._headerService.setTitle("Settled Sessions"),this.initCashForm(),this.getRegisterDetails(),this.activeRoute.params.subscribe(t=>{this.sessionId=t.sessionId,this.getSessionDetailsSettlements(),this.getSessionCheques(),this.getSessionCardsPayments()}),this.getPermissions()}getRegisterDetails(){return this._collectService.GetRegisterDetails(this._sharedService.getRegister.registerObj?.id).subscribe(t=>{t&&(this.cashDepositTypeId=t?.data.cashDepositTypeId,8002==this.cashDepositTypeId&&(this.selected=3))})}getPermissions(){this.canManageAndView=this._sharedService.getPermissions.find(t=>25==t.permissionCatId).permissionSubCategories.find(t=>61==t.permissionSubCatId).permissionItems.find(t=>143==t.permissionItemId).selected,localStorage.setItem("cmav",this.canManageAndView.toString())}initCashForm(){this.cashForm=this.fb.group({cashArray:this.fb.array([])})}get cashArray(){return this.cashForm.get("cashArray")}openConfirmModal(t){this._modalService.open(t,{centered:!0}).result.then(l=>{"yes"===l&&this.handleSettleRegister()},l=>{})}handleSettleRegister(){let t;if(this.cashForm.valid||8002===this.cashDepositTypeId){if(t={registerSessionId:this.sessionId,settlementNotes:this.settlementNotes},8002!==this.cashDepositTypeId){let n=this.cashForm.getRawValue().cashArray.map(l=>({currencyID:l.currencyId,actualAmount:this.settlementDetails?.status==f.qb.PartiallySettled?0:l.actualAmount,differenceAmount:l.difference||"0.000",closingRegisteredAmount:l.registerdAmount}));t={...t,registerSessionSettlementAmounts:n}}this._registerSettlementService.settleRegister(t).subscribe(n=>{n.isSuccess&&(this._modalService.open(this.successModal,{centered:!0}),setTimeout(()=>{this._modalService.dismissAll(),this._commonService.NavigateToRoute("/register-settlements")},4e3))},n=>{this.errorMessage=n.error.errors[0]?.ErrorMessageEn,setTimeout(()=>{this.errorMessage=""},5e3)})}else this.cashForm.markAllAsTouched()}viewDepositAttachment(t){this.depositAttachmentFiles=this.settlementDetails?.cashAtClosing[t].depositAttachmentFiles,this._modalService.open(this.depositedAttachment,{size:"md"})}viewFile(t){this._modalService.open(w.W,{size:"xl"}).componentInstance.file=t}getFileName(t){return t?.split("/").pop()}getSessionDetailsSettlements(){this._registerSettlementService.getSessionDetailSettlement(this.sessionId).subscribe(t=>{this.settlementDetails=t.data,this.settlementNotes=this.settlementDetails?.settlementNotes,this.settlementDetails?.cashAtClosing.forEach(n=>{let l;l=this.settlementDetails?.status==f.qb.PartiallySettled?{value:n?.actualAmount.toFixed(3),disabled:!0}:"";const r=+n?.registerdAmount-+n.refundedAmount,_=r-+n.differenceAmount;let T=this.fb.group({registerdAmount:[{value:r.toFixed(3),disabled:!0}],differenceAmount:[{value:_.toFixed(3),disabled:!0}],debositedAmount:[n.debositedAmount],refundedAmount:[n.refundedAmount],actualAmount:[l,[a.kI.required,a.kI.min(0)]],difference:[""],differenceViewOnly:[""],currency:[n.currency[0].lookupName],currencyId:[n.currencyID],isDifferencePositiveOrZero:[0]});this.cashArray.push(T)})})}getSessionCheques(){this._registerSettlementService.getSessionCheques(this.sessionId,this.pageNo,this.searchText,this.sort).subscribe(t=>{this.sessionCheques={...t},console.log(this.sessionCheques),0==this.sessionCheques.data.length&&(this.actionOnCheque=!0)}),console.log(this.pageNo)}getSessionCardsPayments(){this._registerSettlementService.getSessionCardsPayments(this.sessionId,this.pageNo,this.searchText,this.sort).subscribe(t=>{this.sessionCardsPayments={...t},0==this.sessionCardsPayments.cards.length&&(this.actionOnCards=!0)})}handleKeyPress(t){this._commonService.numberOnly(t)}actualAmountChange(t,n,l){let r=this.cashArray.at(l);if(!n)return void r.controls.difference.setValue("");r.controls.difference.setValue((+t-+n).toFixed(3));let _=Math.abs(+(+t-+n).toFixed(3));r.controls.differenceViewOnly.setValue(_),r.controls.isDifferencePositiveOrZero.setValue(n==t?0:n>=t)}removeMinusFromNegativeValue(t){return Math.abs(t)}chooseTab(t){this.searchText="",this.pageNo=1,this.selected=t,2==t?this.getSessionCheques():3==t&&this.getSessionCardsPayments()}handleLoadData(t){this.actionOnCheque=t?.action,this.pageNo=t.page,this.sort=t.sort,this.searchText=t.chequeNumber,this.getSessionCheques()}handleCardsLoad(t){this.actionOnCards=t?.action,this.pageNo=t?.page,this.sort=t?.sort,this.searchText=t?.customer||"",this.getSessionCardsPayments()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.qu),e.Y36(p.gz),e.Y36(c.D),e.Y36(g.r),e.Y36(U.k),e.Y36(x.v),e.Y36(b.FF),e.Y36(N.F))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-settel"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ei,5),e.Gf(ti,5)),2&t){let l;e.iGM(l=e.CRH())&&(n.successModal=l.first),e.iGM(l=e.CRH())&&(n.depositedAttachment=l.first)}},decls:15,vars:4,consts:[[1,"card-page"],[1,"row"],[1,"col-md-12"],["class","card-collect card-with-details",4,"ngIf","ngIfElse"],[1,"heading-text","mb-3"],["class","row",4,"ngIf","ngIfElse"],["successModal",""],["depositedAttachment",""],["confirmModal",""],["loadingData",""],[1,"card-collect","card-with-details"],[1,"d-flex","align-items-center","justify-content-between"],[1,"card-inner-heading"],[1,"d-flex","flex-column"],[1,"m-0"],[1,"d-flex","mt-4","justify-content-between","flex-wrap","gap-3"],[1,"dark-gray"],[1,"light-gray"],[1,"tab-nav","d-flex","flex-wrap"],["class","btn",3,"active","click",4,"ngIf"],[1,"btn",3,"click"],[1,"d-flex","gap-3","align-items-center"],[1,"imag"],["src","assets/images/card.png","alt",""],[1,"info"],["src","assets/images/bt.svg","alt",""],["src","assets/images/bp.svg","alt",""],[1,"tab-content"],[1,"tab-item",3,"hidden"],[1,"card-collect","py-2"],[1,"col-sm-4"],[1,"total-card"],[1,"total"],[1,"card-collect"],[1,"top-details"],[3,"formGroup"],["formArrayName","cashArray"],["class","mb-5",4,"ngFor","ngForOf"],["class","tab-item",4,"ngIf"],[1,"col-md-12","mt-3"],[1,"col-md-8"],[1,"form-group","mb-3"],["disabled","","rows","4","minlength","200","maxlength","200",1,"form-control",3,"value"],["rows","4","maxlength","200",1,"form-control",3,"ngModel","ngModelChange"],["class","success-message-alert",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"btns-group","m-0","my-1"],["routerLink","/register-settlements",1,"btn","btn-cancel"],["type","button","class","btn btn-save",3,"disabled","click",4,"ngIf"],["src","assets/images/wallet.png","alt",""],["src","assets/images/cheque.png","alt",""],[1,"mb-5"],[3,"formGroupName"],[1,"col-sm-12"],[1,"curncy"],[1,"row","justify-content-center"],[1,"col-12","col-md-10","col-lg-8"],[1,"col-sm-6"],[1,"actual-amount"],["type","number","formControlName","registerdAmount",1,"form-control"],[1,"difference-amount",3,"ngClass"],["type","number","formControlName","actualAmount","appDecimalNumber","",1,"form-control",3,"input"],[4,"ngIf"],[1,"col-sm-6","my-3"],[1,"fw-500","m-0","mb-3"],["class","blue-clr cursor-pointer m-0 d-inlne-block",3,"click",4,"ngIf"],["class","d-inlne-block primary-clr",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"blue-clr","cursor-pointer","m-0","d-inlne-block",3,"click"],[1,"d-inlne-block","primary-clr"],[1,"tab-item"],[3,"response","loadData",4,"ngIf"],[3,"response","loadData"],[3,"response","loadCardData",4,"ngIf"],[3,"response","loadCardData"],[3,"isSettle"],[1,"success-message-alert"],[1,"alert","alert-danger"],["type","button",1,"btn","btn-save",3,"disabled","click"],[1,"modal-body"],[1,"d-flex","flex-column","align-items-center","gap-2","text-center","p-3"],[1,"green-clr","fa-regular","fa-circle-check","fa-2x"],[1,"btns-group","m-0","d-block"],["type","button",1,"btn","btn-save",3,"click"],[1,"p-3"],["class","file-item mb-2 d-flex justify-content-between align-items-center py-2 px-3",4,"ngFor","ngForOf"],[1,"btns-group","m-0","gap-2"],[1,"file-item","mb-2","d-flex","justify-content-between","align-items-center","py-2","px-3"],[1,"fw-600","green-clr"],[1,"d-flex","gap-2","align-items-center"],["height","20","src","assets/images/eye.png",1,"cursor-pointer",3,"click"],[1,"m-0","mb-2"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,ni,37,9,"div",3),e.qZA(),e.TgZ(4,"h3",4),e._uU(5,"Register Amounts"),e.qZA(),e.YNc(6,Zi,85,37,"div",5),e.qZA()(),e.YNc(7,vi,10,0,"ng-template",null,6,e.W1O),e.YNc(9,Ai,8,1,"ng-template",null,7,e.W1O),e.YNc(11,qi,12,0,"ng-template",null,8,e.W1O),e.YNc(13,Di,1,0,"ng-template",null,9,e.W1O)),2&t){const l=e.MAs(14);e.xp6(3),e.Q6J("ngIf",null==n.settlementDetails?null:n.settlementDetails.register)("ngIfElse",l),e.xp6(3),e.Q6J("ngIf",null==n.settlementDetails?null:n.settlementDetails.registerAmounts)("ngIfElse",l)}},dependencies:[o.mk,o.sg,o.O5,p.rH,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.nD,a.sg,a.u,a.x0,a.CE,a.On,m.N,Xn.Q,P,I,J,B,o.JJ,o.uU],styles:[".tab-nav[_ngcontent-%COMP%]{display:flex;gap:30px;margin-bottom:30px}.tab-nav[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{border:1px solid #dc3545;box-shadow:0 15px 25px #0000001a}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:1px solid #ced5dd;border-radius:10px;padding:15px 20px}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .imag[_ngcontent-%COMP%]{width:55px;height:55px;background:#f8f8f8;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:10px}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .imag[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{text-align:start}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:500;padding:3px}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0;padding:3px}.file-item[_ngcontent-%COMP%]{border:1px solid #2eb93e;border-radius:5px}.actual-amount[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:130px}.error[_ngcontent-%COMP%]{color:#f44336;font-size:14px;padding:5px;display:block;font-weight:500}.nosession[_ngcontent-%COMP%]{text-align:center;padding:60px 30px}.difference-amount[_ngcontent-%COMP%]{background-color:#e9ecef;font-size:14px;font-weight:600;display:block;border-radius:9px;display:flex;align-items:center;height:38px;min-width:130px;padding:0 10px}"]}),i})()},{path:"session/:sessionId",component:Wn},{path:"register/:registerId",component:fe}];let Si=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.Bz.forChild(ki),p.Bz]}),i})();var yi=d(21515);let Ni=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[o.ez,Si,yi.m]}),i})()},87192:(D,v,d)=>{d.d(v,{z:()=>e});var o=d(94650),p=d(42953),h=d(36895);function f(c,x){1&c&&(o.ynx(0),o.TgZ(1,"h6",11),o._uU(2,"Are you sure?"),o.qZA(),o.BQk())}function u(c,x){if(1&c&&o._UZ(0,"p",12),2&c){const g=o.oxw();o.Q6J("innerHTML",null==g.data?null:g.data.body,o.oJD)}}let e=(()=>{class c{constructor(g){this._activeModel=g,this.eventData=new o.vpe}confirm(g){this.eventData.emit(g),this._activeModel.dismiss()}}return c.\u0275fac=function(g){return new(g||c)(o.Y36(p.Kz))},c.\u0275cmp=o.Xpm({type:c,selectors:[["app-confirm-modal"]],inputs:{data:"data"},outputs:{eventData:"eventData"},decls:15,vars:5,consts:[[1,"row"],[1,"col-12"],[1,"modal-header","border-0"],["ngbAutoFocus","",1,"font-20","fw-600","mb-0"],[1,"modal-body"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"modal-footer","border-0"],[1,"btns-group","gap-2","mx-0"],["type","button",1,"btn","btn-save",3,"click"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"mb-0","fw-500"],[1,"mb-0","fs-16","fw-500",3,"innerHTML"]],template:function(g,a){if(1&g&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),o._uU(4),o.qZA()(),o.TgZ(5,"div",4),o.YNc(6,f,3,0,"ng-container",5),o.YNc(7,u,1,1,"ng-template",null,6,o.W1O),o.qZA(),o.TgZ(9,"div",7)(10,"div",8)(11,"button",9),o.NdJ("click",function(){return a.confirm(!0)}),o._uU(12),o.qZA(),o.TgZ(13,"button",10),o.NdJ("click",function(){return a.confirm(!1)}),o._uU(14),o.qZA()()()()()),2&g){const b=o.MAs(8);o.xp6(4),o.Oqu((null==a.data?null:a.data.headingText)||"Confirm"),o.xp6(2),o.Q6J("ngIf",!(null!=a.data&&a.data.body))("ngIfElse",b),o.xp6(6),o.Oqu((null==a.data?null:a.data.confirmText)||"Yes"),o.xp6(2),o.Oqu((null==a.data?null:a.data.cancelText)||"No")}},dependencies:[h.O5]}),c})()},59442:(D,v,d)=>{d.d(v,{w:()=>p});var o=d(94650);let p=(()=>{class h{}return h.\u0275fac=function(u){return new(u||h)},h.\u0275cmp=o.Xpm({type:h,selectors:[["app-not-found"]],decls:3,vars:0,consts:[[1,"not-found"]],template:function(u,e){1&u&&(o.TgZ(0,"div",0)(1,"p"),o._uU(2," No data to display "),o.qZA()())},styles:[".not-found[_ngcontent-%COMP%]{text-align:center;padding:10%}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c9c9d1;font-size:16px;font-weight:600}"]}),h})()},67761:(D,v,d)=>{d.d(v,{g:()=>f});var o=d(71891),p=d(94650),h=d(42953);let f=(()=>{class u{constructor(c){this._modalService=c}ngOnInit(){}fileAction(c){"view"==c&&this.openFileModal()}openFileModal(){this._modalService.open(o.W).componentInstance.file=this.file}getFileType(c){return c?.split("/").pop()}}return u.\u0275fac=function(c){return new(c||u)(p.Y36(h.FF))},u.\u0275cmp=p.Xpm({type:u,selectors:[["view-file"]],inputs:{file:"file",data:"data"},decls:8,vars:1,consts:[[1,"file-item"],[1,"d-flex","gap-3","align-items-center","justify-content-between"],[1,"m-0","green-clr"],[1,"d-flex","gap-2","align-items-center"],[1,"fas","fa-eye","cursor-pointer","gray-500",3,"click"],["target","_blank",3,"href"],[1,"fas","fa-download","green-clr"]],template:function(c,x){1&c&&(p.TgZ(0,"div",0)(1,"div",1)(2,"label",2),p._uU(3,"Attachment"),p.qZA(),p.TgZ(4,"div",3)(5,"i",4),p.NdJ("click",function(){return x.fileAction("view")}),p.qZA(),p.TgZ(6,"a",5),p._UZ(7,"i",6),p.qZA()()()()),2&c&&(p.xp6(6),p.s9C("href",x.file,p.LSH))},styles:[".file-item[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid var(--green);background:white;max-width:100%}.file-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:1;color:green;font-weight:600}"]}),u})()},80145:(D,v,d)=>{d.d(v,{O:()=>h,Q:()=>p});var o=d(94650);let p=(()=>{class f{constructor(e){this.el=e}onKeyDown(e){[8,9,13,27,46].indexOf(e.keyCode)}onKeyup(e){this.validateFields(e)}blockPaste(e){this.validateFields(e)}validateFields(e){this.el.nativeElement.value=this.el.nativeElement.value.replace(/[^A-Za-z\u0621-\u064a ]/g,""),e.preventDefault()}}return f.\u0275fac=function(e){return new(e||f)(o.Y36(o.SBq))},f.\u0275dir=o.lG2({type:f,selectors:[["","OnlyCharacter",""]],hostBindings:function(e,c){1&e&&o.NdJ("keydown",function(g){return c.onKeyDown(g)})("keyup",function(g){return c.onKeyup(g)})("paste",function(g){return c.blockPaste(g)})},inputs:{validationFieldsType:"validationFieldsType"}}),f})();function h(f){return f.replace(/[^A-Za-z\u0621-\u064a ]/g,"")}},55134:(D,v,d)=>{d.d(v,{Q:()=>p});var o=d(94650);let p=(()=>{class h{constructor(u){this.el=u,this.regex=new RegExp(/^\d*\.?\d{0,50}$/g),this.specialKeys=["Backspace","Tab","End","Home","ArrowLeft","ArrowRight","Del","Delete"]}onKeyDown(u){if(-1!==this.specialKeys.indexOf(u.key))return;const c=this.el.nativeElement.value.concat(u.key);c&&!String(c).match(this.regex)&&u.preventDefault()}setInputFocusOut(){let u=+this.el.nativeElement.value;u>0&&(this.el.nativeElement.value=u.toFixed(3))}}return h.\u0275fac=function(u){return new(u||h)(o.Y36(o.SBq))},h.\u0275dir=o.lG2({type:h,selectors:[["","appDecimalNumber",""]],hostBindings:function(u,e){1&u&&o.NdJ("keydown",function(x){return e.onKeyDown(x)})("blur",function(){return e.setInputFocusOut()})}}),h})()},96603:(D,v,d)=>{d.d(v,{z:()=>h});var o=d(94650),p=d(11481);let h=(()=>{class f{constructor(e){this.sanitizer=e,this.files=new o.vpe,this.enter=new o.vpe,this.leave=new o.vpe,this.background="",this.border=""}onDragEnter(e){e.preventDefault(),e.stopPropagation(),this.enter.emit()}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.background="#d9e4f0",this.border="2px dashed #226BC0"}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.leave.emit(),this.background="",this.border=""}onDrop(e){e.preventDefault(),e.stopPropagation(),this.background="",this.border="";let c=[];for(let x=0;x<e.dataTransfer.files.length;x++){const g=e.dataTransfer.files[x],a=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(g));c.push({file:g,url:a})}c.length>0&&this.files.emit(c)}}return f.\u0275fac=function(e){return new(e||f)(o.Y36(p.H7))},f.\u0275dir=o.lG2({type:f,selectors:[["","appImageDrag",""]],hostVars:4,hostBindings:function(e,c){1&e&&o.NdJ("dragenter",function(g){return c.onDragEnter(g)})("dragover",function(g){return c.onDragOver(g)})("dragleave",function(g){return c.onDragLeave(g)})("drop",function(g){return c.onDrop(g)}),2&e&&o.Udp("background",c.background)("border",c.border)},outputs:{files:"files",enter:"enter",leave:"leave"}}),f})()},82757:(D,v,d)=>{d.d(v,{N:()=>p});var o=d(94650);let p=(()=>{class h{onInputChange(u){return!!new RegExp("[0-9]").test(u.key)||(u.preventDefault(),!1)}}return h.\u0275fac=function(u){return new(u||h)},h.\u0275dir=o.lG2({type:h,selectors:[["input","numbersOnly",""]],hostBindings:function(u,e){1&u&&o.NdJ("keypress",function(x){return e.onInputChange(x)})}}),h})()},75706:(D,v,d)=>{d.d(v,{Rr:()=>h,XQ:()=>p,qb:()=>o});var o=(()=>{return(u=o||(o={}))[u.Opened=16001]="Opened",u[u.Unclosed=16002]="Unclosed",u[u.Waiting=16003]="Waiting",u[u.Closed=16004]="Closed",u[u.Partial=16005]="Partial",u[u.Settled=16006]="Settled",u[u.OnHold=16007]="OnHold",u[u.RegisterFullDeposit=16008]="RegisterFullDeposit",u[u.PartiallySettled=16009]="PartiallySettled",u[u.Active=2001]="Active",o;var u})(),p=(()=>{return(u=p||(p={}))[u.ServicesSalesOrders=7001]="ServicesSalesOrders",u[u.DirectPaymentSalesOrders=7002]="DirectPaymentSalesOrders",u[u.SparePartsSalesOrders=7003]="SparePartsSalesOrders",u[u.OtherRevenues=7004]="OtherRevenues",u[u.CustomerPayments=7005]="CustomerPayments",u[u.BankUndertakingSalesOrders=7006]="BankUndertakingSalesOrders",u[u.InHouseFinancingSalesOrders=7007]="InHouseFinancingSalesOrders",u[u.PromissoryNotes=7008]="PromissoryNotes",p;var u})(),h=(()=>{return(u=h||(h={}))[u.Refunded=33004]="Refunded",h;var u})()}}]);