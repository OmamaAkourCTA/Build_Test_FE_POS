"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[5438],{5438:(q,g,a)=>{a.r(g),a.d(g,{CreatePassModule:()=>k});var m=a(36895),l=a(39485),p=a(53396);class h{static strong(s){let t=/\d/.test(s.value),n=/[A-Z]/.test(s.value),r=/[a-z]/.test(s.value);return t&&n&&r?null:{strong:!0}}}var e=a(94650),d=a(42953);let u=(()=>{class o{constructor(t,n,r){this.activeModal=t,this.modalService=n,this.router=r}ngOnInit(){console.log(this.name),setTimeout(()=>{this.modalService.dismissAll(),this.router.navigateByUrl("/login")},5e3)}login(){this.modalService.dismissAll(),this.router.navigateByUrl("/login")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.Kz),e.Y36(d.FF),e.Y36(l.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-confirm-create"]],inputs:{name:"name"},decls:10,vars:0,consts:[[1,"modal-body"],[1,"message"],[1,"fa-regular","fa-circle-check"],[1,"btn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"h3"),e._uU(4," Your passwod successfully created,"),e._UZ(5,"br")(6,"br"),e._uU(7," you can login to your account through markazia system now..."),e.qZA(),e.TgZ(8,"button",3),e.NdJ("click",function(){return n.login()}),e._uU(9," Login "),e.qZA()()())},styles:[".message[_ngcontent-%COMP%]{text-align:center;padding:30px 10px}.message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:90px;color:#75b878;margin-bottom:30px}.message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:23px;line-height:38px}.message[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:white;padding:12px 41px;border-radius:30px;border:1px solid #ccc;color:#000;font-weight:600;margin:30px}"]}),o})();var C=a(80529),_=a(69082);let v=(()=>{class o{constructor(t,n){this.http=t,this.sharedService=n,this.apiUrl=this.sharedService.getUrl}CreatePassword(t){return this.http.post(this.apiUrl+"User/CreatePassword",t)}GetUserDetails(t){return this.http.get(this.apiUrl+`User/GetUSERDetails?userId=${t}`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(C.eN),e.LFG(_.F))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var i=a(24006),f=a(98563);function P(o,s){1&o&&(e.TgZ(0,"span",22),e._uU(1," This element is required, please fill."),e.qZA())}function b(o,s){1&o&&(e.TgZ(0,"span")(1,"span",22),e._uU(2,"The digits are less than 10 for (mobile) and the digits are more than 8 "),e.qZA()())}function w(o,s){if(1&o&&(e.TgZ(0,"div",20),e.YNc(1,P,2,0,"span",15),e.YNc(2,b,3,0,"span",21),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.Mobile.errors.required),e.xp6(1),e.Q6J("ngIf",t.formValid.Mobile.errors.minlength)}}function x(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"fa-icon",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.showPassword())}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("icon",t.faEye)}}function M(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"fa-icon",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.showPassword())}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("icon",t.faEyeSlash)}}function Z(o,s){1&o&&(e.TgZ(0,"span",22),e._uU(1," This element is required, please fill."),e.qZA())}function I(o,s){1&o&&(e.TgZ(0,"div")(1,"span",22),e._uU(2,"Password cannot be less than 8 characters "),e.qZA()())}function T(o,s){if(1&o&&(e.TgZ(0,"div",20),e.YNc(1,Z,2,0,"span",15),e.YNc(2,I,3,0,"div",21),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.Password.errors.required),e.xp6(1),e.Q6J("ngIf",t.formValid.Password.errors.minlength)}}function O(o,s){1&o&&(e.TgZ(0,"span",22),e._uU(1," Password should contain a minimum combination of 1 uppercase letter, 1 lowercase letter, 1 number, and 1 symbol"),e.qZA())}function y(o,s){if(1&o&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}const A=function(){return["jo","sa"]},U=function(o){return{preferredCountries:o}},S=[{path:"",component:(()=>{class o{constructor(t,n,r,c){this.creatPassService=t,this.route=n,this.fb=r,this.modalService=c,this.IsshowPassword=!1,this.faEye=p.Mdf,this.faEyeSlash=p.Aq,this.submitted=!1}ngOnInit(){this.remveDataIsExist(),this.getForm(),this.route.queryParams.subscribe(t=>{console.log(t),this.userId=t.userId,this.mobile=t.mobile,console.log(this.userId)}),setTimeout(()=>{this.formActive.get("Mobile")?.patchValue(""),this.formActive.get("Mobile")?.patchValue(this.mobile),this.formActive.get("Password")?.patchValue(""),this.formActive.get("UserId")?.patchValue(this.userId)},1e3)}getForm(){this.formActive=this.fb.group({UserId:0,Mobile:[""],Password:["",h.strong],PasswordConfirm:[""]})}get formValid(){return this.formActive.controls}CreatePassword(){if(this.submitted=!0,this.formActive.invalid)return window.scroll(0,0);const t=new FormData;return t.append("UserId",this.userId),t.append("Mobile",this.formActive.get("Mobile")?.value),t.append("Password",this.formActive.get("Password")?.value),t.append("PasswordConfirm",this.formActive.get("Password")?.value),console.log(t),this.creatPassService.CreatePassword(t).subscribe(r=>{1==r.isSuccess?(this.modalService.open(u).componentInstance.name="edit",console.log(r)):this.errorMessage=r.Errors||r.errors})}GetUserDetails(){this.creatPassService.GetUserDetails(this.userId).subscribe(t=>{if(1==t.isSuccess){const n=t.data;this.formActive.get("Mobile").patchValue(n.mobile)}})}showPassword(){this.IsshowPassword=0==this.IsshowPassword}numberOnly(t){const n=t.which?t.which:t.keyCode;return!(n>31&&(n<48||n>57))}openModal(){this.modalService.open(u).componentInstance.name="edit"}remveDataIsExist(){localStorage.removeItem("fullName"),localStorage.removeItem("role"),localStorage.removeItem("userid"),localStorage.removeItem("branch"),localStorage.removeItem("city"),localStorage.removeItem("register"),localStorage.removeItem("token"),localStorage.removeItem("permissions"),sessionStorage.removeItem("token"),sessionStorage.removeItem("id")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v),e.Y36(l.gz),e.Y36(i.qu),e.Y36(d.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-pass"]],decls:38,vars:13,consts:[[1,"page-login"],[1,"container-fluid"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"card-login"],["src","assets/images/markazia.png","alt","logo"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-group"],["src","assets/images/user.png","alt","",1,"uimg"],["type","text","autocomplete","off","formControlName","Mobile","placeholder","","ng2TelInput","","min","8","max","10","minlength","8","maxlength","10","required","",1,"form-control",3,"ng2TelInputOptions","keypress"],["class","ng-dirty",4,"ngIf"],["autocomplete","off","formControlName","Password","required","","min","8","max","16","minlength","8","maxlength","16",1,"form-control",3,"type"],[1,"passicon"],["class","custom-search-botton",3,"icon","click",4,"ngIf"],[3,"hidden"],["class","error",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["type","submit",1,"btn","btn-login"],[1,"bg-image"],["src","assets/images/loginLogo.png","alt",""],[1,"ng-dirty"],[4,"ngIf"],[1,"error"],[1,"custom-search-botton",3,"icon","click"],["role","alert",1,"alert","alert-danger"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"img",5),e.TgZ(6,"div")(7,"p"),e._uU(8,"Please fill your password to finish setting up "),e._UZ(9,"br"),e._uU(10," your Markazia account and accessing your account. "),e.qZA()(),e.TgZ(11,"form",6),e.NdJ("ngSubmit",function(){return n.CreatePassword()}),e.TgZ(12,"div",7)(13,"label"),e._uU(14,"Phone Number"),e.qZA(),e.TgZ(15,"div"),e._UZ(16,"img",8),e.TgZ(17,"input",9),e.NdJ("keypress",function(c){return n.numberOnly(c)}),e.qZA(),e.YNc(18,w,3,2,"div",10),e.qZA()(),e.TgZ(19,"div",7)(20,"label"),e._uU(21,"Password"),e.qZA(),e.TgZ(22,"div"),e._UZ(23,"input",11),e.TgZ(24,"div",12),e.YNc(25,x,1,1,"fa-icon",13),e.YNc(26,M,1,1,"fa-icon",13),e.qZA()(),e.YNc(27,T,3,2,"div",10),e.TgZ(28,"div",14),e.YNc(29,O,2,0,"span",15),e.qZA(),e._UZ(30,"div"),e.qZA(),e.YNc(31,y,2,1,"div",16),e.TgZ(32,"div")(33,"button",17),e._uU(34,"Activate Account"),e.qZA()()()()(),e.TgZ(35,"div",3)(36,"div",18),e._UZ(37,"img",19),e.qZA()()()()()),2&t&&(e.xp6(11),e.Q6J("formGroup",n.formActive),e.xp6(6),e.Q6J("ng2TelInputOptions",e.VKq(11,U,e.DdM(10,A))),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.formValid.Mobile.invalid||n.formValid.Mobile.invalid&&(n.formValid.Mobile.dirty||n.formValid.Mobile.touched)),e.xp6(5),e.Q6J("type",n.IsshowPassword?"text":"password"),e.xp6(2),e.Q6J("ngIf",!n.IsshowPassword),e.xp6(1),e.Q6J("ngIf",n.IsshowPassword),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.formValid.Password.invalid||n.formValid.Password.invalid&&(n.formValid.Password.dirty||n.formValid.Password.touched)),e.xp6(1),e.Q6J("hidden",n.formActive.get("Password").value.length<5),e.xp6(1),e.Q6J("ngIf",n.formActive.get("Password").hasError("strong")),e.xp6(2),e.Q6J("ngIf",n.errorMessage))},dependencies:[m.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.wO,i.nD,i.sg,i.u,f._],styles:[".bg-image[_ngcontent-%COMP%]{height:100vh}.bg-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100vh}.page-login[_ngcontent-%COMP%]{height:100vh}.card-login[_ngcontent-%COMP%]{border:1px solid #fff;padding:30px;margin:16% auto 5%;max-width:420px}.card-login[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;margin:0 auto}.card-login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:20px;color:#667085;padding:30px 0;margin:0}.card-login[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:30px;position:relative}.card-login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:20px;color:#1b212d;margin-bottom:10px}.card-login[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:14px;height:46px;padding-left:50px}.card-login[_ngcontent-%COMP%]   img.uimg[_ngcontent-%COMP%]{width:25px;top:42px;margin-left:10px;position:absolute}.card-login[_ngcontent-%COMP%]   .passicon[_ngcontent-%COMP%]{color:#d1d1d1;position:absolute;right:25px;top:44px}.card-login[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#f44336;font-size:14px;padding:5px;display:block;font-weight:500}.card-login[_ngcontent-%COMP%]   .rememberme[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.card-login[_ngcontent-%COMP%]   .rememberme[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:#dc3545;border-color:#dc3545}.card-login[_ngcontent-%COMP%]   .rememberme[_ngcontent-%COMP%]   .forgetpass[_ngcontent-%COMP%]{color:#dc3545;text-decoration:none;font-size:14px;font-weight:500}.card-login[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]{background:#dc3545;box-shadow:0 10px 20px #0000001a;border-radius:8px;width:100%;color:#fff;font-size:16px;font-weight:600;padding:10px}@media (max-width: 768px){.card-login[_ngcontent-%COMP%]{padding:30px;margin:5% auto}}.error[_ngcontent-%COMP%]{font-size:14px;color:#f44336;font-weight:500;padding:7px;display:block}"]}),o})()}];let J=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.Bz.forChild(S),l.Bz]}),o})(),k=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,J,i.u5,i.UX,f.g]}),o})()}}]);