"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[793],{30793:(Z,_,l)=>{l.r(_),l.d(_,{ProfileModule:()=>B});var t=l(36895),v=l(39485),r=l(24006),m=l(86260),e=l(94650),u=l(21864),s=l(69082),x=l(36690),h=l(42953),y=l(98563),C=l(28424),T=l(82757),c=l(80145);function f(o,a){1&o&&e._UZ(0,"img",33)}function d(o,a){1&o&&e._UZ(0,"img",34)}function p(o,a){1&o&&(e.TgZ(0,"span",36),e._uU(1,"Input is required"),e.qZA())}function b(o,a){if(1&o&&(e.ynx(0),e.YNc(1,p,2,0,"span",35),e.BQk()),2&o){const n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==n.formValid.fullName?null:n.formValid.fullName.errors.required)}}function N(o,a){if(1&o&&(e.ynx(0),e.YNc(1,b,2,1,"ng-container",14),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==n.formValid.fullName?null:n.formValid.fullName.invalid)&&(null==n.formValid.fullName?null:n.formValid.fullName.touched)||(null==n.formValid.fullName?null:n.formValid.fullName.dirty))}}function M(o,a){1&o&&e._UZ(0,"img",33)}function P(o,a){1&o&&e._UZ(0,"img",34)}function U(o,a){1&o&&(e.TgZ(0,"span",36),e._uU(1,"Phone is required"),e.qZA())}function A(o,a){1&o&&(e.TgZ(0,"span",36),e._uU(1,"Input required minimum 8 digits"),e.qZA())}function I(o,a){1&o&&(e.TgZ(0,"span",36),e._uU(1,"Input allows maximum 10 digits"),e.qZA())}function O(o,a){if(1&o&&(e.ynx(0),e.YNc(1,U,2,0,"span",35),e.YNc(2,A,2,0,"span",35),e.YNc(3,I,2,0,"span",35),e.BQk()),2&o){const n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==n.formValid.mobile?null:n.formValid.mobile.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.formValid.mobile?null:n.formValid.mobile.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==n.formValid.mobile?null:n.formValid.mobile.errors.maxlength)}}function k(o,a){if(1&o&&(e.ynx(0),e.YNc(1,O,4,3,"ng-container",14),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==n.formValid.mobile?null:n.formValid.mobile.invalid)&&(null==n.formValid.mobile?null:n.formValid.mobile.touched)||(null==n.formValid.mobile?null:n.formValid.mobile.dirty))}}function D(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(n);const g=e.oxw(2);return e.KtG(g.EditUser())}),e._uU(1," Update Profile "),e.qZA()}}function E(o,a){1&o&&(e.TgZ(0,"button",38),e._UZ(1,"i",39),e.qZA())}function J(o,a){if(1&o&&(e.TgZ(0,"div",2)(1,"div",40)(2,"div",41)(3,"div",42),e._UZ(4,"input",43),e.TgZ(5,"label",44),e._uU(6),e.qZA()()()(),e.TgZ(7,"div",40)(8,"div",45)(9,"div",46)(10,"p"),e._uU(11," From "),e.qZA(),e._UZ(12,"input",47),e.qZA()()(),e.TgZ(13,"div",40)(14,"div",45)(15,"div",46)(16,"p"),e._uU(17," To "),e.qZA(),e._UZ(18,"input",48),e.qZA()()()()),2&o){const n=a.$implicit;e.xp6(4),e.Q6J("checked",n.selected),e.xp6(2),e.hij(" ",null==n.day[0]?null:n.day[0].lookupName," "),e.xp6(6),e.Q6J("value",n.fromTime),e.xp6(6),e.Q6J("value",n.toTime)}}const S=function(){return["jo","sa"]},Q=function(o){return{preferredCountries:o}};function F(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"div",2)(1,"form",5)(2,"div",3)(3,"div",6)(4,"h3"),e._uU(5," Account Information"),e.qZA()(),e.TgZ(6,"div",7)(7,"div",2)(8,"div",8)(9,"div",9)(10,"label"),e._uU(11,"Full Name *"),e.qZA(),e._UZ(12,"input",10),e.TgZ(13,"button",11),e.NdJ("click",function(){e.CHM(n);const g=e.oxw();return e.KtG(g.editfullname())}),e.YNc(14,f,1,0,"img",12),e.YNc(15,d,1,0,"img",13),e.qZA(),e.YNc(16,N,2,1,"ng-container",14),e.qZA()(),e.TgZ(17,"div",8)(18,"div",9)(19,"label"),e._uU(20,"Email*"),e.qZA(),e._UZ(21,"input",15),e.qZA()(),e.TgZ(22,"div",8)(23,"div",16)(24,"label"),e._uU(25,"Phone Number"),e.qZA(),e.TgZ(26,"div"),e._UZ(27,"input",17),e.qZA(),e.TgZ(28,"button",11),e.NdJ("click",function(){e.CHM(n);const g=e.oxw();return e.KtG(g.editfmobile())}),e.YNc(29,M,1,0,"img",12),e.YNc(30,P,1,0,"img",13),e.qZA(),e.YNc(31,k,2,1,"ng-container",14),e.qZA()(),e.TgZ(32,"div",8)(33,"div",9)(34,"label"),e._uU(35,"Branch Name "),e.qZA(),e._UZ(36,"input",18),e.qZA()(),e.TgZ(37,"div",8)(38,"div",9)(39,"label"),e._uU(40,"Register Name "),e.qZA(),e._UZ(41,"input",18),e.qZA()(),e.TgZ(42,"div",8)(43,"div",9)(44,"label"),e._uU(45,"Register No."),e.qZA(),e._UZ(46,"input",18),e.qZA()()()()(),e.TgZ(47,"div",3)(48,"div",19)(49,"button",20),e.NdJ("click",function(){e.CHM(n);const g=e.oxw();return e.KtG(g.handleCancel())}),e._uU(50,"Cancel"),e.qZA(),e.YNc(51,D,2,0,"button",21),e.YNc(52,E,2,0,"button",22),e.qZA()()(),e.TgZ(53,"div",3)(54,"div",6)(55,"h3"),e._uU(56," Working Hours "),e.qZA()(),e.TgZ(57,"div",7),e.YNc(58,J,19,4,"div",23),e.qZA()(),e.TgZ(59,"div",3)(60,"div",6)(61,"h3"),e._uU(62," Contract "),e.qZA()(),e.TgZ(63,"div",7)(64,"div",2)(65,"div",8)(66,"div",9)(67,"label"),e._uU(68,"Start Date"),e.qZA(),e._UZ(69,"input",24),e.qZA()(),e.TgZ(70,"div",8)(71,"div",9)(72,"label"),e._uU(73,"End Date"),e.qZA(),e._UZ(74,"input",25),e.qZA()()()()(),e.TgZ(75,"div",3)(76,"div",6)(77,"h3"),e._uU(78," Role "),e.qZA()(),e.TgZ(79,"div",7)(80,"div",2)(81,"div",8)(82,"div",9),e._UZ(83,"input",26),e.qZA()(),e.TgZ(84,"div",27)(85,"div",28),e._UZ(86,"input",29),e.TgZ(87,"label",30),e._uU(88," indoor "),e.qZA()(),e.TgZ(89,"div",28),e._UZ(90,"input",31),e.TgZ(91,"label",32),e._uU(92," outdoor "),e.qZA()()()()()()()}if(2&o){const n=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("formGroup",i.formGroup),e.xp6(12),e.Q6J("disabled",i.formGroup.invalid),e.xp6(1),e.Q6J("ngIf",i.isShowFullName),e.xp6(1),e.Q6J("ngIf",!i.isShowFullName),e.xp6(1),e.Q6J("ngIf",null==i.formValid.fullName?null:i.formValid.fullName.errors),e.xp6(5),e.Q6J("value",n.email),e.xp6(6),e.Q6J("ng2TelInputOptions",e.VKq(25,Q,e.DdM(24,S))),e.xp6(1),e.Q6J("disabled",i.formGroup.invalid),e.xp6(1),e.Q6J("ngIf",i.isShowmobile),e.xp6(1),e.Q6J("ngIf",!i.isShowmobile),e.xp6(1),e.Q6J("ngIf",null==i.formValid.mobile?null:i.formValid.mobile.errors),e.xp6(5),e.Q6J("value",null==i.sharedService||null==i.sharedService.getRegister?null:i.sharedService.getRegister.registerObj.registeBranch.branchName),e.xp6(5),e.Q6J("value",null==i.sharedService.getRegister||null==i.sharedService.getRegister.registerObj?null:i.sharedService.getRegister.registerObj.registersName),e.xp6(5),e.Q6J("value",null==i.sharedService.getRegister||null==i.sharedService.getRegister.registerObj?null:i.sharedService.getRegister.registerObj.id),e.xp6(5),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(6),e.Q6J("ngForOf",n.userWorkingHours),e.xp6(11),e.Q6J("value",i._datePipe.transform(n.contractStartDate,"yyyy-MM-dd")),e.xp6(5),e.Q6J("value",i._datePipe.transform(n.contractEndDate,"yyyy-MM-dd")),e.xp6(9),e.Q6J("value",n.role.name),e.xp6(3),e.Q6J("value",n.indoor)("checked",n.indoor),e.xp6(4),e.Q6J("value",n.outdoor)("checked",n.outdoor)}}function w(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}const q=[{path:"",component:(()=>{class o{constructor(n,i,g,V,K,R){this.generalService=n,this.sharedService=i,this.headerService=g,this.fb=V,this.modalService=K,this._datePipe=R,this.submitted=!1,this.isShowFullName=!1,this.isShowmobile=!1}ngOnInit(){this.headerService.setTitle("Profile"),this.getForm(),this.GetUserDetails(),this.formGroup.controls.fullName.disable(),this.formGroup.controls.mobile.disable()}getForm(){this.formGroup=this.fb.group({userId:"",fullName:["",[r.kI.required]],mobile:["",[r.kI.required,r.kI.minLength(8),r.kI.maxLength(10)]]})}get formValid(){return this.formGroup.controls}GetUserDetails(){this.generalService.GetUserDetails(+this.sharedService.getUserId).subscribe(n=>{1==n.isSuccess&&(this.userDetails=n.data,console.log(this.userDetails),this.userDetails&&(this.formGroup.get("userId").patchValue(this.sharedService?.getUserId),this.formGroup.get("fullName").patchValue(this.userDetails.fullName),this.formGroup.get("mobile").patchValue(this.userDetails?.mobile)))})}handleCancel(){this.formGroup.controls.fullName.setValue(this.userDetails.fullName),this.formGroup.controls.mobile.setValue(this.userDetails?.mobile),this.formGroup.controls.fullName.disable(),this.formGroup.controls.mobile.disable()}EditUser(){this.formGroup.invalid||this.generalService.editUser(this.formGroup.value).subscribe(n=>{if(1==n.isSuccess){this.formGroup.controls.fullName.disable(),this.isShowFullName=!1,this.formGroup.controls.mobile.disable(),this.isShowmobile=!1;const i=this.modalService.open(m.i);i.componentInstance.type="success",i.componentInstance.message="Updated successfully",i.componentInstance.routeName="/profile"}},n=>{const i=this.modalService.open(m.i);i.componentInstance.type="error",i.componentInstance.messageError=n?.error.errors})}editfullname(){0==this.isShowFullName?(this.formGroup.controls.fullName.enable(),this.isShowFullName=!0):(this.formGroup.controls.fullName.disable(),this.isShowFullName=!1)}editfmobile(){0==this.isShowmobile?(this.formGroup.controls.mobile.enable(),this.isShowmobile=!0):(this.formGroup.controls.mobile.disable(),this.isShowmobile=!1)}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(u.m),e.Y36(s.F),e.Y36(x.r),e.Y36(r.qu),e.Y36(h.FF),e.Y36(t.uU))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile"]],decls:6,vars:2,consts:[[1,"card-page"],["class","row",4,"ngIf","ngIfElse"],[1,"row"],[1,"col-md-12"],["loading",""],[3,"formGroup"],[1,"page-title"],[1,"card-form","position-relative"],[1,"col-md-4"],[1,"form-group","overflow-hidden","position-relative"],["type","text","placeholder","","formControlName","fullName","OnlyCharacter","",1,"form-control"],["type","button",1,"btn","btnEdit",3,"disabled","click"],["src","assets/images/edit.png","alt","",4,"ngIf"],["src","assets/images/edit5.png","alt","",4,"ngIf"],[4,"ngIf"],["type","text","placeholder","email","disabled","",1,"form-control",3,"value"],[1,"form-group","position-relative"],["type","text","placeholder","","ng2TelInput","","formControlName","mobile","numbersOnly","",1,"form-control",3,"ng2TelInputOptions"],["type","text","disabled","",1,"form-control",3,"value"],[1,"btns-group"],["type","button",1,"btn","btn-cancel",3,"click"],["type","button","class","btn btn-save",3,"click",4,"ngIf"],["type","button","class","btn btn-save btn-load","disabled","",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],["type","date","placeholder","","disabled","",1,"form-control",3,"value"],["type","date","placeholder"," ","disabled","",1,"form-control",3,"value"],["name","fullName","type","text","disabled","",1,"form-control",3,"value"],[1,"col-md-4",2,"padding-top","15px"],[1,"form-check","form-check-inline"],["type","checkbox","id","indoor","disabled","",1,"form-check-input",3,"value","checked"],["for","indoor",1,"form-check-label"],["type","checkbox","id","outdoor","disabled","",1,"form-check-input",3,"value","checked"],["for","outdoor",1,"form-check-label"],["src","assets/images/edit.png","alt",""],["src","assets/images/edit5.png","alt",""],["class","error",4,"ngIf"],[1,"error"],["type","button",1,"btn","btn-save",3,"click"],["type","button","disabled","",1,"btn","btn-save","btn-load"],[1,"fa-solid","fa-circle-notch","fa-spin"],[1,"col-sm-4"],[1,"form-group","day-active"],[1,"form-check","form-switch","justify-content-between"],["type","checkbox","role","switch","id","flexSwitchCheckDefault","disabled","",1,"form-check-input",3,"checked"],["for",""],[1,""],[1,"from-to-time"],["type","time","name","fromTime","disabled","",1,"form-control",3,"value"],["type","time","name","toTime","disabled","",1,"form-control",3,"value"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0),e.YNc(1,F,93,27,"div",1),e.TgZ(2,"div",2)(3,"div",3),e.YNc(4,w,2,0,"ng-template",null,4,e.W1O),e.qZA()()()),2&n){const g=e.MAs(5);e.xp6(1),e.Q6J("ngIf",i.userDetails)("ngIfElse",g)}},dependencies:[t.sg,t.O5,y._,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,C.N,T.N,c.Q],styles:[".btnEdit[_ngcontent-%COMP%]{position:absolute;bottom:6px;right:0;border:0px}.btnEdit[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}"]}),o})()}];let G=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[v.Bz.forChild(q),v.Bz]}),o})();var Y=l(21515);let B=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[t.ez,G,Y.m]}),o})()},28424:(Z,_,l)=>{l.d(_,{N:()=>v});var t=l(94650);let v=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"loading"],[1,"fa-solid","fa-circle-notch","fa-spin"]],template:function(e,u){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t.qZA())},styles:[".loading[_ngcontent-%COMP%]{text-align:center;padding:30px}.loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:46px;color:#dc3545}.loading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px}"]}),r})()},86260:(Z,_,l)=>{l.d(_,{i:()=>T});var t=l(94650),v=l(39485),r=l(42953),m=l(75304),e=l(36895);function u(c,f){if(1&c&&(t.TgZ(0,"div",3)(1,"h5"),t._UZ(2,"i",4),t._uU(3),t.qZA()()),2&c){const d=t.oxw();t.xp6(3),t.hij(" ",d.message,"")}}function s(c,f){if(1&c){const d=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(d);const b=t.oxw();return t.KtG(b._commonService.downloadInvoices({invoices:null==b.data?null:b.data.receipt}))}),t._uU(1,"View Receipt"),t.qZA()}}function x(c,f){if(1&c&&(t.ynx(0),t.TgZ(1,"h5"),t._UZ(2,"i",10),t._uU(3),t.qZA(),t.BQk()),2&c){const d=t.oxw(2);t.xp6(3),t.Oqu(d.message)}}function h(c,f){if(1&c&&(t.TgZ(0,"h5"),t._UZ(1,"i",10),t._uU(2),t.qZA()),2&c){const d=f.$implicit;t.xp6(2),t.hij(" ",d.ErrorMessageEn||d.errorMessageEn," ")}}function y(c,f){if(1&c&&t.YNc(0,h,3,1,"h5",11),2&c){const d=t.oxw(2);t.Q6J("ngForOf",d.messageError)}}function C(c,f){if(1&c){const d=t.EpF();t.TgZ(0,"div",3),t.YNc(1,x,4,1,"ng-container",6),t.YNc(2,y,1,1,"ng-template",null,7,t.W1O),t.TgZ(4,"div",8)(5,"button",9),t.NdJ("click",function(){t.CHM(d);const b=t.oxw();return t.KtG(b.activeModal.close("Close click"))}),t._uU(6,"Close"),t.qZA()()()}if(2&c){const d=t.MAs(3),p=t.oxw();t.xp6(1),t.Q6J("ngIf",p.message)("ngIfElse",d)}}let T=(()=>{class c{constructor(d,p,b,N){this.router=d,this.modalService=p,this.activeModal=b,this._commonService=N,this.loadPageData=new t.vpe}ngOnInit(){this.type&&"success"==this.type&&setTimeout(()=>{this.routeName&&this.router.navigateByUrl(this.routeName),this.toLoadData(),this.dismissOnlyActive?this.activeModal.dismiss():this.modalService.dismissAll()},5e3)}toLoadData(){this.loadPageData.emit()}}return c.\u0275fac=function(d){return new(d||c)(t.Y36(v.F0),t.Y36(r.FF),t.Y36(r.Kz),t.Y36(m.v))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-modal-message"]],inputs:{name:"name",type:"type",message:"message",messageError:"messageError",routeName:"routeName",data:"data",dismissOnlyActive:"dismissOnlyActive",errors:"errors"},outputs:{loadPageData:"loadPageData"},decls:4,vars:3,consts:[["class","message",4,"ngIf"],[1,"p-3","d-flex","justify-content-center"],["type","button","class","redBtn",3,"click",4,"ngIf"],[1,"message"],[1,"fa-regular","fa-circle-check"],["type","button",1,"redBtn",3,"click"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"btns-group","my-2","text-center"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"fa-regular","fa-circle-xmark"],[4,"ngFor","ngForOf"]],template:function(d,p){1&d&&(t.YNc(0,u,4,1,"div",0),t.TgZ(1,"div",1),t.YNc(2,s,2,0,"button",2),t.qZA(),t.YNc(3,C,7,2,"div",0)),2&d&&(t.Q6J("ngIf","success"==p.type),t.xp6(2),t.Q6J("ngIf",null==p.data?null:p.data.receipt),t.xp6(1),t.Q6J("ngIf","error"==p.type))},dependencies:[e.sg,e.O5],styles:[".message[_ngcontent-%COMP%]{padding:10px;text-align:center}.message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#1b212d;margin:0;padding:20px}.message[_ngcontent-%COMP%]   .fa-circle-check[_ngcontent-%COMP%]{color:#25bb00;font-size:28px;vertical-align:middle;margin:2px 10px 5px}.message[_ngcontent-%COMP%]   .fa-circle-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:28px;vertical-align:middle;margin:2px 10px 5px}.btns-group[_ngcontent-%COMP%]{justify-content:center}"]}),c})()},80145:(Z,_,l)=>{l.d(_,{O:()=>r,Q:()=>v});var t=l(94650);let v=(()=>{class m{constructor(u){this.el=u}onKeyDown(u){[8,9,13,27,46].indexOf(u.keyCode)}onKeyup(u){this.validateFields(u)}blockPaste(u){this.validateFields(u)}validateFields(u){this.el.nativeElement.value=this.el.nativeElement.value.replace(/[^A-Za-z\u0621-\u064a ]/g,""),u.preventDefault()}}return m.\u0275fac=function(u){return new(u||m)(t.Y36(t.SBq))},m.\u0275dir=t.lG2({type:m,selectors:[["","OnlyCharacter",""]],hostBindings:function(u,s){1&u&&t.NdJ("keydown",function(h){return s.onKeyDown(h)})("keyup",function(h){return s.onKeyup(h)})("paste",function(h){return s.blockPaste(h)})},inputs:{validationFieldsType:"validationFieldsType"}}),m})();function r(m){return m.replace(/[^A-Za-z\u0621-\u064a ]/g,"")}},82757:(Z,_,l)=>{l.d(_,{N:()=>v});var t=l(94650);let v=(()=>{class r{onInputChange(e){return!!new RegExp("[0-9]").test(e.key)||(e.preventDefault(),!1)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=t.lG2({type:r,selectors:[["input","numbersOnly",""]],hostBindings:function(e,u){1&e&&t.NdJ("keypress",function(x){return u.onInputChange(x)})}}),r})()}}]);