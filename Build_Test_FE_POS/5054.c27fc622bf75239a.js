"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[5054],{15054:(x,m,s)=>{s.r(m),s.d(m,{OpeningRegisterModule:()=>G});var g=s(36895),l=s(39485),a=s(24006),e=s(94650),c=s(42953);function p(t,o){1&t&&(e.TgZ(0,"div",1)(1,"h5"),e._UZ(2,"i",2),e._uU(3," The session has been opened successfully "),e.qZA()())}function d(t,o){if(1&t&&(e.TgZ(0,"h5"),e._UZ(1,"i",4),e._uU(2),e.qZA()),2&t){const n=o.$implicit;e.xp6(2),e.hij(" ",n.ErrorMessageEn," ")}}function _(t,o){if(1&t&&(e.TgZ(0,"div",1),e.YNc(1,d,3,1,"h5",3),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.errors)}}let f=(()=>{class t{constructor(n,i){this.router=n,this.modalService=i}ngOnInit(){"ok"===this.name?(console.log(this.name),setTimeout(()=>{this.modalService.dismissAll()},4e3)):setTimeout(()=>{this.modalService.dismissAll()},4e3)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(l.F0),e.Y36(c.FF))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-modal-msg"]],inputs:{name:"name",errors:"errors"},decls:2,vars:2,consts:[["class","message",4,"ngIf"],[1,"message"],[1,"fa-regular","fa-circle-check"],[4,"ngFor","ngForOf"],[1,"fa-regular","fa-circle-xmark"]],template:function(n,i){1&n&&(e.YNc(0,p,4,0,"div",0),e.YNc(1,_,2,1,"div",0)),2&n&&(e.Q6J("ngIf","ok"==i.name),e.xp6(1),e.Q6J("ngIf","no"==i.name))},dependencies:[g.sg,g.O5],styles:[".message[_ngcontent-%COMP%]{padding:10px;text-align:center}.message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#1b212d;margin:0;padding:20px}.message[_ngcontent-%COMP%]   .fa-circle-check[_ngcontent-%COMP%]{color:#25bb00;font-size:28px;vertical-align:middle;margin:2px 10px 5px}.message[_ngcontent-%COMP%]   .fa-circle-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:28px;vertical-align:middle;margin:2px 10px 5px}"]}),t})();var O=s(69082),b=s(45832),C=s(36690),Z=s(79345),M=s(75304),I=s(29444),T=s(55134);let R=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-no-ip-address"]],decls:3,vars:0,consts:[[1,"ipadress"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2," Your IP address is not connected to this register "),e.qZA()())},styles:[".ipadress[_ngcontent-%COMP%]{text-align:center;padding:60px 30px}"]}),t})();const N=["modalPopup"];function S(t,o){1&t&&(e.TgZ(0,"div"),e._UZ(1,"app-no-ip-address"),e.qZA())}function A(t,o){if(1&t&&(e.TgZ(0,"p"),e._uU(1," Register "),e.TgZ(2,"span"),e._uU(3),e.qZA(),e._uU(4," Branch "),e.TgZ(5,"span"),e._uU(6),e.qZA()()),2&t){const n=e.oxw(3);e.xp6(3),e.hij(" ",n.registerName," "),e.xp6(3),e.hij(" ",n.branchName," ")}}function y(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",5)(1,"div",8)(2,"div",9)(3,"div",10),e._UZ(4,"img",11),e.qZA(),e.TgZ(5,"h3"),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8,"Where you can define the initial fund and be active to start collecting"),e.qZA(),e.TgZ(9,"p")(10,"span"),e._uU(11," To open the register, please click on the button below "),e.qZA()(),e.TgZ(12,"button",12),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(3);return e.KtG(r.isShow=!r.isShow)}),e._uU(13,"Open Register"),e.qZA()()()()}if(2&t){const n=e.oxw(3);e.xp6(6),e.HOy("Welcome To Register ",n.registerName," ",n.registerId," in Branch ",n.branchName," - ",n.cityName,"")}}function w(t,o){1&t&&(e.TgZ(0,"span",25),e._uU(1,"Input is required"),e.qZA())}function F(t,o){1&t&&(e.TgZ(0,"span",25),e._uU(1,"Value cannot be negative number"),e.qZA())}function P(t,o){if(1&t&&(e.ynx(0),e.YNc(1,w,2,0,"span",24),e.YNc(2,F,2,0,"span",24),e.BQk()),2&t){const n=e.oxw(5);let i,r;e.xp6(1),e.Q6J("ngIf",null==n.f||null==(i=n.f.get("InitialFund"))?null:i.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.f||null==(r=n.f.get("InitialFund"))?null:r.errors.min)}}function U(t,o){if(1&t&&(e.ynx(0),e.YNc(1,P,3,2,"ng-container",0),e.BQk()),2&t){const n=e.oxw(4);let i;e.xp6(1),e.Q6J("ngIf",(null==n.f||null==(i=n.f.get("InitialFund"))?null:i.invalid)&&(null==n.f||null==(i=n.f.get("InitialFund"))?null:i.touched)||(null==n.f||null==(i=n.f.get("InitialFund"))?null:i.dirty))}}function Y(t,o){1&t&&(e.TgZ(0,"button",26),e._uU(1,"Save"),e.qZA())}function D(t,o){1&t&&(e.TgZ(0,"button",27),e._UZ(1,"i",28),e.qZA())}function J(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",5)(1,"div",8)(2,"form",13),e.NdJ("ngSubmit",function(){e.CHM(n);const r=e.oxw(3);return e.KtG(r.onSubmit())}),e.TgZ(3,"div",4)(4,"div",5)(5,"div",14)(6,"label"),e._uU(7,"Initial Fund ."),e.qZA(),e.TgZ(8,"p",15),e._uU(9," Where you can define the initial fund and to be active to start collection "),e.qZA()()(),e.TgZ(10,"div",16)(11,"div",14),e._UZ(12,"input",17),e.YNc(13,U,2,1,"ng-container",0),e.qZA()(),e._UZ(14,"div",18),e.TgZ(15,"div",19)(16,"div",14)(17,"label"),e._uU(18," Notes "),e.qZA(),e._UZ(19,"textarea",20),e.qZA()(),e.TgZ(20,"div",5)(21,"div",21),e.YNc(22,Y,2,0,"button",22),e.YNc(23,D,2,0,"button",23),e.qZA()()()()()()}if(2&t){const n=e.oxw(3);let i;e.xp6(2),e.Q6J("formGroup",n.formGroup),e.xp6(11),e.Q6J("ngIf",null==n.f||null==(i=n.f.get("InitialFund"))?null:i.errors),e.xp6(9),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading)}}function k(t,o){if(1&t&&(e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"p"),e._uU(4," Date "),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"date"),e.qZA(),e._uU(8," \xa0 Time "),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"date"),e.qZA()(),e.YNc(12,A,7,2,"p",0),e.qZA()(),e.YNc(13,y,14,4,"div",7),e.YNc(14,J,24,4,"div",7),e.qZA()),2&t){const n=e.oxw(2);e.xp6(6),e.hij(" ",e.xi3(7,5,n.currentDate," d MMM y ")," "),e.xp6(4),e.hij(" ",e.xi3(11,8,n.currentDate," hh:mm:ss a")," "),e.xp6(2),e.Q6J("ngIf",n.isShow),e.xp6(1),e.Q6J("ngIf",!n.isShow),e.xp6(1),e.Q6J("ngIf",n.isShow)}}function Q(t,o){1&t&&(e.TgZ(0,"div",4)(1,"div",5)(2,"div",8)(3,"div",9)(4,"div",10),e._UZ(5,"img",11),e.qZA(),e.TgZ(6,"h3"),e._uU(7,"You don't have register yet "),e.qZA()()()()())}function q(t,o){if(1&t&&(e.TgZ(0,"div",2),e.YNc(1,k,15,11,"div",3),e.YNc(2,Q,8,0,"div",3),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.sharedService.getRegister),e.xp6(1),e.Q6J("ngIf",!n.sharedService.getRegister)}}const B=[{path:"",component:(()=>{class t{constructor(n,i,r,u,v,E,L,h,H,K,W){this.sharedService=n,this.openregisterService=i,this.route=r,this.fb=u,this.modalService=v,this.headerService=E,this.router=L,this.httpserviceService=H,this._commonService=K,this._subjectService=W,this.isShow=!1,this.currentDate=new Date,h.backdrop="static",h.keyboard=!1}ngOnInit(){this.headerService.setTitle(this.sharedService.getRegister?"Opening Register":""),this.registerName=this.sharedService.getRegister?.registerObj?.registersName,this.registerId=this.sharedService.getRegister?.registerObj?.id,this.branchName=this.sharedService?.getRegister?.registerObj.registeBranch.branchName,this.cityName=this.sharedService?.getRegister?.registerObj.registeBranch.city,console.log(this.registerName),this.getForm(),this.intervalId=setInterval(()=>{this.currentDate=new Date},1e3)}getForm(){this.formGroup=this.fb.group({InitialFund:["0.000",[a.kI.required,a.kI.min(0)]],Notes:[""]})}get f(){return this.formGroup}getUserMenu(){this.httpserviceService.GetUserMenuNew(17001).subscribe(n=>{let i=n?.data?.menu;for(let r of i){let u=r.items.find(v=>v.canClick);if(u){this._commonService.NavigateToRoute(u.url),console.log(u);break}}})}onSubmit(){if(this.formGroup.invalid)return this.formGroup.markAllAsTouched(),window.scroll(0,0);const n=new FormData;n.append("InitialFund",(+this.formGroup.get("InitialFund")?.value).toFixed(3)),n.append("Notes",this.formGroup.get("Notes")?.value),this.isLoading=!0,this.openregisterService.OpenRegisterSession(n).subscribe(i=>{if(i.isSuccess)this.isLoading=!1,this.modalService.open(f).componentInstance.name="ok",console.log(i),localStorage.setItem("timeRegister",(new Date).toString()),this.getUserMenu(),this._subjectService.isRegisterOpen.next(!0),this._subjectService.sessionDetails.next({opened:!0});else{this.isLoading=!1;const r=this.modalService.open(f);r.componentInstance.name="no",r.componentInstance.errors=i.Errors}},i=>{this.isLoading=!1;const r=this.modalService.open(f);r.componentInstance.name="no",r.componentInstance.errors=i?.error.errors})}numberOnly(n){const i=n.which?n.which:n.keyCode;return!(i>31&&(i<48||i>57))}CanOpenRegisterSession(){return this.openregisterService.CanOpenRegisterSession({}).subscribe(n=>{1==n.isSuccess&&(this.canOpenRegister=n.data.canOpenRegister)})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(O.F),e.Y36(b.a),e.Y36(l.gz),e.Y36(a.qu),e.Y36(c.FF),e.Y36(C.r),e.Y36(l.F0),e.Y36(c.NM),e.Y36(Z.h),e.Y36(M.v),e.Y36(I._))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-opening-register"]],viewQuery:function(n,i){if(1&n&&e.Gf(N,5),2&n){let r;e.iGM(r=e.CRH())&&(i.modalPopup=r.first)}},decls:2,vars:2,consts:[[4,"ngIf"],["class","card-page",4,"ngIf"],[1,"card-page"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"top-details"],["class","col-md-12",4,"ngIf"],[1,"card-collect"],[1,"open-reg"],[1,"bgimg"],["src","assets/images/locker.png","alt",""],[1,"btn",3,"click"],[3,"formGroup","ngSubmit"],[1,"form-group","mb-3"],[1,""],[1,"col-md-4"],["appDecimalNumber","","type","text","formControlName","InitialFund",1,"form-control"],[1,"col-md-6"],[1,"col-md-8"],["rows","4","formControlName","Notes","name","Notes",1,"form-control"],[1,"btns-group","my-1","mx-1"],["type","submit","class","btn btn-save",4,"ngIf"],["type","button","class","btn btn-save btn-load","disabled","",4,"ngIf"],["class","validation-error",4,"ngIf"],[1,"validation-error"],["type","submit",1,"btn","btn-save"],["type","button","disabled","",1,"btn","btn-save","btn-load"],[1,"fa-solid","fa-circle-notch","fa-spin"]],template:function(n,i){1&n&&(e.YNc(0,S,2,0,"div",0),e.YNc(1,q,3,2,"div",1)),2&n&&(e.Q6J("ngIf",i.sharedService.IsFoundIPAddress),e.xp6(1),e.Q6J("ngIf",!i.sharedService.IsFoundIPAddress))},dependencies:[g.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,T.Q,R,g.uU],styles:[".open-reg[_ngcontent-%COMP%]{text-align:center;padding:10px}.open-reg[_ngcontent-%COMP%]   .bgimg[_ngcontent-%COMP%]{background-color:#f8f8f8;width:225px;height:225px;padding:30px;display:block;margin:10px auto 30px;border-radius:50%}.open-reg[_ngcontent-%COMP%]   .bgimg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.open-reg[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#202020;font-size:20px;font-weight:600;margin-bottom:20px}.open-reg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6d7985;font-size:18px;font-weight:500;margin:5px}.open-reg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.open-reg[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff;font-size:16px;padding:12px 50px;margin:25px 0 0}.card-collect[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#1b212d}.card-collect[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400;font-size:16px;color:#6d7985}.error[_ngcontent-%COMP%]{font-size:14px;color:#f44336;font-weight:500;padding:7px;display:block}.btn-save[_ngcontent-%COMP%]{height:52px;width:120px}"]}),t})()}];let j=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(B),l.Bz]}),t})();var z=s(21515);let G=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,j,z.m]}),t})()},55134:(x,m,s)=>{s.d(m,{Q:()=>l});var g=s(94650);let l=(()=>{class a{constructor(c){this.el=c,this.regex=new RegExp(/^\d*\.?\d{0,50}$/g),this.specialKeys=["Backspace","Tab","End","Home","ArrowLeft","ArrowRight","Del","Delete"]}onKeyDown(c){if(-1!==this.specialKeys.indexOf(c.key))return;const d=this.el.nativeElement.value.concat(c.key);d&&!String(d).match(this.regex)&&c.preventDefault()}setInputFocusOut(){let c=+this.el.nativeElement.value;c>0&&(this.el.nativeElement.value=c.toFixed(3))}}return a.\u0275fac=function(c){return new(c||a)(g.Y36(g.SBq))},a.\u0275dir=g.lG2({type:a,selectors:[["","appDecimalNumber",""]],hostBindings:function(c,p){1&c&&g.NdJ("keydown",function(_){return p.onKeyDown(_)})("blur",function(){return p.setInputFocusOut()})}}),a})()}}]);