(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[469],{50469:(o2,A,o)=>{"use strict";o.r(A),o.d(A,{DashboardModule:()=>i3});var V=o(36895),C=o(39485),T=o(98063),e=o(94650),d=o(69082),k=o(82687),m=o(50727),N=o(36690),_=o(21864),n2=o(29444);const a1=[0,2e3,1e4,3e4,null];class l2{constructor(c){this._retryDelays=void 0!==c?[...c,null]:a1}nextRetryDelayInMilliseconds(c){return this._retryDelays[c.previousRetryCount]}}var p=o(15861);let R=(()=>{class r{}return r.Authorization="Authorization",r.Cookie="Cookie",r})();class t2{constructor(c,a,s){this.statusCode=c,this.statusText=a,this.content=s}}class O{get(c,a){return this.send({...a,method:"GET",url:c})}post(c,a){return this.send({...a,method:"POST",url:c})}delete(c,a){return this.send({...a,method:"DELETE",url:c})}getCookieString(c){return""}}class f2 extends O{constructor(c,a){super(),this._innerClient=c,this._accessTokenFactory=a}send(c){var a=this;return(0,p.Z)(function*(){let s=!0;a._accessTokenFactory&&(!a._accessToken||c.url&&c.url.indexOf("/negotiate?")>0)&&(s=!1,a._accessToken=yield a._accessTokenFactory()),a._setAuthorizationHeader(c);const i=yield a._innerClient.send(c);return s&&401===i.statusCode&&a._accessTokenFactory?(a._accessToken=yield a._accessTokenFactory(),a._setAuthorizationHeader(c),yield a._innerClient.send(c)):i})()}_setAuthorizationHeader(c){c.headers||(c.headers={}),this._accessToken?c.headers[R.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&c.headers[R.Authorization]&&delete c.headers[R.Authorization]}getCookieString(c){return this._innerClient.getCookieString(c)}}class P extends Error{constructor(c,a){const s=new.target.prototype;super(`${c}: Status code '${a}'`),this.statusCode=a,this.__proto__=s}}class G extends Error{constructor(c="A timeout occurred."){const a=new.target.prototype;super(c),this.__proto__=a}}class w extends Error{constructor(c="An abort occurred."){const a=new.target.prototype;super(c),this.__proto__=a}}class e1 extends Error{constructor(c,a){const s=new.target.prototype;super(c),this.transport=a,this.errorType="UnsupportedTransportError",this.__proto__=s}}class s1 extends Error{constructor(c,a){const s=new.target.prototype;super(c),this.transport=a,this.errorType="DisabledTransportError",this.__proto__=s}}class h2 extends Error{constructor(c,a){const s=new.target.prototype;super(c),this.transport=a,this.errorType="FailedToStartTransportError",this.__proto__=s}}class H2 extends Error{constructor(c){const a=new.target.prototype;super(c),this.errorType="FailedToNegotiateWithServerError",this.__proto__=a}}class r1 extends Error{constructor(c,a){const s=new.target.prototype;super(c),this.innerErrors=a,this.__proto__=s}}var l=(()=>{return(r=l||(l={}))[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None",l;var r})();class E{constructor(){}log(c,a){}}E.instance=new E;const i1="8.0.0";class L{static isRequired(c,a){if(null==c)throw new Error(`The '${a}' argument is required.`)}static isNotEmpty(c,a){if(!c||c.match(/^\s*$/))throw new Error(`The '${a}' argument should not be empty.`)}static isIn(c,a,s){if(!(c in a))throw new Error(`Unknown ${s} value: ${c}.`)}}class g{static get isBrowser(){return!g.isNode&&"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return!g.isNode&&"object"==typeof self&&"importScripts"in self}static get isReactNative(){return!g.isNode&&"object"==typeof window&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&"node"===process.release.name}}function U(r,c){let a="";return B(r)?(a=`Binary data of length ${r.byteLength}`,c&&(a+=`. Content: '${function o1(r){const c=new Uint8Array(r);let a="";return c.forEach(s=>{a+=`0x${s<16?"0":""}${s.toString(16)} `}),a.substr(0,a.length-1)}(r)}'`)):"string"==typeof r&&(a=`String data of length ${r.length}`,c&&(a+=`. Content: '${r}'`)),a}function B(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&"ArrayBuffer"===r.constructor.name)}function m2(r,c,a,s,i,n){return $.apply(this,arguments)}function $(){return($=(0,p.Z)(function*(r,c,a,s,i,n){const t={},[f,h]=D();t[f]=h,r.log(l.Trace,`(${c} transport) sending data. ${U(i,n.logMessageContent)}.`);const H=B(i)?"arraybuffer":"text",v=yield a.post(s,{content:i,headers:{...t,...n.headers},responseType:H,timeout:n.timeout,withCredentials:n.withCredentials});r.log(l.Trace,`(${c} transport) request complete. Response status: ${v.statusCode}.`)})).apply(this,arguments)}class n1{constructor(c,a){this._subject=c,this._observer=a}dispose(){const c=this._subject.observers.indexOf(this._observer);c>-1&&this._subject.observers.splice(c,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(a=>{})}}class W{constructor(c){this._minLevel=c,this.out=console}log(c,a){if(c>=this._minLevel){const s=`[${(new Date).toISOString()}] ${l[c]}: ${a}`;switch(c){case l.Critical:case l.Error:this.out.error(s);break;case l.Warning:this.out.warn(s);break;case l.Information:this.out.info(s);break;default:this.out.log(s)}}}}function D(){let r="X-SignalR-User-Agent";return g.isNode&&(r="User-Agent"),[r,v2(i1,l1(),g.isNode?"NodeJS":"Browser",t1())]}function v2(r,c,a,s){let i="Microsoft SignalR/";const n=r.split(".");return i+=`${n[0]}.${n[1]}`,i+=` (${r}; `,i+=c&&""!==c?`${c}; `:"Unknown OS; ",i+=`${a}`,i+=s?`; ${s}`:"; Unknown Runtime Version",i+=")",i}function l1(){if(!g.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function t1(){if(g.isNode)return process.versions.node}function p2(r){return r.stack?r.stack:r.message?r.message:`${r}`}class m1 extends O{constructor(c){super(),this._logger=c;const a={_fetchType:void 0,_jar:void 0};!function f1(r){return!!(typeof fetch>"u"||g.isNode)&&(r._jar=new(o(57333).CookieJar),r._fetchType=typeof fetch>"u"?o(98190):fetch,r._fetchType=o(86045)(r._fetchType,r._jar),!0)}(a)?this._fetchType=fetch.bind(function M2(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}()):(this._fetchType=a._fetchType,this._jar=a._jar),this._abortControllerType=AbortController;const s={_abortControllerType:this._abortControllerType};(function h1(r){return typeof AbortController>"u"&&(r._abortControllerType=o(6771),!0)})(s)&&(this._abortControllerType=s._abortControllerType)}send(c){var a=this;return(0,p.Z)(function*(){if(c.abortSignal&&c.abortSignal.aborted)throw new w;if(!c.method)throw new Error("No method defined.");if(!c.url)throw new Error("No url defined.");const s=new a._abortControllerType;let i;c.abortSignal&&(c.abortSignal.onabort=()=>{s.abort(),i=new w});let t,n=null;c.timeout&&(n=setTimeout(()=>{s.abort(),a._logger.log(l.Warning,"Timeout from HTTP request."),i=new G},c.timeout)),""===c.content&&(c.content=void 0),c.content&&(c.headers=c.headers||{},c.headers["Content-Type"]=B(c.content)?"application/octet-stream":"text/plain;charset=UTF-8");try{t=yield a._fetchType(c.url,{body:c.content,cache:"no-cache",credentials:!0===c.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...c.headers},method:c.method,mode:"cors",redirect:"follow",signal:s.signal})}catch(H){throw i||(a._logger.log(l.Warning,`Error from HTTP request. ${H}.`),H)}finally{n&&clearTimeout(n),c.abortSignal&&(c.abortSignal.onabort=null)}if(!t.ok){const H=yield d2(t,"text");throw new P(H||t.statusText,t.status)}const h=yield d2(t,c.responseType);return new t2(t.status,t.statusText,h)})()}getCookieString(c){let a="";return g.isNode&&this._jar&&this._jar.getCookies(c,(s,i)=>a=i.join("; ")),a}}function d2(r,c){let a;switch(c){case"arraybuffer":a=r.arrayBuffer();break;case"text":default:a=r.text();break;case"blob":case"document":case"json":throw new Error(`${c} is not supported.`)}return a}class u2 extends O{constructor(c){super(),this._logger=c}send(c){return c.abortSignal&&c.abortSignal.aborted?Promise.reject(new w):c.method?c.url?new Promise((a,s)=>{const i=new XMLHttpRequest;i.open(c.method,c.url,!0),i.withCredentials=void 0===c.withCredentials||c.withCredentials,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===c.content&&(c.content=void 0),c.content&&(B(c.content)?i.setRequestHeader("Content-Type","application/octet-stream"):i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const n=c.headers;n&&Object.keys(n).forEach(t=>{i.setRequestHeader(t,n[t])}),c.responseType&&(i.responseType=c.responseType),c.abortSignal&&(c.abortSignal.onabort=()=>{i.abort(),s(new w)}),c.timeout&&(i.timeout=c.timeout),i.onload=()=>{c.abortSignal&&(c.abortSignal.onabort=null),i.status>=200&&i.status<300?a(new t2(i.status,i.statusText,i.response||i.responseText)):s(new P(i.response||i.responseText||i.statusText,i.status))},i.onerror=()=>{this._logger.log(l.Warning,`Error from HTTP request. ${i.status}: ${i.statusText}.`),s(new P(i.statusText,i.status))},i.ontimeout=()=>{this._logger.log(l.Warning,"Timeout from HTTP request."),s(new G)},i.send(c.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class z1 extends O{constructor(c){if(super(),typeof fetch<"u"||g.isNode)this._httpClient=new m1(c);else{if(!(typeof XMLHttpRequest<"u"))throw new Error("No usable HttpClient found.");this._httpClient=new u2(c)}}send(c){return c.abortSignal&&c.abortSignal.aborted?Promise.reject(new w):c.method?c.url?this._httpClient.send(c):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(c){return this._httpClient.getCookieString(c)}}var x=(()=>{return(r=x||(x={}))[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling",x;var r})(),S=(()=>{return(r=S||(S={}))[r.Text=1]="Text",r[r.Binary=2]="Binary",S;var r})();class v1{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}}class g2{get pollAborted(){return this._pollAbort.aborted}constructor(c,a,s){this._httpClient=c,this._logger=a,this._pollAbort=new v1,this._options=s,this._running=!1,this.onreceive=null,this.onclose=null}connect(c,a){var s=this;return(0,p.Z)(function*(){if(L.isRequired(c,"url"),L.isRequired(a,"transferFormat"),L.isIn(a,S,"transferFormat"),s._url=c,s._logger.log(l.Trace,"(LongPolling transport) Connecting."),a===S.Binary&&typeof XMLHttpRequest<"u"&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[i,n]=D(),t={[i]:n,...s._options.headers},f={abortSignal:s._pollAbort.signal,headers:t,timeout:1e5,withCredentials:s._options.withCredentials};a===S.Binary&&(f.responseType="arraybuffer");const h=`${c}&_=${Date.now()}`;s._logger.log(l.Trace,`(LongPolling transport) polling: ${h}.`);const H=yield s._httpClient.get(h,f);200!==H.statusCode?(s._logger.log(l.Error,`(LongPolling transport) Unexpected response code: ${H.statusCode}.`),s._closeError=new P(H.statusText||"",H.statusCode),s._running=!1):s._running=!0,s._receiving=s._poll(s._url,f)})()}_poll(c,a){var s=this;return(0,p.Z)(function*(){try{for(;s._running;)try{const i=`${c}&_=${Date.now()}`;s._logger.log(l.Trace,`(LongPolling transport) polling: ${i}.`);const n=yield s._httpClient.get(i,a);204===n.statusCode?(s._logger.log(l.Information,"(LongPolling transport) Poll terminated by server."),s._running=!1):200!==n.statusCode?(s._logger.log(l.Error,`(LongPolling transport) Unexpected response code: ${n.statusCode}.`),s._closeError=new P(n.statusText||"",n.statusCode),s._running=!1):n.content?(s._logger.log(l.Trace,`(LongPolling transport) data received. ${U(n.content,s._options.logMessageContent)}.`),s.onreceive&&s.onreceive(n.content)):s._logger.log(l.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(i){s._running?i instanceof G?s._logger.log(l.Trace,"(LongPolling transport) Poll timed out, reissuing."):(s._closeError=i,s._running=!1):s._logger.log(l.Trace,`(LongPolling transport) Poll errored after shutdown: ${i.message}`)}}finally{s._logger.log(l.Trace,"(LongPolling transport) Polling complete."),s.pollAborted||s._raiseOnClose()}})()}send(c){var a=this;return(0,p.Z)(function*(){return a._running?m2(a._logger,"LongPolling",a._httpClient,a._url,c,a._options):Promise.reject(new Error("Cannot send until the transport is connected"))})()}stop(){var c=this;return(0,p.Z)(function*(){c._logger.log(l.Trace,"(LongPolling transport) Stopping polling."),c._running=!1,c._pollAbort.abort();try{yield c._receiving,c._logger.log(l.Trace,`(LongPolling transport) sending DELETE request to ${c._url}.`);const a={},[s,i]=D();a[s]=i;const n={headers:{...a,...c._options.headers},timeout:c._options.timeout,withCredentials:c._options.withCredentials};let t;try{yield c._httpClient.delete(c._url,n)}catch(f){t=f}t?t instanceof P&&c._logger.log(l.Trace,404===t.statusCode?"(LongPolling transport) A 404 response was returned from sending a DELETE request.":`(LongPolling transport) Error sending a DELETE request: ${t}`):c._logger.log(l.Trace,"(LongPolling transport) DELETE request accepted.")}finally{c._logger.log(l.Trace,"(LongPolling transport) Stop finished."),c._raiseOnClose()}})()}_raiseOnClose(){if(this.onclose){let c="(LongPolling transport) Firing onclose event.";this._closeError&&(c+=" Error: "+this._closeError),this._logger.log(l.Trace,c),this.onclose(this._closeError)}}}class V1{constructor(c,a,s,i){this._httpClient=c,this._accessToken=a,this._logger=s,this._options=i,this.onreceive=null,this.onclose=null}connect(c,a){var s=this;return(0,p.Z)(function*(){return L.isRequired(c,"url"),L.isRequired(a,"transferFormat"),L.isIn(a,S,"transferFormat"),s._logger.log(l.Trace,"(SSE transport) Connecting."),s._url=c,s._accessToken&&(c+=(c.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(s._accessToken)}`),new Promise((i,n)=>{let f,t=!1;if(a===S.Text){if(g.isBrowser||g.isWebWorker)f=new s._options.EventSource(c,{withCredentials:s._options.withCredentials});else{const h=s._httpClient.getCookieString(c),H={};H.Cookie=h;const[v,M]=D();H[v]=M,f=new s._options.EventSource(c,{withCredentials:s._options.withCredentials,headers:{...H,...s._options.headers}})}try{f.onmessage=h=>{if(s.onreceive)try{s._logger.log(l.Trace,`(SSE transport) data received. ${U(h.data,s._options.logMessageContent)}.`),s.onreceive(h.data)}catch(H){return void s._close(H)}},f.onerror=h=>{t?s._close():n(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},f.onopen=()=>{s._logger.log(l.Information,`SSE connected to ${s._url}`),s._eventSource=f,t=!0,i()}}catch(h){return void n(h)}}else n(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})})()}send(c){var a=this;return(0,p.Z)(function*(){return a._eventSource?m2(a._logger,"SSE",a._httpClient,a._url,c,a._options):Promise.reject(new Error("Cannot send until the transport is connected"))})()}stop(){return this._close(),Promise.resolve()}_close(c){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(c))}}class p1{constructor(c,a,s,i,n,t){this._logger=s,this._accessTokenFactory=a,this._logMessageContent=i,this._webSocketConstructor=n,this._httpClient=c,this.onreceive=null,this.onclose=null,this._headers=t}connect(c,a){var s=this;return(0,p.Z)(function*(){let i;return L.isRequired(c,"url"),L.isRequired(a,"transferFormat"),L.isIn(a,S,"transferFormat"),s._logger.log(l.Trace,"(WebSockets transport) Connecting."),s._accessTokenFactory&&(i=yield s._accessTokenFactory()),new Promise((n,t)=>{let f;c=c.replace(/^http/,"ws");const h=s._httpClient.getCookieString(c);let H=!1;if(g.isNode||g.isReactNative){const v={},[M,y]=D();v[M]=y,i&&(v[R.Authorization]=`Bearer ${i}`),h&&(v[R.Cookie]=h),f=new s._webSocketConstructor(c,void 0,{headers:{...v,...s._headers}})}else i&&(c+=(c.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(i)}`);f||(f=new s._webSocketConstructor(c)),a===S.Binary&&(f.binaryType="arraybuffer"),f.onopen=v=>{s._logger.log(l.Information,`WebSocket connected to ${c}.`),s._webSocket=f,H=!0,n()},f.onerror=v=>{let M=null;M=typeof ErrorEvent<"u"&&v instanceof ErrorEvent?v.error:"There was an error with the transport",s._logger.log(l.Information,`(WebSockets transport) ${M}.`)},f.onmessage=v=>{if(s._logger.log(l.Trace,`(WebSockets transport) data received. ${U(v.data,s._logMessageContent)}.`),s.onreceive)try{s.onreceive(v.data)}catch(M){return void s._close(M)}},f.onclose=v=>{if(H)s._close(v);else{let M=null;M=typeof ErrorEvent<"u"&&v instanceof ErrorEvent?v.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",t(new Error(M))}}})})()}send(c){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(l.Trace,`(WebSockets transport) sending data. ${U(c,this._logMessageContent)}.`),this._webSocket.send(c),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(c){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(l.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(c)||!1!==c.wasClean&&1e3===c.code?c instanceof Error?this.onclose(c):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${c.code} (${c.reason||"no reason given"}).`)))}_isCloseEvent(c){return c&&"boolean"==typeof c.wasClean&&"number"==typeof c.code}}class M1{constructor(c,a={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,L.isRequired(c,"url"),this._logger=function z2(r){return void 0===r?new W(l.Information):null===r?E.instance:void 0!==r.log?r:new W(r)}(a.logger),this.baseUrl=this._resolveUrl(c),(a=a||{}).logMessageContent=void 0!==a.logMessageContent&&a.logMessageContent,"boolean"!=typeof a.withCredentials&&void 0!==a.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");a.withCredentials=void 0===a.withCredentials||a.withCredentials,a.timeout=void 0===a.timeout?1e5:a.timeout;let s=null,i=null;g.isNode&&(s=function C2(){return o(6139)}(),i=function H1(){return o(18022)}()),!g.isNode&&typeof WebSocket<"u"&&!a.WebSocket?a.WebSocket=WebSocket:g.isNode&&!a.WebSocket&&s&&(a.WebSocket=s),!g.isNode&&typeof EventSource<"u"&&!a.EventSource?a.EventSource=EventSource:g.isNode&&!a.EventSource&&typeof i<"u"&&(a.EventSource=i),this._httpClient=new f2(a.httpClient||new z1(this._logger),a.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=a,this.onreceive=null,this.onclose=null}start(c){var a=this;return(0,p.Z)(function*(){if(L.isIn(c=c||S.Binary,S,"transferFormat"),a._logger.log(l.Debug,`Starting connection with transfer format '${S[c]}'.`),"Disconnected"!==a._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(a._connectionState="Connecting",a._startInternalPromise=a._startInternal(c),yield a._startInternalPromise,"Disconnecting"===a._connectionState){const s="Failed to start the HttpConnection before stop() was called.";return a._logger.log(l.Error,s),yield a._stopPromise,Promise.reject(new w(s))}if("Connected"!==a._connectionState){const s="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return a._logger.log(l.Error,s),Promise.reject(new w(s))}a._connectionStarted=!0})()}send(c){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new q(this.transport)),this._sendQueue.send(c))}stop(c){var a=this;return(0,p.Z)(function*(){return"Disconnected"===a._connectionState?(a._logger.log(l.Debug,`Call to HttpConnection.stop(${c}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===a._connectionState?(a._logger.log(l.Debug,`Call to HttpConnection.stop(${c}) ignored because the connection is already in the disconnecting state.`),a._stopPromise):(a._connectionState="Disconnecting",a._stopPromise=new Promise(s=>{a._stopPromiseResolver=s}),yield a._stopInternal(c),void(yield a._stopPromise))})()}_stopInternal(c){var a=this;return(0,p.Z)(function*(){a._stopError=c;try{yield a._startInternalPromise}catch{}if(a.transport){try{yield a.transport.stop()}catch(s){a._logger.log(l.Error,`HttpConnection.transport.stop() threw error '${s}'.`),a._stopConnection()}a.transport=void 0}else a._logger.log(l.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})()}_startInternal(c){var a=this;return(0,p.Z)(function*(){let s=a.baseUrl;a._accessTokenFactory=a._options.accessTokenFactory,a._httpClient._accessTokenFactory=a._accessTokenFactory;try{if(a._options.skipNegotiation){if(a._options.transport!==x.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");a.transport=a._constructTransport(x.WebSockets),yield a._startTransport(s,c)}else{let i=null,n=0;do{if(i=yield a._getNegotiationResponse(s),"Disconnecting"===a._connectionState||"Disconnected"===a._connectionState)throw new w("The connection was stopped during negotiation.");if(i.error)throw new Error(i.error);if(i.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(i.url&&(s=i.url),i.accessToken){const t=i.accessToken;a._accessTokenFactory=()=>t,a._httpClient._accessToken=t,a._httpClient._accessTokenFactory=void 0}n++}while(i.url&&n<100);if(100===n&&i.url)throw new Error("Negotiate redirection limit exceeded.");yield a._createTransport(s,a._options.transport,i,c)}a.transport instanceof g2&&(a.features.inherentKeepAlive=!0),"Connecting"===a._connectionState&&(a._logger.log(l.Debug,"The HttpConnection connected successfully."),a._connectionState="Connected")}catch(i){return a._logger.log(l.Error,"Failed to start the connection: "+i),a._connectionState="Disconnected",a.transport=void 0,a._stopPromiseResolver(),Promise.reject(i)}})()}_getNegotiationResponse(c){var a=this;return(0,p.Z)(function*(){const s={},[i,n]=D();s[i]=n;const t=a._resolveNegotiateUrl(c);a._logger.log(l.Debug,`Sending negotiation request: ${t}.`);try{const f=yield a._httpClient.post(t,{content:"",headers:{...s,...a._options.headers},timeout:a._options.timeout,withCredentials:a._options.withCredentials});if(200!==f.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${f.statusCode}'`));const h=JSON.parse(f.content);return(!h.negotiateVersion||h.negotiateVersion<1)&&(h.connectionToken=h.connectionId),h.useStatefulReconnect&&!0!==a._options._useStatefulReconnect?Promise.reject(new H2("Client didn't negotiate Stateful Reconnect but the server did.")):h}catch(f){let h="Failed to complete negotiation with the server: "+f;return f instanceof P&&404===f.statusCode&&(h+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),a._logger.log(l.Error,h),Promise.reject(new H2(h))}})()}_createConnectUrl(c,a){return a?c+(-1===c.indexOf("?")?"?":"&")+`id=${a}`:c}_createTransport(c,a,s,i){var n=this;return(0,p.Z)(function*(){let t=n._createConnectUrl(c,s.connectionToken);if(n._isITransport(a))return n._logger.log(l.Debug,"Connection was provided an instance of ITransport, using that directly."),n.transport=a,yield n._startTransport(t,i),void(n.connectionId=s.connectionId);const f=[],h=s.availableTransports||[];let H=s;for(const v of h){const M=n._resolveTransportOrError(v,a,i,!0===H?.useStatefulReconnect);if(M instanceof Error)f.push(`${v.transport} failed:`),f.push(M);else if(n._isITransport(M)){if(n.transport=M,!H){try{H=yield n._getNegotiationResponse(c)}catch(y){return Promise.reject(y)}t=n._createConnectUrl(c,H.connectionToken)}try{return yield n._startTransport(t,i),void(n.connectionId=H.connectionId)}catch(y){if(n._logger.log(l.Error,`Failed to start the transport '${v.transport}': ${y}`),H=void 0,f.push(new h2(`${v.transport} failed: ${y}`,x[v.transport])),"Connecting"!==n._connectionState){const c2="Failed to select transport before stop() was called.";return n._logger.log(l.Debug,c2),Promise.reject(new w(c2))}}}}return Promise.reject(f.length>0?new r1(`Unable to connect to the server with any of the available transports. ${f.join(" ")}`,f):new Error("None of the transports supported by the client are supported by the server."))})()}_constructTransport(c){switch(c){case x.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new p1(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case x.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new V1(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case x.LongPolling:return new g2(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${c}.`)}}_startTransport(c,a){var s=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=this.features.reconnect?function(){var i=(0,p.Z)(function*(n){let t=!1;if(s.features.reconnect){try{s.features.disconnected(),yield s.transport.connect(c,a),yield s.features.resend()}catch{t=!0}t&&s._stopConnection(n)}else s._stopConnection(n)});return function(n){return i.apply(this,arguments)}}():i=>this._stopConnection(i),this.transport.connect(c,a)}_resolveTransportOrError(c,a,s,i){const n=x[c.transport];if(null==n)return this._logger.log(l.Debug,`Skipping transport '${c.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${c.transport}' because it is not supported by this client.`);if(!function L2(r,c){return!r||0!=(c&r)}(a,n))return this._logger.log(l.Debug,`Skipping transport '${x[n]}' because it was disabled by the client.`),new s1(`'${x[n]}' is disabled by the client.`,n);if(!(c.transferFormats.map(f=>S[f]).indexOf(s)>=0))return this._logger.log(l.Debug,`Skipping transport '${x[n]}' because it does not support the requested transfer format '${S[s]}'.`),new Error(`'${x[n]}' does not support ${S[s]}.`);if(n===x.WebSockets&&!this._options.WebSocket||n===x.ServerSentEvents&&!this._options.EventSource)return this._logger.log(l.Debug,`Skipping transport '${x[n]}' because it is not supported in your environment.'`),new e1(`'${x[n]}' is not supported in your environment.`,n);this._logger.log(l.Debug,`Selecting transport '${x[n]}'.`);try{return this.features.reconnect=n===x.WebSockets?i:void 0,this._constructTransport(n)}catch(f){return f}}_isITransport(c){return c&&"object"==typeof c&&"connect"in c}_stopConnection(c){if(this._logger.log(l.Debug,`HttpConnection.stopConnection(${c}) called while in state ${this._connectionState}.`),this.transport=void 0,c=this._stopError||c,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(l.Warning,`Call to HttpConnection.stopConnection(${c}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${c}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),c?this._logger.log(l.Error,`Connection disconnected with error '${c}'.`):this._logger.log(l.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(a=>{this._logger.log(l.Error,`TransportSendQueue.stop() threw error '${a}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(c)}catch(a){this._logger.log(l.Error,`HttpConnection.onclose(${c}) threw error '${a}'.`)}}}else this._logger.log(l.Debug,`Call to HttpConnection.stopConnection(${c}) was ignored because the connection is already in the disconnected state.`)}_resolveUrl(c){if(0===c.lastIndexOf("https://",0)||0===c.lastIndexOf("http://",0))return c;if(!g.isBrowser)throw new Error(`Cannot resolve '${c}'.`);const a=window.document.createElement("a");return a.href=c,this._logger.log(l.Information,`Normalizing '${c}' to '${a.href}'.`),a.href}_resolveNegotiateUrl(c){const a=new URL(c);a.pathname.endsWith("/")?a.pathname+="negotiate":a.pathname+="/negotiate";const s=new URLSearchParams(a.searchParams);return s.has("negotiateVersion")||s.append("negotiateVersion",this._negotiateVersion.toString()),s.has("useStatefulReconnect")?"true"===s.get("useStatefulReconnect")&&(this._options._useStatefulReconnect=!0):!0===this._options._useStatefulReconnect&&s.append("useStatefulReconnect","true"),a.search=s.toString(),a.toString()}}class q{constructor(c){this._transport=c,this._buffer=[],this._executing=!0,this._sendBufferedData=new I,this._transportResult=new I,this._sendLoopPromise=this._sendLoop()}send(c){return this._bufferData(c),this._transportResult||(this._transportResult=new I),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(c){if(this._buffer.length&&typeof this._buffer[0]!=typeof c)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof c}`);this._buffer.push(c),this._sendBufferedData.resolve()}_sendLoop(){var c=this;return(0,p.Z)(function*(){for(;;){if(yield c._sendBufferedData.promise,!c._executing){c._transportResult&&c._transportResult.reject("Connection stopped.");break}c._sendBufferedData=new I;const a=c._transportResult;c._transportResult=void 0;const s="string"==typeof c._buffer[0]?c._buffer.join(""):q._concatBuffers(c._buffer);c._buffer.length=0;try{yield c._transport.send(s),a.resolve()}catch(i){a.reject(i)}}})()}static _concatBuffers(c){const a=c.map(n=>n.byteLength).reduce((n,t)=>n+t),s=new Uint8Array(a);let i=0;for(const n of c)s.set(new Uint8Array(n),i),i+=n.byteLength;return s.buffer}}class I{constructor(){this.promise=new Promise((c,a)=>[this._resolver,this._rejecter]=[c,a])}resolve(){this._resolver()}reject(c){this._rejecter(c)}}class b{static write(c){return`${c}${b.RecordSeparator}`}static parse(c){if(c[c.length-1]!==b.RecordSeparator)throw new Error("Message is incomplete.");const a=c.split(b.RecordSeparator);return a.pop(),a}}b.RecordSeparatorCode=30,b.RecordSeparator=String.fromCharCode(b.RecordSeparatorCode);class C1{writeHandshakeRequest(c){return b.write(JSON.stringify(c))}parseHandshakeResponse(c){let a,s;if(B(c)){const f=new Uint8Array(c),h=f.indexOf(b.RecordSeparatorCode);if(-1===h)throw new Error("Message is incomplete.");const H=h+1;a=String.fromCharCode.apply(null,Array.prototype.slice.call(f.slice(0,H))),s=f.byteLength>H?f.slice(H).buffer:null}else{const f=c,h=f.indexOf(b.RecordSeparator);if(-1===h)throw new Error("Message is incomplete.");const H=h+1;a=f.substring(0,H),s=f.length>H?f.substring(H):null}const i=b.parse(a),n=JSON.parse(i[0]);if(n.type)throw new Error("Expected a handshake response from the server.");return[s,n]}}var z=(()=>{return(r=z||(z={}))[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence",z;var r})();class d1{constructor(){this.observers=[]}next(c){for(const a of this.observers)a.next(c)}error(c){for(const a of this.observers)a.error&&a.error(c)}complete(){for(const c of this.observers)c.complete&&c.complete()}subscribe(c){return this.observers.push(c),new n1(this,c)}}class u1{constructor(c,a,s){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=c,this._connection=a,this._bufferSize=s}_send(c){var a=this;return(0,p.Z)(function*(){const s=a._protocol.writeMessage(c);let i=Promise.resolve();if(a._isInvocationMessage(c)){a._totalMessageCount++;let n=()=>{},t=()=>{};B(s)?a._bufferedByteCount+=s.byteLength:a._bufferedByteCount+=s.length,a._bufferedByteCount>=a._bufferSize&&(i=new Promise((f,h)=>{n=f,t=h})),a._messages.push(new g1(s,a._totalMessageCount,n,t))}try{a._reconnectInProgress||(yield a._connection.send(s))}catch{a._disconnected()}yield i})()}_ack(c){let a=-1;for(let s=0;s<this._messages.length;s++){const i=this._messages[s];if(i._id<=c.sequenceId)a=s,B(i._message)?this._bufferedByteCount-=i._message.byteLength:this._bufferedByteCount-=i._message.length,i._resolver();else{if(!(this._bufferedByteCount<this._bufferSize))break;i._resolver()}}-1!==a&&(this._messages=this._messages.slice(a+1))}_shouldProcessMessage(c){if(this._waitForSequenceMessage)return c.type===z.Sequence&&(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(c))return!0;const a=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,a<=this._latestReceivedSequenceId?(a===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=a,this._ackTimer(),!0)}_resetSequence(c){c.sequenceId>this._nextReceivingSequenceId?this._connection.stop(new Error("Sequence ID greater than amount of messages we've received.")):this._nextReceivingSequenceId=c.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}_resend(){var c=this;return(0,p.Z)(function*(){const a=0!==c._messages.length?c._messages[0]._id:c._totalMessageCount+1;yield c._connection.send(c._protocol.writeMessage({type:z.Sequence,sequenceId:a}));const s=c._messages;for(const i of s)yield c._connection.send(i._message);c._reconnectInProgress=!1})()}_dispose(c){c??(c=new Error("Unable to reconnect to server."));for(const a of this._messages)a._rejector(c)}_isInvocationMessage(c){switch(c.type){case z.Invocation:case z.StreamItem:case z.Completion:case z.StreamInvocation:case z.CancelInvocation:return!0;case z.Close:case z.Sequence:case z.Ping:case z.Ack:return!1}}_ackTimer(){var c=this;void 0===this._ackTimerHandle&&(this._ackTimerHandle=setTimeout((0,p.Z)(function*(){try{c._reconnectInProgress||(yield c._connection.send(c._protocol.writeMessage({type:z.Ack,sequenceId:c._latestReceivedSequenceId})))}catch{}clearTimeout(c._ackTimerHandle),c._ackTimerHandle=void 0}),1e3))}}class g1{constructor(c,a,s,i){this._message=c,this._id=a,this._resolver=s,this._rejector=i}}var u=(()=>{return(r=u||(u={})).Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting",u;var r})();class j{static create(c,a,s,i,n,t,f){return new j(c,a,s,i,n,t,f)}constructor(c,a,s,i,n,t,f){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(l.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},L.isRequired(c,"connection"),L.isRequired(a,"logger"),L.isRequired(s,"protocol"),this.serverTimeoutInMilliseconds=n??3e4,this.keepAliveIntervalInMilliseconds=t??15e3,this._statefulReconnectBufferSize=f??1e5,this._logger=a,this._protocol=s,this.connection=c,this._reconnectPolicy=i,this._handshakeProtocol=new C1,this.connection.onreceive=h=>this._processIncomingData(h),this.connection.onclose=h=>this._connectionClosed(h),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=u.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:z.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(c){if(this._connectionState!==u.Disconnected&&this._connectionState!==u.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!c)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=c}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){var c=this;return(0,p.Z)(function*(){if(c._connectionState!==u.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));c._connectionState=u.Connecting,c._logger.log(l.Debug,"Starting HubConnection.");try{yield c._startInternal(),g.isBrowser&&window.document.addEventListener("freeze",c._freezeEventListener),c._connectionState=u.Connected,c._connectionStarted=!0,c._logger.log(l.Debug,"HubConnection connected successfully.")}catch(a){return c._connectionState=u.Disconnected,c._logger.log(l.Debug,`HubConnection failed to start successfully because of error '${a}'.`),Promise.reject(a)}})()}_startInternal(){var c=this;return(0,p.Z)(function*(){c._stopDuringStartError=void 0,c._receivedHandshakeResponse=!1;const a=new Promise((s,i)=>{c._handshakeResolver=s,c._handshakeRejecter=i});yield c.connection.start(c._protocol.transferFormat);try{let s=c._protocol.version;c.connection.features.reconnect||(s=1);const i={protocol:c._protocol.name,version:s};if(c._logger.log(l.Debug,"Sending handshake request."),yield c._sendMessage(c._handshakeProtocol.writeHandshakeRequest(i)),c._logger.log(l.Information,`Using HubProtocol '${c._protocol.name}'.`),c._cleanupTimeout(),c._resetTimeoutPeriod(),c._resetKeepAliveInterval(),yield a,c._stopDuringStartError)throw c._stopDuringStartError;!!c.connection.features.reconnect&&(c._messageBuffer=new u1(c._protocol,c.connection,c._statefulReconnectBufferSize),c.connection.features.disconnected=c._messageBuffer._disconnected.bind(c._messageBuffer),c.connection.features.resend=()=>{if(c._messageBuffer)return c._messageBuffer._resend()}),c.connection.features.inherentKeepAlive||(yield c._sendMessage(c._cachedPingMessage))}catch(s){throw c._logger.log(l.Debug,`Hub handshake failed with error '${s}' during start(). Stopping HubConnection.`),c._cleanupTimeout(),c._cleanupPingTimer(),yield c.connection.stop(s),s}})()}stop(){var c=this;return(0,p.Z)(function*(){const a=c._startPromise;c.connection.features.reconnect=!1,c._stopPromise=c._stopInternal(),yield c._stopPromise;try{yield a}catch{}})()}_stopInternal(c){if(this._connectionState===u.Disconnected)return this._logger.log(l.Debug,`Call to HubConnection.stop(${c}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===u.Disconnecting)return this._logger.log(l.Debug,`Call to HttpConnection.stop(${c}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const a=this._connectionState;return this._connectionState=u.Disconnecting,this._logger.log(l.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(l.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(a===u.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=c||new w("The connection was stopped before the hub handshake could complete."),this.connection.stop(c))}_sendCloseMessage(){var c=this;return(0,p.Z)(function*(){try{yield c._sendWithProtocol(c._createCloseMessage())}catch{}})()}stream(c,...a){const[s,i]=this._replaceStreamingParams(a),n=this._createStreamInvocation(c,a,i);let t;const f=new d1;return f.cancelCallback=()=>{const h=this._createCancelInvocation(n.invocationId);return delete this._callbacks[n.invocationId],t.then(()=>this._sendWithProtocol(h))},this._callbacks[n.invocationId]=(h,H)=>{H?f.error(H):h&&(h.type===z.Completion?h.error?f.error(new Error(h.error)):f.complete():f.next(h.item))},t=this._sendWithProtocol(n).catch(h=>{f.error(h),delete this._callbacks[n.invocationId]}),this._launchStreams(s,t),f}_sendMessage(c){return this._resetKeepAliveInterval(),this.connection.send(c)}_sendWithProtocol(c){return this._messageBuffer?this._messageBuffer._send(c):this._sendMessage(this._protocol.writeMessage(c))}send(c,...a){const[s,i]=this._replaceStreamingParams(a),n=this._sendWithProtocol(this._createInvocation(c,a,!0,i));return this._launchStreams(s,n),n}invoke(c,...a){const[s,i]=this._replaceStreamingParams(a),n=this._createInvocation(c,a,!1,i);return new Promise((f,h)=>{this._callbacks[n.invocationId]=(v,M)=>{M?h(M):v&&(v.type===z.Completion?v.error?h(new Error(v.error)):f(v.result):h(new Error(`Unexpected message type: ${v.type}`)))};const H=this._sendWithProtocol(n).catch(v=>{h(v),delete this._callbacks[n.invocationId]});this._launchStreams(s,H)})}on(c,a){!c||!a||(c=c.toLowerCase(),this._methods[c]||(this._methods[c]=[]),-1===this._methods[c].indexOf(a)&&this._methods[c].push(a))}off(c,a){if(!c)return;c=c.toLowerCase();const s=this._methods[c];if(s)if(a){const i=s.indexOf(a);-1!==i&&(s.splice(i,1),0===s.length&&delete this._methods[c])}else delete this._methods[c]}onclose(c){c&&this._closedCallbacks.push(c)}onreconnecting(c){c&&this._reconnectingCallbacks.push(c)}onreconnected(c){c&&this._reconnectedCallbacks.push(c)}_processIncomingData(c){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(c=this._processHandshakeResponse(c),this._receivedHandshakeResponse=!0),c){const a=this._protocol.parseMessages(c,this._logger);for(const s of a)if(!this._messageBuffer||this._messageBuffer._shouldProcessMessage(s))switch(s.type){case z.Invocation:this._invokeClientMethod(s);break;case z.StreamItem:case z.Completion:{const i=this._callbacks[s.invocationId];if(i){s.type===z.Completion&&delete this._callbacks[s.invocationId];try{i(s)}catch(n){this._logger.log(l.Error,`Stream callback threw error: ${p2(n)}`)}}break}case z.Ping:break;case z.Close:{this._logger.log(l.Information,"Close message received from server.");const i=s.error?new Error("Server returned an error on close: "+s.error):void 0;!0===s.allowReconnect?this.connection.stop(i):this._stopPromise=this._stopInternal(i);break}case z.Ack:this._messageBuffer&&this._messageBuffer._ack(s);break;case z.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(s);break;default:this._logger.log(l.Warning,`Invalid message type: ${s.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(c){let a,s;try{[s,a]=this._handshakeProtocol.parseHandshakeResponse(c)}catch(i){const n="Error parsing handshake response: "+i;this._logger.log(l.Error,n);const t=new Error(n);throw this._handshakeRejecter(t),t}if(a.error){const i="Server returned handshake error: "+a.error;this._logger.log(l.Error,i);const n=new Error(i);throw this._handshakeRejecter(n),n}return this._logger.log(l.Debug,"Server handshake complete."),this._handshakeResolver(),s}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){var c=this;if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){let a=this._nextKeepAlive-(new Date).getTime();a<0&&(a=0),this._pingServerHandle=setTimeout((0,p.Z)(function*(){if(c._connectionState===u.Connected)try{yield c._sendMessage(c._cachedPingMessage)}catch{c._cleanupPingTimer()}}),a)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(c){var a=this;return(0,p.Z)(function*(){const s=c.target.toLowerCase(),i=a._methods[s];if(!i)return a._logger.log(l.Warning,`No client method with the name '${s}' found.`),void(c.invocationId&&(a._logger.log(l.Warning,`No result given for '${s}' method and invocation ID '${c.invocationId}'.`),yield a._sendWithProtocol(a._createCompletionMessage(c.invocationId,"Client didn't provide a result.",null))));const n=i.slice(),t=!!c.invocationId;let f,h,H;for(const v of n)try{const M=f;f=yield v.apply(a,c.arguments),t&&f&&M&&(a._logger.log(l.Error,`Multiple results provided for '${s}'. Sending error to server.`),H=a._createCompletionMessage(c.invocationId,"Client provided multiple results.",null)),h=void 0}catch(M){h=M,a._logger.log(l.Error,`A callback for the method '${s}' threw error '${M}'.`)}H?yield a._sendWithProtocol(H):t?(h?H=a._createCompletionMessage(c.invocationId,`${h}`,null):void 0!==f?H=a._createCompletionMessage(c.invocationId,null,f):(a._logger.log(l.Warning,`No result given for '${s}' method and invocation ID '${c.invocationId}'.`),H=a._createCompletionMessage(c.invocationId,"Client didn't provide a result.",null)),yield a._sendWithProtocol(H)):f&&a._logger.log(l.Error,`Result given for '${s}' method but server is not expecting a result.`)})()}_connectionClosed(c){this._logger.log(l.Debug,`HubConnection.connectionClosed(${c}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||c||new w("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(c||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===u.Disconnecting?this._completeClose(c):this._connectionState===u.Connected&&this._reconnectPolicy?this._reconnect(c):this._connectionState===u.Connected&&this._completeClose(c)}_completeClose(c){if(this._connectionStarted){this._connectionState=u.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(c??new Error("Connection closed.")),this._messageBuffer=void 0),g.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(a=>a.apply(this,[c]))}catch(a){this._logger.log(l.Error,`An onclose callback called with error '${c}' threw error '${a}'.`)}}}_reconnect(c){var a=this;return(0,p.Z)(function*(){const s=Date.now();let i=0,n=void 0!==c?c:new Error("Attempting to reconnect due to a unknown error."),t=a._getNextRetryDelay(i++,0,n);if(null===t)return a._logger.log(l.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void a._completeClose(c);if(a._connectionState=u.Reconnecting,a._logger.log(l.Information,c?`Connection reconnecting because of error '${c}'.`:"Connection reconnecting."),0!==a._reconnectingCallbacks.length){try{a._reconnectingCallbacks.forEach(f=>f.apply(a,[c]))}catch(f){a._logger.log(l.Error,`An onreconnecting callback called with error '${c}' threw error '${f}'.`)}if(a._connectionState!==u.Reconnecting)return void a._logger.log(l.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==t;){if(a._logger.log(l.Information,`Reconnect attempt number ${i} will start in ${t} ms.`),yield new Promise(f=>{a._reconnectDelayHandle=setTimeout(f,t)}),a._reconnectDelayHandle=void 0,a._connectionState!==u.Reconnecting)return void a._logger.log(l.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(yield a._startInternal(),a._connectionState=u.Connected,a._logger.log(l.Information,"HubConnection reconnected successfully."),0!==a._reconnectedCallbacks.length)try{a._reconnectedCallbacks.forEach(f=>f.apply(a,[a.connection.connectionId]))}catch(f){a._logger.log(l.Error,`An onreconnected callback called with connectionId '${a.connection.connectionId}; threw error '${f}'.`)}return}catch(f){if(a._logger.log(l.Information,`Reconnect attempt failed because of error '${f}'.`),a._connectionState!==u.Reconnecting)return a._logger.log(l.Debug,`Connection moved to the '${a._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(a._connectionState===u.Disconnecting&&a._completeClose());n=f instanceof Error?f:new Error(f.toString()),t=a._getNextRetryDelay(i++,Date.now()-s,n)}}a._logger.log(l.Information,`Reconnect retries have been exhausted after ${Date.now()-s} ms and ${i} failed attempts. Connection disconnecting.`),a._completeClose()})()}_getNextRetryDelay(c,a,s){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:a,previousRetryCount:c,retryReason:s})}catch(i){return this._logger.log(l.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${c}, ${a}) threw error '${i}'.`),null}}_cancelCallbacksWithError(c){const a=this._callbacks;this._callbacks={},Object.keys(a).forEach(s=>{const i=a[s];try{i(null,c)}catch(n){this._logger.log(l.Error,`Stream 'error' callback called with '${c}' threw error: ${p2(n)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(c,a,s,i){if(s)return 0!==i.length?{arguments:a,streamIds:i,target:c,type:z.Invocation}:{arguments:a,target:c,type:z.Invocation};{const n=this._invocationId;return this._invocationId++,0!==i.length?{arguments:a,invocationId:n.toString(),streamIds:i,target:c,type:z.Invocation}:{arguments:a,invocationId:n.toString(),target:c,type:z.Invocation}}}_launchStreams(c,a){if(0!==c.length){a||(a=Promise.resolve());for(const s in c)c[s].subscribe({complete:()=>{a=a.then(()=>this._sendWithProtocol(this._createCompletionMessage(s)))},error:i=>{let n;n=i instanceof Error?i.message:i&&i.toString?i.toString():"Unknown error",a=a.then(()=>this._sendWithProtocol(this._createCompletionMessage(s,n)))},next:i=>{a=a.then(()=>this._sendWithProtocol(this._createStreamItemMessage(s,i)))}})}}_replaceStreamingParams(c){const a=[],s=[];for(let i=0;i<c.length;i++){const n=c[i];if(this._isObservable(n)){const t=this._invocationId;this._invocationId++,a[t]=n,s.push(t.toString()),c.splice(i,1)}}return[a,s]}_isObservable(c){return c&&c.subscribe&&"function"==typeof c.subscribe}_createStreamInvocation(c,a,s){const i=this._invocationId;return this._invocationId++,0!==s.length?{arguments:a,invocationId:i.toString(),streamIds:s,target:c,type:z.StreamInvocation}:{arguments:a,invocationId:i.toString(),target:c,type:z.StreamInvocation}}_createCancelInvocation(c){return{invocationId:c,type:z.CancelInvocation}}_createStreamItemMessage(c,a){return{invocationId:c,item:a,type:z.StreamItem}}_createCompletionMessage(c,a,s){return a?{error:a,invocationId:c,type:z.Completion}:{invocationId:c,result:s,type:z.Completion}}_createCloseMessage(){return{type:z.Close}}}class S1{constructor(){this.name="json",this.version=2,this.transferFormat=S.Text}parseMessages(c,a){if("string"!=typeof c)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!c)return[];null===a&&(a=E.instance);const s=b.parse(c),i=[];for(const n of s){const t=JSON.parse(n);if("number"!=typeof t.type)throw new Error("Invalid payload.");switch(t.type){case z.Invocation:this._isInvocationMessage(t);break;case z.StreamItem:this._isStreamItemMessage(t);break;case z.Completion:this._isCompletionMessage(t);break;case z.Ping:case z.Close:break;case z.Ack:this._isAckMessage(t);break;case z.Sequence:this._isSequenceMessage(t);break;default:a.log(l.Information,"Unknown message type '"+t.type+"' ignored.");continue}i.push(t)}return i}writeMessage(c){return b.write(JSON.stringify(c))}_isInvocationMessage(c){this._assertNotEmptyString(c.target,"Invalid payload for Invocation message."),void 0!==c.invocationId&&this._assertNotEmptyString(c.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(c){if(this._assertNotEmptyString(c.invocationId,"Invalid payload for StreamItem message."),void 0===c.item)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(c){if(c.result&&c.error)throw new Error("Invalid payload for Completion message.");!c.result&&c.error&&this._assertNotEmptyString(c.error,"Invalid payload for Completion message."),this._assertNotEmptyString(c.invocationId,"Invalid payload for Completion message.")}_isAckMessage(c){if("number"!=typeof c.sequenceId)throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(c){if("number"!=typeof c.sequenceId)throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(c,a){if("string"!=typeof c||""===c)throw new Error(a)}}const N1={trace:l.Trace,debug:l.Debug,info:l.Information,information:l.Information,warn:l.Warning,warning:l.Warning,error:l.Error,critical:l.Critical,none:l.None};class b1{configureLogging(c){if(L.isRequired(c,"logging"),function N2(r){return void 0!==r.log}(c))this.logger=c;else if("string"==typeof c){const a=function Q(r){const c=N1[r.toLowerCase()];if(typeof c<"u")return c;throw new Error(`Unknown log level: ${r}`)}(c);this.logger=new W(a)}else this.logger=new W(c);return this}withUrl(c,a){return L.isRequired(c,"url"),L.isNotEmpty(c,"url"),this.url=c,this.httpConnectionOptions="object"==typeof a?{...this.httpConnectionOptions,...a}:{...this.httpConnectionOptions,transport:a},this}withHubProtocol(c){return L.isRequired(c,"protocol"),this.protocol=c,this}withAutomaticReconnect(c){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return this.reconnectPolicy=c?Array.isArray(c)?new l2(c):c:new l2,this}withServerTimeout(c){return L.isRequired(c,"milliseconds"),this._serverTimeoutInMilliseconds=c,this}withKeepAliveInterval(c){return L.isRequired(c,"milliseconds"),this._keepAliveIntervalInMilliseconds=c,this}withStatefulReconnect(c){return void 0===this.httpConnectionOptions&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=c?.bufferSize,this}build(){const c=this.httpConnectionOptions||{};if(void 0===c.logger&&(c.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const a=new M1(this.url,c);return j.create(a,this.logger||E.instance,this.protocol||new S1,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}var w1=o(92340);let b2=(()=>{class r{constructor(a){this.sharedService=a}startConnection(){this.hubConnection=(new b1).withUrl(`${w1.N.ChathubUrl}?userId=${this.sharedService.getUserId}`).withAutomaticReconnect().build(),this.hubConnection.start().then(()=>{console.log("Connection started")}).catch(a=>{}),this.hubConnection.onclose(a=>{this.startConnection()})}addNotificationListener(a){this.hubConnection.on("sendMessage",a)}stopConnection(){this.hubConnection&&this.hubConnection.stop().then(()=>console.log("Connection stopped"))}}return r.\u0275fac=function(a){return new(a||r)(e.LFG(d.F))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var w2=o(75304),F=o(59245);function k1(r,c){if(1&r){const a=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.mainPage())}),e._UZ(1,"img",21),e.qZA()}}function A1(r,c){1&r&&e._UZ(0,"i",22)}function y1(r,c){1&r&&e._UZ(0,"i",23)}function T1(r,c){1&r&&(e.TgZ(0,"span"),e._uU(1," > "),e.qZA())}function k2(r,c){if(1&r&&(e.TgZ(0,"div",24),e._uU(1),e.YNc(2,T1,2,0,"span",25),e._uU(3),e.qZA()),2&r){const a=e.oxw();e.xp6(1),e.hij(" ",a.titleOfPage," "),e.xp6(1),e.Q6J("ngIf",a.pagename),e.xp6(1),e.hij(" ",a.pagename.slice(1)," ")}}function P1(r,c){if(1&r){const a=e.EpF();e.TgZ(0,"li",28),e.NdJ("click",function(){const n=e.CHM(a).$implicit,t=e.oxw(2);return e.KtG(t.redirectToOrder(n))}),e.TgZ(1,"div",29)(2,"h6",30),e._uU(3),e.qZA()()()}if(2&r){const a=c.$implicit;e.xp6(3),e.Oqu(null==a?null:a.NotificationMessage)}}function B1(r,c){1&r&&(e.TgZ(0,"li"),e._uU(1,"No order for collection yet"),e.qZA())}function A2(r,c){if(1&r&&(e.TgZ(0,"ul",26),e.YNc(1,P1,4,1,"li",27),e.YNc(2,B1,2,0,"li",25),e.qZA()),2&r){const a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.notificationList),e.xp6(1),e.Q6J("ngIf",!a.notificationList.length)}}function R1(r,c){if(1&r){const a=e.EpF();e.TgZ(0,"li",33)(1,"div",34),e.NdJ("click",function(){const n=e.CHM(a).$implicit,t=e.oxw(2);return e.KtG(t.redirectTo(null==n?null:n.description))}),e._UZ(2,"img",35),e.TgZ(3,"h6",30),e._uU(4),e.qZA()()()}if(2&r){const a=c.$implicit;e.xp6(2),e.Q6J("src",null==a?null:a.imagePath,e.LSH),e.xp6(2),e.Oqu(null==a?null:a.translations)}}function D1(r,c){if(1&r&&(e.TgZ(0,"ul",31),e.YNc(1,R1,5,2,"li",32),e.qZA()),2&r){const a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.portalsList)}}const y2=function(r){return[r]};let F1=(()=>{class r{constructor(a,s,i,n,t,f,h,H){this.router=a,this.route=s,this.headerService=i,this.sharedService=n,this.generalService=t,this._subjectService=f,this.signalRService=h,this.commonService=H,this.sideNavToggled=new e.vpe,this.titleOfPage="",this.faBars=k.xiG,this.faArrowLeft=k.acZ,this.faBell=k.qmU,this.faArrowRight=k.eFW,this.menuStatus=!0,this.iscollapse=!1,this.marginleft=50,this.Pagetitle={},this.showTitle=!0,this.portalsList=[],this.orderId=0,this.subscription=new m.w0,this.notificationList=[],this.headerService.title.subscribe(v=>{this.titleOfPage=v}),this.pagename=this.router.url,a.events.subscribe(v=>{v instanceof C.m2&&(this.pagename="")}),this.getUserPortals()}ngOnInit(){if(this.fullName=localStorage.getItem("fullName"),this.fullName){const a=this.fullName?.split(" ");this.firstName=a[0],this.lastName=a[1]}this.receiveNotifications(),this.collectedOrder()}collectedOrder(){let a=this._subjectService.collectedOrder.subscribe(s=>{this.orderId=s.orderId,this.notificationList.length>0&&(this.notificationList=this.notificationList.filter(i=>+i.OrderId!==this.orderId))});this.subscription.add(a)}receiveNotifications(){let a=[];this.signalRService.startConnection(),this.signalRService.addNotificationListener(s=>{console.log("Received notification:",s),a.unshift(JSON.parse(s)),this.notificationList=this.removeDuplicates(a).filter(i=>+i.OrderId!==this.orderId)})}redirectToOrder(a){7003==a?.OrderType?this.commonService.NavigateToRoute("/collect/details/spare/",a?.OrderId):7002==a?.OrderType?this.commonService.NavigateToRoute("/collect/details/service/",a?.OrderId):7001==a?.OrderType&&this.commonService.NavigateToRoute("collect/details/payment/",a?.OrderId)}removeDuplicates(a){return a.reduce((s,i)=>(s.some(n=>n.OrderId===i.OrderId)||s.push(i),s),[])}getUserPortals(){this.generalService.getUserPortals().subscribe(a=>{this.portalsList=a.data})}redirectTo(a){window.location.replace(`${a}/login?token=${sessionStorage.getItem("token")}`)}mainPage(){1==this.sharedService.getRole?.roleId?(this.router.navigateByUrl("/opening-register"),this.headerService.setTitle("Opening Register")):this.router.navigateByUrl("/branches")}SideNavToggle(){this.menuStatus=!this.menuStatus,this.sideNavToggled.emit(this.menuStatus),this.iscollapse=0==this.iscollapse,this.marginleft=50==this.marginleft?0:50,window.innerWidth<600&&(this.iscollapse=!0),document.querySelectorAll("[dropdown]").forEach(s=>{s.setAttribute("container","body")})}onWindowResize(){window.innerWidth<600?(this.iscollapse=!0,this.marginleft=0,this.menuStatus=!1,this.sideNavToggled.emit(!1),this.showTitle=!1):(this.iscollapse=!1,this.marginleft=50,this.menuStatus=!0,this.showTitle=!0,this.sideNavToggled.emit(!0))}logout(){sessionStorage.removeItem("fullName"),this.router.navigateByUrl("/login")}ngOnDestroy(){this.signalRService.stopConnection(),console.log("destroy"),this.subscription.unsubscribe()}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(C.F0),e.Y36(C.gz),e.Y36(N.r),e.Y36(d.F),e.Y36(_.m),e.Y36(n2._),e.Y36(b2),e.Y36(w2.v))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-header"]],hostBindings:function(a,s){1&a&&e.NdJ("resize",function(n){return s.onWindowResize(n)},!1,e.Jf7)},inputs:{titleOfPage:"titleOfPage"},outputs:{sideNavToggled:"sideNavToggled"},decls:29,vars:21,consts:[[1,"navbar","navbar-expand","px-2"],["class","navbar-brand px-1",3,"click",4,"ngIf"],[1,"btn","btn-danger","btn-circle",3,"click"],["class","fa-solid fa-arrow-left",4,"ngIf"],["class","fa-solid fa-arrow-right",4,"ngIf"],[1,"navbar-collapse","px-3"],["class","page-Tile",4,"ngIf"],[1,"navbar-nav","ms-auto","d-flex","flex-row","align-items-center"],[1,"cursor-pointer"],["dropdown","","container","body","placement","left bottom"],["dropdownToggle","","id","button-basic2","aria-controls","dropdown-basic2",1,"fas","fa-bell","font-24","position-relative"],[1,"notification-badge"],["style","width:220px","id","dropdown-basic2","class","dropdown-menu-right dropdown-menu d-flex gap-1 flex-column p-2","role","menu","aria-labelledby","button-basic2",4,"dropdownMenu"],["src","/assets/images/navicon/grid.svg","dropdownToggle","","id","button-basic","aria-controls","dropdown-basic"],["style","width:220px","id","dropdown-basic","class","dropdown-menu-right dropdown-menu d-flex gap-4 flex-column p-2","role","menu","aria-labelledby","button-basic",4,"dropdownMenu"],[1,"nav-item","dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"char-name"],[1,"dropdown-menu"],["routerLink","/profile",1,"dropdown-item"],[1,"navbar-brand","px-1",3,"click"],["width","105","height","17.5","src","assets/images/markazia.png","alt",""],[1,"fa-solid","fa-arrow-left"],[1,"fa-solid","fa-arrow-right"],[1,"page-Tile"],[4,"ngIf"],["id","dropdown-basic2","role","menu","aria-labelledby","button-basic2",1,"dropdown-menu-right","dropdown-menu","d-flex","gap-1","flex-column","p-2",2,"width","220px"],["class","cursor-pointer","role","menuitem",3,"click",4,"ngFor","ngForOf"],["role","menuitem",1,"cursor-pointer",3,"click"],[1,"d-flex","align-items-center","gap-2"],[1,"fw-500","m-0"],["id","dropdown-basic","role","menu","aria-labelledby","button-basic",1,"dropdown-menu-right","dropdown-menu","d-flex","gap-4","flex-column","p-2",2,"width","220px"],["class","cursor-pointer","role","menuitem",4,"ngFor","ngForOf"],["role","menuitem",1,"cursor-pointer"],[1,"d-flex","align-items-center","gap-2",3,"click"],[3,"src"]],template:function(a,s){1&a&&(e.TgZ(0,"nav",0),e.YNc(1,k1,2,0,"a",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return s.SideNavToggle()}),e.YNc(3,A1,1,0,"i",3),e.YNc(4,y1,1,0,"i",4),e.qZA(),e.TgZ(5,"div",5),e.YNc(6,k2,4,3,"div",6),e.qZA(),e.TgZ(7,"ul",7)(8,"li",8)(9,"div",9)(10,"i",10)(11,"span",11),e._uU(12),e.qZA()(),e.YNc(13,A2,3,2,"ul",12),e.qZA()(),e.TgZ(14,"li",8)(15,"div",9),e._UZ(16,"img",13),e.YNc(17,D1,2,1,"ul",14),e.qZA()(),e.TgZ(18,"li",15)(19,"a",16)(20,"span",17),e._uU(21),e.ALo(22,"slice"),e.ALo(23,"slice"),e.qZA(),e._uU(24),e.qZA(),e.TgZ(25,"ul",18)(26,"li")(27,"a",19),e._uU(28,"My Profile"),e.qZA()()()()()()),2&a&&(e.xp6(1),e.Q6J("ngIf",!s.iscollapse),e.xp6(1),e.Udp("margin-left",e.VKq(19,y2,s.marginleft),"px"),e.xp6(1),e.Q6J("ngIf",!s.iscollapse),e.xp6(1),e.Q6J("ngIf",s.iscollapse),e.xp6(2),e.Q6J("ngIf",s.showTitle),e.xp6(6),e.Oqu(s.notificationList.length),e.xp6(9),e.AsE(" ",e.Dn7(22,11,s.firstName,0,1),"",e.Dn7(23,15,s.lastName,0,1)," "),e.xp6(3),e.AsE(" ",s.firstName," ",s.lastName," "))},dependencies:[V.sg,V.O5,C.rH,F.Hz,F.Mq,F.TO,V.OU],styles:[".notification-badge[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;padding:3px;height:18px;width:18px;background-color:var(--primary);color:#fff;font-size:12px;border-radius:50%;display:flex;align-items:center;justify-content:center}nav[_ngcontent-%COMP%]{height:100%}.side-nav-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:1.5rem;cursor:pointer;margin-left:50px}.side-nav-button[_ngcontent-%COMP%]:hover{background-color:#aba8a8;border-radius:30%}.btn-circle[_ngcontent-%COMP%]{width:30px;height:30px;text-align:center;padding:6px 0;font-size:12px;line-height:1.428571429;border-radius:15px;background:#dc3545;box-shadow:0 10px 20px #0000001a;transition:margin .25s ease-in}.page-Tile[_ngcontent-%COMP%]{font-family:Kumbh Sans;font-style:normal;font-weight:700;font-size:22px;line-height:28px;color:#000;text-transform:capitalize}.userlogo[_ngcontent-%COMP%]{font-family:Kumbh Sans;font-style:normal;font-weight:600;font-size:14px;line-height:17px;color:#1b212d}.navbar-brand[_ngcontent-%COMP%]{margin-left:50px;cursor:pointer}.navbar[_ngcontent-%COMP%]{background:#ffffff;border:.5px solid #c4cdd5;box-shadow:0 4px 5px #68696a1a;border-radius:8px 8px 0 0}.nav-link[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#000;padding:5px 15px}.char-name[_ngcontent-%COMP%]{background-color:#49a1bb;width:38px;height:38px;display:inline-block;border-radius:50%;font-weight:600;font-size:14px;text-align:center;padding:8px;margin:0 5px;text-transform:uppercase;color:#fff}.navbar-nav[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{padding:0;border:0px}.dropdown-item[_ngcontent-%COMP%]{border:1px solid #ddd!important;padding:10px!important}"]}),r})();var J=o(42953);function T2(r,c){if(1&r){const a=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"div",2),e._UZ(3,"i",3),e.TgZ(4,"h4"),e._uU(5," The session time will end in 15 min "),e.qZA()()(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.activeModal.close("Close click"))}),e._uU(8,"Ok"),e.qZA()()()}}function E1(r,c){if(1&r){const a=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"div",2),e._UZ(3,"i",3),e.TgZ(4,"h4"),e._uU(5," Session Timeout ! You Cant Collect or Close the Session, You will be logged out now... "),e.qZA()()(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.closeSession())}),e._uU(8," Close register"),e.qZA()()()}}let P2=(()=>{class r{constructor(a,s,i){this.activeModal=a,this.modalService=s,this.router=i,this.semdToConfirm=new e.vpe}confirm(){this.semdToConfirm.emit()}closeSession(){localStorage.setItem("closeSession","yes"),this.modalService.dismissAll(),this.router.navigateByUrl("/close-register"),window.location.reload()}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(J.Kz),e.Y36(J.FF),e.Y36(C.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-modal-close-session"]],inputs:{type:"type",minute:"minute"},outputs:{semdToConfirm:"semdToConfirm"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"modal-body"],[1,"message"],[1,"fa-solid","fa-triangle-exclamation"],[1,"btns-group"],["type","button",1,"btn","btn-save",3,"click"]],template:function(a,s){1&a&&(e.YNc(0,T2,9,0,"div",0),e.YNc(1,E1,9,0,"div",0)),2&a&&(e.Q6J("ngIf",1==s.type),e.xp6(1),e.Q6J("ngIf",2==s.type))},dependencies:[V.O5],styles:[".message[_ngcontent-%COMP%]{text-align:center;padding:30px 50px}.message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:80px;color:#dc3545;margin-bottom:30px}.btn-save[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btns-group[_ngcontent-%COMP%]{margin:10px;justify-content:center}.btns-group[_ngcontent-%COMP%]{border-top:1px solid #ddd;padding-top:15px}"]}),r})();var B2=o(39300),U1=o(80529);let I1=(()=>{class r{constructor(a,s){this.http=a,this.sharedService=s,this.apiUrl=this.sharedService.getUrl}LogoutUser(a){return this.http.post(this.apiUrl+`User/Logout?userId=${a}`,{},this.sharedService.getHeaders())}}return r.\u0275fac=function(a){return new(a||r)(e.LFG(U1.eN),e.LFG(d.F))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var R2=o(45832),_1=o(15070),O1=o(79345);function W1(r,c){if(1&r&&(e.TgZ(0,"div",6)(1,"p",7),e._uU(2," Session Id "),e.TgZ(3,"span"),e._uU(4),e.qZA()(),e.TgZ(5,"p",7),e._uU(6," Opening At "),e.TgZ(7,"span"),e._uU(8),e.ALo(9,"date"),e.qZA()()()),2&r){const a=e.oxw();e.xp6(4),e.hij(" ",a.sessionId," "),e.xp6(4),e.hij(" ",e.xi3(9,2,a.registerSessionCreatedAt,"short")," ")}}const D2=function(){return{cursor:"default"}},X=function(){return{cursor:"pointer"}};function G1(r,c){if(1&r){const a=e.EpF();e.ynx(0),e.TgZ(1,"button",16,17),e.NdJ("click",function(){const n=e.CHM(a).$implicit,t=e.oxw(5);return e.KtG(t.onSelectMenuCashier(null==n?null:n.title))}),e._UZ(3,"img",18),e.TgZ(4,"span"),e._uU(5),e.qZA()(),e.BQk()}if(2&r){const a=c.$implicit;e.MAs(2),e.xp6(1),e.Q6J("ngStyle",!a.canClick&&e.DdM(6,D2)||e.DdM(7,X))("routerLink",a.url)("disabled",!a.canClick)("hidden",!a.canView),e.xp6(2),e.Q6J("src",a.icon2,e.LSH),e.xp6(2),e.hij(" ",a.title," ")}}function $1(r,c){if(1&r&&(e.TgZ(0,"ul",15),e.YNc(1,G1,6,8,"ng-container",4),e.qZA()),2&r){const a=e.oxw(2),s=a.index,i=a.$implicit;e.MGl("id","dropdown-basic",s,""),e.uIk("aria-labelledby","button-basic"+s),e.xp6(1),e.Q6J("ngForOf",null==i?null:i.items)}}function Z1(r,c){if(1&r&&(e.ynx(0),e.TgZ(1,"div",10)(2,"button",11),e._UZ(3,"img",12),e._uU(4),e._UZ(5,"img",13),e.qZA(),e.YNc(6,$1,2,3,"ul",14),e.qZA(),e.BQk()),2&r){const a=e.oxw(),s=a.index,i=a.$implicit;e.xp6(2),e.MGl("id","button-basic",s,""),e.uIk("aria-controls","dropdown-basic"+s),e.xp6(2),e.hij(" ",null==i?null:i.menuItem," ")}}function q1(r,c){if(1&r&&(e.ynx(0),e.YNc(1,Z1,7,3,"ng-container",9),e.BQk()),2&r){const a=c.$implicit;e.xp6(1),e.Q6J("ngIf",null==a?null:a.viewPermission)}}const K=function(r){return{"nav-list-open":r}};function j1(r,c){if(1&r&&(e.TgZ(0,"ul",8),e.YNc(1,q1,2,1,"ng-container",4),e.qZA()),2&r){const a=e.oxw();e.Q6J("ngClass",e.VKq(2,K,a.sideNavStatus)),e.xp6(1),e.Q6J("ngForOf",a.userMenu)}}const Q1=function(r){return{exact:r}};function J1(r,c){if(1&r){const a=e.EpF();e.ynx(0),e.TgZ(1,"button",24,17),e.NdJ("click",function(){const n=e.CHM(a).$implicit,t=e.oxw(3);return e.KtG(t.onSelectMenuCashier(null==n?null:n.title))}),e._UZ(3,"img",18),e.TgZ(4,"span"),e._uU(5),e.qZA()(),e.BQk()}if(2&r){const a=c.$implicit,s=e.MAs(2);e.xp6(1),e.Q6J("ngStyle",!a.canClick&&e.DdM(7,D2)||e.DdM(8,X))("routerLink",a.url)("routerLinkActiveOptions",e.VKq(9,Q1,17==(null==a?null:a.menuItemId)))("disabled",!a.canClick)("hidden",!a.canView),e.xp6(2),e.Q6J("src",s.isActive?a.icon2:a.icon,e.LSH),e.xp6(2),e.hij(" ",a.title," ")}}function F2(r,c){if(1&r&&(e.ynx(0),e.TgZ(1,"div",19)(2,"div",20),e._UZ(3,"img",12),e.TgZ(4,"h6",21),e._uU(5),e.qZA(),e._UZ(6,"img",22),e.qZA(),e.TgZ(7,"ul",23),e.YNc(8,J1,6,11,"ng-container",4),e.qZA()(),e.BQk()),2&r){const a=e.oxw().$implicit;e.xp6(5),e.Oqu(null==a?null:a.menuItem),e.xp6(3),e.Q6J("ngForOf",null==a?null:a.items)}}function X1(r,c){if(1&r&&(e.ynx(0),e.YNc(1,F2,9,2,"ng-container",9),e.BQk()),2&r){const a=c.$implicit;e.xp6(1),e.Q6J("ngIf",null==a?null:a.viewPermission)}}function K1(r,c){if(1&r){const a=e.EpF();e.TgZ(0,"div",25)(1,"ul",26)(2,"li",27),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.logout())}),e._UZ(3,"i",28),e._uU(4,"Back To Portal "),e.qZA(),e.TgZ(5,"span",29),e._uU(6," Version 3.0.0 "),e.qZA()()()}}let Y1=(()=>{class r{constructor(a,s,i,n,t,f,h,H,v,M,y){this.router=a,this.sharedService=s,this.modalService=i,this.logoutService=n,this.openregisterService=t,this.closeRegisterService=f,this.GeneralService=h,this._loginService=H,this.datePipe=v,this._commonService=M,this._subjectService=y,this.sideNavStatus=!0,this.sideNavToggled=new e.vpe,this.titleOfPage=new e.vpe,this.navList=[],this.userMenu=[],this.toggleCaretIcon=!1}ngOnInit(){this._subjectService.isRegisterOpen.subscribe(a=>{a&&(this.getUserMenuNew(),this.GetUserMenu())}),this.router.events.pipe((0,B2.h)(a=>a instanceof C.m2)).subscribe(a=>{let s=this.userMenu[0].items.find(n=>n.url==a.url),i=this.userMenu[0].items.find(n=>n.canClick);s.canClick||this._commonService.NavigateToRoute(i?.url)}),1==this.sharedService.getRole?.roleId&&this.GetUserMenu(),this.getUserMenuNew()}onSelectMenu(a){this.checkScreenSize(),this.navList.forEach(s=>{s.IsActive=!1});for(let s=0;s<this.navList.length;s++)s==a&&(this.navList[s].IsActive=!0,this.titleOfPage.emit(this.navList[s].title));localStorage.removeItem("collectionOrderNum"),localStorage.removeItem("collectBranchId"),localStorage.removeItem("collectUserId"),localStorage.removeItem("collectSearchText"),localStorage.removeItem("collectVin")}onSelectMenuCashier(a){this.titleOfPage.emit(a),localStorage.removeItem("collectionOrderNum"),localStorage.removeItem("collectBranchId"),localStorage.removeItem("collectUserId"),localStorage.removeItem("collectSearchText"),localStorage.removeItem("collectVin")}checkScreenSize(){window.innerWidth<600&&(this.sideNavToggled.emit(!1),this.sideNavStatus=!1)}openAutoCloseWarning(){this.dateSession=this.datePipe.transform(this.registerSessionCreatedAt,"MMMM d, y");var a=new Date(this.dateSession+" "+this.endSession),s=new Date;let i=a.getTime()-s.getTime()-9e5;this.sessionEndMinut=a.getMinutes()-s.getMinutes(),i>0&&setTimeout(()=>{const n=this.modalService.open(P2);n.componentInstance.type=1,n.componentInstance.minute=this.sessionEndMinut},i)}openAutoClose(){this.dateSession=this.datePipe.transform(this.registerSessionCreatedAt,"MMMM d, y");var a=new Date(this.dateSession+" "+this.endSession),s=new Date;let i=a.getTime()-s.getTime();i>0&&setTimeout(()=>{this.modalService.open(P2).componentInstance.type=2,sessionStorage.removeItem("token"),setTimeout(()=>{this.redirectUserAccordingToEnv()},5e3)},i)}redirectUserAccordingToEnv(){let a=window.location.host;a.indexOf("dxpos.markaziaapis.com")>=0?window.location.href="https://portal.markaziahub.com":a.indexOf("dxtestpos.markaziaapis.com")>=0?window.location.href="https://dxtestportal.markaziahub.com":a.indexOf("dxdevpos.markaziaapis.com")>=0&&(window.location.href="https://dxdevportal.markaziahub.com")}logout(){this.LogoutUser(),localStorage.removeItem("fullName"),localStorage.removeItem("role"),localStorage.removeItem("userid"),localStorage.removeItem("branch"),localStorage.removeItem("city"),localStorage.removeItem("register"),localStorage.removeItem("token"),localStorage.removeItem("permissions"),localStorage.removeItem("collectionOrderNum"),localStorage.removeItem("collectBranchId"),localStorage.removeItem("collectUserId"),localStorage.removeItem("collectSearchText"),localStorage.removeItem("collectVin"),localStorage.removeItem("closeSession"),sessionStorage.removeItem("token"),sessionStorage.removeItem("id"),window.location.replace(localStorage.getItem("redirectUrl")),localStorage.removeItem("redirectUrl")}LogoutUser(){return this.logoutService.LogoutUser(+this.sharedService.getUserId).subscribe(a=>{})}CanOpenRegisterSession(){return this.openregisterService.CanOpenRegisterSession({}).subscribe(a=>{1==a.isSuccess&&(this.canOpenRegister=a.data.canOpenRegister,this.opendSession=a.data.opendSession,1==this.canOpenRegister?(this.openreg=!0,this.closereg=!1,this.clollectreg=!1):0==this.canOpenRegister&&(this.openreg=!1,this.closereg=!0,this.clollectreg=!0))})}CanCloseRegisterSession(){return this.closeRegisterService.CanCloseRegisterSession({}).subscribe(a=>{1==a.isSuccess&&(this.canCloseRegisterSession=!!a.data.opendSession,this.registerSessionCreatedAt=a.data?.registerSession?.createdAt)})}getUserMenuNew(){this.GeneralService.GetUserMenuNew(17001).subscribe(a=>{let s=a?.data?.menu;this.userMenu=[],s.forEach(i=>{i.items.filter(t=>t?.canView)?.length>0&&(this.userMenu=[...this.userMenu,{...i,viewPermission:!0}],console.log(this.userMenu))}),this.cashierNavList=a?.data?.menu[0],1==this.sharedService.getRole?.roleId&&(this.cashierNavList.items.filter(n=>!n?.canView)?localStorage.removeItem("IsFoundIPAddress"):(this.isIpAddres=!1,localStorage.setItem("IsFoundIPAddress","1")));for(let i of this.userMenu){let n=i.items.find(t=>t.canClick);if(n){this._commonService.NavigateToRoute(n.url);break}}})}handler(){this.toggleCaretIcon=!this.toggleCaretIcon}GetUserMenu(){return this.GeneralService.GetUserMenu({}).subscribe(a=>{a.isSuccess&&(this.cashierMenu=a.data[0]?.cashier,this.registerSession=a.data[0]?.registerSession,this.registerSessionCreatedAt=this.registerSession?.oppendAt,this.sessionId=this.registerSession?.currentSessionId,localStorage.setItem("current_session",this.sessionId?.toString()),this.endSession=this.registerSession?.allowedToTime,this.hasOppendSession=this.registerSession?.hasOppendSession,this.isIpAddres=!0,this._subjectService.sessionDetails.next({opened:this.hasOppendSession}),this.hasOppendSession&&(setTimeout(()=>{this.openAutoCloseWarning()},2e3),setTimeout(()=>{this.openAutoClose()},2e3)))})}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(C.F0),e.Y36(d.F),e.Y36(J.FF),e.Y36(I1),e.Y36(R2.a),e.Y36(_1.x),e.Y36(_.m),e.Y36(O1.h),e.Y36(V.uU),e.Y36(w2.v),e.Y36(n2._))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-sidenav"]],inputs:{sideNavStatus:"sideNavStatus"},outputs:{sideNavToggled:"sideNavToggled",titleOfPage:"titleOfPage"},features:[e._Bn([V.uU])],decls:6,vars:7,consts:[[1,"side-nav-content"],["class","register-open",4,"ngIf"],["class","d-none nav-list d-flex flex-column gap-3",3,"ngClass",4,"ngIf"],[1,"nav-list",3,"ngClass"],[4,"ngFor","ngForOf"],["class","col-xs-3",4,"ngIf"],[1,"register-open"],[1,"m-0","mb-2"],[1,"d-none","nav-list","d-flex","flex-column","gap-3",3,"ngClass"],[4,"ngIf"],["dropdown","",1,"btn-group"],["dropdownToggle","","type","button",1,"btn","dropdown-toggle",3,"id"],["src","/assets/images/navicon/dashboardIcon2.svg"],["src","/assets/images/navicon/angel-down.svg"],["class","dropdown-menu","role","menu",3,"id",4,"dropdownMenu"],["role","menu",1,"dropdown-menu",3,"id"],["routerLinkActive","active",1,"nav-list-item",3,"ngStyle","routerLink","disabled","hidden","click"],["rla","routerLinkActive"],["alt","",3,"src"],[1,"w-100"],[1,"d-flex","align-items-center","justify-content-between","my-3"],[1,"m-0","dark-gray","font-18","fw-600"],["src","/assets/images/navicon/angel-down.svg",1,"me-2"],[1,"m-0","p-0","overflow-scroll-menu"],["routerLinkActive","active",1,"nav-list-item",3,"ngStyle","routerLink","routerLinkActiveOptions","disabled","hidden","click"],[1,"col-xs-3"],[1,"ps-3",2,"position","fixed","bottom","0"],[1,"logout-btn","align-items-center","d-flex","gap-2","justify-content-between","dark-gray","fw-700",2,"cursor","pointer",3,"click"],[1,"fas","fa-arrow-circle-left","fa-2x","primary-clr"],[1,"primary-clr","text-center","font-14","fw-500"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0),e.YNc(1,W1,10,5,"div",1),e.YNc(2,j1,2,4,"ul",2),e.TgZ(3,"ul",3),e.YNc(4,X1,2,1,"ng-container",4),e.qZA(),e.YNc(5,K1,7,0,"div",5),e.qZA()),2&a&&(e.xp6(1),e.Q6J("ngIf",s.hasOppendSession&&1==(null==s.sharedService.getRole?null:s.sharedService.getRole.roleId)),e.xp6(1),e.Q6J("ngIf",1==(null==s.sharedService.getRole?null:s.sharedService.getRole.roleId)),e.xp6(1),e.Q6J("ngClass",e.VKq(5,K,s.sideNavStatus)),e.xp6(1),e.Q6J("ngForOf",s.userMenu),e.xp6(1),e.Q6J("ngIf",s.sideNavStatus))},dependencies:[V.mk,V.sg,V.O5,V.PC,C.rH,C.Od,F.Hz,F.Mq,F.TO,V.uU],styles:['.side-nav-content[_ngcontent-%COMP%]{color:#929eae;margin-left:10px;margin-top:10px}.nav-list[_ngcontent-%COMP%]{height:100;padding:0%;margin-bottom:0;list-style:none}.nav-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;height:50px;cursor:pointer;text-align:start;border:0px;background:none;color:#929eae;width:98%}.nav-list-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:15px;margin-left:10px;text-align:center;line-height:25px}.nav-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:120px;text-transform:capitalize}a[_ngcontent-%COMP%]{text-decoration:none;color:#86888b}.active[_ngcontent-%COMP%]{background:#dc3545;box-shadow:none;border-radius:8px;color:#fff;cursor:pointer}.a-active[_ngcontent-%COMP%]{text-decoration:none;color:#f5f6f7}.btn-circle[_ngcontent-%COMP%]{width:30px;height:30px;text-align:center;padding:6px 0;font-size:12px;line-height:1.428571429;border-radius:15px;background:#dc3545;box-shadow:0 10px 20px #0000001a}.register-open[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:13px;line-height:16px;color:#1b212d;text-align:center;margin-top:31px}.register-open[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#dc3545}.nav-list-item[_ngcontent-%COMP%]:disabled{color:#a9a9a9!important;color:#cdd4da!important}.nav-list[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%;font-size:15px;font-weight:700;display:flex;justify-content:space-between;align-items:center;border:none;border-bottom:1px solid #929EAE;border-radius:0;padding-bottom:15px}.nav-list[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{border:none}.nav-list[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:after{border:none;margin:0;content:"";display:none}.nav-list[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%}.logout-btn[_ngcontent-%COMP%]{list-style:none;display:block}.logout-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:15px;font-weight:700;color:#212529;gap:15px}.overflow-scroll-menu[_ngcontent-%COMP%]{height:72vh;overflow-y:auto}']}),r})();const c3=function(r){return{"app-side-nav-open":r}},a3=function(r){return{"display-area-shrink":r}},E2=[{path:"",component:(()=>{class r{constructor(a,s,i,n){this.route=a,this.sharedService=s,this.router=i,this.datePipe=n,this.sidebarExpanded=!0,this.Pagetitle={},this.navList=[],this.titleOfPage="",this.sideNavStatus=!0}ngOnInit(){}onSelectMenu(a){this.navList.forEach(s=>{s.IsActive=!1});for(let s=0;s<this.navList.length;s++)s==a&&(this.navList[s].IsActive=!0)}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(C.gz),e.Y36(d.F),e.Y36(C.F0),e.Y36(V.uU))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-dashboard"]],features:[e._Bn([V.uU])],decls:6,vars:8,consts:[[1,"container-fluid","g-0"],[3,"titleOfPage","sideNavToggled"],[3,"sideNavStatus","ngClass","titleOfPage","sideNavToggled"],[1,"display-area","p-3",3,"ngClass"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"app-header",1),e.NdJ("sideNavToggled",function(n){return s.sideNavStatus=n}),e.qZA(),e.TgZ(2,"main")(3,"app-sidenav",2),e.NdJ("titleOfPage",function(n){return s.titleOfPage=n})("sideNavToggled",function(n){return s.sideNavStatus=n}),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"router-outlet"),e.qZA()()()),2&a&&(e.xp6(1),e.Q6J("titleOfPage",s.titleOfPage),e.xp6(2),e.Q6J("sideNavStatus",s.sideNavStatus)("ngClass",e.VKq(4,c3,s.sideNavStatus)),e.xp6(1),e.Q6J("ngClass",e.VKq(6,a3,s.sideNavStatus)))},dependencies:[V.mk,C.lC,F1,Y1],styles:["app-header[_ngcontent-%COMP%]{position:fixed;width:100%;top:0;height:4rem;z-index:100;background:#FFFFFF}main[_ngcontent-%COMP%]{position:absolute;width:100%;top:4rem}app-sidenav[_ngcontent-%COMP%]{position:fixed;left:0rem;width:60px;height:100vh;background:#F8F8F8;box-shadow:0 20px 50px #0000001a;z-index:200;overflow:hidden;white-space:nowrap;transition:width .25s ease-in}.app-side-nav-open[_ngcontent-%COMP%]{width:250px}.display-area[_ngcontent-%COMP%]{position:absolute;left:60px;width:calc(100% - 60px);transition:width .25s ease-in}.display-area-shrink[_ngcontent-%COMP%]{left:250px;width:calc(100% - 250px);transition:width .25s ease-in}.ipadress[_ngcontent-%COMP%]{text-align:center;padding:60px 30px}"]}),r})(),canActivate:[T.a],children:[{path:"branches",loadChildren:()=>Promise.all([o.e(2708),o.e(1376)]).then(o.bind(o,1376)).then(r=>r.BranchesModule)},{path:"main-fund",loadChildren:()=>Promise.all([o.e(2881),o.e(1492),o.e(8592),o.e(7240)]).then(o.bind(o,27240)).then(r=>r.BankDepositsModule)},{path:"branches",loadChildren:()=>Promise.all([o.e(2708),o.e(1376)]).then(o.bind(o,1376)).then(r=>r.BranchesModule)},{path:"registers",loadChildren:()=>Promise.all([o.e(2708),o.e(8592),o.e(5492)]).then(o.bind(o,55492)).then(r=>r.RegistersModule)},{path:"roles",loadChildren:()=>Promise.all([o.e(2708),o.e(2715)]).then(o.bind(o,52715)).then(r=>r.RolesModule)},{path:"users",loadChildren:()=>Promise.all([o.e(2708),o.e(3199)]).then(o.bind(o,3199)).then(r=>r.UsersModule)},{path:"opening-register",loadChildren:()=>o.e(5054).then(o.bind(o,15054)).then(r=>r.OpeningRegisterModule)},{path:"close-register",loadChildren:()=>Promise.all([o.e(2708),o.e(2881),o.e(8592),o.e(506)]).then(o.bind(o,80506)).then(r=>r.CloseRegisterModule)},{path:"collect",loadChildren:()=>Promise.all([o.e(2708),o.e(2881),o.e(7172),o.e(5620),o.e(2440)]).then(o.bind(o,42440)).then(r=>r.CollectModule)},{path:"petty-cash",loadChildren:()=>Promise.all([o.e(2708),o.e(9973),o.e(4490),o.e(9325)]).then(o.bind(o,49325)).then(r=>r.PettyCashModule)},{path:"pettycash-approvals",loadChildren:()=>Promise.all([o.e(8592),o.e(9339)]).then(o.bind(o,89339)).then(r=>r.PettyCashApprovalModule)},{path:"",loadChildren:()=>Promise.all([o.e(1282),o.e(3975)]).then(o.bind(o,73975)).then(r=>r.DashboardModule)},{path:"unsettled-session",loadChildren:()=>Promise.all([o.e(2708),o.e(2881),o.e(1492),o.e(8592),o.e(1172)]).then(o.bind(o,71172)).then(r=>r.UnsettledSessionModule)},{path:"return",loadChildren:()=>Promise.all([o.e(2708),o.e(2881),o.e(9973),o.e(7172),o.e(3911),o.e(5620),o.e(8592),o.e(3440)]).then(o.bind(o,73440)).then(r=>r.ReturnModule)},{path:"treasuryrefundorders",loadChildren:()=>Promise.all([o.e(2881),o.e(9973),o.e(3911),o.e(6057)]).then(o.bind(o,26057)).then(r=>r.ReturnTreasuryFundModule)},{path:"provide-expenses",loadChildren:()=>Promise.all([o.e(9973),o.e(2915),o.e(6008),o.e(3370),o.e(9132),o.e(1630)]).then(o.bind(o,9452)).then(r=>r.provideExpensesModule)},{path:"mainFund-allocation",loadChildren:()=>Promise.all([o.e(2708),o.e(8592),o.e(8362)]).then(o.bind(o,38362)).then(r=>r.allocationModule)},{path:"register-settlements",loadChildren:()=>Promise.all([o.e(2708),o.e(2881),o.e(8592),o.e(2574)]).then(o.bind(o,32574)).then(r=>r.RegisterSettlementsModule)},{path:"dashboard",loadChildren:()=>Promise.all([o.e(2708),o.e(1282),o.e(8592),o.e(7694)]).then(o.bind(o,57694)).then(r=>r.DashboardModule)},{path:"collection-report",loadChildren:()=>Promise.all([o.e(2881),o.e(9973),o.e(2915),o.e(7172),o.e(8592),o.e(6843)]).then(o.bind(o,31983)).then(r=>r.CollectionReportModule)},{path:"markazia-vouchers",loadChildren:()=>Promise.all([o.e(9973),o.e(2915),o.e(6008),o.e(7857)]).then(o.bind(o,77857)).then(r=>r.MarkaziaVouchersModule)},{path:"mainfund-receipt",loadChildren:()=>Promise.all([o.e(2881),o.e(9973),o.e(1492),o.e(6953)]).then(o.bind(o,96953)).then(r=>r.ReceiptsModule)},{path:"allocation",loadChildren:()=>Promise.all([o.e(2708),o.e(8592),o.e(8841)]).then(o.bind(o,38841)).then(r=>r.AllocationModule)},{path:"transactions",loadChildren:()=>o.e(3887).then(o.bind(o,13887)).then(r=>r.TransactionsModule)},{path:"transactions-history",loadChildren:()=>Promise.all([o.e(2708),o.e(2881),o.e(9973),o.e(3370),o.e(8592),o.e(5885)]).then(o.bind(o,75885)).then(r=>r.TransactionsHistoryModule)},{path:"pettycash",loadChildren:()=>Promise.all([o.e(2708),o.e(9973),o.e(2915),o.e(6008),o.e(4490),o.e(9132),o.e(8592),o.e(3296)]).then(o.bind(o,23808)).then(r=>r.PettyCashTreasuryModule)},{path:"register-bank-deposit",loadChildren:()=>Promise.all([o.e(2708),o.e(8592),o.e(2807)]).then(o.bind(o,12807)).then(r=>r.RegisterBankDepositModule)},{path:"profile",loadChildren:()=>o.e(793).then(o.bind(o,30793)).then(r=>r.ProfileModule)},{path:"no-menu",component:(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-no-menu"]],decls:0,vars:0,template:function(a,s){},styles:["div[_ngcontent-%COMP%]{height:600px}"]}),r})()}]}];let r3=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[C.Bz.forChild(E2),C.Bz]}),r})();var Y=o(21515);let i3=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[V.ez,r3,Y.m]}),r})()},15070:(o2,A,o)=>{"use strict";o.d(A,{x:()=>e});var V=o(94650),C=o(80529),T=o(69082);let e=(()=>{class d{constructor(m,N){this.http=m,this.sharedService=N,this.apiUrl=this.sharedService.getUrl}getCurrentSessionCollectedBankTransfere(m,N){return this.http.get(this.apiUrl+`Cashier/GetCurrentSessionCollectedBankTransfere?Search=${m}&PageNo=${N-1}&PageSize=6`,this.sharedService.getHeaders())}actionsOnBankTransfere(m){return this.http.post(this.apiUrl+"Cashier/ActionsOnBankTransfere",m,this.sharedService.getHeaders())}editCollectionBankTransfere(m){return this.http.post(this.apiUrl+"Cashier/EditCollectionBankTransfere",m,this.sharedService.getHeaders())}reverseActionsOnBankTransfere(m){return this.http.post(this.apiUrl+"Cashier/ReverseActionsOnBankTransfere",m,this.sharedService.getHeaders())}getCurrentSessionCollectedBankPledge(m,N){return this.http.get(this.apiUrl+`Cashier/GetCurrentSessionCollectedBankPledge?Search=${m}&PageNo=${N-1}&PageSize=6`,this.sharedService.getHeaders())}actionsOnBankPledge(m){return this.http.post(this.apiUrl+"Cashier/ActionsOnBankPledge",m,this.sharedService.getHeaders())}editCollectionBankPledge(m){return this.http.post(this.apiUrl+"Cashier/EditCollectionBankPledge",m,this.sharedService.getHeaders())}reverseActionsOnBankPledge(m){return this.http.post(this.apiUrl+"Cashier/reverseActionsOnBankPledge",m,this.sharedService.getHeaders())}GetRegisterClosingData(){return this.http.get(this.apiUrl+"Cashier/GetRegisterClosingData",this.sharedService.getHeaders())}getRegisterClosingDataFinal(){return this.http.get(this.apiUrl+"Cashier/GetRegisterClosingDataFinal",this.sharedService.getHeaders())}CloseRegisterSession(m){return this.http.post(this.apiUrl+"Cashier/CloseRegisterSession",m,this.sharedService.getHeaders())}CanCloseRegisterSession(m){return this.http.post(this.apiUrl+"Cashier/CanCloseRegisterSession",m,this.sharedService.getHeaders())}GetCurrentSessionCollectedCheques(m,N){return this.http.get(this.apiUrl+`Cashier/GetCurrentSessionCollectedCheques?drawerName=${m}&PageNo=${N-1}&PageSize=6`,this.sharedService.getHeaders())}GetCurrentSessionCollectedCard(m,N,_=6){return this.http.get(this.apiUrl+`Cashier/GetCurrentSessionCollectedCard?PayerName=${m}&PageNo=${N-1}&PageSize=${_}`,this.sharedService.getHeaders())}EditCollectionCheuqe(m){return this.http.post(this.apiUrl+"Cashier/EditCollectionCheuqe",m,this.sharedService.getHeaders())}ActionsOnCheques(m){return this.http.post(this.apiUrl+"Cashier/ActionsOnCheques",m,this.sharedService.getHeaders())}ReverseActionsOnCheques(m){return this.http.post(this.apiUrl+"Cashier/ReverseActionsOnCheques",m,this.sharedService.getHeaders())}EditCollectionByCards(m){return this.http.post(this.apiUrl+"Cashier/EditCollectionByCards",m,this.sharedService.getHeaders())}ActionsOnCard(m){return this.http.post(this.apiUrl+"Cashier/ActionsOnCard",m,this.sharedService.getHeaders())}actionsOnCardGroup(m){return this.http.post(this.apiUrl+"Cashier/ActionsOnCardGroup",m,this.sharedService.getHeaders())}ReverseActionsOnCard(m){return this.http.post(this.apiUrl+"Cashier/ReverseActionsOnCard",m,this.sharedService.getHeaders())}getLookupsById(m){return this.http.get(this.apiUrl+"Lookups/GetLookups?lookupTypeId="+m+"&pageNo=0&pageSize=1000",this.sharedService.getHeaders())}}return d.\u0275fac=function(m){return new(m||d)(V.LFG(C.eN),V.LFG(T.F))},d.\u0275prov=V.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},45832:(o2,A,o)=>{"use strict";o.d(A,{a:()=>e});var V=o(94650),C=o(80529),T=o(69082);let e=(()=>{class d{constructor(m,N){this.http=m,this.sharedService=N,this.apiUrl=this.sharedService.getUrl}OpenRegisterSession(m){return this.http.post(this.apiUrl+"Cashier/OpenRegisterSession",m,this.sharedService.getHeaders())}CanOpenRegisterSession(m){return this.http.post(this.apiUrl+"Cashier/CanOpenRegisterSession",m,this.sharedService.getHeaders())}}return d.\u0275fac=function(m){return new(m||d)(V.LFG(C.eN),V.LFG(T.F))},d.\u0275prov=V.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},29444:(o2,A,o)=>{"use strict";o.d(A,{_:()=>e});var V=o(61135),C=o(77579),T=o(94650);let e=(()=>{class d{constructor(){this.isRegisterOpen=new V.X(!1),this.sessionDetails=new V.X({opened:!1}),this.isCollectionPaymentDone=new V.X(!1),this.bankTransferFiles=new V.X([]),this.chequeFiles=new V.X([]),this.chequeFinanceApprovalFiles=new V.X([]),this.bankPledgeFiles=new V.X([]),this.orderReturnFilters=new C.x,this.pettyCashTreasuryExpenses=new C.x,this.replenishmentRequestReceived=new V.X(!1),this.pNCollectionReceiving=new V.X(!1),this.cashierNote=new C.x,this.collectedOrder=new C.x,this.paymentDoneModalClosed=new C.x,this.updateCustomerInLocalStorage=new C.x}}return d.\u0275fac=function(m){return new(m||d)},d.\u0275prov=T.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},6771:()=>{},18022:()=>{},86045:()=>{},98190:()=>{},57333:()=>{},6139:()=>{},82687:(o2,A,o)=>{"use strict";o.d(A,{acZ:()=>k8,d9d:()=>H3,eFW:()=>E0,qmU:()=>W5,u2A:()=>Q,xiG:()=>o3});var Q={prefix:"fas",iconName:"arrow-up-long",icon:[384,512,["long-arrow-up"],"f176","M214.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 109.3V480c0 17.7 14.3 32 32 32s32-14.3 32-32V109.3l73.4 73.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-128-128z"]},o3={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"]},H3={prefix:"fas",iconName:"arrow-down-long",icon:[384,512,["long-arrow-down"],"f175","M169.4 502.6c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 402.7 224 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 370.7L86.6 329.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128z"]},E0={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},k8={prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},W5={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32V51.2C119 66 64 130.6 64 208v18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416H416c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3H224 160c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]}}}]);