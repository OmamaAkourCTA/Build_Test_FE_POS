"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[3199],{3199:(Z,b,d)=>{d.r(b),d.d(b,{UsersModule:()=>je});var m=d(36895),g=d(39485),e=d(94650),u=d(42953);let f=(()=>{class o{constructor(t,i,s){this.activeModal=t,this.modalService=i,this.router=s,this.semdToConfirm=new e.vpe,this.sendToClose=new e.vpe}confirm(){this.semdToConfirm.emit()}close(){this.sendToClose.emit()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.Kz),e.Y36(u.FF),e.Y36(g.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-confirm"]],inputs:{name:"name"},outputs:{semdToConfirm:"semdToConfirm",sendToClose:"sendToClose"},decls:9,vars:0,consts:[[1,"modal-body"],[1,"message"],[1,"modal-footer","text-center"],["type","button",1,"btn",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3," Are you sure you want to save changes? "),e.qZA()()(),e.TgZ(4,"div",2)(5,"button",3),e.NdJ("click",function(){return i.confirm()}),e._uU(6,"Yes"),e.qZA(),e.TgZ(7,"button",3),e.NdJ("click",function(){return i.close(),i.activeModal.close("Close click")}),e._uU(8,"No"),e.qZA()())},styles:[".message[_ngcontent-%COMP%]{text-align:center;padding:50px}.message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:90px;color:#75b878;margin-bottom:30px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:center}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:1px solid #ddd;width:120px;border-radius:30px;display:block;color:#000;font-size:14px;font-weight:600}"]}),o})(),h=(()=>{class o{constructor(t,i,s){this.activeModal=t,this.modalService=i,this.router=s}ngOnInit(){console.log(this.name),console.log(typeof this.name),"add"==this.name?setTimeout(()=>{this.modalService.dismissAll(),this.router.navigateByUrl("/users")},4e3):setTimeout(()=>{this.modalService.dismissAll()},4e3)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.Kz),e.Y36(u.FF),e.Y36(g.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-done"]],inputs:{name:"name"},decls:7,vars:2,consts:[[1,"modal-body"],[1,"message"],[1,"fa-regular","fa-circle-check"],[3,"hidden"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"h3",3),e._uU(4," User added successfully"),e.qZA(),e.TgZ(5,"h3",3),e._uU(6," Your user details is edited successfully"),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("hidden","add"!=i.name),e.xp6(2),e.Q6J("hidden","add"==i.name))},styles:[".message[_ngcontent-%COMP%]{text-align:center;padding:30px 10px}.message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:90px;color:#75b878;margin-bottom:30px}"]}),o})();var c=d(80529),I=d(69082);let _=(()=>{class o{constructor(t,i){this.http=t,this.sharedService=i,this.apiUrl=this.sharedService.getUrl}GetUsers(t,i,s,r,a){return this.http.get(this.apiUrl+`User/GetUsers?Search=${t}&Sort=${i}&BranchId=${s}&RoleId=${r}&PageNo=${a}&PageSize=6`,this.sharedService.getHeaders())}AddUser(t){return this.http.post(this.apiUrl+"User/AddUser",t,this.sharedService.getHeaders())}EditUser(t){return this.http.post(this.apiUrl+"User/EditUser",t,this.sharedService.getHeaders())}GetUserDetails(t){return this.http.get(this.apiUrl+`User/GetUSERDetails?userId=${t}`,this.sharedService.getHeaders())}GetLocations(){return this.http.get(this.apiUrl+"Lookups/GetLocations",this.sharedService.getHeaders())}GetBranches(t){return this.http.get(this.apiUrl+`Branches/GetBranches?Search=${t}&Status=2001&sort=2`,this.sharedService.getHeaders())}GetRoles(){return this.http.get(this.apiUrl+"Roles/GetRoles?Status=2001&Sort=2",this.sharedService.getHeaders())}getBranchDetails(t){return this.http.get(this.apiUrl+`Branches/GetBranchDetails?branchId=${t}`,this.sharedService.getHeaders())}GetRoleDetails(t){return this.http.get(this.apiUrl+`Roles/GetRoleDetails?roleId=${t}`,this.sharedService.getHeaders())}getLookupsById(t){return this.http.get(this.apiUrl+"Lookups/GetLookups?lookupTypeId="+t,this.sharedService.getHeaders())}getDefaultPermissions(){return this.http.get(this.apiUrl+"Permissions/GetDefaultPermissions?Status=2001",this.sharedService.getHeaders())}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(c.eN),e.LFG(I.F))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var U=d(97185),p=d(24006),x=d(36690),y=d(98563),C=d(94349),k=d(80145);function w(o,n){1&o&&e._UZ(0,"div",46)}function N(o,n){1&o&&e._UZ(0,"img",51)}function q(o,n){1&o&&e._UZ(0,"img",52)}function J(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",47)(1,"button",48),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.editUserInfo())}),e.YNc(2,N,1,0,"img",49),e.YNc(3,q,1,0,"img",50),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.isShowUserInfo),e.xp6(1),e.Q6J("ngIf",!t.isShowUserInfo)}}function P(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.removeUserName())}),e._UZ(1,"i",54),e.qZA()}}function G(o,n){1&o&&(e.TgZ(0,"span",58),e._uU(1," This element is required, please fill."),e.qZA())}function M(o,n){1&o&&(e.TgZ(0,"span")(1,"span",58),e._uU(2," Full name length must be between 6 and 30 characters."),e.qZA()())}function D(o,n){if(1&o&&(e.TgZ(0,"div",55),e.YNc(1,G,2,0,"span",56),e.YNc(2,M,3,0,"span",57),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.fullName.errors.required),e.xp6(1),e.Q6J("ngIf",t.formValid.fullName.errors.minlength)}}function O(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.removeemail())}),e._UZ(1,"i",54),e.qZA()}}function E(o,n){1&o&&(e.TgZ(0,"span",58),e._uU(1," This element is required, please fill."),e.qZA())}function Q(o,n){1&o&&(e.TgZ(0,"span",58),e._uU(1," the email you entered is incorrect."),e.qZA())}function R(o,n){if(1&o&&(e.TgZ(0,"div",55)(1,"span"),e.YNc(2,E,2,0,"span",56),e.YNc(3,Q,2,0,"span",56),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.formValid.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formValid.email.dirty)}}function H(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.removephone())}),e._UZ(1,"i",54),e.qZA()}}function Y(o,n){1&o&&(e.TgZ(0,"span",58),e._uU(1," This element is required, please fill."),e.qZA())}function F(o,n){1&o&&(e.TgZ(0,"span")(1,"span",58),e._uU(2,"The digits are less than 10 for (mobile) and the digits are more than 8 "),e.qZA()())}function V(o,n){if(1&o&&(e.TgZ(0,"div",59),e.YNc(1,Y,2,0,"span",56),e.YNc(2,F,3,0,"span",57),e.qZA()),2&o){const t=e.oxw();e.Q6J("hidden",""==t.formGroup.get("mobile").value),e.xp6(1),e.Q6J("ngIf",t.formValid.mobile.errors.required),e.xp6(1),e.Q6J("ngIf",t.formValid.mobile.errors.minlength)}}function B(o,n){1&o&&e._UZ(0,"div",46)}function L(o,n){1&o&&e._UZ(0,"img",51)}function W(o,n){1&o&&e._UZ(0,"img",52)}function K(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",47)(1,"button",60),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.editLocationInfo())}),e.YNc(2,L,1,0,"img",61),e.YNc(3,W,1,0,"img",50),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.formGroup.invalid),e.xp6(1),e.Q6J("ngIf",t.isShowLocation),e.xp6(1),e.Q6J("ngIf",!t.isShowLocation)}}function $(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.item," ")}function j(o,n){1&o&&(e.TgZ(0,"span",58),e._uU(1," This element is required, please fill."),e.qZA())}function z(o,n){if(1&o&&(e.TgZ(0,"div",55),e.YNc(1,j,2,0,"span",56),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.city.errors.required)}}function X(o,n){1&o&&e._UZ(0,"span")}function ee(o,n){1&o&&(e.TgZ(0,"span",58),e._uU(1," This element is required, please fill."),e.qZA())}function te(o,n){if(1&o&&(e.TgZ(0,"div",55),e.YNc(1,X,1,0,"span",57),e.YNc(2,ee,2,0,"span",56),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.branchId.errors),e.xp6(1),e.Q6J("ngIf",t.formValid.branchId.errors.required)}}function ie(o,n){1&o&&e._UZ(0,"div",46)}function oe(o,n){1&o&&e._UZ(0,"img",51)}function se(o,n){1&o&&e._UZ(0,"img",52)}function ne(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",47)(1,"button",60),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.editWorkingHoursInfo())}),e.YNc(2,oe,1,0,"img",61),e.YNc(3,se,1,0,"img",50),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.formGroup.invalid),e.xp6(1),e.Q6J("ngIf",t.isShowWorkingHoursn),e.xp6(1),e.Q6J("ngIf",!t.isShowWorkingHoursn)}}function re(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",62)(1,"div",63)(2,"div",64)(3,"div",65)(4,"div",66)(5,"input",67),e.NdJ("change",function(){const s=e.CHM(t),r=s.$implicit,a=s.index,l=e.oxw();return e.KtG(l.chooseTime(r.value.selected,a))}),e.qZA(),e.TgZ(6,"label",68),e._uU(7),e.qZA()()()(),e.TgZ(8,"div",64)(9,"div",25)(10,"div",69)(11,"p"),e._uU(12," From "),e.qZA(),e._UZ(13,"input",70),e.qZA()()(),e.TgZ(14,"div",64)(15,"div",25)(16,"div",69)(17,"p"),e._uU(18," To "),e.qZA(),e._UZ(19,"input",71),e.qZA()()()()()}if(2&o){const t=n.$implicit,i=n.index;e.xp6(1),e.Q6J("formGroupName",i),e.xp6(6),e.hij(" ",t.value.dayName," "),e.xp6(6),e.Q6J("disabled",t.value.selected)}}function ae(o,n){1&o&&e._UZ(0,"span")}function le(o,n){1&o&&(e.TgZ(0,"span",58),e._uU(1," This element is required, please fill."),e.qZA())}function de(o,n){if(1&o&&(e.TgZ(0,"div",55),e.YNc(1,ae,1,0,"span",57),e.YNc(2,le,2,0,"span",56),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.contractStartDate.errors),e.xp6(1),e.Q6J("ngIf",t.formValid.contractStartDate.errors.required)}}function ce(o,n){1&o&&e._UZ(0,"span")}function me(o,n){1&o&&(e.TgZ(0,"span",58),e._uU(1," This element is required, please fill."),e.qZA())}function ue(o,n){if(1&o&&(e.TgZ(0,"div",55),e.YNc(1,ce,1,0,"span",57),e.YNc(2,me,2,0,"span",56),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.contractEndDate.errors),e.xp6(1),e.Q6J("ngIf",t.formValid.contractEndDate.errors.required)}}function pe(o,n){1&o&&e._UZ(0,"div",46)}function he(o,n){1&o&&e._UZ(0,"img",51)}function ge(o,n){1&o&&e._UZ(0,"img",52)}function fe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",47)(1,"button",60),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.editRolesPErmission())}),e.YNc(2,he,1,0,"img",61),e.YNc(3,ge,1,0,"img",50),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.formGroup.invalid),e.xp6(1),e.Q6J("ngIf",t.isShowRolesPErmission),e.xp6(1),e.Q6J("ngIf",!t.isShowRolesPErmission)}}function _e(o,n){1&o&&(e.TgZ(0,"span",58),e._uU(1," This element is required, please fill."),e.qZA())}function ve(o,n){if(1&o&&(e.TgZ(0,"div",55),e.YNc(1,_e,2,0,"span",56),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.roleId.errors.required)}}function be(o,n){1&o&&e._UZ(0,"i",78)}function Ie(o,n){1&o&&e._UZ(0,"i",79)}function Ce(o,n){1&o&&e._UZ(0,"div",83)}function Te(o,n){1&o&&e._UZ(0,"img",51)}function Ze(o,n){1&o&&e._UZ(0,"img",52)}function xe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",47)(1,"button",48),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2).index,r=e.oxw();return e.KtG(r.editrolesList(s))}),e.YNc(2,Te,1,0,"img",49),e.YNc(3,Ze,1,0,"img",50),e.qZA()()}if(2&o){const t=e.oxw(2).index,i=e.oxw();e.xp6(2),e.Q6J("ngIf",i.isShowpermisionsRoles&&i.catRow==t),e.xp6(1),e.Q6J("ngIf",!i.isShowpermisionsRoles||i.catRow!=t)}}function Ae(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",34)(1,"input",90),e.NdJ("change",function(s){e.CHM(t);const r=e.oxw().$implicit,a=e.oxw().$implicit,l=e.oxw(3);return e.KtG(l.pushPermissionItemId(s,a,r))}),e.qZA(),e.TgZ(2,"label",91),e._uU(3),e.qZA()()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(1),e.s9C("id",t.permissionItemId),e.Q6J("value",t.permissionItemId)("checked",i.isChecked(t.permissionItemId)),e.xp6(1),e.Q6J("for",t.permissionItemId),e.xp6(1),e.hij(" ",t.perItemName," ")}}function Se(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",34)(1,"input",92),e.NdJ("change",function(s){e.CHM(t);const r=e.oxw().$implicit,a=e.oxw().$implicit,l=e.oxw(3);return e.KtG(l.pushPermissionItemId(s,a,r))}),e.qZA(),e.TgZ(2,"label",91),e._uU(3),e.qZA()()}if(2&o){const t=e.oxw().$implicit,i=e.oxw().$implicit,s=e.oxw(3);e.xp6(1),e.s9C("name",i.permissionSubCatId),e.s9C("id",t.permissionItemId),e.Q6J("value",t.permissionItemId)("checked",s.isChecked(t.permissionItemId)),e.xp6(1),e.s9C("for",t.permissionItemId),e.xp6(1),e.hij(" ",t.perItemName," ")}}function Ue(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",34)(1,"input",93),e.NdJ("change",function(s){const a=e.CHM(t).$implicit,l=e.oxw().$implicit,v=e.oxw(4);return e.KtG(v.pushPermissionItemDetailId(s,a.permissionItemId,l))}),e.qZA(),e.TgZ(2,"label",91),e._uU(3),e.qZA()()}if(2&o){const t=n.$implicit,i=e.oxw().$implicit,s=e.oxw(4);e.xp6(1),e.MGl("id","d-",t.permissionItemDetailsId,""),e.Q6J("value",t.permissionItemDetailsId)("checked",s.isChecked(i.permissionItemId))("disabled",t.permissionItemId==i.permissionItemId&&!s.isChecked(i.permissionItemId)),e.xp6(1),e.MGl("for","d-",t.permissionItemDetailsId,""),e.xp6(1),e.hij(" ",t.perItemDetailsName," ")}}function ye(o,n){if(1&o&&(e.TgZ(0,"div")(1,"div",86),e.YNc(2,Ae,4,5,"div",87),e.YNc(3,Se,4,6,"div",87),e.qZA(),e.TgZ(4,"div",88),e.YNc(5,Ue,4,6,"div",89),e.qZA()()),2&o){const t=n.$implicit;e.xp6(2),e.Q6J("ngIf","View Only"==t.perItemName||"View & Edit"==t.perItemName),e.xp6(1),e.Q6J("ngIf","Yes"==t.perItemName||"No"==t.perItemName),e.xp6(2),e.Q6J("ngForOf",t.permissionItemDetails)}}function ke(o,n){if(1&o&&(e.TgZ(0,"div",84)(1,"div")(2,"h4"),e._uU(3),e.qZA()(),e.YNc(4,ye,6,3,"div",85),e.qZA()),2&o){const t=n.$implicit;e.xp6(3),e.hij(" ",t.perSubCatName," "),e.xp6(1),e.Q6J("ngForOf",t.permissionItems)}}function we(o,n){if(1&o&&(e.TgZ(0,"div",80),e._UZ(1,"hr"),e.YNc(2,Ce,1,0,"div",81),e.YNc(3,xe,4,2,"div",11),e.YNc(4,ke,5,2,"div",82),e.qZA()),2&o){const t=e.oxw(),i=t.index,s=t.$implicit,r=e.oxw();e.xp6(2),e.Q6J("ngIf",i!=r.catRow&&r.isEdit),e.xp6(1),e.Q6J("ngIf",r.isEdit),e.xp6(1),e.Q6J("ngForOf",s.permissionSubCategories)}}function Ne(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",72)(1,"div",73)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"button",74),e.NdJ("click",function(){const s=e.CHM(t),r=s.$implicit,a=s.index,l=e.oxw();return e.KtG(l.collapseList(r,a))}),e.YNc(5,be,1,0,"i",75),e.YNc(6,Ie,1,0,"i",76),e.qZA()(),e.YNc(7,we,5,3,"div",77),e.qZA()}if(2&o){const t=n.$implicit,i=n.index,s=e.oxw();e.xp6(3),e.hij("",t.perCatName," "),e.xp6(2),e.Q6J("ngIf",i!=s.ExpandRow),e.xp6(1),e.Q6J("ngIf",i==s.ExpandRow),e.xp6(1),e.Q6J("ngIf",i==s.ExpandRow)}}function qe(o,n){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij("",t.ErrorMessageEn," ")}}function Je(o,n){if(1&o&&(e.TgZ(0,"div",94)(1,"ul"),e.YNc(2,qe,2,1,"li",85),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.errorsList)}}function Pe(o,n){if(1&o&&(e.TgZ(0,"button",95),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.isEdit?"Save":"Add"," ")}}function Ge(o,n){1&o&&(e.TgZ(0,"button",96),e._UZ(1,"i",97),e.qZA())}const Me=function(){return{standalone:!0}},De=function(){return["jo","sa"]},Oe=function(o){return{preferredCountries:o}};let A=(()=>{class o{constructor(t,i,s,r,a,l,v,T,ze,S){this.userService=t,this.sharedService=i,this.router=s,this.modalService=r,this.toster=a,this.route=l,this.fb=v,this.headerService=T,this.datePipe=ze,this.submitted=!1,this.isStatus=!0,this.searchBranch="",this.isShowpermisionsRoles=!1,this.catNo=9,this.isShowUserInfo=!1,this.isShowLocation=!1,this.isShowWorkingHoursn=!1,this.isShowRolesPErmission=!1,S.backdrop="static",S.keyboard=!1}ngOnInit(){this.getForm(),this.GetLocations(),this.GetBranches(),this.GetRoles(),this.userId=this.route.snapshot.params.id,this.userId?(console.log(typeof this.sharedService.getUserId),console.log(typeof this.userId),this.GetUserDetails(),this.isEdit=!0,(this.isEdit=!0)&&this.headerService.setTitle("Users > View user")):(this.headerService.setTitle("Users > Add user"),this.getWorkingHours(),this.getDefaultPermissions())}getForm(){this.formGroup=this.fb.group({userId:0,fullName:"",mobile:"",email:"",branchId:null,city:null,contractStartDate:"",contractEndDate:"",roleId:"",indoor:!1,outdoor:!1,userPermissions:this.fb.array([]),userWorkingHours:this.fb.array([]),deviceToken:"",status:2001})}get userWorkingHours(){return this.formGroup.controls.userWorkingHours}get userPermissions(){return this.formGroup.controls.userPermissions}get formValid(){return this.formGroup.controls}addUserWorkingHours(){return this.fb.group({dayId:"",dayName:"",fromTime:"",toTime:"",selected:!0,status:2001})}AdduserPermissions(){return this.fb.group({permissionSubCatId:[""],permissionItemId:0,permissionItemDetailId:0})}onSubmit(){console.log(this.formGroup.value),this.submitted=!0,this.formGroup.get("fullName")?.patchValue(this.formGroup.get("fullName")?.value.trim());const t=this.formGroup.value.userPermissions.forEach(i=>{0==i.permissionItemDetailId&&delete i.permissionItemDetailId});console.log(t),console.log(this.formGroup.value),0==this.formGroup.get("userId")?.value?this.AddUser():this.UpdateUser()}AddUser(){return this.isLoading=!0,this.formGroup.get("mobile")?.value||delete this.formGroup.value.mobile,this.formGroup.get("contractStartDate")?.value||delete this.formGroup.value.contractStartDate,this.formGroup.get("contractEndDate")?.value||delete this.formGroup.value.contractEndDate,console.log(this.formGroup.value),this.userService.AddUser(this.formGroup.value).subscribe(t=>{1==t.isSuccess?(console.log(t),this.isLoading=!1,this.modalService.open(h).componentInstance.name="add"):(this.isLoading=!1,this.errorsList=t.Errors||t.errors)},t=>{this.isLoading=!1,console.log(t),this.errorMessage=t.statusText})}UpdateUser(){return console.log(this.formGroup.value),this.isLoading=!0,this.userService.EditUser(this.formGroup.value).subscribe(t=>{1==t.isSuccess?(console.log(t),this.isLoading=!1,this.isShowUserInfo=!1,this.isShowLocation=!1,this.isShowWorkingHoursn=!1,this.isShowRolesPErmission=!1,this.isShowpermisionsRoles=!1,this.modalService.open(h).componentInstance.name="edit"):(this.isLoading=!1,this.errorsList=t.Errors||t.errors)},t=>{this.isLoading=!1,console.log(t),this.errorMessage=t.statusText})}removeUserName(){this.formGroup.get("fullName")?.patchValue("")}removeemail(){this.formGroup.get("email")?.patchValue("")}removephone(){this.formGroup.get("mobile")?.patchValue("")}chooseStatus(){this.isStatus=0==this.isStatus,1==this.isStatus?(console.log(this.isStatus),this.formGroup.get("status")?.patchValue(2002)):this.formGroup.get("status")?.patchValue(2001)}chooseTime(t,i){console.log(t),1==t?(this.formGroup.get("userWorkingHours").at(i).get("fromTime").enable(),this.formGroup.get("userWorkingHours").at(i).get("toTime").enable(),this.formGroup.get("userWorkingHours").at(i).get("status").patchValue(2001)):(this.formGroup.get("userWorkingHours").at(i).get("status").patchValue(2002),this.formGroup.get("userWorkingHours").at(i).get("fromTime").disable(),this.formGroup.get("userWorkingHours").at(i).get("toTime").disable())}GetUserDetails(){this.userService.GetUserDetails(this.userId).subscribe(t=>{if(t){const i=t.data;this.formGroup.patchValue(i),this.formGroup.get("branchId")?.patchValue(i.branch.branchId),this.formGroup.get("roleId")?.patchValue(i.role.roleId),this.formGroup.get("contractStartDate")?.patchValue(this.datePipe.transform(i.contractStartDate,"yyyy-MM-dd")),this.formGroup.get("contractEndDate")?.patchValue(this.datePipe.transform(i.contractEndDate,"yyyy-MM-dd")),this.isStatus=2001==this.formGroup.value.status,this.formGroup.value.city&&(this.searchBranch=this.formGroup.value.city,this.GetBranches());for(let s=0;s<i.userWorkingHours.length;s++)this.userWorkingHours.push(this.fb.group({dayId:i.userWorkingHours[s].dayId,dayName:i.userWorkingHours[s].day[0].lookupName,fromTime:i.userWorkingHours[s]?.fromTime,toTime:i.userWorkingHours[s]?.toTime,selected:i.userWorkingHours[s].selected,status:i.userWorkingHours[s].status}));this.roles=i.permissions;for(let s=0;s<this.roles?.length;s++)for(let r=0;r<this.roles[s]?.permissionSubCategories?.length;r++)for(let a=0;a<this.roles[s].permissionSubCategories[r].permissionItems?.length;a++)if(1==this.roles[s].permissionSubCategories[r].permissionItems[a].selected){this.userPermissions.push(this.fb.group({permissionSubCatId:this.roles[s].permissionSubCategories[r].permissionSubCatId,permissionItemId:this.roles[s].permissionSubCategories[r].permissionItems[a].permissionItemId}));for(let l=0;l<this.roles[s].permissionSubCategories[r].permissionItems[a].permissionItemDetails?.length;l++)1==this.roles[s].permissionSubCategories[r].permissionItems[a].permissionItemDetails[l].selected&&this.userPermissions.push(this.fb.group({permissionSubCatId:this.roles[s].permissionSubCategories[r].permissionSubCatId,permissionItemId:this.roles[s].permissionSubCategories[r].permissionItems[a].permissionItemId,permissionItemDetailId:this.roles[s].permissionSubCategories[r].permissionItems[a].permissionItemDetails[l].permissionItemDetailsId}))}}})}GetLocations(){return this.userService.GetLocations().subscribe(t=>{t&&(this.locations=t.data)})}GetBranches(){return this.userService.GetBranches(this.searchBranch).subscribe(t=>{t&&(this.branches=t.data)})}getBranchDetails(t){console.log(t),this.formGroup.get("city").patchValue(t.city),this.userService.getBranchDetails(t.branchId).subscribe(i=>{if(i){console.log(i);const s=i.data;for(let r=this.userWorkingHours.value.length-1;r>=0;r--)this.userWorkingHours.removeAt(r);for(let r=0;r<s.branchWorkingHours.length;r++)this.userWorkingHours.push(this.fb.group({dayId:s.branchWorkingHours[r].dayId,dayName:s.branchWorkingHours[r].day[0].lookupName,fromTime:s.branchWorkingHours[r].fromTime,toTime:s.branchWorkingHours[r].toTime,selected:s.branchWorkingHours[r].selected,status:s.branchWorkingHours[r].status}))}})}GetRoles(){return this.userService.GetRoles().subscribe(t=>{t&&(this.rolesList=t.data)})}getRoleDetails(t){return this.userService.GetRoleDetails(t.roleId).subscribe(i=>{if(i){this.roles=i.data.permissions;for(let s=this.userPermissions.value.length-1;s>=0;s--)this.userPermissions.removeAt(s);this.formGroup.get("indoor")?.patchValue(i.data?.indoor),this.formGroup.get("outdoor")?.patchValue(i.data?.outdoor),console.log("selected",this.roles?.permissionSubCategories);for(let s=0;s<this.roles?.length;s++)for(let r=0;r<this.roles[s]?.permissionSubCategories?.length;r++)for(let a=0;a<this.roles[s].permissionSubCategories[r].permissionItems?.length;a++)if(1==this.roles[s].permissionSubCategories[r].permissionItems[a].selected){this.userPermissions.push(this.fb.group({permissionSubCatId:this.roles[s].permissionSubCategories[r].permissionSubCatId,permissionItemId:this.roles[s].permissionSubCategories[r].permissionItems[a].permissionItemId}));for(let l=0;l<this.roles[s].permissionSubCategories[r].permissionItems[a].permissionItemDetails?.length;l++)1==this.roles[s].permissionSubCategories[r].permissionItems[a].permissionItemDetails[l].selected&&this.userPermissions.push(this.fb.group({permissionSubCatId:this.roles[s].permissionSubCategories[r].permissionSubCatId,permissionItemId:this.roles[s].permissionSubCategories[r].permissionItems[a].permissionItemId,permissionItemDetailId:this.roles[s].permissionSubCategories[r].permissionItems[a].permissionItemDetails[l].permissionItemDetailsId}))}setTimeout(()=>{console.log(this.formGroup.value)},2e3)}})}chooseCity(t){console.log(t),this.searchBranch=t,this.formGroup.get("branchId")?.patchValue(""),this.GetBranches()}getbranchList(t){console.log("e",t),this.searchBranch="";for(let i=this.userWorkingHours.value.length-1;i>=0;i--)this.userWorkingHours.removeAt(i);this.GetBranches()}clearBranchData(t){console.log("clear branch",t);for(let i=this.userWorkingHours.value.length-1;i>=0;i--)this.userWorkingHours.removeAt(i)}numberOnly(t){const i=t.which?t.which:t.keyCode;return!(i>31&&(i<48||i>57))}pushPermissionItemId(t,i,s){console.log(i),console.log(s);let r=this.formGroup.value.userPermissions.findIndex(l=>l.permissionItemId===s.permissionItemId);this.formGroup.value.userPermissions.forEach(l=>{console.log(l.permissionSubCatId);let v=this.formGroup.value.userPermissions.findIndex(T=>T.permissionSubCatId===i.permissionSubCatId);-1!==v&&(console.log("PSubCatId",v),this.formGroup.get("userPermissions").removeAt(v))});let a=this.formGroup.value.userPermissions.findIndex(l=>l.permissionSubCatId===i.permissionSubCatId);console.log(a),-1!==r?(console.log("isExist",r),this.formGroup.get("userPermissions").removeAt(r),-1!==a&&(console.log("PSubCatId",a),this.formGroup.get("userPermissions").removeAt(a))):(this.userPermissions.push(this.fb.group({permissionSubCatId:i.permissionSubCatId,permissionItemId:s.permissionItemId,permissionItemDetailId:0})),s.permissionItemDetails.forEach(l=>{this.userPermissions.push(this.fb.group({permissionSubCatId:i.permissionSubCatId,permissionItemId:s.permissionItemId,permissionItemDetailId:l.permissionItemDetailsId}))})),console.log(this.formGroup.value)}isChecked(t){return this.formGroup.value.userPermissions.find(i=>i.permissionItemId===t)}pushPermissionItemDetailId(t,i,s){let r=this.formGroup.value.userPermissions.findIndex(a=>a.permissionItemDetailId===t.target.value||a.permissionItemDetailId===Number(t.target.value));-1!==r?(console.log("isExist",r),this.formGroup.get("userPermissions").removeAt(r)):this.userPermissions.push(this.fb.group({permissionItemId:s.permissionItemId,permissionItemDetailId:Number(t.target.value)})),console.log(this.formGroup.value)}collapseList2(t,i){console.log(t,i),this.isCollapse=!0,this.isIndex=t}collapseList(t,i){this.isShowpermisionsRoles=!1,this.catRow=55,this.ExpandRow=null==this.ExpandRow||this.ExpandRow!=i?i:void 0}editrolesList(t){if(this.catRow=null==this.catRow||this.catRow!=t?t:void 0,0==this.isShowpermisionsRoles)this.isShowpermisionsRoles=!0;else if(1==this.isShowpermisionsRoles){const i=this.modalService.open(f);i.componentInstance.name="edit",i.componentInstance.semdToConfirm.subscribe(s=>{console.log("result",s),this.isShowpermisionsRoles=!1,this.modalService.dismissAll(),this.onSubmit()})}}editUserInfo(){if(0==this.isShowUserInfo)this.isShowUserInfo=!0,this.isShowRolesPErmission=!1,this.isShowWorkingHoursn=!1,this.isShowLocation=!1,this.isShowpermisionsRoles=!1;else if(1==this.isShowUserInfo){const t=this.modalService.open(f);t.componentInstance.name="edit",t.componentInstance.semdToConfirm.subscribe(i=>{console.log("result",i),this.isShowUserInfo=!1,this.modalService.dismissAll(),this.onSubmit()}),t.componentInstance.sendToClose.subscribe(i=>{console.log("resulttoclose",i),this.isShowUserInfo=!1,this.modalService.dismissAll()})}}editLocationInfo(){if(0==this.isShowLocation)this.isShowLocation=!0,this.isShowUserInfo=!1,this.isShowWorkingHoursn=!1,this.isShowRolesPErmission=!1,this.isShowpermisionsRoles=!1;else if(1==this.isShowLocation){const t=this.modalService.open(f);t.componentInstance.name="edit",t.componentInstance.semdToConfirm.subscribe(i=>{this.isShowLocation=!1,this.modalService.dismissAll(),this.onSubmit(),console.log("onSubmit")}),t.componentInstance.sendToClose.subscribe(i=>{console.log("resulttoclose",i),this.isShowLocation=!1,this.modalService.dismissAll()})}}editWorkingHoursInfo(){if(0==this.isShowWorkingHoursn)this.isShowWorkingHoursn=!0,this.isShowLocation=!1,this.isShowUserInfo=!1,this.isShowRolesPErmission=!1,this.isShowpermisionsRoles=!1;else if(1==this.isShowWorkingHoursn){const t=this.modalService.open(f);t.componentInstance.name="edit",t.componentInstance.semdToConfirm.subscribe(i=>{console.log("result",i),this.isShowWorkingHoursn=!1,this.modalService.dismissAll(),this.onSubmit()}),t.componentInstance.sendToClose.subscribe(i=>{console.log("resulttoclose",i),this.isShowWorkingHoursn=!1,this.modalService.dismissAll()})}}editRolesPErmission(){if(0==this.isShowRolesPErmission)this.isShowRolesPErmission=!0,this.isShowWorkingHoursn=!1,this.isShowLocation=!1,this.isShowUserInfo=!1,this.isShowpermisionsRoles=!1;else if(1==this.isShowRolesPErmission){const t=this.modalService.open(f);t.componentInstance.name="edit",t.componentInstance.semdToConfirm.subscribe(i=>{console.log("result",i),this.isShowRolesPErmission=!1,this.modalService.dismissAll(),this.onSubmit()}),t.componentInstance.sendToClose.subscribe(i=>{console.log("resulttoclose",i),this.isShowRolesPErmission=!1,this.modalService.dismissAll()})}}getWorkingHours(){this.userService.getLookupsById(6).subscribe(t=>{console.log(t.data);for(let i=0;i<t.data.length;i++)this.userWorkingHours.push(this.fb.group({dayId:t.data[i]?.id,dayName:t.data[i]?.description,fromTime:"09:00",toTime:"17:00",selected:!0,isActive:!0,status:2001}))},t=>{this.errorMessage=t.message})}getDefaultPermissions(){return this.userService.getDefaultPermissions().subscribe(t=>{t&&(this.roles=t.data)})}checkSpecialChar(t){var i;return(i=document.all?t.keyCode:t.which)>64&&i<91||i>96&&i<123||8==i||32==i||i>=48&&i<=57}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_),e.Y36(I.F),e.Y36(g.F0),e.Y36(u.FF),e.Y36(U._W),e.Y36(g.gz),e.Y36(p.qu),e.Y36(x.r),e.Y36(m.uU),e.Y36(u.NM))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-adduser"]],features:[e._Bn([m.uU])],decls:132,vars:45,consts:[[1,"card-page"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-12"],[1,"page-title"],[1,"card-form","position-relative"],["class","overlay-bi",4,"ngIf"],[1,"d-flex","justify-content-end","align-items-center"],[1,"form-check","form-switch","mb-2","mx-2"],[1,"labelactive"],["name","isStatus","type","checkbox","role","switch",1,"form-check-input",3,"ngModel","ngModelOptions","disabled","ngModelChange","change"],["class","edit-btn float-end",4,"ngIf"],[1,"col-md-4"],[1,"form-group","overflow-hidden","position-relative"],["formControlName","fullName","name","fullName","type","text","placeholder","Type name ","required","","minlength","6","maxlength","30","OnlyCharacter","","autocomplete","off",1,"form-control"],["class","btn btn-remove",3,"click",4,"ngIf"],["class","ng-dirty",4,"ngIf"],["type","text","formControlName","email","name","email","placeholder","email","pattern","[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{1,6}$","required","","autocomplete","off",1,"form-control"],[1,"form-group","position-relative"],["type","text","formControlName","mobile","name","mobile","placeholder","","ng2TelInput","","min","8","max","10","minlength","8","maxlength","10",1,"form-control",3,"ng2TelInputOptions","keypress"],["class","ng-dirty",3,"hidden",4,"ngIf"],[1,"form-group"],["name","city","id","city","placeholder","Select","formControlName","city","required","",3,"items","change","clear"],["ng-label-tmp",""],["name","branchId","id","branchId","placeholder","Select","bindLabel","branchName","bindValue","branchId","formControlName","branchId","required","",3,"items","change","clear"],[1,""],[1,"form-check","mb-2"],[1,"day-active","mt-0","mb-2"],[1,"px-2","mb-2"],["formArrayName","userWorkingHours",4,"ngFor","ngForOf"],["formControlName","contractStartDate","name","contractStartDate","type","date","placeholder","Type name ",1,"form-control"],["formControlName","contractEndDate","name","contractEndDate","type","date","placeholder","Type name ",1,"form-control",3,"min"],["name","roleId","id","roleId","placeholder","Type name","formControlName","roleId","bindLabel","name","bindValue","roleId","required","",3,"items","change"],[1,"col-md-4",2,"padding-top","45px"],[1,"form-check","form-check-inline"],["type","checkbox","id","indoor","value","indoor","formControlName","indoor",1,"form-check-input"],["for","indoor",1,"form-check-label"],["type","checkbox","id","outdoor","value","outdoor","formControlName","outdoor",1,"form-check-input"],["for","outdoor",1,"form-check-label"],[1,"page-title","mb-2"],["class","main-category mt-0",4,"ngFor","ngForOf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"btns-group"],["type","button",1,"btn","btn-cancel"],["type","submit","class","btn btn-save",4,"ngIf"],["type","button","class","btn btn-save btn-load","disabled","",4,"ngIf"],[1,"overlay-bi"],[1,"edit-btn","float-end"],["type","button",1,"btn",3,"click"],["src","assets/images/save.png","class","save-img","alt","",4,"ngIf"],["src","assets/images/edit.png","alt","",4,"ngIf"],["src","assets/images/save.png","alt","",1,"save-img"],["src","assets/images/edit.png","alt",""],[1,"btn","btn-remove",3,"click"],[1,"fa-solid","fa-xmark"],[1,"ng-dirty"],["class","error",4,"ngIf"],[4,"ngIf"],[1,"error"],[1,"ng-dirty",3,"hidden"],["type","button",1,"btn",3,"disabled","click"],["src","assets/images/save.png","alt","","class","save-img",4,"ngIf"],["formArrayName","userWorkingHours"],[1,"row",3,"formGroupName"],[1,"col-sm-4"],[1,"form-group","day-active"],[1,"form-check","form-switch","justify-content-between"],["type","checkbox","role","switch","id","flexSwitchCheckDefault","formControlName","selected",1,"form-check-input",3,"change"],["for",""],[1,"from-to-time"],["type","time","formControlName","fromTime","name","fromTime","placeholder","",1,"form-control",3,"disabled"],["type","time","formControlName","toTime","name","toTime","placeholder","",1,"form-control"],[1,"main-category","mt-0"],[1,"cat-head"],["type","button",1,"btn","btn-book",3,"click"],["class","fa-solid fa-chevron-down",4,"ngIf"],["class","fa-solid fa-chevron-up",4,"ngIf"],["class","bodyroles",4,"ngIf"],[1,"fa-solid","fa-chevron-down"],[1,"fa-solid","fa-chevron-up"],[1,"bodyroles"],["class","overlay-ba",4,"ngIf"],["class","cat-list",4,"ngFor","ngForOf"],[1,"overlay-ba"],[1,"cat-list"],[4,"ngFor","ngForOf"],[1,"cat-sub"],["class","form-check form-check-inline",4,"ngIf"],[1,"sub-details"],["class","form-check form-check-inline",4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input",3,"id","value","checked","change"],[1,"form-check-label",3,"for"],["type","radio",1,"form-check-input",3,"name","id","value","checked","change"],["type","checkbox",1,"form-check-input",3,"value","id","checked","disabled","change"],["role","alert",1,"alert","alert-danger"],["type","submit",1,"btn","btn-save"],["type","button","disabled","",1,"btn","btn-save","btn-load"],[1,"fa-solid","fa-circle-notch","fa-spin"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),e._uU(6," Account Information "),e.qZA()(),e.TgZ(7,"div",5),e.YNc(8,w,1,0,"div",6),e.TgZ(9,"div",2)(10,"div",3)(11,"div",7)(12,"div",8)(13,"label",9),e._uU(14,"Active "),e.qZA(),e.TgZ(15,"input",10),e.NdJ("ngModelChange",function(r){return i.isStatus=r})("change",function(){return i.chooseStatus()}),e.qZA()(),e.YNc(16,J,4,2,"div",11),e.qZA()(),e.TgZ(17,"div",12)(18,"div",13)(19,"label"),e._uU(20,"Full Name *"),e.qZA(),e._UZ(21,"input",14),e.YNc(22,P,2,0,"button",15),e.YNc(23,D,3,2,"div",16),e.qZA()(),e.TgZ(24,"div",12)(25,"div",13)(26,"label"),e._uU(27,"Email*"),e.qZA(),e._UZ(28,"input",17),e.YNc(29,O,2,0,"button",15),e.YNc(30,R,4,2,"div",16),e.qZA()(),e.TgZ(31,"div",12)(32,"div",18)(33,"label"),e._uU(34,"Phone Number"),e.qZA(),e.TgZ(35,"div")(36,"input",19),e.NdJ("keypress",function(r){return i.numberOnly(r)}),e.qZA(),e.YNc(37,H,2,0,"button",15),e.YNc(38,V,3,3,"div",20),e.qZA()()()()()(),e.TgZ(39,"div",3)(40,"div",4)(41,"h3"),e._uU(42," Branch & Location * "),e.qZA()(),e.TgZ(43,"div",5),e.YNc(44,B,1,0,"div",6),e.YNc(45,K,4,3,"div",11),e.TgZ(46,"div",2)(47,"div",12)(48,"div",21)(49,"label"),e._uU(50,' Location " City " '),e.qZA(),e.TgZ(51,"ng-select",22),e.NdJ("change",function(r){return i.chooseCity(r)})("clear",function(r){return i.getbranchList(r)}),e.YNc(52,$,1,1,"ng-template",23),e.qZA(),e.YNc(53,z,2,1,"div",16),e.qZA()(),e.TgZ(54,"div",12)(55,"div",21)(56,"label"),e._uU(57," Branch"),e.qZA(),e.TgZ(58,"ng-select",24),e.NdJ("change",function(r){return i.getBranchDetails(r)})("clear",function(r){return i.clearBranchData(r)}),e.qZA(),e.YNc(59,te,3,2,"div",16),e.qZA()()()()(),e.TgZ(60,"div",3)(61,"div",4)(62,"h3"),e._uU(63,"Working Hours"),e.qZA()(),e.TgZ(64,"div",5),e.YNc(65,ie,1,0,"div",6),e.YNc(66,ne,4,3,"div",11),e.TgZ(67,"div",25),e._UZ(68,"div",26),e.TgZ(69,"div",2)(70,"div",12)(71,"div",27)(72,"h6"),e._uU(73," Days "),e.qZA()()(),e.TgZ(74,"div",12)(75,"h6",28),e._uU(76," Hours"),e.qZA()(),e._UZ(77,"div",12),e.qZA(),e._UZ(78,"div",3),e.YNc(79,re,20,3,"div",29),e.qZA(),e.TgZ(80,"div",2)(81,"div",3)(82,"h6"),e._uU(83,"Contract "),e.qZA()(),e.TgZ(84,"div",12)(85,"div",13)(86,"label"),e._uU(87,"Start Date"),e.qZA(),e._UZ(88,"input",30),e.YNc(89,de,3,2,"div",16),e.qZA()(),e.TgZ(90,"div",12)(91,"div",13)(92,"label"),e._uU(93," End Date "),e.qZA(),e._UZ(94,"input",31),e.YNc(95,ue,3,2,"div",16),e.qZA()()()()(),e.TgZ(96,"div",3)(97,"div",4)(98,"h3"),e._uU(99," Role "),e.qZA()(),e.TgZ(100,"div",5),e.YNc(101,pe,1,0,"div",6),e.YNc(102,fe,4,3,"div",11),e.TgZ(103,"div",2)(104,"div",12)(105,"div",21)(106,"label"),e._uU(107," Role * "),e.qZA(),e.TgZ(108,"ng-select",32),e.NdJ("change",function(r){return i.getRoleDetails(r)}),e.qZA(),e.YNc(109,ve,2,1,"div",16),e.qZA()(),e.TgZ(110,"div",33)(111,"div",34),e._UZ(112,"input",35),e.TgZ(113,"label",36),e._uU(114," indoor "),e.qZA()(),e.TgZ(115,"div",34),e._UZ(116,"input",37),e.TgZ(117,"label",38),e._uU(118," outdoor "),e.qZA()()()()()(),e.TgZ(119,"div",3)(120,"div",39)(121,"h3"),e._uU(122," User Permissions "),e.qZA()(),e.YNc(123,Ne,8,4,"div",40),e.qZA(),e.TgZ(124,"div",3),e.YNc(125,Je,3,1,"div",41),e.qZA(),e.TgZ(126,"div",3)(127,"div",42)(128,"button",43),e._uU(129,"Cancel"),e.qZA(),e.YNc(130,Pe,2,1,"button",44),e.YNc(131,Ge,2,0,"button",45),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.formGroup),e.xp6(6),e.ekj("overflow-hidden",!i.isShowUserInfo&&i.isEdit),e.xp6(1),e.Q6J("ngIf",!i.isShowUserInfo&&i.isEdit),e.xp6(7),e.Q6J("ngModel",i.isStatus)("ngModelOptions",e.DdM(41,Me))("disabled",i.isEdit&&i.sharedService.getUserId==i.userId.toString()),e.xp6(1),e.Q6J("ngIf",i.isEdit),e.xp6(6),e.Q6J("ngIf",i.formGroup.get("fullName").value),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.formValid.fullName.invalid||i.formValid.fullName.invalid&&(i.formValid.fullName.dirty||i.formValid.fullName.touched)),e.xp6(6),e.Q6J("ngIf",i.formGroup.get("email").value),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.formValid.email.invalid||i.formValid.email.invalid&&(i.formValid.email.dirty||i.formValid.email.touched)),e.xp6(6),e.Q6J("ng2TelInputOptions",e.VKq(43,Oe,e.DdM(42,De))),e.xp6(1),e.Q6J("ngIf",i.formGroup.get("mobile").value),e.xp6(1),e.Q6J("ngIf",i.formValid.mobile.invalid&&(i.formValid.mobile.dirty||i.formValid.mobile.touched)),e.xp6(5),e.ekj("overflow-hidden",!i.isShowLocation&&i.isEdit),e.xp6(1),e.Q6J("ngIf",!i.isShowLocation&&i.isEdit),e.xp6(1),e.Q6J("ngIf",i.isEdit),e.xp6(6),e.Q6J("items",i.locations),e.xp6(2),e.Q6J("ngIf",i.submitted&&i.formValid.city.invalid||i.formValid.city.invalid&&(i.formValid.city.dirty||i.formValid.city.touched)),e.xp6(5),e.Q6J("items",i.branches),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.formValid.branchId.invalid||i.formValid.branchId.invalid&&(i.formValid.branchId.dirty||i.formValid.branchId.touched)),e.xp6(5),e.ekj("overflow-hidden",!i.isShowWorkingHoursn&&i.isEdit),e.xp6(1),e.Q6J("ngIf",!i.isShowWorkingHoursn&&i.isEdit),e.xp6(1),e.Q6J("ngIf",i.isEdit),e.xp6(13),e.Q6J("ngForOf",i.userWorkingHours.controls),e.xp6(10),e.Q6J("ngIf",i.formValid.contractStartDate.invalid||i.formValid.contractStartDate.invalid&&(i.formValid.contractStartDate.dirty||i.formValid.contractStartDate.touched)),e.xp6(5),e.Q6J("min",i.formGroup.get("contractStartDate").value),e.xp6(1),e.Q6J("ngIf",i.formValid.contractEndDate.invalid||i.formValid.contractEndDate.invalid&&(i.formValid.contractEndDate.dirty||i.formValid.contractStartDate.touched)),e.xp6(5),e.ekj("overflow-hidden",!i.isShowRolesPErmission&&i.isEdit),e.xp6(1),e.Q6J("ngIf",!i.isShowRolesPErmission&&i.isEdit),e.xp6(1),e.Q6J("ngIf",i.isEdit),e.xp6(6),e.Q6J("items",i.rolesList),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.formValid.roleId.invalid||i.formValid.roleId.invalid&&(i.formValid.roleId.dirty||i.formValid.roleId.touched)),e.xp6(14),e.Q6J("ngForOf",i.roles),e.xp6(2),e.Q6J("ngIf",i.errorsList),e.xp6(5),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoading))},dependencies:[m.sg,m.O5,y._,p._Y,p.Fj,p.Wl,p.JJ,p.JL,p.Q7,p.wO,p.nD,p.c5,p.sg,p.u,p.x0,p.CE,p.On,C.w9,C.mR,k.Q],styles:[".main-category[_ngcontent-%COMP%]{background:#ffffff;border:.5px solid #c4cdd5;box-shadow:0 5px 25px #0000000d;border-radius:8px;padding:0;margin:20px}.main-category[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:0 5px 5px;color:inherit;border:0;border-top:1px solid;opacity:.25;border-color:#939393}.main-category[_ngcontent-%COMP%]   .cat-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px;align-items:center}.main-category[_ngcontent-%COMP%]   .cat-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:18px;line-height:22px;color:#1b212d}.main-category[_ngcontent-%COMP%]   .cat-head[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#dc3545;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#fff}.main-category[_ngcontent-%COMP%]   .cat-list[_ngcontent-%COMP%]{display:flex;margin-bottom:10px;padding:10px}.main-category[_ngcontent-%COMP%]   .cat-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:20px;color:#1b212d;padding:15px;width:170px}.main-category[_ngcontent-%COMP%]   .cat-sub[_ngcontent-%COMP%]{width:140px}.main-category[_ngcontent-%COMP%]   .cat-sub[_ngcontent-%COMP%]   .form-check-inline[_ngcontent-%COMP%]{display:inline-block;margin-right:1rem;padding:13px 20px}.main-category[_ngcontent-%COMP%]   .sub-details[_ngcontent-%COMP%]{margin:5px -4px}.main-category[_ngcontent-%COMP%]   .bodyroles[_ngcontent-%COMP%]{position:relative;overflow:hidden}.main-category[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]{margin:12px 15px}label[_ngcontent-%COMP%]{display:inline-block;font-size:14px;font-weight:500;color:#1b212d}.btn-remove[_ngcontent-%COMP%]{position:absolute;right:0;top:37px;color:#999}.pt30[_ngcontent-%COMP%]{padding-top:30px}.page-title[_ngcontent-%COMP%]{padding:0 10px}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#dc3545;border-color:#dc3545}.overlay-bi[_ngcontent-%COMP%], .overlay-wh[_ngcontent-%COMP%], .overlay-ba[_ngcontent-%COMP%]{background-color:#c7c7c736;position:absolute;inset:0;z-index:1}.edit-btn[_ngcontent-%COMP%]{margin:0;z-index:5;position:relative}.edit-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#dc3545;font-size:28px;margin-top:-14px}.edit-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px}.edit-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}"]}),o})();var Ee=d(86349),Qe=d(28424),Re=d(59442);function He(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",33),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"div",34),e._UZ(13,"input",35)(14,"label",36),e.qZA()(),e.TgZ(15,"td")(16,"button",37),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.viewUser())}),e._uU(17,"View details "),e.qZA()()()}if(2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t.fullName),e.xp6(2),e.Oqu(null==t.role?null:t.role.name),e.xp6(2),e.hij(" ",null==t.branch?null:t.branch.branchName," "),e.xp6(2),e.hij(" ",t.email," "),e.xp6(2),e.hij(" ",t.mobile," "),e.xp6(3),e.Q6J("checked","2001"==t.status),e.xp6(3),e.MGl("ngbTooltip"," Invitation: ",2004==t.invitation?"Completed":"Pending","")("routerLink","/users/view-user/",t.userId,"")}}function Ye(o,n){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function Fe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",23)(2,"div",24)(3,"table",25)(4,"thead")(5,"tr")(6,"th",26)(7,"button",27),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.sortByName())}),e._uU(8," User Name "),e._UZ(9,"i",28)(10,"i",29),e.qZA()(),e.TgZ(11,"th",26)(12,"button",27),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.sortByNoUser())}),e._uU(13," Role "),e._UZ(14,"i",28)(15,"i",29),e.qZA()(),e.TgZ(16,"th",26)(17,"button",27),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.sortByIndoorOutdoor())}),e._uU(18," Branche "),e._UZ(19,"i",28)(20,"i",29),e.qZA()(),e.TgZ(21,"th",26)(22,"button",30),e._uU(23," Email "),e.qZA()(),e.TgZ(24,"th",26)(25,"button",30),e._uU(26," Phone "),e.qZA()(),e.TgZ(27,"th",26)(28,"button",30),e._uU(29," Activation "),e.qZA()(),e.TgZ(30,"th",26)(31,"button",30),e._uU(32," Action "),e.qZA()()()(),e.TgZ(33,"tbody"),e.YNc(34,He,18,8,"tr",31),e.qZA()()(),e.YNc(35,Ye,2,0,"div",32),e.qZA()()}if(2&o){const t=n.$implicit,i=e.oxw();e.xp6(7),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",2==i.sort),e.xp6(1),e.ekj("active",3==i.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",4==i.sort),e.xp6(1),e.ekj("active",5==i.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",6==i.sort),e.xp6(1),e.ekj("active",7==i.sort),e.xp6(14),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function Ve(o,n){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}const Be=function(o){return{active:o}};function Le(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"li",38)(1,"button",39),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.setPage(r))}),e._uU(2),e.qZA()()}if(2&o){const t=n.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,Be,i.pageNo===t))("disabled",i.pageNo===t),e.xp6(1),e.hij(" ",t+1," ")}}const We=[{path:"",component:(()=>{class o{constructor(t,i,s){this.userService=t,this.router=i,this.headerService=s,this.searchText="",this.sort=1,this.branchId="",this.roleId="",this.pageNo=0,this.searchBranch=""}ngOnInit(){this.headerService.setTitle("Users"),this.getUsers(),this.GetBranches(),this.GetRoles()}addUser(){this.router.navigateByUrl("/users/adduser"),this.headerService.setTitle("Users > Add user")}viewUser(){this.headerService.setTitle("Users > View user")}getUsers(){return this.userService.GetUsers(this.searchText,this.sort,this.branchId,this.roleId,this.pageNo).subscribe(t=>{t&&(this.users=t.data,this.totalPages=t.totalPages,this.totalRecordsCount=t.info.totalRecordsCount,this.totalRecords=t.info.totalRecordsCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=Ee.w6(this.pagin),console.log(this.pagin),console.log(this.pages))})}searchRoles(t){console.log(t?.target.value);const i=t.target.value;console.log(i.length),i.length>=3&&(this.searchText=i,this.pageNo=0,this.getUsers()),0==i.length&&this.getUsers()}removeSearch(){this.searchText="",this.sort=1,this.getUsers()}sortByName(){this.sort=3==this.sort?1:2==this.sort?3:2,this.getUsers()}sortByNoUser(){this.sort=5==this.sort?1:4==this.sort?5:4,this.getUsers()}sortByIndoorOutdoor(){this.sort=7==this.sort?1:6==this.sort?7:6,this.getUsers()}sortByActivation(){this.sort=9==this.sort?1:8==this.sort?9:8,this.getUsers()}filterByBranchId(t){console.log(t),this.branchId=t.branchId,this.pageNo=0,this.getUsers()}clearBranch(t){this.branchId="",this.getUsers()}filterByRoleId(t){console.log(t),this.roleId=t.roleId,this.pageNo=0,this.getUsers()}clearRole(t){this.roleId="",this.getUsers()}setPage(t){this.pageNo=t,this.getUsers(),window.scroll(0,0)}GetBranches(){return this.userService.GetBranches(this.searchBranch).subscribe(t=>{t&&(this.branches=t.data)})}GetRoles(){return this.userService.GetRoles().subscribe(t=>{t&&(this.roles=t.data)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_),e.Y36(g.F0),e.Y36(x.r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-users"]],decls:35,vars:12,consts:[[1,"card-page"],[1,"row"],[1,"col-md-5"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"col-md-2"],[1,"col-md-5","d-flex","justify-content-end","btnadd"],[1,"form-group"],["name","BranchId","id","BranchId","placeholder","Branch","bindLabel","branchName","bindValue","branchId","required","",3,"items","change","clear"],["name","RoleId","id","RoleId","placeholder","Role","bindLabel","name","bindValue","roleId","required","",3,"items","change","clear"],[1,"btn","btn-add",3,"click"],["src","assets/images/plus.png","alt",""],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[1,"col-md-6",3,"hidden"],[1,"showing"],[1,"pagination"],["class","page-item",4,"ngFor","ngForOf"],[1,"card-table"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn"],[4,"ngFor","ngForOf"],[4,"ngIf"],["scope","row"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","flexSwitchCheckChecked","readonly","","disabled","",1,"form-check-input",3,"checked"],["for","flexSwitchCheckChecked",1,"form-check-label"],["placement","top",1,"btn","btn-view",3,"ngbTooltip","routerLink","click"],[1,"page-item"],[1,"page-link",3,"ngClass","disabled","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return i.removeSearch()}),e._UZ(5,"i",5),e.qZA(),e.TgZ(6,"input",6),e.NdJ("ngModelChange",function(r){return i.searchText=r})("keyup",function(r){return i.searchRoles(r)}),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){return i.removeSearch()}),e._UZ(8,"i",8),e.qZA()()(),e._UZ(9,"div",9),e.TgZ(10,"div",10)(11,"div",11)(12,"ng-select",12),e.NdJ("change",function(r){return i.filterByBranchId(r)})("clear",function(r){return i.clearBranch(r)}),e.qZA()(),e.TgZ(13,"div",11)(14,"ng-select",13),e.NdJ("change",function(r){return i.filterByRoleId(r)})("clear",function(r){return i.clearRole(r)}),e.qZA()(),e.TgZ(15,"button",14),e.NdJ("click",function(){return i.addUser()}),e._UZ(16,"img",15),e._uU(17," Add User "),e.qZA()()(),e.TgZ(18,"div",1),e.YNc(19,Fe,36,17,"div",16),e.TgZ(20,"div",17),e.YNc(21,Ve,2,0,"ng-template",null,18,e.W1O),e.qZA(),e.TgZ(23,"div",19)(24,"h6",20),e._uU(25," Showing "),e.TgZ(26,"span"),e._uU(27),e.qZA(),e._uU(28," from "),e.TgZ(29,"span"),e._uU(30),e.qZA(),e._uU(31," data "),e.qZA()(),e.TgZ(32,"div",19)(33,"ul",21),e.YNc(34,Le,3,5,"li",22),e.qZA()()()()),2&t){const s=e.MAs(22);e.xp6(6),e.Q6J("ngModel",i.searchText),e.xp6(1),e.Q6J("hidden",0==i.searchText.length),e.xp6(5),e.Q6J("items",i.branches),e.xp6(2),e.Q6J("items",i.roles),e.xp6(5),e.Q6J("ngIf",i.users)("ngIfElse",s),e.xp6(4),e.Q6J("hidden",(null==i.users?null:i.users.length)>7),e.xp6(4),e.AsE(" ",6*(i.pageNo+1)-5," - ",6==(null==i.users?null:i.users.length)?6*(i.pageNo+1):i.totalRecords," "),e.xp6(3),e.hij(" ",i.totalRecords," "),e.xp6(2),e.Q6J("hidden",i.totalRecordsCount<7),e.xp6(2),e.Q6J("ngForOf",i.pages)}},dependencies:[m.mk,m.sg,m.O5,g.rH,p.Fj,p.JJ,p.On,C.w9,u._L,Qe.N,Re.w],styles:[".form-group[_ngcontent-%COMP%]{width:150px;margin:0 5px}.btnadd[_ngcontent-%COMP%]{align-items:center}.btnadd[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{padding:9px 20px;margin:0 0 0 5px}"]}),o})()},{path:"adduser",component:A},{path:"view-user/:id",component:A}];let Ke=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.Bz.forChild(We),g.Bz]}),o})();var $e=d(21515);let je=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,Ke,$e.m]}),o})()},59442:(Z,b,d)=>{d.d(b,{w:()=>g});var m=d(94650);let g=(()=>{class e{}return e.\u0275fac=function(f){return new(f||e)},e.\u0275cmp=m.Xpm({type:e,selectors:[["app-not-found"]],decls:3,vars:0,consts:[[1,"not-found"]],template:function(f,h){1&f&&(m.TgZ(0,"div",0)(1,"p"),m._uU(2," No data to display "),m.qZA()())},styles:[".not-found[_ngcontent-%COMP%]{text-align:center;padding:10%}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c9c9d1;font-size:16px;font-weight:600}"]}),e})()},80145:(Z,b,d)=>{d.d(b,{O:()=>e,Q:()=>g});var m=d(94650);let g=(()=>{class u{constructor(h){this.el=h}onKeyDown(h){[8,9,13,27,46].indexOf(h.keyCode)}onKeyup(h){this.validateFields(h)}blockPaste(h){this.validateFields(h)}validateFields(h){this.el.nativeElement.value=this.el.nativeElement.value.replace(/[^A-Za-z\u0621-\u064a ]/g,""),h.preventDefault()}}return u.\u0275fac=function(h){return new(h||u)(m.Y36(m.SBq))},u.\u0275dir=m.lG2({type:u,selectors:[["","OnlyCharacter",""]],hostBindings:function(h,c){1&h&&m.NdJ("keydown",function(_){return c.onKeyDown(_)})("keyup",function(_){return c.onKeyup(_)})("paste",function(_){return c.blockPaste(_)})},inputs:{validationFieldsType:"validationFieldsType"}}),u})();function e(u){return u.replace(/[^A-Za-z\u0621-\u064a ]/g,"")}}}]);