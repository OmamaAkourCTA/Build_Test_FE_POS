"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[3296],{71891:(q,f,d)=>{d.d(f,{W:()=>c});var r=d(94650),p=d(42953),e=d(36895);function x(u,v){if(1&u&&(r.ynx(0),r._UZ(1,"img",7),r.BQk()),2&u){const h=r.oxw(2);r.xp6(1),r.Q6J("src",h.file,r.LSH)}}function _(u,v){if(1&u&&(r.TgZ(0,"div",8),r._UZ(1,"img",9)(2,"br"),r.TgZ(3,"a",10),r._uU(4,"click to open pdf "),r.qZA()()),2&u){const h=r.oxw(2);r.xp6(3),r.s9C("href",h.file,r.LSH)}}function m(u,v){if(1&u&&(r.ynx(0),r.YNc(1,x,2,1,"ng-container",1),r.YNc(2,_,5,1,"ng-template",null,6,r.W1O),r.BQk()),2&u){const h=r.MAs(3),C=r.oxw();r.xp6(1),r.Q6J("ngIf","png"==C.fileType||"jpeg"==C.fileType||"jpg"==C.fileType)("ngIfElse",h)}}function l(u,v){1&u&&(r.TgZ(0,"p",11),r._uU(1,"No attachemnt..."),r.qZA())}let c=(()=>{class u{constructor(h){this._activeModal=h,this.fileType=""}ngOnInit(){this.getFileType(this.file)}getFileType(h){this.fileType=h?.split(".").pop()}}return u.\u0275fac=function(h){return new(h||u)(r.Y36(p.Kz))},u.\u0275cmp=r.Xpm({type:u,selectors:[["app-view-uploaded-file"]],inputs:{file:"file"},decls:8,vars:2,consts:[[1,"modal-body","p-2"],[4,"ngIf","ngIfElse"],["noFile",""],[1,"flex-end"],[1,"btns-group","my-2","mx-0"],["type","button",1,"btn","btn-save",3,"click"],["pdf",""],[1,"w-100",3,"src"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],["height","80","width","80","src","assets/images/pdf.png","alt",""],["target","_blank",1,"text-decoration-none","text-capitalize",3,"href"],[1,"primary-clr","mx-0","my-3"]],template:function(h,C){if(1&h&&(r.TgZ(0,"div",0),r.YNc(1,m,4,2,"ng-container",1),r.YNc(2,l,2,0,"ng-template",null,2,r.W1O),r.TgZ(4,"div",3)(5,"div",4)(6,"button",5),r.NdJ("click",function(){return C._activeModal.close("Close click")}),r._uU(7," Close "),r.qZA()()()()),2&h){const M=r.MAs(3);r.xp6(1),r.Q6J("ngIf",C.file)("ngIfElse",M)}},dependencies:[e.O5]}),u})()},23808:(q,f,d)=>{d.r(f),d.d(f,{PettyCashTreasuryModule:()=>vt});var r=d(36895),p=d(39485),e=d(94650),x=d(75304),_=d(79541),m=d(72657),l=d(42953),c=d(24006);function u(o,s){1&o&&(e.TgZ(0,"h3"),e._uU(1," Approve Replenishment Request "),e.qZA())}function v(o,s){1&o&&(e.TgZ(0,"h3"),e._uU(1," Reject Replenishment Request "),e.qZA())}function h(o,s){1&o&&(e.TgZ(0,"div",9)(1,"p"),e._uU(2," You are about to approve the request of the petty cash for "),e.qZA()())}function C(o,s){1&o&&(e.TgZ(0,"div",9)(1,"p"),e._uU(2," You are about to reject the request of the petty cash for"),e.qZA()())}function M(o,s){if(1&o&&(e.TgZ(0,"div")(1,"span",19),e._uU(2),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.msgError,"")}}function I(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",16)(2,"label"),e._uU(3,"Amount "),e.qZA(),e.TgZ(4,"input",17),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.amount=i)}),e.qZA(),e.YNc(5,M,3,1,"div",4),e.qZA(),e.TgZ(6,"div",9)(7,"p",18),e._uU(8),e.ALo(9,"number"),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.ALo(12,"number"),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.amount),e.xp6(1),e.Q6J("ngIf",t.msgError),e.xp6(3),e.hij(" Register petty cash limit ",e.xi3(9,4,t.registerPettyCashAmount,"2.3-3")," JOD "),e.xp6(3),e.hij(" Amount of approved expenses since last replenishment ",e.xi3(12,7,null==t.requestDetails?null:t.requestDetails.approvedExpense,"2.3-3")," JOD ")}}function j(o,s){if(1&o&&(e.TgZ(0,"div")(1,"span",19),e._uU(2),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.msgError,"")}}function S(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",20)(1,"div",16)(2,"label"),e._uU(3,"Reason "),e.qZA(),e.TgZ(4,"textarea",21),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.rejectionReason=i)}),e.qZA(),e.YNc(5,j,3,1,"div",4),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.rejectionReason),e.xp6(1),e.Q6J("ngIf",t.msgError)}}function J(o,s){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.messageError," ")}}function G(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.ApprovePettyCashRequest())}),e._uU(1," Approve "),e.qZA()}}function L(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.RejectPettyCashRequest())}),e._uU(1," Reject "),e.qZA()}}function F(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3),e.YNc(2,u,2,0,"h3",4),e.YNc(3,v,2,0,"h3",4),e.qZA(),e.TgZ(4,"div",5)(5,"div",6),e.YNc(6,h,3,0,"div",7),e.YNc(7,C,3,0,"div",7),e.qZA(),e.TgZ(8,"div",8)(9,"div",9)(10,"h4"),e._uU(11," Register Name "),e.qZA(),e.TgZ(12,"p"),e._uU(13),e.qZA()()(),e.TgZ(14,"div",8)(15,"div",9)(16,"h4"),e._uU(17," Register No. "),e.qZA(),e.TgZ(18,"p"),e._uU(19),e.qZA()()(),e.TgZ(20,"div",8)(21,"div",9)(22,"h4"),e._uU(23," Branch "),e.qZA(),e.TgZ(24,"p"),e._uU(25),e.qZA()()(),e.YNc(26,I,13,10,"div",10),e.YNc(27,S,6,2,"div",11),e._UZ(28,"br"),e.YNc(29,J,2,1,"div",12),e._UZ(30,"br"),e.TgZ(31,"div",13)(32,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeModal.close("Close click"))}),e._uU(33,"Cancel"),e.qZA(),e.YNc(34,G,2,0,"button",15),e.YNc(35,L,2,0,"button",15),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf","approve"==t.type),e.xp6(1),e.Q6J("ngIf","reject"==t.type),e.xp6(3),e.Q6J("ngIf","approve"==t.type),e.xp6(1),e.Q6J("ngIf","reject"==t.type),e.xp6(6),e.hij(" ",null==t.requestDetails?null:t.requestDetails.register.registersName," "),e.xp6(6),e.hij(" ",null==t.requestDetails?null:t.requestDetails.register.registerId," "),e.xp6(6),e.hij(" ",null==t.requestDetails?null:t.requestDetails.register.branch.branchName," "),e.xp6(1),e.Q6J("ngIf","approve"==t.type),e.xp6(1),e.Q6J("ngIf","reject"==t.type),e.xp6(2),e.Q6J("ngIf",t.messageError),e.xp6(5),e.Q6J("ngIf","approve"==t.type),e.xp6(1),e.Q6J("ngIf","reject"==t.type)}}function Y(o,s){if(1&o&&(e.TgZ(0,"div",24)(1,"div",25)(2,"h5"),e._UZ(3,"i",26),e._uU(4),e.qZA()()()),2&o){const t=e.oxw();e.xp6(4),e.hij(" ",t.message,"")}}let k=(()=>{class o{constructor(t,n,i,a,g,b,w){this._commonService=t,this.treasuryService=n,this.pettyCashService=i,this.router=a,this.route=g,this.activeModal=b,this.modalService=w,this.sendtoLoadData=new e.vpe}ngOnInit(){let t=this.requestDetails.register.registerId;this.amount=this.requestDetails?.approvedExpenseAmount.toFixed(3),this.pettyCashService.GetRegistersPettyCashLimits(t).subscribe(n=>{this.pettyCashRegisterData=n,this.registerPettyCashAmount=this.pettyCashRegisterData.data[0].pettyCashLimit})}ApprovePettyCashRequest(){if(this.amount<=0||!this.amount)return this.msgError=" Amount must be greater than 0 ",setTimeout(()=>{this.msgError=""},2e3),window.scroll();const t=new FormData;return t.append("pettyCashRequestId",this.requestDetails.pettyCashRequestId),t.append("approvedAmount",this.amount),this.treasuryService.ApprovePettyCashRequest(t).subscribe(n=>{1==n.isSuccess&&(this.message="Approved successfully ",setTimeout(()=>{this.modalService.dismissAll(),this._commonService.NavigateToRoute("/pettycash")},3e3))},n=>{this.messageError=n?.error?.errors[0]?.ErrorMessageEn||n?.error?.errors[0]?.errorMessageEn,setTimeout(()=>{this.messageError=""},4e3)})}RejectPettyCashRequest(){if(!this.rejectionReason)return this.msgError=" Reason  is required",setTimeout(()=>{this.msgError=""},2e3),window.scroll();const t=new FormData;return t.append("pettyCashRequestId",this.requestDetails.pettyCashRequestId),t.append("rejectionReason",this.rejectionReason),console.log(t),this.treasuryService.RejectPettyCashRequest(t).subscribe(n=>{n.isSuccess&&(this.message="Rejected successfully ",setTimeout(()=>{this.modalService.dismissAll(),this._commonService.NavigateToRoute("/pettycash")},4e3))},n=>{this.messageError=n?.error?.errors[0]?.errorMessageEn||n?.error?.errors[0]?.ErrorMessageEn,setTimeout(()=>{this.messageError=""},4e3)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(x.v),e.Y36(_.N),e.Y36(m.$),e.Y36(p.F0),e.Y36(p.gz),e.Y36(l.Kz),e.Y36(l.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-approve"]],inputs:{requestDetails:"requestDetails",type:"type"},outputs:{sendtoLoadData:"sendtoLoadData"},decls:2,vars:2,consts:[["class","modal-body p-3",4,"ngIf"],["class","modal-body",4,"ngIf"],[1,"modal-body","p-3"],[1,"modal-head"],[4,"ngIf"],[1,"row"],[1,"col-md-12"],["class","card-sm",4,"ngIf"],[1,"col-md-4"],[1,"card-sm"],["class","col-md-12",4,"ngIf"],["class","col-md-8",4,"ngIf"],["class","alert alert-danger text-center my-2","role","alert",4,"ngIf"],[1,"btns-group","mb-0","mx-0","mt-3"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit","class","btn btn-save",3,"click",4,"ngIf"],[1,"form-group"],["name","amount","type","text","placeholder","","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[1,"mb-1"],[1,"error","py-2"],[1,"col-md-8"],["maxlength","150",1,"form-control",3,"ngModel","ngModelChange"],["role","alert",1,"alert","alert-danger","text-center","my-2"],["type","submit",1,"btn","btn-save",3,"click"],[1,"modal-body"],[1,"message"],[1,"fa-regular","fa-circle-check"]],template:function(t,n){1&t&&(e.YNc(0,F,36,12,"div",0),e.YNc(1,Y,5,1,"div",1)),2&t&&(e.Q6J("ngIf",!n.message),e.xp6(1),e.Q6J("ngIf",n.message))},dependencies:[r.O5,c.Fj,c.JJ,c.nD,c.On,r.JJ],styles:[".modal-body[_ngcontent-%COMP%]{padding:30px}.modal-head[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid #c4cdd5;display:flex;justify-content:space-between;align-items:center}.modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:18px;color:#1b212d;padding:5px 0 15px;margin:0}.card-sm[_ngcontent-%COMP%]{margin:10px 0}.card-sm[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1b212d;margin-bottom:5px}.card-sm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#929eae}.card-sm[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{background-color:#f0f0f0;height:120px;border-radius:6px;margin:5px 0}.card-sm[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;padding:10px}label[_ngcontent-%COMP%]{font-weight:600;font-size:16px;padding:5px 0}.message[_ngcontent-%COMP%]{padding:10px;text-align:center}.message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#1b212d;margin:0;padding:20px}.message[_ngcontent-%COMP%]   .fa-circle-check[_ngcontent-%COMP%]{color:#25bb00;font-size:28px;vertical-align:middle;margin:2px 10px 5px}.error[_ngcontent-%COMP%]{font-size:14px;color:#f44336;font-weight:500;padding:7px;display:block}"]}),o})();var Q=d(99132),P=d(32216),Z=d(86260);function B(o,s){if(1&o&&(e.TgZ(0,"div",35)(1,"div",12)(2,"h4"),e._uU(3,"Reason "),e.qZA(),e.TgZ(4,"div",28)(5,"p"),e._uU(6),e.qZA()()()()),2&o){const t=e.oxw(3);e.xp6(6),e.hij(" ",null==t.expenseDetails?null:t.expenseDetails.rejectionReason," ")}}function z(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",35)(2,"label",47),e._uU(3," Please fill the reason "),e.qZA(),e.TgZ(4,"textarea",48),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(4);return e.KtG(a.RejectionReason=i)}),e.qZA()()()}if(2&o){const t=e.oxw(4);e.xp6(4),e.Q6J("ngModel",t.RejectionReason)}}function K(o,s){if(1&o&&(e.TgZ(0,"div")(1,"span",49),e._uU(2),e.qZA()()),2&o){const t=e.oxw(4);e.xp6(2),e.hij(" ",t.msgError,"")}}function H(o,s){if(1&o&&(e.TgZ(0,"div",50),e._uU(1),e.qZA()),2&o){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.messageError," ")}}function V(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",36)(2,"h6"),e._uU(3," Please take an action for the expense"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"div")(6,"div",37)(7,"input",38),e.NdJ("change",function(i){e.CHM(t);const a=e.oxw(3);return e.KtG(a.chooseType(i))})("ngModelChange",function(i){e.CHM(t);const a=e.oxw(3);return e.KtG(a.type=i)}),e.qZA(),e.TgZ(8,"label",39),e._uU(9,"Approve"),e.qZA()(),e.TgZ(10,"div",37)(11,"input",40),e.NdJ("change",function(i){e.CHM(t);const a=e.oxw(3);return e.KtG(a.chooseType(i))})("ngModelChange",function(i){e.CHM(t);const a=e.oxw(3);return e.KtG(a.type=i)}),e.qZA(),e.TgZ(12,"label",41),e._uU(13,"Needs Revision"),e.qZA()(),e.TgZ(14,"div",37)(15,"input",42),e.NdJ("change",function(i){e.CHM(t);const a=e.oxw(3);return e.KtG(a.chooseType(i))})("ngModelChange",function(i){e.CHM(t);const a=e.oxw(3);return e.KtG(a.type=i)}),e.qZA(),e.TgZ(16,"label",43),e._uU(17,"Reject"),e.qZA()()(),e.YNc(18,z,5,1,"div",44),e.YNc(19,K,3,1,"div",45),e.YNc(20,H,2,1,"div",46),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(7),e.Q6J("ngModel",t.type),e.xp6(4),e.Q6J("ngModel",t.type),e.xp6(4),e.Q6J("ngModel",t.type),e.xp6(3),e.Q6J("ngIf","Reject"==t.type||"revise"==t.type),e.xp6(1),e.Q6J("ngIf",t.msgError),e.xp6(1),e.Q6J("ngIf",t.messageError)}}function $(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.submitExpenseAction())}),e._uU(1," Submit "),e.qZA()}}function W(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div")(3,"h3"),e._uU(4," Expense Details "),e.qZA()(),e.TgZ(5,"div",6)(6,"p",7)(7,"b"),e._uU(8," Invoice No "),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"p",8)(11,"b"),e._uU(12," Invoice Date "),e.qZA(),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"p",8)(16,"b"),e._uU(17," Expense Creation Date "),e.qZA(),e._uU(18),e.ALo(19,"date"),e.qZA()()(),e.TgZ(20,"div",9)(21,"div",10)(22,"div",2)(23,"div",11)(24,"div",12)(25,"h4"),e._uU(26," Employe Name "),e.qZA(),e.TgZ(27,"p"),e._uU(28),e.qZA()()(),e.TgZ(29,"div",11)(30,"div",12)(31,"h4"),e._uU(32," Category"),e.qZA(),e.TgZ(33,"p"),e._uU(34),e.qZA()()(),e.TgZ(35,"div",13)(36,"div",2)(37,"div",14)(38,"div",12)(39,"h4"),e._uU(40," Amount "),e.qZA(),e.TgZ(41,"p",15),e._uU(42),e.qZA()()(),e.TgZ(43,"div",14)(44,"div",12)(45,"h4"),e._uU(46," Tax "),e.qZA(),e.TgZ(47,"p"),e._uU(48),e.qZA()()(),e.TgZ(49,"div",14)(50,"div",12)(51,"h4"),e._uU(52," Total Amount "),e.qZA(),e.TgZ(53,"p",15),e._uU(54),e.qZA()()()()(),e.TgZ(55,"div",11)(56,"div",12)(57,"h4"),e._uU(58," Invoice Date "),e.qZA(),e.TgZ(59,"p"),e._uU(60),e.ALo(61,"date"),e.qZA()()(),e.TgZ(62,"div",11)(63,"div",12)(64,"h4",16),e._uU(65," Status "),e.qZA(),e.TgZ(66,"span",17),e._uU(67),e.qZA()()(),e._UZ(68,"div",18),e.TgZ(69,"div",18)(70,"div",19)(71,"label"),e._uU(72," Attachment"),e.qZA(),e._UZ(73,"br"),e.qZA(),e.TgZ(74,"div",20)(75,"p",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.openMdalImageView())}),e._uU(76),e.qZA(),e.TgZ(77,"div",22)(78,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.openMdalImageView())}),e._UZ(79,"img",24),e.qZA(),e.TgZ(80,"a",25),e._UZ(81,"img",26),e.qZA()()()(),e.TgZ(82,"div",27)(83,"div",12)(84,"h4"),e._uU(85," Note "),e.qZA(),e.TgZ(86,"div",28)(87,"p"),e._uU(88),e.qZA()()()(),e.YNc(89,B,7,1,"div",29),e.YNc(90,V,21,6,"div",30),e.qZA()(),e.TgZ(91,"div",2)(92,"div",31)(93,"div",32)(94,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.activeModal.close("Close click"))}),e._uU(95,"Cancel"),e.qZA(),e.YNc(96,$,2,0,"button",34),e.qZA()()()()()}if(2&o){const t=e.oxw(2);e.xp6(9),e.hij(" ",null==t.expenseDetails?null:t.expenseDetails.invoiceNo," "),e.xp6(4),e.hij(" ",e.xi3(14,20,null==t.expenseDetails?null:t.expenseDetails.invoiceDate,"mediumDate")," "),e.xp6(5),e.hij(" ",e.xi3(19,23,null==t.expenseDetails?null:t.expenseDetails.createdAt,"mediumDate")," "),e.xp6(10),e.hij(" ",null==t.expenseDetails?null:t.expenseDetails.createdBy.fullName," "),e.xp6(6),e.hij(" ",null==t.expenseDetails?null:t.expenseDetails.category[0].lookupName," "),e.xp6(8),e.hij(" ",null==t.expenseDetails?null:t.expenseDetails.expenseAmount," "),e.xp6(6),e.hij(" ",null==t.expenseDetails?null:t.expenseDetails.expenseTax," "),e.xp6(6),e.hij(" ",null==t.expenseDetails?null:t.expenseDetails.expenseTotalAmount," "),e.xp6(6),e.hij(" ",e.xi3(61,26,null==t.expenseDetails?null:t.expenseDetails.invoiceDate,"mediumDate")," "),e.xp6(6),e.Udp("background-color",null==t.expenseDetails||null==t.expenseDetails.statusObj?null:t.expenseDetails.statusObj.lookupBGColor)("color",null==t.expenseDetails||null==t.expenseDetails.statusObj?null:t.expenseDetails.statusObj.lookupTextColor),e.xp6(1),e.hij(" ",null==t.expenseDetails||null==t.expenseDetails.statusObj?null:t.expenseDetails.statusObj.description," "),e.xp6(9),e.hij(" Receipts - ",null==t.expenseDetails?null:t.expenseDetails.expenseRecordId," "),e.xp6(4),e.Q6J("href",null==t.expenseDetails||null==t.expenseDetails.files[0]?null:t.expenseDetails.files[0].attachmentPath,e.LSH),e.xp6(8),e.hij(" ",null==t.expenseDetails?null:t.expenseDetails.expenseNotes," "),e.xp6(1),e.Q6J("ngIf","Rejected"==(null==t.expenseDetails?null:t.expenseDetails.statusObj.description)),e.xp6(1),e.Q6J("ngIf",2003==(null==t.expenseDetails?null:t.expenseDetails.status)),e.xp6(6),e.Q6J("ngIf",2003==(null==t.expenseDetails?null:t.expenseDetails.status)||2011==(null==t.expenseDetails?null:t.expenseDetails.status))}}function X(o,s){if(1&o&&(e.TgZ(0,"div",1)(1,"div",2),e.YNc(2,W,97,29,"div",3),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.expenseDetails)}}function ee(o,s){if(1&o&&(e.TgZ(0,"div",1)(1,"div",52)(2,"h5"),e._UZ(3,"i",53),e._uU(4),e.qZA()()()),2&o){const t=e.oxw();e.xp6(4),e.hij(" ",t.message,"")}}let te=(()=>{class o{constructor(t,n,i,a){this.treasuryService=t,this.activeModal=n,this.modalService=i,this.router=a,this.sendtoLoadData=new e.vpe,this.type="Approved"}ngOnInit(){}openMdalImageView(){this.modalService.open(P.M).componentInstance.imageUploadedView=this.expenseDetails?.files[0]?.attachmentPath}chooseType(t){this.type=t.target.value}ApproveExpense(){const t=new FormData;return t.append("ExpenseRecordId",this.expenseDetails.expenseRecordId),this.treasuryService.ApproveExpense(t).subscribe(n=>{n.isSuccess?(this.message="Approved successfully ",setTimeout(()=>{this.modalService.dismissAll(),this.sendtoLoadData.emit(!0)},3e3)):(console.log("error",n),this.messageError=n.Errors[0]?.ErrorMessageEn,setTimeout(()=>{this.messageError=""},4e3))},n=>{const i=this.modalService.open(Z.i);i.componentInstance.type="error",i.componentInstance.messageError=n?.error?.errors})}requestReviseExpense(){if(!this.RejectionReason)return this.msgError=" Reason is required",setTimeout(()=>{this.msgError=""},2e3),window.scroll();const t=new FormData;return t.append("ExpenseRecordId",this.expenseDetails.expenseRecordId),t.append("Notes",this.RejectionReason),this.treasuryService.requestReviseExpense(t).subscribe(n=>{n.isSuccess?(this.message="Revised successfully ",this.RejectionReason="",setTimeout(()=>{this.modalService.dismissAll(),this.sendtoLoadData.emit(!0)},3e3)):(console.log("error",n),this.messageError=n.Errors[0]?.ErrorMessageEn,setTimeout(()=>{this.messageError=""},4e3))},n=>{const i=this.modalService.open(Z.i);i.componentInstance.type="error",i.componentInstance.messageError=n?.error?.errors})}RejectExpense(){if(!this.RejectionReason)return this.msgError=" Reason is required",setTimeout(()=>{this.msgError=""},2e3),window.scroll();const t=new FormData;return t.append("ExpenseRecordId",this.expenseDetails.expenseRecordId),t.append("RejectionReason",this.RejectionReason),this.treasuryService.RejectExpense(t).subscribe(n=>{1==n.isSuccess?(this.message="Rejected successfully ",this.RejectionReason="",setTimeout(()=>{this.modalService.dismissAll(),this.sendtoLoadData.emit(!0)},3e3)):(console.log("error",n),this.messageError=n.Errors[0]?.ErrorMessageEn,setTimeout(()=>{this.messageError=""},4e3))},n=>{const i=this.modalService.open(Z.i);i.componentInstance.type="error",i.componentInstance.messageError=n?.error?.errors})}submitExpenseAction(){"Approved"==this.type?this.ApproveExpense():"revise"==this.type?this.requestReviseExpense():this.RejectExpense()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.N),e.Y36(l.Kz),e.Y36(l.FF),e.Y36(p.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-expense-details"]],inputs:{expenseDetails:"expenseDetails"},outputs:{sendtoLoadData:"sendtoLoadData"},decls:2,vars:2,consts:[["class","modal-body",4,"ngIf"],[1,"modal-body"],[1,"row"],["class","col-md-12",4,"ngIf"],[1,"col-md-12"],[1,"modal-head"],[1,"info","d-flex","flex-column"],[1,"invoic"],[1,"m-0"],[1,"card-form","position-relative"],[1,"row","mt-3"],[1,"col-md-3"],[1,"card-sm"],[1,"col-md-6"],[1,"col-md-4"],[1,"currency-format"],[1,"mb-3"],[1,"pending","pending-approval","mt-2"],[1,"col-md-8"],[1,"form-group","mb-3"],[1,"uploadedfile"],[3,"click"],[1,"d-flex"],["type","button",1,"btn","fview",3,"click"],["src","assets/images/eye.png","alt",""],["type","button","download","",1,"btn","fview",3,"href"],["src","assets/images/Download.png","alt",""],[1,"col-md-12","my-2"],[1,"note"],["class","col-md-6 my-2",4,"ngIf"],["class","col-md-12 my-2",4,"ngIf"],[1,"col-md-12","padding-right"],[1,"btns-group","my-2","mx-0"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit","class","btn btn-save",3,"click",4,"ngIf"],[1,"col-md-6","my-2"],[1,"tackaction"],[1,"form-check","form-check-inline"],["type","radio","id","Approved","value","Approved",1,"form-check-input",3,"ngModel","change","ngModelChange"],["for","Approved",1,"form-check-label"],["type","radio","id","revise","value","revise",1,"form-check-input",3,"ngModel","change","ngModelChange"],["for","revise",1,"form-check-label"],["type","radio","id","Reject","value","Reject",1,"form-check-input",3,"ngModel","change","ngModelChange"],["for","Reject",1,"form-check-label"],["class","row",4,"ngIf"],[4,"ngIf"],["class","alert alert-danger text-center my-2","role","alert",4,"ngIf"],["for",""],["maxlength","150",1,"form-control",3,"ngModel","ngModelChange"],[1,"error","py-2"],["role","alert",1,"alert","alert-danger","text-center","my-2"],["type","submit",1,"btn","btn-save",3,"click"],[1,"message"],[1,"fa-regular","fa-circle-check"]],template:function(t,n){1&t&&(e.YNc(0,X,3,1,"div",0),e.YNc(1,ee,5,1,"div",0)),2&t&&(e.Q6J("ngIf",!n.message),e.xp6(1),e.Q6J("ngIf",n.message))},dependencies:[r.O5,c.Fj,c._,c.JJ,c.nD,c.On,r.uU],styles:[".modal-body[_ngcontent-%COMP%]{padding:20px}.card-form[_ngcontent-%COMP%]{background:#ffffff;border:0px solid #c4cdd5;box-shadow:none;border-radius:8px;margin:0;padding:0}.card-page[_ngcontent-%COMP%]{padding:30px}.modal-head[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid #c4cdd5;display:flex;justify-content:space-between;align-items:center}.modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:22px;color:#1b212d;padding:5px 0 15px;margin:0}.modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#1b212d}.modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#929eae}.modal-head[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-top:-5px}.modal-head[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .invoic[_ngcontent-%COMP%]{color:#dc3545;margin:0}.modal-head[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#929eae;font-weight:500;padding:1px}.modal-head[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#1b212d}textarea[_ngcontent-%COMP%]{height:80px!important}.card-upload[_ngcontent-%COMP%]{border:1px dashed #939aa8;text-align:center;padding:10px;border-radius:10px;margin:10px 0;cursor:pointer}.card-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;margin-bottom:15px}.card-upload[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;font-size:18px;color:#0f0f0f}.card-upload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:18px;color:#676767}.btn-upload[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border-radius:10px;padding:12px 35px;font-size:16px;font-weight:600;margin:10px 0}.card-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:8px;margin:0}.overlay-bi[_ngcontent-%COMP%]{background-color:#c7c7c736;position:absolute;inset:0;z-index:1}.card-form[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]{margin:-30px 0 0;z-index:5;position:relative}.card-form[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0}.uploadedfile[_ngcontent-%COMP%]{border:1px solid #11af22;border-radius:4px;display:flex;justify-content:space-between;align-items:center}.uploadedfile[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#fff3f3;border-radius:50%;margin:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.uploadedfile[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px}.uploadedfile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;padding:10px;color:#696969;margin:0;cursor:pointer}.uplod[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#676767}.save-img[_ngcontent-%COMP%]{width:22px!important}.fileView[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.btn[_ngcontent-%COMP%]:disabled, .btn.disabled[_ngcontent-%COMP%]{background:#f1f3f3!important;color:#9b9b9b!important;border:1px solid #f1f3f3;cursor:initial}.card-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.progress-bar[_ngcontent-%COMP%]{background-color:#dc3545}.card-sm[_ngcontent-%COMP%]{margin:10px 0}.card-sm[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1b212d;margin-bottom:5px}.card-sm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#929eae}.card-sm[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{background-color:#f0f0f0;height:120px;border-radius:6px;margin:5px 0;word-break:break-all}.card-sm[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;padding:10px}.fview[_ngcontent-%COMP%]{background:#fff!important;border-radius:50%;margin:0 5px;width:30px;height:30px}.fview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px!important}.tackaction[_ngcontent-%COMP%]{background-color:#f0f0f0;border-radius:6px;margin:5px 0;padding:20px}.tackaction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;padding:10px}.message[_ngcontent-%COMP%]{padding:10px;text-align:center}.message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#1b212d;margin:0;padding:20px}.message[_ngcontent-%COMP%]   .fa-circle-check[_ngcontent-%COMP%]{color:#25bb00;font-size:28px;vertical-align:middle;margin:2px 10px 5px}.error[_ngcontent-%COMP%]{font-size:14px;color:#f44336;font-weight:500;padding:7px;display:block}.padding-right[_ngcontent-%COMP%]{padding-right:36px}"]}),o})();var ne=d(87192),oe=d(21864),y=d(36690),ie=d(97185),T=d(28424),A=d(59442),se=d(77296);function ae(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"input",25),e.NdJ("change",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.handleCheckBoxChange())})("ngModelChange",function(i){const g=e.CHM(t).$implicit;return e.KtG(g.checked=i)}),e.qZA()(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td")(18,"span",26),e._uU(19),e.qZA()(),e.TgZ(20,"td")(21,"button",27),e.NdJ("click",function(){const a=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.openModalExpense(a))}),e._uU(22,"View details "),e.qZA()()()}if(2&o){const t=s.$implicit,n=s.index;e.xp6(2),e.Q6J("disabled",2003!=(null==t?null:t.status))("ngModel",t.checked)("id",n),e.xp6(2),e.hij(" ",null==t?null:t.invoiceNo," "),e.xp6(2),e.hij(" ",e.xi3(7,16,null==t?null:t.invoiceDate,"mediumDate")||"---"," "),e.xp6(3),e.hij(" ",null==t||null==t.category[0]?null:t.category[0].lookupName," "),e.xp6(2),e.hij(" ",e.xi3(12,19,null==t?null:t.createdAt," d MMM y h:mm a")," "),e.xp6(3),e.hij(" ",null==t||null==t.createdBy?null:t.createdBy.fullName," "),e.xp6(2),e.hij(" ",null==t?null:t.expenseTotalAmount," "),e.xp6(2),e.Udp("background-color",t.statusObj.lookupBGColor)("color",t.statusObj.lookupTextColor),e.ekj("pending-approval",2011==t.status||2012==t.status),e.xp6(1),e.hij(" ",t.statusObj.description," ")}}function re(o,s){1&o&&(e.TgZ(0,"div",28),e._UZ(1,"app-not-found"),e.qZA())}function le(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",11)(2,"div",12),e.NdJ("scrolled",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onScroll())}),e.TgZ(3,"div",13)(4,"table",14)(5,"thead")(6,"tr")(7,"th",15)(8,"input",16),e.NdJ("change",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.handleCheckAll(i))}),e.qZA()(),e.TgZ(9,"th",17)(10,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByInvoice())}),e._uU(11," Invoice No "),e._UZ(12,"i",19)(13,"i",20),e.qZA()(),e.TgZ(14,"th",17)(15,"button",21),e._uU(16,"Invoice Date"),e.qZA()(),e.TgZ(17,"th",17)(18,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByCategory())}),e._uU(19," Category "),e._UZ(20,"i",19)(21,"i",20),e.qZA()(),e.TgZ(22,"th",17)(23,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByIDate())}),e._uU(24," Date "),e._UZ(25,"i",19)(26,"i",20),e.qZA()(),e.TgZ(27,"th",17)(28,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByEmployee())}),e._uU(29," Employee "),e._UZ(30,"i",19)(31,"i",20),e.qZA()(),e.TgZ(32,"th",17)(33,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByTotalAmount())}),e._uU(34," Total Amount "),e._UZ(35,"i",19)(36,"i",20),e.qZA()(),e.TgZ(37,"th",17)(38,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByStatus())}),e._uU(39," Status "),e._UZ(40,"i",19)(41,"i",20),e.qZA()(),e.TgZ(42,"th",17)(43,"button",22),e._uU(44," Action "),e.qZA()()()(),e.TgZ(45,"tbody"),e.YNc(46,ae,23,22,"tr",23),e.qZA()()(),e.YNc(47,re,2,0,"div",24),e.qZA()()()}if(2&o){const t=s.$implicit,n=e.oxw();e.xp6(2),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",200)("scrollWindow",!1),e.xp6(8),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",2==n.sort),e.xp6(1),e.ekj("active",3==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",4==n.sort),e.xp6(1),e.ekj("active",5==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",6==n.sort),e.xp6(1),e.ekj("active",7==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",8==n.sort),e.xp6(1),e.ekj("active",9==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",10==n.sort),e.xp6(1),e.ekj("active",11==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",12==n.sort),e.xp6(1),e.ekj("active",13==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function ce(o,s){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function de(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",29)(1,"div",30)(2,"button",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),a=e.MAs(16);return e.KtG(i.confirmModal("approve",a))}),e._uU(3,"Approve"),e.qZA(),e.TgZ(4,"button",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),a=e.MAs(16);return e.KtG(i.confirmModal("revise",a))}),e._uU(5,"Needs Revision"),e.qZA(),e.TgZ(6,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),a=e.MAs(16);return e.KtG(i.confirmModal("reject",a))}),e._uU(7,"Reject"),e.qZA()()()}}function pe(o,s){1&o&&(e.TgZ(0,"span",43),e._uU(1,"Input is required"),e.qZA())}function ge(o,s){if(1&o&&(e.ynx(0),e.YNc(1,pe,2,0,"span",42),e.BQk()),2&o){const t=e.oxw(4);let n;e.xp6(1),e.Q6J("ngIf",null==(n=t.appForm.get("rejectReason"))||null==n.errors?null:n.errors.required)}}function ue(o,s){if(1&o&&(e.ynx(0),e.YNc(1,ge,2,1,"ng-container",41),e.BQk()),2&o){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",(null==(n=t.appForm.get("rejectReason"))?null:n.invalid)&&(null==(n=t.appForm.get("rejectReason"))?null:n.touched)||(null==(n=t.appForm.get("rejectReason"))?null:n.dirty))}}function _e(o,s){if(1&o&&(e.TgZ(0,"div",38)(1,"label",39),e._uU(2,"Reason"),e.qZA(),e._UZ(3,"textarea",40),e.YNc(4,ue,2,1,"ng-container",41),e.qZA()),2&o){const t=e.oxw(2);let n;e.xp6(4),e.Q6J("ngIf",null==(n=t.appForm.get("rejectReason"))?null:n.errors)}}function me(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",33)(1,"p",34),e._uU(2),e.qZA(),e.TgZ(3,"form",35),e.YNc(4,_e,5,1,"div",36),e.TgZ(5,"div",30)(6,"button",37),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.dismiss("close"))}),e._uU(7,"Close"),e.qZA(),e.TgZ(8,"button",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.save())}),e._uU(9,"Save"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(2),e.hij("Fill down the ",t.action," reason for expense?"),e.xp6(1),e.Q6J("formGroup",t.appForm),e.xp6(1),e.Q6J("ngIf","reject"==t.action||"revise"==t.action)}}let he=(()=>{class o{constructor(t,n,i,a,g,b,w,N,Ct,bt){this._pettCashService=t,this.treasuryService=n,this.generalService=i,this.headerService=a,this.modalService=g,this.router=b,this._activeRoute=w,this.fb=Ct,this.toastr=bt,this.expenses=[],this.items=[1,2,1,2,1,2],this.searchText="",this.status="",this.sort=1,this.pageNo=1,this.sendtoLoadData=new e.vpe,this.replenishmentRequestID=0,N.backdrop="static",N.keyboard=!1}ngOnInit(){let t=this._activeRoute.snapshot.params;console.log(t),this.replenishmentRequestID=t.id2,this.appForm=this.fb.group({rejectReason:["",[c.kI.required]]}),this.registerId&&(console.log(this.registerId),this.GetMainData())}onScroll(){this.pageNo+=1,this.GetMainData()}GetMainData(){this._pettCashService.getPettyCashRequestExpensesList(`?registerId=${this.registerId}&replenishmentRequestID=${this.replenishmentRequestID}&pageNo=${this.pageNo-1}&pageSize=1000`).subscribe(n=>{if(n?.data?.data?.length){let i=n.data.data.filter(g=>2003==g.status),a=n.data.data.filter(g=>2004==g.status).reduce((g,b)=>g+b?.expenseTotalAmount,0);this.emitData({approvedExpenseAmount:a}),i.length>0&&(i=[...this.expenses,...i],this.expenses=i.map(g=>({...g,checked:!1})),this.totalRecords=n?.data?.totalRecordCount)}})}emitData(t){this.sendtoLoadData.emit(t)}handleCheckBoxChange(){this.checkedItems=this.expenses.filter(t=>t.checked)}handleCheckAll(t){let n=[];t.target.checked?(n=this.expenses.map(i=>2003==i.status?{...i,checked:!0}:{...i,checked:!1}),this.expenses=n,this.checkedItems=n.filter(i=>2003==i.status)):(n=this.expenses.map(i=>({...i,checked:!1})),this.expenses=n,this.checkedItems=[])}Viewdetails(t){this.router.navigateByUrl("/petty-cash/request-details/1"),this.headerService.setTitle("Petty Cash Monitoring > Petty Cash Replenishment Request > View Details")}viewExpense(){this.headerService.setTitle("petty-cash > View role")}confirmModal(t,n){this.appForm.reset(),this.action=t;const i=this.modalService.open(ne.z);i.componentInstance.data={body:`Are you sure you want to ${t} expense`},i.componentInstance.eventData.subscribe(a=>{a&&this.handleMultipleExpense(n)})}handleMultipleExpense(t){this.save(),"approve"!==this.action&&(this.reasonModelRef=this.modalService.open(t,{centered:!0,size:"md"}))}save(){let t=this.checkedItems.map(i=>i.expenseRecordId).toString();const n=new FormData;if(n.append("ExpenseRecordId",t),"approve"==this.action)this.treasuryService.ApproveExpense(n).subscribe(i=>{console.log(i),i.data&&(this.checkedItems=[],this.expenses=[],this.pageNo=1,this.GetMainData(),this.toastr.success("Expense approved successfully!","Success"),this.checkedItems=[])},i=>{const a=this.modalService.open(Z.i);a.componentInstance.type="error",a.componentInstance.messageError=i?.error?.errors});else if("revise"==this.action){if(!this.appForm.valid)return;n.append("Notes",this.appForm.get("rejectReason").value),this.treasuryService.requestReviseExpense(n).subscribe(i=>{i.data&&(this.checkedItems=[],this.expenses=[],this.pageNo=1,this.GetMainData(),this.toastr.success("Expense revised successfully!","Success"),this.reasonModelRef.dismiss(),this.checkedItems=[])},i=>{const a=this.modalService.open(Z.i);a.componentInstance.type="error",a.componentInstance.messageError=i?.error?.errors})}else this.appForm.valid&&(n.append("RejectionReason",this.appForm.get("rejectReason").value),this.treasuryService.rejectMultipleExpense(n).subscribe(i=>{console.log(i),i.data&&(this.checkedItems=[],this.expenses=[],this.pageNo=1,this.GetMainData(),this.toastr.success("Expense rejected successfully!","Success"),this.reasonModelRef.dismiss(),this.checkedItems=[])},i=>{const a=this.modalService.open(Z.i);a.componentInstance.type="error",a.componentInstance.messageError=i?.error?.errors}))}searchTable(t){console.log(t?.target.value);const n=t.target.value;console.log(n.length),n.length>=2&&(this.searchText=n,this.pageNo=1,this.GetMainData()),0==n.length&&this.GetMainData()}removeSearch(){this.searchText="",this.sort=1,this.GetMainData()}sortByInvoice(){this.sort=3==this.sort?1:2==this.sort?3:2,this.GetMainData()}sortByCategory(){this.sort=5==this.sort?1:4==this.sort?5:4,this.GetMainData()}sortByIDate(){this.sort=7==this.sort?1:6==this.sort?7:6,this.GetMainData()}sortByEmployee(){this.sort=9==this.sort?1:8==this.sort?9:8,this.GetMainData()}sortByTotalAmount(){this.sort=11==this.sort?1:10==this.sort?11:10,this.GetMainData()}sortByStatus(){this.sort=13==this.sort?1:12==this.sort?13:12,this.GetMainData()}pageChange(t){this.pageNo=t,this.GetMainData(),window.scroll(0,0)}filterByStatus(t){console.log(t),this.pageNo=1,this.status=t.id,this.GetMainData()}clearStatus(t){console.log(t),this.status="",this.GetMainData()}openModalExpense(t){this.checkedItems=[];const n=this.modalService.open(te,{size:"lg"});n.componentInstance.expenseDetails=t,n.componentInstance.sendtoLoadData.subscribe(i=>{console.log("result",i),i&&(this.pageNo=1,this.expenses=[],this.GetMainData())})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.$),e.Y36(_.N),e.Y36(oe.m),e.Y36(y.r),e.Y36(l.FF),e.Y36(p.F0),e.Y36(p.gz),e.Y36(l.NM),e.Y36(c.qu),e.Y36(ie._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-last-expense"]],inputs:{registerId:"registerId"},outputs:{sendtoLoadData:"sendtoLoadData"},decls:17,vars:4,consts:[[1,"card-page"],[1,"row"],[1,"col-md-6"],[1,"col-md-6","text-end"],[1,"total"],[1,"pt-2"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],["class","col-md-12 my-3",4,"ngIf"],["modalPopup",""],[1,"card-table"],["infiniteScroll","",1,"infinite-scroll-wrapper",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],[1,"table-responsive"],[1,"table"],[2,"padding-left","25px !important"],["id","selectAll","type","checkbox",1,"form-check-input","mt-1",3,"change"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn",3,"disabled"],[1,"btn","btnin",3,"disabled"],[4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],["type","checkbox",1,"form-check-input",3,"disabled","ngModel","id","change","ngModelChange"],[1,"pending"],[1,"btn","btn-view",3,"click"],[1,"not-found"],[1,"col-md-12","my-3"],[1,"btns-group","m-0"],["type","submit",1,"btn","btn-save",3,"click"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"modal-body"],[1,"fw-600","my-3"],[3,"formGroup"],["class","mb-3",4,"ngIf"],["type","submit",1,"btn","btn-cancel",3,"click"],[1,"mb-3"],[1,"mb-1","font-14","fw-500"],["placeholder","Reason","formControlName","rejectReason",1,"form-control"],[4,"ngIf"],["class","text-danger font-14",4,"ngIf"],[1,"text-danger","font-14"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),e._uU(4," List of Pending Expenses Included in the Request "),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"p",5),e._uU(8),e.qZA()()()(),e.TgZ(9,"div",1),e.YNc(10,le,48,37,"div",6),e.TgZ(11,"div",7),e.YNc(12,ce,2,0,"ng-template",null,8,e.W1O),e.qZA(),e.YNc(14,de,8,0,"div",9),e.qZA()(),e.YNc(15,me,10,3,"ng-template",null,10,e.W1O)),2&t){const i=e.MAs(13);e.xp6(8),e.hij(" Expenses Total No. ",n.totalRecords," "),e.xp6(2),e.Q6J("ngIf",n.expenses)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",null==n.checkedItems?null:n.checkedItems.length)}},dependencies:[r.sg,r.O5,c._Y,c.Fj,c.Wl,c.JJ,c.JL,c.sg,c.u,c.On,T.N,A.w,se.Ry,r.uU],styles:[".branchesTypes[_ngcontent-%COMP%]{margin-bottom:30px}.branchesTypes[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:22px;border:0px;padding:10px 15px;color:#929eae;border-radius:0;margin:0;border-bottom:2px solid #f5f5f5}.branchesTypes[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{color:#000;border-bottom:2px solid #dc3545}.branch-total[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#78778b;text-align:end}.card-table[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:1rem!important;height:1rem}.card-table[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:disabled{background-color:#e9e9e9;cursor:not-allowed!important}.gap15[_ngcontent-%COMP%]{gap:15px}.total[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:19px;color:#929eae;margin:0;padding:20px 0 0}.files[_ngcontent-%COMP%]{color:#000;cursor:pointer}.btnin[_ngcontent-%COMP%]{cursor:initial}.btn-edit[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.btnadd[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{padding:8px 15px;height:46px}.card-state[_ngcontent-%COMP%]{background:#ffffff;border:1px solid #e9e9e9;box-shadow:0 10px 20px #0000001a;border-radius:8px;padding:15px;display:flex;margin-bottom:30px;gap:20px}.card-state[_ngcontent-%COMP%]   .imag[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:6px;padding:5px}.card-state[_ngcontent-%COMP%]   .imag[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.card-state[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;font-size:18px;line-height:22px;color:#1b212d}.card-state[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:20px;line-height:25px}.card-state.a[_ngcontent-%COMP%]   .imag[_ngcontent-%COMP%]{background:#b9e0ca}.card-state.a[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#38b36d}.card-state.b[_ngcontent-%COMP%]   .imag[_ngcontent-%COMP%]{background:#F4CEFA}.card-state.b[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#db5aee}.card-state.c[_ngcontent-%COMP%]   .imag[_ngcontent-%COMP%]{background:#F8E2BE}.card-state.c[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#ffb536}.head-tit[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding:10px 0}.head-tit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#dc3545}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:16px}.infinite-scroll-wrapper[_ngcontent-%COMP%]{height:680px;overflow-y:auto}"]}),o})();function xe(o,s){if(1&o&&(e.TgZ(0,"div",6)(1,"h3"),e._uU(2," Register and Request Details"),e.qZA(),e.TgZ(3,"div",1)(4,"div",7)(5,"div",1)(6,"div",8)(7,"div",9)(8,"h4"),e._uU(9," Register No. "),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.qZA()()(),e.TgZ(12,"div",8)(13,"div",9)(14,"h4"),e._uU(15," Register Name. "),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.qZA()()(),e.TgZ(18,"div",8)(19,"div",9)(20,"h4"),e._uU(21," Branch "),e.qZA(),e.TgZ(22,"p"),e._uU(23),e.qZA()()(),e.TgZ(24,"div",8)(25,"div",9)(26,"h4"),e._uU(27," Request No. "),e.qZA(),e.TgZ(28,"p"),e._uU(29),e.qZA()()()()(),e.TgZ(30,"div",10)(31,"div",1)(32,"div",11)(33,"div",9)(34,"h4"),e._uU(35," Requested By "),e.qZA(),e.TgZ(36,"p"),e._uU(37),e.qZA()()(),e.TgZ(38,"div",11)(39,"div",9)(40,"h4"),e._uU(41," Request Date"),e.qZA(),e.TgZ(42,"p"),e._uU(43),e.ALo(44,"date"),e.qZA()()(),e.TgZ(45,"div",11)(46,"div",9)(47,"h4"),e._uU(48," Requested Amount "),e.qZA(),e.TgZ(49,"p"),e._uU(50),e.ALo(51,"number"),e.qZA()()()()()()()),2&o){const t=e.oxw();e.xp6(11),e.hij(" ",null==t.details||null==t.details.register?null:t.details.register.registerId," "),e.xp6(6),e.hij(" ",null==t.details||null==t.details.register?null:t.details.register.registersName," "),e.xp6(6),e.hij(" ",null==t.details||null==t.details.register||null==t.details.register.branch?null:t.details.register.branch.branchName," "),e.xp6(6),e.hij(" ",null==t.details?null:t.details.pettyCashRequestId," "),e.xp6(8),e.hij(" ",null==t.details||null==t.details.createdBy?null:t.details.createdBy.fullName," "),e.xp6(6),e.hij(" ",e.xi3(44,7,null==t.details?null:t.details.createdAt,"mediumDate")," "),e.xp6(7),e.hij(" ",e.xi3(51,10,null==t.details?null:t.details.requestedAmount,"2.3-3")," JOD ")}}function fe(o,s){if(1&o&&(e.TgZ(0,"div",18)(1,"label"),e._uU(2," Reason "),e.qZA(),e.TgZ(3,"div",19)(4,"p"),e._uU(5),e.qZA()()()),2&o){const t=e.oxw(2);e.xp6(5),e.hij(" ",t.details.rejectionReason," ")}}function ve(o,s){if(1&o&&(e.TgZ(0,"div",23)(1,"label"),e._uU(2," Amount "),e.qZA(),e.TgZ(3,"div",24)(4,"p"),e._uU(5),e.ALo(6,"number"),e.qZA()()()),2&o){const t=e.oxw(2);e.xp6(5),e.hij(" ",e.xi3(6,1,2004==(null==t.details?null:t.details.status)&&t.details.approvedAmount||t.approvedExpenseAmount,"2.3-3")," JOD ")}}function Ce(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",25)(2,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.openModalReject(i.details))}),e._uU(3,"Reject Request"),e.qZA(),e.TgZ(4,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.openModalApprove(i.details))}),e._uU(5," Approve Request"),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("disabled",t.approvedExpenseAmount<=0)}}function be(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",12)(2,"h3"),e._uU(3," Petty Cash Replenishment Request Details "),e.qZA(),e.TgZ(4,"div",13)(5,"span",14),e._uU(6),e.qZA()()(),e.TgZ(7,"div",1)(8,"div",2)(9,"div",1)(10,"div",8)(11,"div",9)(12,"h4"),e._uU(13," Requested By "),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.qZA()()(),e.TgZ(16,"div",8)(17,"div",9)(18,"h4"),e._uU(19," New Request Date "),e.qZA(),e.TgZ(20,"p"),e._uU(21),e.ALo(22,"date"),e.qZA()()(),e.TgZ(23,"div",8)(24,"div",9)(25,"h4"),e._uU(26,"Requested Amount"),e.qZA(),e.TgZ(27,"p"),e._uU(28),e.ALo(29,"number"),e.qZA()()(),e.TgZ(30,"div",8)(31,"div",9)(32,"div",15)(33,"button",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.viewApprovedExpensesList())}),e._uU(34,"View Approved Expenses List"),e.qZA()()()()()()(),e._UZ(35,"br")(36,"br"),e.TgZ(37,"h3"),e._uU(38," Last Request "),e.qZA(),e.TgZ(39,"div",1)(40,"div",2)(41,"div",1)(42,"div",8)(43,"div",9)(44,"h4"),e._uU(45," Request Date "),e.qZA(),e.TgZ(46,"p"),e._uU(47),e.ALo(48,"date"),e.qZA()()(),e.TgZ(49,"div",8)(50,"div",9)(51,"h4"),e._uU(52," Requested Amount "),e.qZA(),e.TgZ(53,"p"),e._uU(54),e.ALo(55,"number"),e.qZA()()(),e.TgZ(56,"div",8)(57,"div",9)(58,"h4"),e._uU(59," Approved Amount "),e.qZA(),e.TgZ(60,"p"),e._uU(61),e.ALo(62,"number"),e.qZA()()(),e.TgZ(63,"div",17),e._UZ(64,"br")(65,"br"),e.TgZ(66,"div",18)(67,"label"),e._uU(68," Note "),e.qZA(),e.TgZ(69,"div",19)(70,"p"),e._uU(71),e.qZA()()(),e.YNc(72,fe,6,1,"div",20),e.YNc(73,ve,7,4,"div",21),e.qZA()()(),e.YNc(74,Ce,6,1,"div",22),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(5),e.Udp("background-color",t.details.statusObj.lookupBGColor)("color",t.details.statusObj.lookupTextColor),e.xp6(1),e.hij(" ",t.details.statusObj.description," "),e.xp6(9),e.hij(" ",null==t.details||null==t.details.createdBy?null:t.details.createdBy.fullName,""),e.xp6(6),e.hij(" ",e.xi3(22,15,t.details.createdAt,"mediumDate"),""),e.xp6(7),e.hij(" ",e.xi3(29,18,t.details.requestedAmount,"2.3-3")," JOD"),e.xp6(19),e.Oqu((null==t.details||null==t.details.lastRequestobject?null:t.details.lastRequestobject.createdAt)&&e.xi3(48,21,null==t.details||null==t.details.lastRequestobject?null:t.details.lastRequestobject.createdAt,"mediumDate")||"-"),e.xp6(7),e.hij(" ",(null==t.details||null==t.details.lastRequestobject?null:t.details.lastRequestobject.requestedAmount)>0&&e.xi3(55,24,null==t.details||null==t.details.lastRequestobject?null:t.details.lastRequestobject.requestedAmount,"2.3-3")||"-"," JOD "),e.xp6(7),e.hij(" ",(null==t.details||null==t.details.lastRequestobject?null:t.details.lastRequestobject.approvedAmount)>0&&e.xi3(62,27,null==t.details||null==t.details.lastRequestobject?null:t.details.lastRequestobject.approvedAmount,"2.3-3")||"-"," JOD "),e.xp6(10),e.hij(" ","undefined"==(null==t.details?null:t.details.requestNote)?"":null==t.details?null:t.details.requestNote," "),e.xp6(1),e.Q6J("ngIf","Rejected"==t.details.statusObj.description),e.xp6(1),e.Q6J("ngIf",2003==(null==t.details?null:t.details.status)||2004==(null==t.details?null:t.details.status)),e.xp6(1),e.Q6J("ngIf",2003==(null==t.details?null:t.details.status))}}let Ze=(()=>{class o{constructor(t,n,i,a){this.treasuryService=t,this.router=n,this.route=i,this.modalService=a,this.approvedExpenseAmount=0}ngOnInit(){this.registerId=this.route.snapshot.params.id,this.requestId=this.route.snapshot.params.id2,this.GetRegisterPettycashrequestDetails()}getEventData(t){t?.approvedExpenseAmount&&(this.approvedExpenseAmount=t?.approvedExpenseAmount)}GetRegisterPettycashrequestDetails(){return this.treasuryService.GetRegisterPettycashrequestDetails(this.requestId).subscribe(t=>{t&&(this.details=t.data)})}viewApprovedExpensesList(){this.modalService.open(Q.f,{backdrop:"static",keyboard:!1,size:"xl"}).componentInstance.data={pettyCashRequestId:this.requestId,registerId:this.registerId}}openModalApprove(t){const n=this.modalService.open(k);n.componentInstance.requestDetails={...t,approvedExpenseAmount:this.approvedExpenseAmount},n.componentInstance.type="approve",n.componentInstance.sendtoLoadData.subscribe(i=>{console.log("resendtoLoadDatasult",i),this.modalService.dismissAll(),this.GetRegisterPettycashrequestDetails()})}openModalReject(t){const n=this.modalService.open(k);n.componentInstance.requestDetails=t,n.componentInstance.type="reject",n.componentInstance.sendtoLoadData.subscribe(i=>{console.log("resendtoLoadDatasult",i),this.modalService.dismissAll(),this.GetRegisterPettycashrequestDetails()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.N),e.Y36(p.F0),e.Y36(p.gz),e.Y36(l.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-request-details"]],decls:8,vars:3,consts:[[1,"card-page"],[1,"row"],[1,"col-md-12"],["class","card-collect",4,"ngIf"],[1,"col-md-12","cc"],[3,"registerId","sendtoLoadData"],[1,"card-collect"],[1,"col-md-7"],[1,"col-sm-3"],[1,"card-sm"],[1,"col-md-5"],[1,"col-sm-4"],[1,"colect-head"],[1,""],[1,"pending"],[1,"btns-group","m-0"],["type","button",1,"btn","btn-save",3,"click"],[1,"col-md-6"],[1,"form-group"],[1,"note"],["class","form-group",4,"ngIf"],["class","form-group mt-2",4,"ngIf"],["class","col-md-12",4,"ngIf"],[1,"form-group","mt-2"],[1,"note","amount"],[1,"btns-group","mb-0","mx-0"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,xe,52,13,"div",3),e.qZA(),e.TgZ(4,"div",4)(5,"app-last-expense",5),e.NdJ("sendtoLoadData",function(a){return n.getEventData(a)}),e.qZA()(),e.TgZ(6,"div",2),e.YNc(7,be,75,30,"div",3),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",n.details),e.xp6(2),e.Q6J("registerId",n.registerId),e.xp6(2),e.Q6J("ngIf",n.details))},dependencies:[r.O5,he,r.JJ,r.uU],styles:[".card-collect[_ngcontent-%COMP%]{background:#ffffff;border:.5px solid #f5f5f5;box-shadow:0 15px 25px #0000001a;border-radius:8px}.card-collect[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid #e9e9e9}.colect-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #e9e9e9;margin-bottom:20px;padding-bottom:15px}.colect-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:0;border-bottom:0px solid #e9e9e9}.note[_ngcontent-%COMP%]{background-color:#f0f0f0;height:120px;border-radius:6px;margin:5px 0;overflow:hidden}.note[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;padding:10px}.amount[_ngcontent-%COMP%]{height:45px;width:50%}"]}),o})();var O=d(86349),D=d(22981);function ye(o,s){if(1&o&&(e.TgZ(0,"div",28)(1,"div",26)(2,"h4"),e._uU(3," Rejected Reason "),e.qZA(),e.TgZ(4,"div",29)(5,"p"),e._uU(6),e.qZA()()()()),2&o){const t=e.oxw(2);e.xp6(6),e.hij(" ",null==t.LastRequest?null:t.LastRequest.rejectionReason," ")}}function Me(o,s){if(1&o&&(e.TgZ(0,"div",15)(1,"div",21)(2,"div",22)(3,"h3"),e._uU(4," Last Petty Cash Replenishment request"),e.qZA(),e.TgZ(5,"span",23),e._uU(6),e.qZA()(),e.TgZ(7,"div",1)(8,"div",24)(9,"div",1)(10,"div",25)(11,"div",26)(12,"h4"),e._uU(13," Request Date "),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.ALo(16,"date"),e.qZA()()(),e.TgZ(17,"div",25)(18,"div",26)(19,"h4"),e._uU(20," Branch Name "),e.qZA(),e.TgZ(21,"p"),e._uU(22),e.qZA()()(),e.TgZ(23,"div",25)(24,"div",26)(25,"h4"),e._uU(26," Register No. "),e.qZA(),e.TgZ(27,"p"),e._uU(28),e.qZA()()()()(),e.TgZ(29,"div",2)(30,"div",1)(31,"div",27)(32,"div",26)(33,"h4"),e._uU(34," Register Name"),e.qZA(),e.TgZ(35,"p"),e._uU(36),e.qZA()()(),e.TgZ(37,"div",27)(38,"div",26)(39,"h4"),e._uU(40," Requested Amount "),e.qZA(),e.TgZ(41,"p"),e._uU(42),e.qZA()()()()(),e.TgZ(43,"div",28)(44,"div",26)(45,"h4"),e._uU(46," Note "),e.qZA(),e.TgZ(47,"div",29)(48,"p"),e._uU(49),e.qZA()()()(),e.YNc(50,ye,7,1,"div",30),e.qZA()()()),2&o){const t=e.oxw();e.xp6(5),e.Udp("background-color",t.LastRequest.statusObj.lookupBGColor)("color",t.LastRequest.statusObj.lookupTextColor),e.xp6(1),e.hij(" ",t.LastRequest.statusObj.description," "),e.xp6(9),e.hij(" ",e.xi3(16,12,t.LastRequest.createdAt," d / M / y "),""),e.xp6(7),e.hij(" ",null==t.LastRequest.register||null==t.LastRequest.register.branch?null:t.LastRequest.register.branch.branchName,""),e.xp6(6),e.hij(" ",null==t.LastRequest.register?null:t.LastRequest.register.registerId,""),e.xp6(8),e.hij(" ",null==t.LastRequest.register?null:t.LastRequest.register.registersName," "),e.xp6(6),e.hij(" ",t.LastRequest.requestedAmount," JD "),e.xp6(7),e.hij(" ",null==t.LastRequest?null:t.LastRequest.requestNote," "),e.xp6(1),e.Q6J("ngIF",null==t.LastRequest?null:t.LastRequest.rejectionReason)}}function Te(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td")(15,"span",23),e._uU(16),e.qZA()(),e.TgZ(17,"td")(18,"a",42),e._uU(19," View details "),e.qZA()()()),2&o){const t=s.$implicit;e.xp6(2),e.hij(" ",t.pettyCashRequestId," "),e.xp6(2),e.hij(" ",null==t?null:t.register.branch.branchName," "),e.xp6(2),e.hij(" ",t.register.registerId," "),e.xp6(2),e.hij(" ",null==t?null:t.register.registersName," "),e.xp6(2),e.hij(" ",e.xi3(11,13,null==t?null:t.createdAt," d MMM y h:mm a")," "),e.xp6(3),e.hij(" ",null==t||null==t.createdBy?null:t.createdBy.fullName," "),e.xp6(2),e.Udp("background-color",t.statusObj.lookupBGColor)("color",t.statusObj.lookupTextColor),e.xp6(1),e.hij(" ",t.statusObj.description," "),e.xp6(2),e.hYB("routerLink","/pettycash/request-details/",null==t.register?null:t.register.registerId,"/",t.pettyCashRequestId,"")}}function Ae(o,s){1&o&&(e.TgZ(0,"div",43),e._UZ(1,"app-not-found"),e.qZA())}function qe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",31)(2,"div",32)(3,"table",33)(4,"thead")(5,"tr")(6,"th",34)(7,"button",35),e._uU(8," Request No."),e.qZA()(),e.TgZ(9,"th",34)(10,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByBranch())}),e._uU(11," Branch "),e._UZ(12,"i",37)(13,"i",38),e.qZA()(),e.TgZ(14,"th",34)(15,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByRegisterNo())}),e._uU(16," Register No. "),e._UZ(17,"i",37)(18,"i",38),e.qZA()(),e.TgZ(19,"th",34)(20,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByRegisterName())}),e._uU(21," Register Name "),e._UZ(22,"i",37)(23,"i",38),e.qZA()(),e.TgZ(24,"th",34)(25,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByDate())}),e._uU(26," Request Date "),e._UZ(27,"i",37)(28,"i",38),e.qZA()(),e.TgZ(29,"th",34)(30,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByRequestBy())}),e._uU(31," Request By "),e._UZ(32,"i",37)(33,"i",38),e.qZA()(),e.TgZ(34,"th",34)(35,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByStatus())}),e._uU(36," Status "),e._UZ(37,"i",37)(38,"i",38),e.qZA()(),e.TgZ(39,"th",34)(40,"button",39),e._uU(41," Action "),e.qZA()()()(),e.TgZ(42,"tbody"),e.YNc(43,Te,20,16,"tr",40),e.qZA()()(),e.YNc(44,Ae,2,0,"div",41),e.qZA()()}if(2&o){const t=s.$implicit,n=e.oxw();e.xp6(7),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",2==n.sort),e.xp6(1),e.ekj("active",3==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",4==n.sort),e.xp6(1),e.ekj("active",5==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",6==n.sort),e.xp6(1),e.ekj("active",7==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",8==n.sort),e.xp6(1),e.ekj("active",9==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",10==n.sort),e.xp6(1),e.ekj("active",11==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",12==n.sort),e.xp6(1),e.ekj("active",13==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function Pe(o,s){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}const Oe=function(o){return{active:o}};function we(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"li",44)(1,"button",45),e.NdJ("click",function(){const a=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.setPage(a))}),e._uU(2),e.qZA()()}if(2&o){const t=s.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,Oe,n.pageNo===t))("disabled",n.pageNo===t),e.xp6(1),e.hij(" ",t+1," ")}}let ke=(()=>{class o{constructor(t,n,i,a,g){this.treasuryService=t,this.headerService=n,this.modalService=i,this.router=a,this.items=[1,2,1,2,1,2],this.searchText="",this.status="",this.sort=1,this.pageNo=0,g.backdrop="static",g.keyboard=!1}ngOnInit(){this.GetRegisterPettycashrequest(),this.treasuryService.pettyCashRequest$.subscribe(t=>{"PettyCashRequest"==t&&this.GetRegisterPettycashrequest()})}Viewdetails(t){this.router.navigateByUrl("/petty-cash/request-details/1"),this.headerService.setTitle("Petty Cash Monitoring > Petty Cash Replenishment Request > View Details")}viewExpense(){this.headerService.setTitle("petty-cash > View role")}GetRegisterPettyCashRequestLast(){return this.treasuryService.GetRegisterPettyCashRequestLast().subscribe(t=>{t&&(this.LastRequest=t.data)})}GetRegisterPettycashrequest(){return this.treasuryService.GetRegisterPettycashrequest(this.searchText,this.sort,this.status,this.pageNo).subscribe(t=>{t&&(this.expenses=t.data,this.totalRecords=t.info.totalRecordsCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=O.w6(this.pagin),console.log(this.pagin),console.log(this.pages))})}searchTable(t){console.log(t?.target.value);const n=t.target.value;console.log(n.length),n.length>=3&&(this.searchText=n,this.pageNo=0,this.GetRegisterPettycashrequest()),0==n.length&&this.GetRegisterPettycashrequest()}removeSearch(){this.searchText="",this.sort=1,this.GetRegisterPettycashrequest()}sortByBranch(){this.sort=3==this.sort?1:2==this.sort?3:2,this.GetRegisterPettycashrequest()}sortByRegisterNo(){this.sort=5==this.sort?1:4==this.sort?5:4,this.GetRegisterPettycashrequest()}sortByRegisterName(){this.sort=7==this.sort?1:6==this.sort?7:6,this.GetRegisterPettycashrequest()}sortByDate(){this.sort=9==this.sort?1:8==this.sort?9:8,this.GetRegisterPettycashrequest()}sortByRequestBy(){this.sort=11==this.sort?1:10==this.sort?11:10,this.GetRegisterPettycashrequest()}sortByStatus(){this.sort=13==this.sort?1:12==this.sort?13:12,this.GetRegisterPettycashrequest()}setPage(t){this.pageNo=t,this.GetRegisterPettycashrequest(),window.scroll(0,0)}openMdalImage(t){this.modalService.open(P.M).componentInstance.expenseDetails=t}openModalAddREquest(){const t=this.modalService.open(D.i,{size:"lg"});t.componentInstance.type="add",t.componentInstance.sendtoLoadData.subscribe(n=>{console.log("result",n),this.modalService.dismissAll(),this.GetRegisterPettycashrequest()})}openModalExpenseView(t){const n=this.modalService.open(D.i,{size:"lg"});n.componentInstance.type="view",n.componentInstance.pettyCashRequestId=t.pettyCashRequestId}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.N),e.Y36(y.r),e.Y36(l.FF),e.Y36(p.F0),e.Y36(l.NM))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-request"]],decls:33,vars:12,consts:[[1,"card-page"],[1,"row"],[1,"col-md-5"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search ..",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"col-md-2","d-flex","justify-content-end","btnadd"],["class","col-md-12",4,"ngIf"],[1,"col-md-12","text-end"],[1,"total"],[1,"pt-2"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[1,"col-md-6",3,"hidden"],[1,"showing"],[1,"pagination"],["class","page-item",4,"ngFor","ngForOf"],[1,"card-collect","mt-3"],[1,"last-head"],[1,"pending"],[1,"col-md-7"],[1,"col-sm-4"],[1,"card-sm"],[1,"col-sm-6"],[1,"col-md-6","my-2"],[1,"note"],["class","col-md-6 my-2",4,"ngIF"],[1,"card-table"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn","btnin",3,"disabled"],[4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"btn","btn-view",3,"routerLink"],[1,"not-found"],[1,"page-item"],[1,"page-link",3,"ngClass","disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(5,"i",5),e.qZA(),e.TgZ(6,"input",6),e.NdJ("ngModelChange",function(a){return n.searchText=a})("keyup",function(a){return n.searchTable(a)}),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(8,"i",8),e.qZA()()(),e._UZ(9,"div",2)(10,"div",9),e.YNc(11,Me,51,15,"div",10),e.TgZ(12,"div",11)(13,"div",12)(14,"p",13),e._uU(15),e.qZA()()()(),e.TgZ(16,"div",1),e.YNc(17,qe,45,34,"div",14),e.TgZ(18,"div",15),e.YNc(19,Pe,2,0,"ng-template",null,16,e.W1O),e.qZA(),e.TgZ(21,"div",17)(22,"h6",18),e._uU(23," Showing "),e.TgZ(24,"span"),e._uU(25),e.qZA(),e._uU(26," from "),e.TgZ(27,"span"),e._uU(28),e.qZA(),e._uU(29," data "),e.qZA()(),e.TgZ(30,"div",17)(31,"ul",19),e.YNc(32,we,3,5,"li",20),e.qZA()()()()),2&t){const i=e.MAs(20);e.xp6(6),e.Q6J("ngModel",n.searchText),e.xp6(1),e.Q6J("hidden",0==n.searchText.length),e.xp6(4),e.Q6J("ngIf",n.LastRequest),e.xp6(4),e.hij(" Total No. ",n.totalRecords," "),e.xp6(2),e.Q6J("ngIf",n.expenses)("ngIfElse",i),e.xp6(4),e.Q6J("hidden",0==(null==n.expenses?null:n.expenses.length)),e.xp6(4),e.AsE(" ",6*(n.pageNo+1)-5," - ",6==(null==n.expenses?null:n.expenses.length)?6*(n.pageNo+1):n.totalRecords," "),e.xp6(3),e.hij(" ",n.totalRecords," "),e.xp6(2),e.Q6J("hidden",n.totalRecords<7),e.xp6(2),e.Q6J("ngForOf",n.pages)}},dependencies:[r.mk,r.sg,r.O5,p.rH,c.Fj,c.JJ,c.On,T.N,A.w,r.uU],styles:[".branchesTypes[_ngcontent-%COMP%]{margin-bottom:30px}.branchesTypes[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:22px;border:0px;padding:10px 15px;color:#929eae;border-radius:0;margin:0;border-bottom:2px solid #f5f5f5}.branchesTypes[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{color:#000;border-bottom:2px solid #dc3545}.branch-total[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#78778b;text-align:end}.card-table[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:1.5em!important;height:1.5em}.gap15[_ngcontent-%COMP%]{gap:15px}.total[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:19px;color:#929eae;margin:0;padding:20px 0 0}.files[_ngcontent-%COMP%]{color:#000;cursor:pointer}.btnin[_ngcontent-%COMP%]{cursor:initial}.btn-edit[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.last-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid #ddd;margin-bottom:15px;padding-bottom:10px}.note[_ngcontent-%COMP%]{background-color:#f0f0f0;height:120px;border-radius:6px;margin:5px 0}.note[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;padding:10px}.card-collect[_ngcontent-%COMP%]{padding:20px 30px}.card-collect[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:10px 0;margin:0}.card-collect[_ngcontent-%COMP%]   .card-sm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}"]}),o})();var De=d(55134);function Re(o,s){1&o&&(e.TgZ(0,"span",18),e._uU(1,"Input is required"),e.qZA())}function Ue(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Re,2,0,"span",17),e.BQk()),2&o){const t=e.oxw(4);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("pettycashLimit"))?null:n.errors.required)}}function Ee(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Ue,2,1,"ng-container",11),e.BQk()),2&o){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("pettycashLimit"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("pettycashLimit"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("pettycashLimit"))?null:n.dirty))}}function Ne(o,s){1&o&&(e.TgZ(0,"span",18),e._uU(1,"Input is required"),e.qZA())}function Ie(o,s){1&o&&(e.TgZ(0,"span",18),e._uU(1,"Value must be between 0-100"),e.qZA())}function je(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Ne,2,0,"span",17),e.YNc(2,Ie,2,0,"span",17),e.BQk()),2&o){const t=e.oxw(4);let n,i;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("thresholdPercentage"))?null:n.errors.required),e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(i=t.formGroup.get("thresholdPercentage"))?null:i.errors.min)||(null==t.formGroup||null==(i=t.formGroup.get("thresholdPercentage"))?null:i.errors.max))}}function Se(o,s){if(1&o&&(e.ynx(0),e.YNc(1,je,3,2,"ng-container",11),e.BQk()),2&o){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("thresholdPercentage"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("thresholdPercentage"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("thresholdPercentage"))?null:n.dirty))}}function Je(o,s){if(1&o&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.messageError," ")}}function Ge(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"h4"),e._uU(4," Register Name "),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA()()(),e.TgZ(7,"div",6)(8,"div",7)(9,"h4"),e._uU(10," Register No. "),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",6)(14,"div",7)(15,"h4"),e._uU(16," Branch "),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.qZA()()(),e.TgZ(19,"div",8)(20,"div",9)(21,"label"),e._uU(22,"Limit Amount "),e.qZA(),e._UZ(23,"input",10),e.YNc(24,Ee,2,1,"ng-container",11),e.qZA()(),e.TgZ(25,"div",8)(26,"div",9)(27,"label"),e._uU(28,"Threshold Percentage %"),e.qZA(),e._UZ(29,"input",12),e.YNc(30,Se,2,1,"ng-container",11),e.qZA()(),e._UZ(31,"br"),e.YNc(32,Je,2,1,"div",13),e._UZ(33,"br"),e.TgZ(34,"div",14)(35,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.activeModal.close("Close click"))}),e._uU(36,"Cancel"),e.qZA(),e.TgZ(37,"button",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.EditPettyCashLimit())}),e._uU(38," Save "),e.qZA()()()}if(2&o){const t=e.oxw(2);let n,i;e.xp6(6),e.hij(" ",null==t.registerDetails?null:t.registerDetails.registersName," "),e.xp6(6),e.hij(" ",null==t.registerDetails?null:t.registerDetails.id," "),e.xp6(6),e.hij(" ",null==t.registerDetails?null:t.registerDetails.branch.branchName," "),e.xp6(6),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("pettycashLimit"))?null:n.errors),e.xp6(6),e.Q6J("ngIf",null==t.formGroup||null==(i=t.formGroup.get("thresholdPercentage"))?null:i.errors),e.xp6(2),e.Q6J("ngIf",t.messageError)}}function Le(o,s){if(1&o&&(e.TgZ(0,"div",1)(1,"div",2)(2,"h3"),e._uU(3," Petty Cash Limit "),e.qZA()(),e.TgZ(4,"form",3),e.YNc(5,Ge,39,6,"div",4),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.formGroup),e.xp6(1),e.Q6J("ngIf",t.registerDetails)}}function Fe(o,s){if(1&o&&(e.TgZ(0,"div",1)(1,"div",20)(2,"h5"),e._UZ(3,"i",21),e._uU(4),e.qZA()()()),2&o){const t=e.oxw();e.xp6(4),e.hij(" ",t.message,"")}}let Ye=(()=>{class o{constructor(t,n,i,a,g,b){this.treasuryService=t,this.router=n,this.route=i,this.activeModal=a,this.modalService=g,this.fb=b,this.thresholdPercentage=0,this.sendtoLoadData=new e.vpe}ngOnInit(){this.registerDetails&&(this.pettyCashLimit=this.registerDetails.pettyCashLimit,this.thresholdPercentage=this.registerDetails.thresholdPercentage),this.initForm()}initForm(){this.formGroup=this.fb.group({pettycashLimit:[this.registerDetails.pettyCashLimit,[c.kI.required]],thresholdPercentage:[this.registerDetails?.thresholdPercentage||0,[c.kI.required,c.kI.max(100)]]})}EditPettyCashLimit(){if(this.formGroup.invalid)return void this.formGroup.markAllAsTouched();const t=new FormData;let n=this.formGroup.value;t.append("registerId",this.registerDetails.id),t.append("PettyCashLimit",n?.pettycashLimit),t.append("thresholdPercentage",n?.thresholdPercentage),this.treasuryService.EditPettyCashLimit(t).subscribe(i=>{1==i.isSuccess?(this.message="Approved successfully ",setTimeout(()=>{this.modalService.dismissAll(),this.sendtoLoadData.emit()},3e3)):(console.log("error",i),this.messageError=i.Errors[0]?.ErrorMessageEn,setTimeout(()=>{this.messageError=""},3e3))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.N),e.Y36(p.F0),e.Y36(p.gz),e.Y36(l.Kz),e.Y36(l.FF),e.Y36(c.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-edit-setup"]],inputs:{registerDetails:"registerDetails",type:"type"},outputs:{sendtoLoadData:"sendtoLoadData"},decls:2,vars:2,consts:[["class","modal-body",4,"ngIf"],[1,"modal-body"],[1,"modal-head"],[3,"formGroup"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"card-sm"],[1,"col-md-6"],[1,"form-group"],["type","text","formControlName","pettycashLimit","appDecimalNumber","",1,"form-control"],[4,"ngIf"],["type","text","formControlName","thresholdPercentage","appDecimalNumber","",1,"form-control"],["class","alert alert-danger text-center my-2","role","alert",4,"ngIf"],[1,"btns-group","mb-0","mx-0","mt-3"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["role","alert",1,"alert","alert-danger","text-center","my-2"],[1,"message"],[1,"fa-regular","fa-circle-check"]],template:function(t,n){1&t&&(e.YNc(0,Le,6,2,"div",0),e.YNc(1,Fe,5,1,"div",0)),2&t&&(e.Q6J("ngIf",!n.message),e.xp6(1),e.Q6J("ngIf",n.message))},dependencies:[r.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,De.Q],styles:[".modal-body[_ngcontent-%COMP%]{padding:30px}.modal-head[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid #c4cdd5;display:flex;justify-content:space-between;align-items:center}.modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:18px;color:#1b212d;padding:5px 0 15px;margin:0}.card-sm[_ngcontent-%COMP%]{margin:10px 0}.card-sm[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1b212d;margin-bottom:5px}.card-sm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#929eae}.card-sm[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{background-color:#f0f0f0;height:120px;border-radius:6px;margin:5px 0}.card-sm[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;padding:10px}label[_ngcontent-%COMP%]{font-weight:600;font-size:16px;padding:5px 0}.message[_ngcontent-%COMP%]{padding:10px;text-align:center}.message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#1b212d;margin:0;padding:20px}.message[_ngcontent-%COMP%]   .fa-circle-check[_ngcontent-%COMP%]{color:#25bb00;font-size:28px;vertical-align:middle;margin:2px 10px 5px}.error[_ngcontent-%COMP%]{font-size:14px;color:#f44336;font-weight:500;padding:7px;display:block}"]}),o})();var R=d(90454),U=d(80145);function Qe(o,s){1&o&&(e.TgZ(0,"div",17)(1,"h3"),e._uU(2," Add New Category"),e.qZA()())}function Be(o,s){1&o&&(e.TgZ(0,"div",17)(1,"h3",18),e._uU(2," Edit Category"),e.qZA()())}function ze(o,s){if(1&o&&(e.TgZ(0,"div")(1,"span",19),e._uU(2),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.msgError,"")}}function Ke(o,s){if(1&o&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.messageError," ")}}function He(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.submit())}),e._uU(1," Add "),e.qZA()}}function Ve(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.submit())}),e._uU(1,"Save"),e.qZA()}}const $e=function(){return{standalone:!0}};function We(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.YNc(1,Qe,3,0,"div",2),e.YNc(2,Be,3,0,"ng-template",null,3,e.W1O),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"label"),e._uU(8,"Category Name "),e.qZA(),e.TgZ(9,"input",7),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.CategoryName=i)}),e.qZA(),e.YNc(10,ze,3,1,"div",8),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"br")(13,"br"),e.TgZ(14,"div",9)(15,"label",10),e._uU(16,"Active"),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"input",11),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.isStatus=i)})("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.chooseStatus())}),e.qZA()()(),e._UZ(19,"br")(20,"br")(21,"br"),e.YNc(22,Ke,2,1,"div",12),e._UZ(23,"br"),e.TgZ(24,"div",13)(25,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeModal.close("Close click"))}),e._uU(26,"Cancel"),e.qZA(),e.YNc(27,He,2,0,"button",15),e.YNc(28,Ve,2,0,"ng-template",null,16,e.W1O),e.qZA()()()}if(2&o){const t=e.MAs(3),n=e.MAs(29),i=e.oxw();e.xp6(1),e.Q6J("ngIf","item"==i.expenseDetails)("ngIfElse",t),e.xp6(8),e.Q6J("ngModel",i.CategoryName),e.xp6(1),e.Q6J("ngIf",i.msgError),e.xp6(8),e.Q6J("ngModel",i.isStatus)("ngModelOptions",e.DdM(9,$e)),e.xp6(4),e.Q6J("ngIf",i.messageError),e.xp6(5),e.Q6J("ngIf","item"==i.expenseDetails)("ngIfElse",n)}}function Xe(o,s){if(1&o&&(e.TgZ(0,"div",1)(1,"div",22)(2,"h5"),e._UZ(3,"i",23),e._uU(4),e.qZA()()()),2&o){const t=e.oxw();e.xp6(4),e.hij(" ",t.message,"")}}let E=(()=>{class o{constructor(t,n,i,a,g){this.treasuryService=t,this.router=n,this.route=i,this.activeModal=a,this.modalService=g,this.sendtoLoadData=new e.vpe}ngOnInit(){"item"==this.expenseDetails?this.isStatus=!0:(this.CategoryId=this.expenseDetails.id,this.CategoryName=this.expenseDetails.description,this.isStatus=2001==this.expenseDetails.status)}submit(){this.CategoryName=(0,U.O)(this.CategoryName),this.CategoryId?this.EditExpenseCategory():this.AddExpenseCategory()}AddExpenseCategory(){if(!this.CategoryName)return this.msgError="Category Name is required",setTimeout(()=>{this.msgError="  "},2e3),window.scroll();const t=new FormData;return t.append("CategoryName",this.CategoryName),t.append("Active",this.isStatus),console.log(t),this.treasuryService.AddExpenseCategory(t).subscribe(n=>{console.log(n),1==n.isSuccess?(this.message="Added successfully ",setTimeout(()=>{this.modalService.dismissAll(),this.sendtoLoadData.emit()},3e3)):(console.log("error",n),this.messageError=n.Errors[0]?.ErrorMessageEn,setTimeout(()=>{this.messageError=""},3e3))},n=>{console.log(n),this.messageError=n.error?.Errors[0]?.ErrorMessageEn})}EditExpenseCategory(){if(!this.CategoryName)return this.msgError=" Category Name is required",setTimeout(()=>{this.msgError="  "},2e3),window.scroll();const t=new FormData;return t.append("CategoryId",this.CategoryId),t.append("CategoryName",this.CategoryName),t.append("Active",this.isStatus),console.log(t),this.treasuryService.EditExpenseCategory(t).subscribe(n=>{console.log(n),1==n.isSuccess?(this.message="Edited successfully ",setTimeout(()=>{this.modalService.dismissAll(),this.sendtoLoadData.emit()},3e3)):(console.log("error",n),this.messageError=n.Errors[0]?.ErrorMessageEn,setTimeout(()=>{this.messageError=""},3e3))})}chooseStatus(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.N),e.Y36(p.F0),e.Y36(p.gz),e.Y36(l.Kz),e.Y36(l.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-category"]],inputs:{expenseDetails:"expenseDetails",type:"type"},outputs:{sendtoLoadData:"sendtoLoadData"},decls:2,vars:2,consts:[["class","modal-body",4,"ngIf"],[1,"modal-body"],["class","modal-head",4,"ngIf","ngIfElse"],["editcategory",""],[1,"row"],[1,"col-md-7"],[1,"form-group"],["name","categoryName","type","text","placeholder","","OnlyCharacter","",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"form-check","form-switch"],[1,"labelactive"],["name","isStatus","type","checkbox","role","switch",1,"form-check-input",3,"ngModel","ngModelOptions","ngModelChange","change"],["class","alert alert-danger text-center my-2","role","alert",4,"ngIf"],[1,"btns-group","mb-0","mx-0","mt-3"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit","class","btn btn-save",3,"click",4,"ngIf","ngIfElse"],["editBtn",""],[1,"modal-head"],[1,"edit-category"],[1,"error","py-2"],["role","alert",1,"alert","alert-danger","text-center","my-2"],["type","submit",1,"btn","btn-save",3,"click"],[1,"message"],[1,"fa-regular","fa-circle-check"]],template:function(t,n){1&t&&(e.YNc(0,We,30,10,"div",0),e.YNc(1,Xe,5,1,"div",0)),2&t&&(e.Q6J("ngIf",!n.message),e.xp6(1),e.Q6J("ngIf",n.message))},dependencies:[r.O5,c.Fj,c.Wl,c.JJ,c.On,U.Q],styles:[".modal-body[_ngcontent-%COMP%]{padding:20px}.modal-head[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid #c4cdd5;display:flex;justify-content:space-between;align-items:center}.modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:18px;color:#1b212d;padding:5px 0 15px;margin:0}.card-sm[_ngcontent-%COMP%]{margin:10px 0}.card-sm[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1b212d;margin-bottom:5px}.card-sm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#929eae}.card-sm[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{background-color:#f0f0f0;height:120px;border-radius:6px;margin:5px 0}.card-sm[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;padding:10px}label[_ngcontent-%COMP%]{font-weight:600;font-size:16px;padding:5px 0}.message[_ngcontent-%COMP%]{padding:10px;text-align:center}.message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#1b212d;margin:0;padding:20px}.message[_ngcontent-%COMP%]   .fa-circle-check[_ngcontent-%COMP%]{color:#25bb00;font-size:28px;vertical-align:middle;margin:2px 10px 5px}.error[_ngcontent-%COMP%]{font-size:14px;color:#f44336;font-weight:500;padding:7px;display:block}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#dc3545;border-color:#dc3545}.form-check.form-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:3em!important;height:1.6em;margin-left:15px}.form-check.form-switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0 10px}.form-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{margin-left:0}.form-switch[_ngcontent-%COMP%]{padding-left:0}.edit-category[_ngcontent-%COMP%]{font-weight:600;font-size:18px;color:#1b212d;padding:5px 0 15px;margin:0}"]}),o})();function et(o,s){if(1&o&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.messageError," ")}}function tt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"h4"),e._uU(3," Are you sure to delete the following "),e._UZ(4,"br"),e._uU(5," category "),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._uU(8," ? "),e.qZA()(),e.YNc(9,et,2,1,"div",3),e.TgZ(10,"div",4)(11,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeModal.close("Close click"))}),e._uU(12,"No"),e.qZA(),e.TgZ(13,"button",6),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.Delete())}),e._uU(14," Yes "),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(7),e.hij("",t.expenseDetails.description," "),e.xp6(2),e.Q6J("ngIf",t.messageError)}}function nt(o,s){if(1&o&&(e.TgZ(0,"div",1)(1,"div",8)(2,"h5"),e._UZ(3,"i",9),e._uU(4),e.qZA()()()),2&o){const t=e.oxw();e.xp6(4),e.hij(" ",t.message,"")}}let ot=(()=>{class o{constructor(t,n,i,a){this.treasuryService=t,this.activeModal=n,this.modalService=i,this.router=a,this.sendtoLoadData=new e.vpe}ngOnInit(){}Delete(){const t=new FormData;return t.append("expenseCategoryId",this.expenseDetails.id),console.log(t),this.treasuryService.DeleteExpenseCategory(t).subscribe(n=>{console.log(n),1==n.isSuccess?(this.message="Deleted successfully ",setTimeout(()=>{this.modalService.dismissAll(),this.sendtoLoadData.emit()},3e3)):(console.log("error",n),this.messageError=n.Errors[0]?.ErrorMessageEn,setTimeout(()=>{this.messageError=""},7e3))},n=>{console.log(n),this.messageError=n.error?.Errors[0]?.ErrorMessageEn})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.N),e.Y36(l.Kz),e.Y36(l.FF),e.Y36(p.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-delete-category"]],inputs:{expenseDetails:"expenseDetails",type:"type"},outputs:{sendtoLoadData:"sendtoLoadData"},decls:2,vars:2,consts:[["class","modal-body",4,"ngIf"],[1,"modal-body"],[1,"text"],["class","alert alert-danger text-center my-2","role","alert",4,"ngIf"],[1,"btns-group","mb-0","mx-0","mt-3"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save",3,"click"],["role","alert",1,"alert","alert-danger","text-center","my-2"],[1,"message"],[1,"fa-regular","fa-circle-check"]],template:function(t,n){1&t&&(e.YNc(0,tt,15,2,"div",0),e.YNc(1,nt,5,1,"div",0)),2&t&&(e.Q6J("ngIf",!n.message),e.xp6(1),e.Q6J("ngIf",n.message))},dependencies:[r.O5],styles:[".text[_ngcontent-%COMP%]{padding:40px 10px;text-align:center}.text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#dc3545}.text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:22px;line-height:36px}.btns-group[_ngcontent-%COMP%]{margin:30px 20px 50px;display:flex;justify-content:center;gap:30px}.btns-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:12px 60px}.message[_ngcontent-%COMP%]{padding:10px;text-align:center}.message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#1b212d;margin:0;padding:20px}.message[_ngcontent-%COMP%]   .fa-circle-check[_ngcontent-%COMP%]{color:#25bb00;font-size:28px;vertical-align:middle;margin:2px 10px 5px}"]}),o})();function it(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"div",21),e._UZ(7,"input",22)(8,"label",23),e.qZA()(),e.TgZ(9,"td")(10,"button",24),e.NdJ("click",function(){const a=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.openModalDelete(a))}),e._UZ(11,"img",25),e.qZA(),e.TgZ(12,"button",24),e.NdJ("click",function(){const a=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.openModalEdit(a))}),e._UZ(13,"img",26),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.hij(" ",null==t||null==t.name?null:t.name.lookupName,""),e.xp6(2),e.hij(" ",t.createdByUser.fullName," "),e.xp6(3),e.Q6J("checked","2001"==t.status)}}function st(o,s){1&o&&(e.TgZ(0,"div",27),e._UZ(1,"app-not-found"),e.qZA())}function at(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",11)(2,"div",12)(3,"table",13)(4,"thead")(5,"tr")(6,"th",14)(7,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByInvoice())}),e._uU(8," Expense Category "),e._UZ(9,"i",16)(10,"i",17),e.qZA()(),e.TgZ(11,"th",14)(12,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByCategory())}),e._uU(13," Added By "),e._UZ(14,"i",16)(15,"i",17),e.qZA()(),e.TgZ(16,"th",14)(17,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByIDate())}),e._uU(18," Activation "),e._UZ(19,"i",16)(20,"i",17),e.qZA()(),e.TgZ(21,"th",14)(22,"button",18),e._uU(23," Action "),e.qZA()()()(),e.TgZ(24,"tbody"),e.YNc(25,it,14,3,"tr",19),e.qZA()()(),e.YNc(26,st,2,0,"div",20),e.qZA()()}if(2&o){const t=s.$implicit,n=e.oxw();e.xp6(7),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",1==n.sort),e.xp6(1),e.ekj("active",2==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",3==n.sort),e.xp6(1),e.ekj("active",4==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",5==n.sort),e.xp6(1),e.ekj("active",6==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function rt(o,s){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function lt(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",28)(2,"div",29)(3,"h6",30),e._uU(4," Showing "),e.TgZ(5,"span"),e._uU(6),e.qZA(),e._uU(7," from "),e.TgZ(8,"span"),e._uU(9),e.qZA(),e._uU(10," data "),e.qZA()(),e.TgZ(11,"div",29)(12,"ngb-pagination",31),e.NdJ("pageChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.pageNo=i)})("pageChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.pageChange(i))}),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(6),e.AsE("",6*t.pageNo-5," - ",6==(null==t.expenses?null:t.expenses.length)?6*t.pageNo:t.totalRecords,""),e.xp6(3),e.hij(" ",t.totalRecords," "),e.xp6(3),e.Q6J("collectionSize",t.totalRecords)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}let ct=(()=>{class o{constructor(t,n,i,a,g){this.treasuryService=t,this.headerService=n,this.modalService=i,this.router=a,this.items=[1,2,1,2,1,2],this.searchText="",this.sort=0,this.pageNo=1,g.backdrop="static",g.keyboard=!1}ngOnInit(){this.GetExpensesCategories()}addRole(){this.router.navigateByUrl("/petty-cash/add-petty-cash"),this.headerService.setTitle("Petty Cash > Add Petty Cash")}viewExpense(){this.headerService.setTitle("petty-cash > View role")}openModalExpense(){const t=this.modalService.open(R.S,{size:"lg"});t.componentInstance.name="",t.componentInstance.sendtoLoadData.subscribe(n=>{console.log("result",n),this.modalService.dismissAll(),this.GetExpensesCategories()})}openModalExpenseView(t){const n=this.modalService.open(R.S,{size:"lg"});n.componentInstance.expenseId=t.expenseRecordId,n.componentInstance.sendtoLoadData.subscribe(i=>{console.log("resendtoLoadDatasult",i),this.modalService.dismissAll(),this.GetExpensesCategories()})}GetExpensesCategories(){return this.isDeleted&&(this.sort=0,this.pageNo=1,this.isDeleted=!1),this.treasuryService.GetExpensesCategories(this.sort,this.pageNo-1).subscribe(t=>{t&&(this.expenses=t.data,this.totalRecords=t.info.totalRecordsCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=O.w6(this.pagin),console.log(this.pagin),console.log(this.pages))})}searchRoles(t){console.log(t?.target.value);const n=t.target.value;console.log(n.length),n.length>=3&&(this.searchText=n,this.pageNo=1,this.GetExpensesCategories()),0==n.length&&this.GetExpensesCategories()}removeSearch(){this.searchText="",this.sort=1,this.GetExpensesCategories()}sortByInvoice(){this.sort=2==this.sort?0:1==this.sort?2:1,this.GetExpensesCategories()}sortByCategory(){this.sort=4==this.sort?0:3==this.sort?4:3,this.GetExpensesCategories()}sortByIDate(){this.sort=6==this.sort?0:5==this.sort?6:5,this.GetExpensesCategories()}sortByTax(){this.sort=8==this.sort?1:7==this.sort?8:7,this.GetExpensesCategories()}sortByAmount(){this.sort=10==this.sort?1:9==this.sort?10:9,this.GetExpensesCategories()}pageChange(t){this.pageNo=t,this.GetExpensesCategories()}openMdalImage(t){this.modalService.open(P.M).componentInstance.expenseDetails=t}openModalAdd(){const t=this.modalService.open(E);t.componentInstance.expenseDetails="item",t.componentInstance.sendtoLoadData.subscribe(n=>{console.log("resendtoLoadDatasult",n),this.modalService.dismissAll(),this.GetExpensesCategories()})}openModalEdit(t){const n=this.modalService.open(E);n.componentInstance.expenseDetails=t,n.componentInstance.sendtoLoadData.subscribe(i=>{console.log("resendtoLoadDatasult",i),this.modalService.dismissAll(),this.GetExpensesCategories()})}openModalDelete(t){const n=this.modalService.open(ot);n.componentInstance.expenseDetails=t,n.componentInstance.sendtoLoadData.subscribe(i=>{console.log("resendtoLoadDatasult",i),this.modalService.dismissAll(),this.isDeleted=!0,this.GetExpensesCategories()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.N),e.Y36(y.r),e.Y36(l.FF),e.Y36(p.F0),e.Y36(l.NM))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-category"]],decls:17,vars:3,consts:[[1,"card-page"],[1,"row"],[1,"col-md-5"],[1,"excat"],[1,"col-md-2","d-flex","justify-content-end","btnadd"],[1,"btn","btn-add",3,"click"],["src","assets/images/plus.png","alt",""],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[4,"ngIf"],[1,"card-table"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn","btnin",3,"disabled"],[4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","flexSwitchCheckChecked","readonly","","disabled","",1,"form-check-input",3,"checked"],["for","flexSwitchCheckChecked",1,"form-check-label"],[1,"btn","btn-edit",3,"click"],["src","assets/images/trash.png","alt",""],["src","assets/images/edit2.png","alt",""],[1,"not-found"],[1,"row","justify-content-between","align-items-center"],[1,"col-md-6"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4"),e._uU(5," Expense Category "),e.qZA()()(),e._UZ(6,"div",2),e.TgZ(7,"div",4)(8,"button",5),e.NdJ("click",function(){return n.openModalAdd()}),e._UZ(9,"img",6),e._uU(10," Add Category "),e.qZA()()(),e.TgZ(11,"div",1),e.YNc(12,at,27,18,"div",7),e.TgZ(13,"div",8),e.YNc(14,rt,2,0,"ng-template",null,9,e.W1O),e.qZA(),e.YNc(16,lt,13,9,"ng-container",10),e.qZA()()),2&t){const i=e.MAs(15);e.xp6(12),e.Q6J("ngIf",n.expenses)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",n.totalRecords>6)}},dependencies:[r.sg,r.O5,l.N9,T.N,A.w],styles:[".branchesTypes[_ngcontent-%COMP%]{margin-bottom:30px}.branchesTypes[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:22px;border:0px;padding:10px 15px;color:#929eae;border-radius:0;margin:0;border-bottom:2px solid #f5f5f5}.branchesTypes[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{color:#000;border-bottom:2px solid #dc3545}.branch-total[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#78778b;text-align:end}.gap15[_ngcontent-%COMP%]{gap:15px}.total[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:19px;color:#929eae;margin:0;padding:20px 0 0}.files[_ngcontent-%COMP%]{color:#000;cursor:pointer}.btnin[_ngcontent-%COMP%]{cursor:initial}.excat[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:0;padding:10px 0}.btn-edit[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}"]}),o})();function dt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"number"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td")(13,"button",27),e.NdJ("click",function(){const a=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.openMdalEditLimit(a))}),e._UZ(14,"img",28),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.hij(" ",t.branch.branchName," "),e.xp6(2),e.hij(" ",t.id," "),e.xp6(2),e.hij(" ",t.registersName," "),e.xp6(2),e.hij(" ",e.xi3(9,5,t.pettyCashLimit,"2.3-3")," JOD "),e.xp6(3),e.hij(" ",t.thresholdPercentage," % ")}}function pt(o,s){1&o&&(e.TgZ(0,"div",29),e._UZ(1,"app-not-found"),e.qZA())}function gt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",17)(2,"div",18)(3,"table",19)(4,"thead")(5,"tr")(6,"th",20)(7,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByInvoice())}),e._uU(8," Branch "),e._UZ(9,"i",22)(10,"i",23),e.qZA()(),e.TgZ(11,"th",20)(12,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByCategory())}),e._uU(13," Register No. "),e._UZ(14,"i",22)(15,"i",23),e.qZA()(),e.TgZ(16,"th",20)(17,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByRegisterName())}),e._uU(18," Register Name "),e._UZ(19,"i",22)(20,"i",23),e.qZA()(),e.TgZ(21,"th",20)(22,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByTax())}),e._uU(23," Petty Cash Limit "),e._UZ(24,"i",22)(25,"i",23),e.qZA()(),e.TgZ(26,"th",20)(27,"button",24),e._uU(28," Replenishment Threshold "),e.qZA()(),e.TgZ(29,"th",20)(30,"button",24),e._uU(31," Action "),e.qZA()()()(),e.TgZ(32,"tbody"),e.YNc(33,dt,15,8,"tr",25),e.qZA()()(),e.YNc(34,pt,2,0,"div",26),e.qZA()()}if(2&o){const t=s.$implicit,n=e.oxw();e.xp6(7),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",1==n.sort),e.xp6(1),e.ekj("active",2==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",3==n.sort),e.xp6(1),e.ekj("active",4==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",5==n.sort),e.xp6(1),e.ekj("active",6==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",7==n.sort),e.xp6(1),e.ekj("active",8==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(3),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function ut(o,s){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function _t(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30)(2,"div",10)(3,"h6",31),e._uU(4," Showing "),e.TgZ(5,"span"),e._uU(6),e.qZA(),e._uU(7," from "),e.TgZ(8,"span"),e._uU(9),e.qZA(),e._uU(10," data "),e.qZA()(),e.TgZ(11,"div",10)(12,"ngb-pagination",32),e.NdJ("pageChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.pageNo=i)})("pageChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.pageChange(i))}),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(6),e.AsE("",6*t.pageNo-5," - ",6==(null==t.expenses?null:t.expenses.length)?6*t.pageNo:t.totalRecords,""),e.xp6(3),e.hij(" ",t.totalRecords," "),e.xp6(3),e.Q6J("collectionSize",t.totalRecords)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}let mt=(()=>{class o{constructor(t,n,i,a,g){this.treasuryService=t,this.headerService=n,this.modalService=i,this.router=a,this.items=[1,2,1,2,1,2],this.searchText="",this.sort=0,this.pageNo=1,g.backdrop="static",g.keyboard=!1}ngOnInit(){this.headerService.setTitle("Petty Cash Monitoring > Petty Cash Replenishment Request"),this.GetMainData(),this.treasuryService.pettyCashRequest$.subscribe(t=>{"PettyCashSetup"==t&&this.GetMainData()})}goToPage(t){"request"==t?(this.router.navigateByUrl("/petty-cash/requests"),this.headerService.setTitle("Petty Cash Monitoring > Petty Cash Replenishment Request")):(this.router.navigateByUrl("/petty-cash/setup"),this.headerService.setTitle("Petty Cash Monitoring > Petty Cash Setup"))}GetMainData(){return this.treasuryService.GetRegistersPettyCashLimits(this.searchText,this.sort,this.pageNo-1).subscribe(t=>{t&&(this.expenses=t.data,this.totalRecords=t.info.totalRecordsCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=O.w6(this.pagin),console.log(this.pagin),console.log(this.pages))})}searchRoles(t){console.log(t?.target.value);const n=t.target.value;console.log(n.length),n.length>=3&&(this.searchText=n,this.pageNo=1,this.GetMainData()),0==n.length&&this.GetMainData()}removeSearch(){this.searchText="",this.sort=0,this.GetMainData()}sortByInvoice(){this.sort=2==this.sort?0:1==this.sort?2:1,this.GetMainData()}sortByCategory(){this.sort=4==this.sort?0:3==this.sort?4:3,this.GetMainData()}sortByRegisterName(){this.sort=6==this.sort?0:5==this.sort?6:5,this.GetMainData()}sortByTax(){this.sort=8==this.sort?0:7==this.sort?8:7,this.GetMainData()}sortByAmount(){this.sort=10==this.sort?0:9==this.sort?10:9,this.GetMainData()}pageChange(t){this.pageNo=t,this.GetMainData()}openMdalEditLimit(t){const n=this.modalService.open(Ye);n.componentInstance.registerDetails=t,n.componentInstance.sendtoLoadData.subscribe(i=>{console.log("resendtoLoadDatasult",i),this.modalService.dismissAll(),this.GetMainData()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.N),e.Y36(y.r),e.Y36(l.FF),e.Y36(p.F0),e.Y36(l.NM))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-setup"]],decls:28,vars:5,consts:[[1,"card-page"],[1,"row"],[1,"col-md-5"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search ..",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"col-md-2","d-flex","justify-content-end","btnadd"],[1,"col-md-6"],[1,"total"],[1,"col-md-6","text-end"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[4,"ngIf"],[1,"card-table","mt-2"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn","btnin",3,"disabled"],[4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"btn","btn-edit",3,"click"],["src","assets/images/edit2.png","alt",""],[1,"not-found"],[1,"row","justify-content-between","align-items-center"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(5,"i",5),e.qZA(),e.TgZ(6,"input",6),e.NdJ("ngModelChange",function(a){return n.searchText=a})("keyup",function(a){return n.searchRoles(a)}),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(8,"i",8),e.qZA()()(),e._UZ(9,"div",2)(10,"div",9),e.TgZ(11,"div",10)(12,"div",11)(13,"h4"),e._uU(14," Registers Petty Cash Amounts "),e.qZA()()(),e._UZ(15,"div",12),e.qZA(),e.TgZ(16,"div",1),e.YNc(17,gt,35,24,"div",13),e.TgZ(18,"div",14),e.YNc(19,ut,2,0,"ng-template",null,15,e.W1O),e.qZA(),e.YNc(21,_t,13,9,"ng-container",16),e.qZA(),e.TgZ(22,"div",1)(23,"div",14),e._UZ(24,"hr"),e.qZA()(),e.TgZ(25,"div",1)(26,"div",14),e._UZ(27,"app-category"),e.qZA()()()),2&t){const i=e.MAs(20);e.xp6(6),e.Q6J("ngModel",n.searchText),e.xp6(1),e.Q6J("hidden",0==n.searchText.length),e.xp6(10),e.Q6J("ngIf",n.expenses)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",n.totalRecords>6)}},dependencies:[r.sg,r.O5,c.Fj,c.JJ,c.On,l.N9,T.N,A.w,ct,r.JJ],styles:[".branchesTypes[_ngcontent-%COMP%]{margin-bottom:30px}.branchesTypes[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:22px;border:0px;padding:10px 15px;color:#929eae;border-radius:0;margin:0;border-bottom:2px solid #f5f5f5}.branchesTypes[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{color:#000;border-bottom:2px solid #dc3545}.branch-total[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#78778b;text-align:end}.card-table[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:1.5em!important;height:1.5em}.gap15[_ngcontent-%COMP%]{gap:15px}.total[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:15px 0 0;padding:10px 0}.total[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:19px;color:#929eae;margin:0;padding:10px 0}.files[_ngcontent-%COMP%]{color:#000;cursor:pointer}.btnin[_ngcontent-%COMP%]{cursor:initial}.btn-edit[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}"]}),o})();const ht=[{path:"",component:(()=>{class o{constructor(t,n){this.headerService=t,this.treasuryService=n,this.selected=1}ngOnInit(){this.headerService.setTitle("Petty Cash")}goToPage(t){this.selected=t,1==t?(this.headerService.setTitle("Petty Cash Monitoring > Petty Cash Replenishment Request"),this.treasuryService.pettyCashRequest$.next("PettyCashRequest")):(this.headerService.setTitle("Petty Cash Monitoring > Petty Cash Setup"),this.treasuryService.pettyCashRequest$.next("PettyCashSetup"))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(y.r),e.Y36(_.N))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-petty-cash-treasury"]],decls:17,vars:6,consts:[[1,"card-page"],[1,"row"],[1,"col-md-12"],[1,"tab-nav"],[1,"btn","active",3,"click"],[1,"btn",3,"click"],[1,"tabcontent"],[1,"tab-item",3,"hidden"],[1,"tab-item"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return n.goToPage(1)}),e._uU(5," Petty Cash Replenishment Requests "),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.goToPage(2)}),e._uU(7," Petty Cash Setup"),e.qZA()()(),e.TgZ(8,"div",2)(9,"div",6)(10,"div",7)(11,"div"),e._UZ(12,"app-request"),e.qZA()(),e.TgZ(13,"div",7)(14,"div"),e._UZ(15,"app-setup"),e.qZA()(),e._UZ(16,"div",8),e.qZA()()()()),2&t&&(e.xp6(4),e.ekj("active",1==n.selected),e.xp6(2),e.ekj("active",2==n.selected),e.xp6(4),e.Q6J("hidden",1!=n.selected),e.xp6(3),e.Q6J("hidden",2!=n.selected))},dependencies:[ke,mt],styles:[".tab-nav[_ngcontent-%COMP%]{margin-bottom:30px}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:22px;border:0px;padding:10px 15px;color:#929eae;border-radius:0;margin:0;border-bottom:2px solid #f5f5f5}.tab-nav[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{color:#000;border-bottom:2px solid #dc3545}"]}),o})()},{path:"request-details/:id/:id2",component:Ze}];let xt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(ht),p.Bz]}),o})();var ft=d(21515);let vt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[r.ez,xt,ft.m]}),o})()},67761:(q,f,d)=>{d.d(f,{g:()=>x});var r=d(71891),p=d(94650),e=d(42953);let x=(()=>{class _{constructor(l){this._modalService=l}ngOnInit(){}fileAction(l){"view"==l&&this.openFileModal()}openFileModal(){this._modalService.open(r.W).componentInstance.file=this.file}getFileType(l){return l?.split("/").pop()}}return _.\u0275fac=function(l){return new(l||_)(p.Y36(e.FF))},_.\u0275cmp=p.Xpm({type:_,selectors:[["view-file"]],inputs:{file:"file",data:"data"},decls:8,vars:1,consts:[[1,"file-item"],[1,"d-flex","gap-3","align-items-center","justify-content-between"],[1,"m-0","green-clr"],[1,"d-flex","gap-2","align-items-center"],[1,"fas","fa-eye","cursor-pointer","gray-500",3,"click"],["target","_blank",3,"href"],[1,"fas","fa-download","green-clr"]],template:function(l,c){1&l&&(p.TgZ(0,"div",0)(1,"div",1)(2,"label",2),p._uU(3,"Attachment"),p.qZA(),p.TgZ(4,"div",3)(5,"i",4),p.NdJ("click",function(){return c.fileAction("view")}),p.qZA(),p.TgZ(6,"a",5),p._UZ(7,"i",6),p.qZA()()()()),2&l&&(p.xp6(6),p.s9C("href",c.file,p.LSH))},styles:[".file-item[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid var(--green);background:white;max-width:100%}.file-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:1;color:green;font-weight:600}"]}),_})()},80145:(q,f,d)=>{d.d(f,{O:()=>e,Q:()=>p});var r=d(94650);let p=(()=>{class x{constructor(m){this.el=m}onKeyDown(m){[8,9,13,27,46].indexOf(m.keyCode)}onKeyup(m){this.validateFields(m)}blockPaste(m){this.validateFields(m)}validateFields(m){this.el.nativeElement.value=this.el.nativeElement.value.replace(/[^A-Za-z\u0621-\u064a ]/g,""),m.preventDefault()}}return x.\u0275fac=function(m){return new(m||x)(r.Y36(r.SBq))},x.\u0275dir=r.lG2({type:x,selectors:[["","OnlyCharacter",""]],hostBindings:function(m,l){1&m&&r.NdJ("keydown",function(u){return l.onKeyDown(u)})("keyup",function(u){return l.onKeyup(u)})("paste",function(u){return l.blockPaste(u)})},inputs:{validationFieldsType:"validationFieldsType"}}),x})();function e(x){return x.replace(/[^A-Za-z\u0621-\u064a ]/g,"")}}}]);