"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[3370],{72657:(P,_,i)=>{i.d(_,{$:()=>m});var e=i(80529),r=i(94650),u=i(69082);let m=(()=>{class o{constructor(t,l){this.http=t,this.sharedService=l,this.apiUrl=this.sharedService.getUrl}GetExpenses(t,l,n){return this.http.get(this.apiUrl+`Expense/GetExpenses?Search=${t}&Sort=${l}&PageNo=${n}&PageSize=6`,this.sharedService.getHeaders())}getRegisterPettyCashSituation(t){return this.http.get(this.apiUrl+`PettyCash/GetRegisterPettyCashSituation?registerId=${t}`,this.sharedService.getHeaders())}getApprovedExpensesSinceReplinshment(t){return this.http.get(this.apiUrl+`PettyCash/GetApprovedExpensesSinceReplinshment${t}`,this.sharedService.getHeaders())}getPettyCashRequestExpensesList(t){return this.http.get(this.apiUrl+`PettyCash/GetPettyCashRequestExpensesList${t}`,this.sharedService.getHeaders())}getExpensesDashboard(t){return this.http.get(this.apiUrl+`PettyCash/GetExpensesDashboard${t}`,this.sharedService.getHeaders())}getPettyCashGraphDashboard(t){return this.http.get(this.apiUrl+`PettyCash/GetPettyCashGraphDashboard?${t}`,this.sharedService.getHeaders())}getExpensesDashboardCards(t){return this.http.get(this.apiUrl+`PettyCash/GetExpensesDashboardCards?RegisterId=${t}`,this.sharedService.getHeaders())}AddExpense(t){return this.http.post(this.apiUrl+"Expense/AddExpense",t,{reportProgress:!0,observe:"events",headers:new e.WM({Authorization:"Bearer "+this.sharedService.getToken})})}confirmReceivePettyCashAmount(t){return this.http.post(this.apiUrl+"PettyCash/ConfirmReceivePettyCashAmount",t,this.sharedService.getHeaders())}uploadConfirmReceivePettyCashAmount(t){return this.http.post(this.apiUrl+"PettyCash/UploadConfirmReceivePettyCashAmount",t,this.sharedService.getHeaders())}EditExpense(t){return this.http.post(this.apiUrl+"Expense/EditExpense",t,{reportProgress:!0,observe:"events",headers:new e.WM({Authorization:"Bearer "+this.sharedService.getToken})})}GetExpenseDetails(t){return this.http.get(this.apiUrl+`Expense/GetExpenseDetails?expenseRecordId=${t}`,this.sharedService.getHeaders())}getLookupsById(t){return this.http.get(this.apiUrl+`Lookups/GetLookups?lookupTypeId=${t}&pageNo=0&pageSize=1000`,this.sharedService.getHeaders())}getExpenseCategories(){return this.http.get(this.apiUrl+"PettyCash/GetExpensesCategories?status=2001&Sort=0&PageNo=0&PageSize=1000",this.sharedService.getHeaders())}getPettyCashStatus(){return this.http.get(this.apiUrl+"Lookups/GetLookups?lookupTypeId=2&parentId=1",this.sharedService.getHeaders())}getCostCenters(){return this.http.get(this.apiUrl+"PettyCash/GetCostCenters?StatusId=2001&pageNo=0&pageSize=1000",this.sharedService.getHeaders())}getCostCentersByTypeId(t){return this.http.get(this.apiUrl+`PettyCash/GetCostCenters?StatusId=2001&CostCenterType=${t}&PageSize=1000`,this.sharedService.getHeaders())}getRegistersList(){return this.http.get(this.apiUrl+"Register/GetRegisters?Status=2001&PageNo=0&PageSize=100",this.sharedService.getHeaders())}getPettyCashExpensesNew(t){return this.http.get(this.apiUrl+`PettyCash/GetExpenses${t}`,this.sharedService.getHeaders())}GetPettyCashExpenses(t,l,n,c,d){return this.http.get(this.apiUrl+`PettyCash/GetExpenses?Search=${t}&expenseId=${l}&Status=${c}&Sort=${n}&PageNo=${d}&PageSize=6&RegisterId=${this.sharedService.getRegister?.registerObj?.id}`,this.sharedService.getHeaders())}AddPettyCashExpense(t){return this.http.post(this.apiUrl+"PettyCash/AddExpense",t,{reportProgress:!0,observe:"events",headers:new e.WM({Authorization:"Bearer "+this.sharedService.getToken})})}EditPettyCashExpense(t){return this.http.post(this.apiUrl+"PettyCash/EditExpense",t,{headers:new e.WM({Authorization:"Bearer "+this.sharedService.getToken})})}expenseRevised(t){return this.http.post(this.apiUrl+"PettyCash/ExpenseRevised",t,{headers:new e.WM({Authorization:"Bearer "+this.sharedService.getToken})})}GetPettyCashExpenseDetails(t){return this.http.get(this.apiUrl+`PettyCash/GetExpenseDetails?expenseRecordId=${t}`,this.sharedService.getHeaders())}GetRegisterPettyCashRequestLast(){return this.http.get(this.apiUrl+`PettyCash/GetRegisterPettyCashRequestLast?RegisterId=${this.sharedService.getRegister?.registerObj?.id}`,this.sharedService.getHeaders())}GetRegisterPettycashrequest(t,l,n,c){return this.http.get(this.apiUrl+`PettyCash/GetRegisterPettycashrequest?Search=${t}&Status=${n}&Sort=${l}&PageNo=${c}&PageSize=6&RegisterId=${this.sharedService.getRegister?.registerObj?.id}`,this.sharedService.getHeaders())}getRegisterPettycashrequestNew(t){return this.http.get(this.apiUrl+`PettyCash/GetRegisterPettycashrequest${t}`,this.sharedService.getHeaders())}GetRegisterPettycashrequestDetails(t){return this.http.get(this.apiUrl+`PettyCash/GetRegisterPettycashrequestDetails?pettyCashRequestId=${t}`,this.sharedService.getHeaders())}GetRegistersPettyCashLimits(t){return this.http.get(this.apiUrl+`PettyCash/GetRegistersPettyCashLimits?Search=${t}`,this.sharedService.getHeaders())}AddPettyCashRequest(t){return this.http.post(this.apiUrl+"PettyCash/AddPettyCashRequest",t,this.sharedService.getHeaders())}givePettyCashPayment(t){return this.http.post(this.apiUrl+"PettyCash/GivePettyCashPayment",t,this.sharedService.getHeaders())}addExpenseV2(t){return this.http.post(this.apiUrl+"PettyCash/AddExpenseV2",t,this.sharedService.getHeaders())}cancelGivenPettyCashPayment(t){return this.http.post(this.apiUrl+"PettyCash/CancelGivenPettyCashPayment",t,this.sharedService.getHeaders())}getEmployees(){return this.http.get(this.apiUrl+"User/GetUsers?status=2001&pageNo=0&pageSize=1000",this.sharedService.getHeaders())}getCashierEmployees(){return this.http.get(this.apiUrl+"User/GetUsers?roleId=1&status=2001&pageNo=0&pageSize=1000",this.sharedService.getHeaders())}getPettyCashPayments(t){return this.http.get(this.apiUrl+`PettyCash/GetPettyCashPayments${t}`,this.sharedService.getHeaders())}}return o.\u0275fac=function(t){return new(t||o)(r.LFG(e.eN),r.LFG(u.F))},o.\u0275prov=r.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},71891:(P,_,i)=>{i.d(_,{W:()=>l});var e=i(94650),r=i(42953),u=i(36895);function m(n,c){if(1&n&&(e.ynx(0),e._UZ(1,"img",7),e.BQk()),2&n){const d=e.oxw(2);e.xp6(1),e.Q6J("src",d.file,e.LSH)}}function o(n,c){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"img",9)(2,"br"),e.TgZ(3,"a",10),e._uU(4,"click to open pdf "),e.qZA()()),2&n){const d=e.oxw(2);e.xp6(3),e.s9C("href",d.file,e.LSH)}}function h(n,c){if(1&n&&(e.ynx(0),e.YNc(1,m,2,1,"ng-container",1),e.YNc(2,o,5,1,"ng-template",null,6,e.W1O),e.BQk()),2&n){const d=e.MAs(3),C=e.oxw();e.xp6(1),e.Q6J("ngIf","png"==C.fileType||"jpeg"==C.fileType||"jpg"==C.fileType)("ngIfElse",d)}}function t(n,c){1&n&&(e.TgZ(0,"p",11),e._uU(1,"No attachemnt..."),e.qZA())}let l=(()=>{class n{constructor(d){this._activeModal=d,this.fileType=""}ngOnInit(){this.getFileType(this.file)}getFileType(d){this.fileType=d?.split(".").pop()}}return n.\u0275fac=function(d){return new(d||n)(e.Y36(r.Kz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-view-uploaded-file"]],inputs:{file:"file"},decls:8,vars:2,consts:[[1,"modal-body","p-2"],[4,"ngIf","ngIfElse"],["noFile",""],[1,"flex-end"],[1,"btns-group","my-2","mx-0"],["type","button",1,"btn","btn-save",3,"click"],["pdf",""],[1,"w-100",3,"src"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],["height","80","width","80","src","assets/images/pdf.png","alt",""],["target","_blank",1,"text-decoration-none","text-capitalize",3,"href"],[1,"primary-clr","mx-0","my-3"]],template:function(d,C){if(1&d&&(e.TgZ(0,"div",0),e.YNc(1,h,4,2,"ng-container",1),e.YNc(2,t,2,0,"ng-template",null,2,e.W1O),e.TgZ(4,"div",3)(5,"div",4)(6,"button",5),e.NdJ("click",function(){return C._activeModal.close("Close click")}),e._uU(7," Close "),e.qZA()()()()),2&d){const f=e.MAs(3);e.xp6(1),e.Q6J("ngIf",C.file)("ngIfElse",f)}},dependencies:[u.O5]}),n})()},72054:(P,_,i)=>{i.d(_,{r:()=>m});var e=i(94650),r=i(80529),u=i(69082);let m=(()=>{class o{constructor(t,l){this.http=t,this.sharedService=l,this.apiUrl=this.sharedService.getUrl}getProvideExpenses(t){return this.http.get(this.apiUrl+`Mainfund/GetApprovedExpenses${t}`,this.sharedService.getHeaders())}provideExpenses(t){return this.http.post(this.apiUrl+"Mainfund/ProvidePettyCashExpenses",t,this.sharedService.getHeaders())}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(r.eN),e.LFG(u.F))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},2755:(P,_,i)=>{i.d(_,{U:()=>U});var e=i(94650),r=i(72054),u=i(72657),m=i(69082),o=i(42953),h=i(36895),t=i(49973),l=i(85746),n=i(28424);function c(a,g){if(1&a&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&a){const s=e.oxw(2);e.xp6(1),e.Oqu(s.messageError)}}function d(a,g){if(1&a&&(e._uU(0),e.ALo(1,"number")),2&a){const s=g.row;e.hij(" ",e.xi3(1,1,null==s?null:s.expenseTotalAmount,"2.3-3")," JOD ")}}function C(a,g){if(1&a&&(e._uU(0),e.ALo(1,"date")),2&a){const s=g.row;e.hij(" ",e.xi3(1,1,null==s?null:s.invoiceDate,"mediumDate")," ")}}function f(a,g){if(1&a&&(e._uU(0),e.ALo(1,"date")),2&a){const s=g.row;e.hij(" ",e.xi3(1,1,null==s?null:s.createdAt,"mediumDate")," ")}}function y(a,g){if(1&a){const s=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"p"),e._uU(3,"Are you sure to provide"),e.qZA(),e.TgZ(4,"p")(5,"b"),e._uU(6),e.qZA()(),e.TgZ(7,"p"),e._uU(8,"with petty cash amount "),e.TgZ(9,"span",4),e._uU(10),e.ALo(11,"number"),e.qZA()()(),e.TgZ(12,"div",5)(13,"button",6),e.NdJ("click",function(){e.CHM(s);const v=e.oxw();return e.KtG(v.dismissModal())}),e._uU(14,"Cancel"),e.qZA(),e.TgZ(15,"button",7),e.NdJ("click",function(){e.CHM(s);const v=e.oxw();return e.KtG(v.provideExpenses())}),e._uU(16,"Provide"),e.qZA()(),e.YNc(17,c,2,1,"div",8),e.TgZ(18,"div",9)(19,"h6",10),e._uU(20,"Last Replenishment Approved Expenses"),e.qZA(),e.TgZ(21,"table-advanced",11),e.NdJ("pageUpdated",function(v){e.CHM(s);const x=e.oxw();return e.KtG(x.onPageChange(v))}),e.YNc(22,d,2,4,"ng-template",12),e.YNc(23,C,2,4,"ng-template",13),e.YNc(24,f,2,4,"ng-template",14),e.qZA()()()}if(2&a){const s=e.oxw();e.xp6(6),e.hij(" ",null==s.registerDetails||null==s.registerDetails.createdBy?null:s.registerDetails.createdBy.fullName," "),e.xp6(4),e.hij("",e.xi3(11,10,null==s.registerDetails?null:s.registerDetails.approvedAmount,"2.3-3")," JOD ?"),e.xp6(7),e.Q6J("ngIf",s.messageError),e.xp6(4),e.Q6J("config",s.tableConfig)("columns",s.tableColumns)("data",s.approvedRequestList)("loading",s.loading)("page",s.pageNo)("total",s.total)("limit",s.limit)}}function E(a,g){1&a&&e._UZ(0,"app-loading")}function M(a,g){if(1&a&&(e.TgZ(0,"div",2)(1,"div",16)(2,"h5"),e._UZ(3,"i",17),e._uU(4),e.qZA()()()),2&a){const s=e.oxw();e.xp6(4),e.hij(" ",s.message,"")}}let U=(()=>{class a{constructor(s,p,v,x){this._provideExpensesService=s,this.pettyCashService=p,this.sharedService=v,this.modalService=x,this.requestId=0,this.isLoading=!1,this.approvedRequestList=[],this.tableColumns=[],this.loading=!1,this.pageNo=1,this.total=0,this.limit=3,this.tableConfig={paging:!0,filter:{Sort:1,PageSize:this.limit},hideTotalRecord:!0},this.sendtoLoadData=new e.vpe}ngOnInit(){this.requestId=this.registerDetails?.pettyCashRequestId,this.initTableColumns(),this.getPettyCashRequestExpensesList()}getPettyCashRequestExpensesList(){this.loading=!0,this.pettyCashService.getPettyCashRequestExpensesList(`?RegisterId=${this.sharedService.getRegister?.registerObj?.id}&ReplenishmentRequestID=${this.requestId}&pageNo=${this.pageNo-1}&pageSize=${this.tableConfig.filter.PageSize}`).subscribe(p=>{p?.isSuccess&&(this.approvedRequestList=p.data.data.filter(v=>2004==v.status),this.total=p.data?.totalRecordCount)}).add(()=>this.loading=!1)}provideExpenses(){this.isLoading=!0;const s=new FormData;s.append("ExpenseRecordId",this.requestId.toString());try{this._provideExpensesService.provideExpenses(s).subscribe(p=>{1==p.isSuccess?(this.message="Petty cash provided successfully ",this.isLoading=!1,setTimeout(()=>{this.modalService.dismissAll(),this.sendtoLoadData.emit()},3e3)):(console.log("error",p),this.messageError=p.Errors[0]?.ErrorMessageEn,this.isLoading=!1,setTimeout(()=>{this.messageError=""},3e3))},p=>{this.messageError=p?.error.errors[0]?.ErrorMessageEn||p?.error.Errors[0]?.ErrorMessageEn,this.isLoading=!1})}catch(p){console.log(p),this.isLoading=!1}}dismissModal(){this.modalService.dismissAll()}onPageChange(s){this.pageNo=s,this.getPettyCashRequestExpensesList()}initTableColumns(){this.tableColumns=[{key:"invoiceNo",label:"Invoice No"},{key:"invoiceDate",label:"Invoice Date"},{key:"category[0].lookupName",label:"Category"},{key:"costCenter.costCenterName",label:"Cost Center Name"},{key:"costCenter.approverUser.fullName",label:"Cost Center Approver"},{key:"managerApproval.approvername",label:"Approved By",placeholder:"---"},{key:"expenseTotalAmount",label:"Amount"},{key:"createdAt",label:"Date"}]}}return a.\u0275fac=function(s){return new(s||a)(e.Y36(r.r),e.Y36(u.$),e.Y36(m.F),e.Y36(o.FF))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-provide-expenses-modal"]],inputs:{registerDetails:"registerDetails"},outputs:{sendtoLoadData:"sendtoLoadData"},decls:3,vars:3,consts:[["class","modal-body",4,"ngIf"],[4,"ngIf"],[1,"modal-body"],[1,"flex-between"],[1,"amountDetail"],[1,"btns-group","mt-4","mb-4"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save",3,"click"],["class","alert alert-danger text-center mt-3 mb-3 my-2","role","alert",4,"ngIf"],[1,"mt-3"],[1,"fw-500","mb-0"],[3,"config","columns","data","loading","page","total","limit","pageUpdated"],["libTableAdvancedColumn","expenseTotalAmount"],["libTableAdvancedColumn","invoiceDate"],["libTableAdvancedColumn","createdAt"],["role","alert",1,"alert","alert-danger","text-center","mt-3","mb-3","my-2"],[1,"message"],[1,"fa-regular","fa-circle-check"]],template:function(s,p){1&s&&(e.YNc(0,y,25,13,"div",0),e.YNc(1,E,1,0,"app-loading",1),e.YNc(2,M,5,1,"div",0)),2&s&&(e.Q6J("ngIf",!p.message&&!p.isLoading),e.xp6(1),e.Q6J("ngIf",p.isLoading),e.xp6(1),e.Q6J("ngIf",p.message))},dependencies:[h.O5,t.V,l.y,n.N,h.JJ,h.uU],styles:[".flex-between[_ngcontent-%COMP%]{margin-top:2.5rem;display:flex;justify-content:center;align-items:center;flex-direction:column}.amountDetail[_ngcontent-%COMP%]{color:#dc3545;font-weight:700}p[_ngcontent-%COMP%]{font-weight:600}.btns-group[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding-bottom:1rem}.modal-body[_ngcontent-%COMP%]{padding:30px}.modal-head[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid #c4cdd5;display:flex;justify-content:space-between;align-items:center}.modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:18px;color:#1b212d;padding:5px 0 15px;margin:0}.card-sm[_ngcontent-%COMP%]{margin:10px 0}.card-sm[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1b212d;margin-bottom:5px}.card-sm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#929eae}.card-sm[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{background-color:#f0f0f0;height:120px;border-radius:6px;margin:5px 0}.card-sm[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;padding:10px}label[_ngcontent-%COMP%]{font-weight:600;font-size:16px;padding:5px 0}.message[_ngcontent-%COMP%]{padding:10px;text-align:center}.message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#1b212d;margin:0;padding:20px}.message[_ngcontent-%COMP%]   .fa-circle-check[_ngcontent-%COMP%]{color:#25bb00;font-size:28px;vertical-align:middle;margin:2px 10px 5px}.error[_ngcontent-%COMP%]{font-size:14px;color:#f44336;font-weight:500;padding:7px;display:block}"]}),a})()},67761:(P,_,i)=>{i.d(_,{g:()=>m});var e=i(71891),r=i(94650),u=i(42953);let m=(()=>{class o{constructor(t){this._modalService=t}ngOnInit(){}fileAction(t){"view"==t&&this.openFileModal()}openFileModal(){this._modalService.open(e.W).componentInstance.file=this.file}getFileType(t){return t?.split("/").pop()}}return o.\u0275fac=function(t){return new(t||o)(r.Y36(u.FF))},o.\u0275cmp=r.Xpm({type:o,selectors:[["view-file"]],inputs:{file:"file",data:"data"},decls:8,vars:1,consts:[[1,"file-item"],[1,"d-flex","gap-3","align-items-center","justify-content-between"],[1,"m-0","green-clr"],[1,"d-flex","gap-2","align-items-center"],[1,"fas","fa-eye","cursor-pointer","gray-500",3,"click"],["target","_blank",3,"href"],[1,"fas","fa-download","green-clr"]],template:function(t,l){1&t&&(r.TgZ(0,"div",0)(1,"div",1)(2,"label",2),r._uU(3,"Attachment"),r.qZA(),r.TgZ(4,"div",3)(5,"i",4),r.NdJ("click",function(){return l.fileAction("view")}),r.qZA(),r.TgZ(6,"a",5),r._UZ(7,"i",6),r.qZA()()()()),2&t&&(r.xp6(6),r.s9C("href",l.file,r.LSH))},styles:[".file-item[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid var(--green);background:white;max-width:100%}.file-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:1;color:green;font-weight:600}"]}),o})()}}]);