"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[6953],{81181:(A,v,r)=>{r.d(v,{n:()=>f});var l=r(94650),g=r(80529),h=r(69082);let f=(()=>{class u{constructor(c,d){this.http=c,this.sharedService=d,this.apiUrl=this.sharedService.getUrl,this.apiUrl2=this.sharedService.getUrl2}getBrands(c){return this.http.get(`${this.apiUrl2}Customer/GetBrands${c}`,this.sharedService.getHeaders())}getLookup(c){return this.http.get(`${this.apiUrl}Lookups/GetLookups${c}`,this.sharedService.getHeaders())}getCostCenter(c){return this.http.get(`${this.apiUrl}PettyCash/GetCostCenters${c}`,this.sharedService.getHeaders())}getMarkaziaVoucherList(c){return this.http.get(`${this.apiUrl}MarkaziaVouchers/GetMarkaziaVouchers${c}`,this.sharedService.getHeaders())}deleteMarkaziaVouchers(c){return this.http.post(`${this.apiUrl}MarkaziaVouchers/DeleteMarkaziaVouchers`,c,this.sharedService.getHeaders())}generateVoucher(c){return this.http.post(`${this.apiUrl}MarkaziaVouchers/GenerateMarkaziaVouchers`,c,this.sharedService.getHeaders())}}return u.\u0275fac=function(c){return new(c||u)(l.LFG(g.eN),l.LFG(h.F))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},96953:(A,v,r)=>{r.r(v),r.d(v,{ReceiptsModule:()=>re});var l=r(36895),g=r(39485),h=r(70262),f=r(39646),u=r(4128),x=r(78372),c=r(71884),d=r(86260),e=r(94650),_=r(80529),I=r(69082);let M=(()=>{class i{constructor(t,n){this.http=t,this.sharedService=n,this.apiUrl=this.sharedService.getUrl,this.apiUrl2=this.sharedService.getUrl2}getMainFundPayments(t){return this.http.get(this.apiUrl+`Mainfund/GetMainFundPayments${t}`,this.sharedService.getHeaders())}addMainFundPaymentReceipt(t){return this.http.post(this.apiUrl+"Mainfund/AddMainFundPaymentReceipt",t,this.sharedService.getHeaders())}getMainFundCash(){return this.http.get(this.apiUrl+"Mainfund/GetMainFundCash",this.sharedService.getHeaders())}getEmployees(){return this.http.get(this.apiUrl+"User/GetUsers?status=2001&pageNo=0&pageSize=1000",this.sharedService.getHeaders())}getMainFundPaymentCategories(t){return this.http.get(this.apiUrl2+`MainFundPaymentCategories/GetMainFundPaymentCategories${t}`,this.sharedService.getHeaders())}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(_.eN),e.LFG(I.F))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var F=r(81181),p=r(24006),P=r(42953),N=r(36690),Z=r(75304),S=r(43346),b=r(94349),U=r(49973),L=r(85746);function R(i,m){if(1&i&&(e.TgZ(0,"div",15)(1,"div",16)(2,"div",17),e._UZ(3,"img",18),e.qZA(),e.TgZ(4,"div",19)(5,"h6",20),e._uU(6),e.qZA(),e.TgZ(7,"h6",21),e._uU(8),e.ALo(9,"number"),e.qZA()()()()),2&i){const t=m.$implicit;e.xp6(3),e.Q6J("src",null==t?null:t.accountTypeImage,e.LSH),e.xp6(3),e.Oqu(null==t||null==t.accountType[0]?null:t.accountType[0].lookupName),e.xp6(2),e.hij(" ",e.xi3(9,3,null==t?null:t.remainingAmountTobeDistributed,"2.3-3")," ")}}function O(i,m){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){const a=e.CHM(t).row,s=e.oxw();return e.KtG(s._commonService.downloadInvoices({invoices:null==a?null:a.mainFundPaymentVoucher}))}),e._uU(1,"View Receipt"),e.qZA()}}let D=(()=>{class i{constructor(t,n,o,a,s,y,T){this._receiptsService=t,this._voucherService=n,this.fb=o,this._modalService=a,this._headerService=s,this._commonService=y,this._collectService=T,this.mainFundAmounts=[],this.employeeList=[],this.costCenterList=[],this.mfCategoryList=[],this.paymentList=[],this.pageNo=1,this.total=0,this.limit=6,this.loading=!1,this.tableConfig={paging:!0,filter:{Sort:1,PageSize:this.limit}},this.tableColumns=[]}ngOnInit(){this._headerService.setTitle("Main Fund Receipt"),this.initTableColumns(),this.initFilterParams(),this.getPaymentList(),this.getLookups()}getLookups(){const t=this._receiptsService.getMainFundCash().pipe((0,h.K)(a=>(0,f.of)(a))),n=this._voucherService.getCostCenter("?StatusId=2001&PageSize=1000").pipe((0,h.K)(a=>(0,f.of)(a))),o=this._receiptsService.getMainFundPaymentCategories("?status=2001&PageSize=1000").pipe((0,h.K)(a=>(0,f.of)(a)));(0,u.D)([t,n,o]).subscribe(a=>{this.mainFundAmounts=a[0].data.filter(s=>s.isCash),this.costCenterList=a[1].data,this.mfCategoryList=a[2].data})}initFilterParams(){this.filterForm=this.fb.group({search:[""],paidToUser:[null],mainFundCategory:[null],costCenterId:[null]}),this.filterForm.valueChanges.pipe((0,x.b)(500),(0,c.x)()).subscribe(t=>{this.pageNo=1;let n={...t};null==n?.paidToUser&&(n={...n,paidToUser:""}),null==n?.mainFundCategory&&(n={...n,mainFundCategory:""}),null==n?.costCenterId&&(n={...n,costCenterId:""}),this.filterParams="?"+new URLSearchParams(n).toString(),this.getPaymentList()})}getPaymentList(){let n,t=`pageSize=${this.tableConfig.filter.PageSize}&pageNo=${this.pageNo-1}&sort=${this.tableConfig.filter.Sort}`;n=this.filterParams?`${this.filterParams}&${t}`:`?${t}`,this._receiptsService.getMainFundPayments(n).subscribe(o=>{this.paymentList=o.data,this.total=o.totalRecordCount}).add(()=>{})}handleSearch(t){this._collectService.customersList(t.term).subscribe(n=>{this.employeeList=n.data})}customSearch(t,n){return n?.customerName?.toLowerCase().includes(t.toLowerCase())||n?.mobile?.toLowerCase().includes(t.toLowerCase())}onSortChange(t){if(t?.direction&&t?.column)switch(t.column){case"mainFundPaymentReceiptID":this.tableConfig.filter.Sort="desc"===t.direction?3:2;break;case"givenToAccount.fullName":this.tableConfig.filter.Sort="desc"===t.direction?5:4;break;case"givenToAccount.userId":this.tableConfig.filter.Sort="desc"===t.direction?7:6;break;case"mainFundPaymentTotalAmount":this.tableConfig.filter.Sort="desc"===t.direction?9:8;break;case"currency[0].lookupName":this.tableConfig.filter.Sort="desc"===t.direction?11:10}else this.tableConfig.filter.Sort=1;this.getPaymentList()}onPageChange(t){this.pageNo=t,this.getPaymentList()}initTableColumns(){this.tableColumns=[{key:"mainFundPaymentReceiptID",label:"Receipt ID",canSort:!0},{key:"givenToAccount.fullName",label:"Account Name",canSort:!0},{key:"givenToAccount.userId",label:"Account No",canSort:!0},{key:"mainFundPaymentCategory.paymentCategoryName",label:"Payment Category"},{key:"mainFundPaymentTotalAmount",label:"Total Amount",canSort:!0,currency:{decimalFormat:"2.3-3",appendText:" JOD"}},{key:"currency[0].lookupName",label:"Currency",canSort:!0,placeholder:"---"},{key:"action",label:"Action"}]}responseModal(t,n){const o=this._modalService.open(d.i);o.componentInstance.type=t,o.componentInstance.dismissOnlyActive=!0,"success"==t?o.componentInstance.message=n:o.componentInstance.messageError=n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M),e.Y36(F.n),e.Y36(p.qu),e.Y36(P.FF),e.Y36(N.r),e.Y36(Z.v),e.Y36(S.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-receipts"]],decls:22,vars:12,consts:[[1,"heading-text","mb-3"],[1,"main-fund-container","gap-4","mb-4"],["class","main-fund-wrapper",4,"ngFor","ngForOf"],[1,"heading-text","my-3"],[3,"formGroup"],[1,"row","mb-3"],[1,"col-2"],["type","text","formControlName","search","placeholder","Seach by Receipt ID or Amount",1,"form-control","height-47"],["placeholder","Search Account","formControlName","paidToUser","bindLabel","customerName","bindValue","customerId",3,"items","searchFn","search"],["placeholder","Main Fund Category","bindLabel","paymentCategoryName","bindValue","paymentCategoryID","formControlName","mainFundCategory",3,"items"],["placeholder","Cost Center","bindLabel","costCenterName","bindValue","costCenterId","formControlName","costCenterId",3,"items"],[1,"btns-group","m-0"],["routerLink","/mainfund-receipt/create-receipt",1,"btn","btn-save"],[3,"config","columns","data","page","total","limit","sortUpdated","pageUpdated"],["libTableAdvancedColumn","action"],[1,"main-fund-wrapper"],[1,"main-fund-div"],[1,"currency-symbol"],["alt","",3,"src"],[1,"d-flex","flex-column"],[1,"fw-700","font-18"],[1,"fw-700","font-20","gray-500","m-0"],["type","button",1,"redBtn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0),e._uU(1,"Main Fund Current Amounts"),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,R,10,6,"div",2),e.qZA(),e.TgZ(4,"h3",3),e._uU(5,"Receipt List"),e.qZA(),e.TgZ(6,"form",4)(7,"div",5)(8,"div",6),e._UZ(9,"input",7),e.qZA(),e.TgZ(10,"div",6)(11,"ng-select",8),e.NdJ("search",function(a){return n.handleSearch(a)}),e.qZA()(),e.TgZ(12,"div",6),e._UZ(13,"ng-select",9),e.qZA(),e.TgZ(14,"div",6),e._UZ(15,"ng-select",10),e.qZA(),e.TgZ(16,"div",6)(17,"div",11)(18,"a",12),e._uU(19,"Create Receipt"),e.qZA()()()()(),e.TgZ(20,"table-advanced",13),e.NdJ("sortUpdated",function(a){return n.onSortChange(a)})("pageUpdated",function(a){return n.onPageChange(a)}),e.YNc(21,O,2,0,"ng-template",14),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.mainFundAmounts),e.xp6(3),e.Q6J("formGroup",n.filterForm),e.xp6(5),e.Q6J("items",n.employeeList)("searchFn",n.customSearch),e.xp6(2),e.Q6J("items",n.mfCategoryList),e.xp6(2),e.Q6J("items",n.costCenterList),e.xp6(5),e.Q6J("config",n.tableConfig)("columns",n.tableColumns)("data",n.paymentList)("page",n.pageNo)("total",n.total)("limit",n.limit))},dependencies:[l.sg,g.rH,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,b.w9,U.V,L.y,l.JJ],styles:[".heading-text[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.main-fund-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.main-fund-container[_ngcontent-%COMP%]   .main-fund-wrapper[_ngcontent-%COMP%]{box-sizing:border-box;background:#FFFFFF;border:1px solid #E9E9E9;box-shadow:0 10px 20px #0000001a;border-radius:8px;padding:10px 15px;flex:0 1 240px;display:flex;align-items:center}.main-fund-container[_ngcontent-%COMP%]   .main-fund-wrapper[_ngcontent-%COMP%]   .main-fund-div[_ngcontent-%COMP%]{display:flex;gap:15px}.main-fund-container[_ngcontent-%COMP%]   .main-fund-wrapper[_ngcontent-%COMP%]   .main-fund-div[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#F6F6F6;box-shadow:0 10px 20px #0000001a;border-radius:8px}.mdtext[_ngcontent-%COMP%]{font-style:normal;font-weight:600;font-size:16px;color:#1b212d}.smText[_ngcontent-%COMP%]{font-style:normal;font-weight:500;font-size:15px;color:#858585}.d-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(173px,1fr));gap:20px}.uploadedfile[_ngcontent-%COMP%]{border:1px solid #11af22;border-radius:4px;display:flex;justify-content:space-between;align-items:center}.uploadedfile[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:50%;margin:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.uploadedfile[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px}.uploadedfile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;padding:10px;color:#696969;margin:0;cursor:pointer}.main-fund-div[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.main-fund-div[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#F6F6F6;box-shadow:0 10px 20px #0000001a;border-radius:8px}.heading-main-fund[_ngcontent-%COMP%]{font-size:12px;font-weight:600;margin:0}.form-check-input[_ngcontent-%COMP%]{width:20px!important;height:20px;margin:0;padding:0}.form-check-input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{line-height:1;font-weight:500;padding:0;margin:0 0 0 5px}"]}),i})();var k=r(32298),J=r(50727),w=r(21864),E=r(68423),G=r(51445),V=r(20320),Q=r(55134),z=r(96603),Y=r(67711);const q=["inputFile"],B=["container"];function j(i,m){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.hij("(",t.currencyName,")")}}function $(i,m){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.hij("(",t.currencyName,")")}}function H(i,m){1&i&&e._uU(0),2&i&&e.hij(" ",m.item.text,"% ")}function K(i,m){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().item;e.xp6(1),e.hij(" ",t.text,"% ")}}function W(i,m){if(1&i&&e.YNc(0,K,2,1,"ng-container",18),2&i){const t=m.item;e.Q6J("ngIf",null==t?null:t.text)}}function X(i,m){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.hij("(",t.currencyName,")")}}function ee(i,m){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",40)(2,"label",41),e._uU(3),e.qZA(),e.TgZ(4,"div",42)(5,"img",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fileAction("view"))}),e.qZA(),e.TgZ(6,"img",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fileAction("delete"))}),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw();let n;e.xp6(3),e.Oqu(null==(n=t.f.get("paymentAttachment"))?null:n.value)}}function te(i,m){if(1&i&&(e.TgZ(0,"small",45),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.invalidFileType)}}function ne(i,m){1&i&&(e.TgZ(0,"button",46),e._uU(1,"View Receipt"),e.qZA())}const C=function(){return{required:"Input is required"}},ie=[{path:"",component:D},{path:"create-receipt",component:(()=>{class i{constructor(t,n,o,a,s,y,T,se,ce,le,me){this._generalService=t,this._receiptsService=n,this._voucherService=o,this._spinner=a,this._commonService=s,this.fb=y,this._modalService=T,this._allocationService=se,this._collectService=ce,this._decimalPipe=le,this._unsettleSession=me,this.currencyList=[],this.employeeList=[],this.costCenterList=[],this.mfCategoryList=[],this.currencyName="",this.fileTypes=["image/jpeg","image/jpg","image/png","application/pdf"],this.subscriptions=new J.w0,this.dateYMD=new Date,this.taxesList=[]}ngOnInit(){this.initForm(),this.getCurrencyList(),this.getLookups(),this.f.get("mainFundPaymentCategoryID").valueChanges.subscribe(t=>{this.toggleControlDisability(t)})}handleSearch(t){this._collectService.customersList(t.term).subscribe(n=>{this.employeeList=n.data})}customSearch(t,n){return n?.customerName?.toLowerCase().includes(t.toLowerCase())||n?.mobile?.toLowerCase().includes(t.toLowerCase())}getLookups(){const t=this._voucherService.getCostCenter("?StatusId=2001&PageSize=1000").pipe((0,h.K)(s=>(0,f.of)(s))),n=this._receiptsService.getMainFundPaymentCategories("?status=2001&PageSize=1000").pipe((0,h.K)(s=>(0,f.of)(s))),a=this._generalService.getLookupsWithParams("?lookupTypeId=23&status=2001&pageSize=1000");(0,u.D)([t,n,a]).subscribe(s=>{this.costCenterList=s[0].data,this.mfCategoryList=s[1].data,this.taxesList=s[2].data.map(y=>({...y,text:y.name[0].lookupName}))})}ngOnDestroy(){this.subscriptions.unsubscribe()}initForm(){this.formGroup=this.fb.group({accountID:[null],mainFundPaymentCategoryID:[null,[p.kI.required]],paymentAmount:[{value:"",disabled:!0},[p.kI.required]],paymentTaxPer:[null,[p.kI.required]],paymentTaxAmount:[{value:"",disabled:!0},[p.kI.required]],paymentTotalAmount:[{value:"",disabled:!0},[p.kI.required]],paymentCurrencyID:[null,[p.kI.required]],paymentCostCenterID:[null,[p.kI.required]],paymentAttachment:[""],notes:[""],dateYMD:[{value:new Date,disabled:!0}],time:[{value:this.formatTime(new Date),disabled:!0}]})}handleCurrencyChange(t){this.currencyName=t?.text||""}handleTaxChange(t){this.handleAmountChange()}handleMfCategoryChange(t){this.f.patchValue({paymentTaxPer:t?.taxPercentId||null,paymentCostCenterID:t?.costCenter?.costCenterId,paymentAmount:"",paymentTaxAmount:"",paymentTotalAmount:""}),this.handleAmountChange()}handleAmountChange(){let t=+this.f.get("paymentAmount").value,n=+this.f.get("paymentTaxPer").value,a=+this.taxesList.find(s=>s.id==n)?.name[0]?.lookupName/100*t;this.f.get("paymentTaxAmount").setValue(this._decimalPipe.transform(a,"2.3")),this.f.get("paymentTotalAmount").setValue(this._decimalPipe.transform(t+a,"2.3"))}handleTotalAmountChange(){let t=+this.f.get("paymentTotalAmount").value,n=+this.f.get("paymentTaxPer").value,o=+this.taxesList.find(s=>s.id==n)?.name[0]?.lookupName,a=t*o/(100+o);this.f.get("paymentTaxAmount").setValue(this._decimalPipe.transform(a,"2.3")),this.f.get("paymentAmount").setValue(this._decimalPipe.transform(t-a,"2.3"))}handleSubmit(){if(this.formGroup.invalid)this.formGroup.markAllAsTouched();else{this._spinner.show();let t=this._commonService.convertFormGroupToFormData(this.formGroup,["accountID","paymentAttachment","time","dateYMD"]);t.append("accountID",this.f.value.accountID&&this.f.value.accountID||""),this.uploadedFile?.file&&t.append("paymentAttachment",this.uploadedFile.file),this._receiptsService.addMainFundPaymentReceipt(t).subscribe({next:n=>{n.isSuccess&&this.successModal("success","Receipt has been created successfully",n.data)},error:n=>{this.successModal("error",n?.error.errors||n?.error.Errors)}}).add(()=>{this._spinner.hide()})}}toggleControlDisability(t){["paymentAmount","paymentTotalAmount"].forEach(o=>{const a=this.f.get(o);a&&(t?a.enable():a.disable())})}successModal(t,n,o){const a=this._modalService.open(d.i,{size:"md"});a.componentInstance.type=t,"success"==t?(a.componentInstance.message=n,a.componentInstance.data={receipt:o},a.componentInstance.routeName="/mainfund-receipt"):"error"==t&&(a.componentInstance.messageError=n)}get f(){return this.formGroup}get c(){return this.formGroup.controls}getCurrencyList(){this._allocationService.getCurrencyList().subscribe(t=>{this.currencyList=t.data.map(n=>({value:n.id,text:n.name[0]?.lookupName}))})}fileAction(t){"view"==t?this._modalService.open(k.g,{size:"md"}).componentInstance.imageUploadedView=this.uploadedFile:(this.inputFile.nativeElement.value=null,this.formGroup.get("paymentAttachment")?.setValue(""),this.uploadedFile={})}filesDropped(t){this.enter=!1;let n=this.checkInvalidImageFormat(t);if(n)return void(this.inputFile.nativeElement.value=null);let o=t.map(a=>a.file);n||o.forEach(a=>{this.formGroup.get("paymentAttachment")?.setValue(a.name),this._commonService.fileToBase64(a).then(s=>{this.uploadedFile=s})})}onSelectFile(t){let n=[...t.target.files],o=this.checkInvalidImageFormat(n);o?this.inputFile.nativeElement.value=null:n.length>0&&(o||n.forEach(a=>{this.formGroup.get("paymentAttachment")?.setValue(a.name),this._commonService.fileToBase64(a).then(s=>{this.uploadedFile=s})}))}removeFile(t){this.inputFile.nativeElement.value=null,this.formGroup.get("paymentAttachment")?.setValue(""),this.uploadedFile=null}checkInvalidImageFormat(t){let n,o=t.map(s=>s.file);n=void 0!==o[0]?o:t;let a=!1;for(let s of n)if(!this.fileTypes.includes(s.type)){a=!0,this.invalidFileType="This file not support, supported formates: JPEG, JPG, PNG, PDF",this.formGroup.get("paymentAttachment")?.patchValue(""),setTimeout(()=>{this.invalidFileType=""},3e3);break}return a}formatTime(t){return`${("0"+t.getHours()).slice(-2)}:${("0"+t.getMinutes()).slice(-2)}`}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.m),e.Y36(M),e.Y36(F.n),e.Y36(E.t2),e.Y36(Z.v),e.Y36(p.qu),e.Y36(P.FF),e.Y36(G.U),e.Y36(S.k),e.Y36(l.JJ),e.Y36(V.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-receipt"]],viewQuery:function(t,n){if(1&t&&(e.Gf(q,5),e.Gf(B,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.inputFile=o.first),e.iGM(o=e.CRH())&&(n.container=o.first)}},decls:86,vars:37,consts:[[1,"page-layout"],[3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"input-label"],["placeholder","Search Account","formControlName","accountID","bindLabel","customerName","bindValue","customerId",3,"items","searchFn","search"],[3,"control","errorMessages"],["type","text","disabled","",1,"form-control","height-47",3,"value"],[1,"separator"],[1,"card-Box","mt-4"],[1,"row","align-items-center"],[1,"col-sm-2"],["formControlName","paymentCurrencyID","placeholder","Currency","bindLabel","text","bindValue","value",1,"flex-grow-1","mt-3","mt-md-0",3,"items","change"],["formControlName","mainFundPaymentCategoryID","placeholder","Main Fund Category","bindLabel","paymentCategoryName","bindValue","paymentCategoryID",1,"flex-grow-1","mt-3","mt-md-0",3,"items","change"],["formControlName","paymentCostCenterID","placeholder","Cost Center","bindLabel","costCenterName","bindValue","costCenterId",1,"flex-grow-1","mt-3","mt-md-0",3,"items"],[1,"card-Box","mt-5"],[1,"col-sm-8"],[1,"col-3","mb-3"],[4,"ngIf"],["type","text","formControlName","paymentAmount","appDecimalNumber","",1,"form-control","height-47",3,"change"],["type","text","formControlName","paymentTaxAmount",1,"form-control","height-47"],["formControlName","paymentTaxPer","placeholder","Tax Percentage","bindLabel","text","bindValue","id",1,"flex-grow-1","mt-3","mt-md-0",3,"items","change"],["ng-option-tmp",""],["ng-label-tmp",""],["type","text","appDecimalNumber","","formControlName","paymentTotalAmount",1,"form-control","height-47",3,"change"],[1,"col-12","mb-3"],["type","text","formControlName","notes",1,"form-control"],[1,"col-sm-4"],[1,"form-group","mb-3"],["appImageDrag","","accept",".png,.jpg,.jpeg,.pdf",1,"card-upload",3,"files","enter","leave","click"],[1,"my-3"],["src","assets/images/upload.png","alt",""],["type","file","accept",".png,.jpg,.jpeg,.pdf","multiple","","hidden","",1,"form-control",3,"change"],["inputFile",""],["class","text-danger",4,"ngIf"],[1,"d-flex","justify-content-end","mt-5"],[1,"btns-group","my-2","mx-0"],["type","button","routerLink","/mainfund-receipt",1,"btn","btn-cancel"],["type","button",1,"btn","btn-save",3,"click"],["container",""],[1,"d-flex","gap-3","file-item","align-items-center","justify-content-between"],[1,"p-0"],[1,"d-flex","gap-2"],["height","20","src","assets/images/eye.png",1,"cursor-pointer",3,"click"],["height","20","src","assets/images/trash.png",1,"cursor-pointer",3,"click"],[1,"text-danger"],["type","button",1,"redBtn"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Account Name"),e.qZA(),e.TgZ(6,"ng-select",5),e.NdJ("search",function(s){return n.handleSearch(s)}),e.qZA(),e._UZ(7,"validation-error",6),e.qZA(),e.TgZ(8,"div",3)(9,"label",4),e._uU(10,"Account Number"),e.qZA(),e._UZ(11,"input",7),e.qZA()(),e._UZ(12,"div",8),e.TgZ(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",4),e._uU(17,"Select Currency"),e.qZA(),e.TgZ(18,"ng-select",12),e.NdJ("change",function(s){return n.handleCurrencyChange(s)}),e.qZA(),e._UZ(19,"validation-error",6),e.qZA(),e.TgZ(20,"div",11)(21,"label",4),e._uU(22,"Select Payment Category"),e.qZA(),e.TgZ(23,"ng-select",13),e.NdJ("change",function(s){return n.handleMfCategoryChange(s)}),e.qZA(),e._UZ(24,"validation-error",6),e.qZA(),e.TgZ(25,"div",11)(26,"label",4),e._uU(27,"Cost Center"),e.qZA(),e._UZ(28,"ng-select",14)(29,"validation-error",6),e.qZA()()(),e.TgZ(30,"div",15)(31,"div",2)(32,"div",16)(33,"div",2)(34,"div",17)(35,"label",4),e._uU(36,"Amount* "),e.YNc(37,j,2,1,"ng-container",18),e.qZA(),e.TgZ(38,"input",19),e.NdJ("change",function(){return n.handleAmountChange()}),e.qZA(),e._UZ(39,"validation-error",6),e.qZA(),e.TgZ(40,"div",17)(41,"label",4),e._uU(42,"Tax Amount "),e.YNc(43,$,2,1,"ng-container",18),e.qZA(),e._UZ(44,"input",20)(45,"validation-error",6),e.qZA(),e.TgZ(46,"div",17)(47,"label",4),e._uU(48,"Tax Percentage %"),e.qZA(),e.TgZ(49,"ng-select",21),e.NdJ("change",function(s){return n.handleTaxChange(s)}),e.YNc(50,H,1,1,"ng-template",22),e.YNc(51,W,1,1,"ng-template",23),e.qZA(),e._UZ(52,"validation-error",6),e.qZA(),e.TgZ(53,"div",17)(54,"label",4),e._uU(55,"Total Amount "),e.YNc(56,X,2,1,"ng-container",18),e.qZA(),e.TgZ(57,"input",24),e.NdJ("change",function(){return n.handleTotalAmountChange()}),e.qZA(),e._UZ(58,"validation-error",6),e.qZA(),e.TgZ(59,"div",25)(60,"label",4),e._uU(61,"Notes"),e.qZA(),e._UZ(62,"input",26),e.qZA()()(),e.TgZ(63,"div",27)(64,"label",4),e._uU(65,"Attachment"),e.qZA(),e.TgZ(66,"div",28)(67,"div",29),e.NdJ("files",function(s){return n.filesDropped(s)})("enter",function(){return n.enter=!n.enter})("leave",function(){return n.enter=!n.enter})("click",function(){e.CHM(o);const s=e.MAs(75);return e.KtG(s.click())}),e.TgZ(68,"div",30),e._UZ(69,"img",31),e.TgZ(70,"h5"),e._uU(71,"Select OR Drag & drop files"),e.qZA(),e.TgZ(72,"p"),e._uU(73,"Supported formates: JPEG, PNG, PDF"),e.qZA()()(),e.TgZ(74,"input",32,33),e.NdJ("change",function(s){return n.onSelectFile(s)}),e.qZA()(),e.YNc(76,ee,7,1,"ng-container",18),e.YNc(77,te,2,1,"small",34),e.qZA()()()()(),e.TgZ(78,"div",35)(79,"div",36)(80,"button",37),e._uU(81,"Cancel"),e.qZA(),e.TgZ(82,"button",38),e.NdJ("click",function(){return n.handleSubmit()}),e._uU(83,"Save"),e.qZA()()(),e.YNc(84,ne,2,0,"ng-template",null,39,e.W1O)}if(2&t){let o;e.xp6(1),e.Q6J("formGroup",n.formGroup),e.xp6(5),e.Q6J("items",n.employeeList)("searchFn",n.customSearch),e.xp6(1),e.Q6J("control",n.f.get("accountID"))("errorMessages",e.DdM(29,C)),e.xp6(4),e.Q6J("value",n.f.get("accountID").value),e.xp6(7),e.Q6J("items",n.currencyList),e.xp6(1),e.Q6J("control",n.f.get("paymentCurrencyID"))("errorMessages",e.DdM(30,C)),e.xp6(4),e.Q6J("items",n.mfCategoryList),e.xp6(1),e.Q6J("control",n.f.get("mainFundPaymentCategoryID"))("errorMessages",e.DdM(31,C)),e.xp6(4),e.Q6J("items",n.costCenterList),e.xp6(1),e.Q6J("control",n.f.get("paymentCostCenterID"))("errorMessages",e.DdM(32,C)),e.xp6(8),e.Q6J("ngIf",n.currencyName),e.xp6(2),e.Q6J("control",n.f.get("paymentAmount"))("errorMessages",e.DdM(33,C)),e.xp6(4),e.Q6J("ngIf",n.currencyName),e.xp6(2),e.Q6J("control",n.f.get("paymentTaxAmount"))("errorMessages",e.DdM(34,C)),e.xp6(4),e.Q6J("items",n.taxesList),e.xp6(3),e.Q6J("control",n.f.get("paymentTaxPer"))("errorMessages",e.DdM(35,C)),e.xp6(4),e.Q6J("ngIf",n.currencyName),e.xp6(2),e.Q6J("control",n.f.get("paymentTotalAmount"))("errorMessages",e.DdM(36,C)),e.xp6(18),e.Q6J("ngIf",null==(o=n.f.get("paymentAttachment"))?null:o.value),e.xp6(1),e.Q6J("ngIf",n.invalidFileType)}},dependencies:[l.O5,g.rH,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,b.w9,b.ir,b.mR,Q.Q,z.z,Y.L],styles:[".card-Box[_ngcontent-%COMP%]{background:#ffffff;border:.5px solid #f5f5f5;box-shadow:0 15px 25px #0000001a;border-radius:8px;padding:24px 34px}.card-upload[_ngcontent-%COMP%]{border:1px dashed #939aa8;text-align:center;padding:10px;border-radius:10px;margin:10px 0;cursor:pointer}.card-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;margin-bottom:15px}.card-upload[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;font-size:18px;color:#0f0f0f}.card-upload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:18px;color:#676767}.file-item[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid #dadada;background:white}.file-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:1;color:green;font-weight:600}"]}),i})()}];let ae=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(ie),g.Bz]}),i})();var oe=r(21515);let re=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[l.ez,ae,oe.m]}),i})()},67711:(A,v,r)=>{r.d(v,{L:()=>x});var l=r(94650),g=r(36895);function h(c,d){if(1&c&&(l.TgZ(0,"span",2),l._uU(1),l.qZA()),2&c){const e=d.$implicit,_=l.oxw(3);l.xp6(1),l.Oqu(_.errorMessages[e])}}function f(c,d){if(1&c&&(l.ynx(0),l.YNc(1,h,2,1,"span",1),l.BQk()),2&c){const e=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",e.validationKeys)}}function u(c,d){if(1&c&&(l.ynx(0),l.YNc(1,f,2,1,"ng-container",0),l.BQk()),2&c){const e=l.oxw();l.xp6(1),l.Q6J("ngIf",e.control.invalid&&(e.control.dirty||e.control.touched))}}let x=(()=>{class c{get validationKeys(){let e=this.control;return e&&e.errors?Object.keys(e.errors):[]}}return c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["validation-error"]],inputs:{control:"control",errorMessages:"errorMessages"},decls:1,vars:1,consts:[[4,"ngIf"],["class","validation-error d-block",4,"ngFor","ngForOf"],[1,"validation-error","d-block"]],template:function(e,_){1&e&&l.YNc(0,u,2,1,"ng-container",0),2&e&&l.Q6J("ngIf",null==_.control?null:_.control.errors)},dependencies:[g.sg,g.O5]}),c})()}}]);