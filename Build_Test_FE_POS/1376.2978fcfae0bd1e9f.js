"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[1376],{1376:(T,f,c)=>{c.r(f),c.d(f,{BranchesModule:()=>Je});var d=c(36895),p=c(39485),a=c(24006),e=c(94650),m=c(42953);function h(o,r){1&o&&(e.TgZ(0,"h3"),e._uU(1,"Your new branch is added successfully"),e.qZA())}function l(o,r){1&o&&(e.TgZ(0,"h3"),e._uU(1,"Your branch updated successfully"),e.qZA())}let _=(()=>{class o{constructor(t,n,i){this.activeModal=t,this.modalService=n,this.router=i}ngOnInit(){console.log(this.name),"edit"==this.name?setTimeout(()=>{this.modalService.dismissAll()},3e3):setTimeout(()=>{this.router.navigateByUrl("/branches"),this.modalService.dismissAll()},5e3)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.Kz),e.Y36(m.FF),e.Y36(p.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-done"]],inputs:{name:"name"},decls:5,vars:2,consts:[[1,"modal-body"],[1,"message"],[1,"fa-regular","fa-circle-check"],[4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.YNc(3,h,2,0,"h3",3),e.YNc(4,l,2,0,"h3",3),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngIf","edit"!=n.name),e.xp6(1),e.Q6J("ngIf","edit"==n.name))},dependencies:[d.O5],styles:[".message[_ngcontent-%COMP%]{text-align:center;padding:30px 10px}.message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:90px;color:#75b878;margin-bottom:30px}"]}),o})(),g=(()=>{class o{constructor(t,n,i){this.activeModal=t,this.modalService=n,this.router=i,this.semdToConfirm=new e.vpe,this.sendToClose=new e.vpe}confirm(){this.semdToConfirm.emit()}close(){this.sendToClose.emit()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.Kz),e.Y36(m.FF),e.Y36(p.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-confirm"]],inputs:{name:"name"},outputs:{semdToConfirm:"semdToConfirm",sendToClose:"sendToClose"},decls:9,vars:0,consts:[[1,"modal-body"],[1,"message"],[1,"modal-footer","text-center"],["type","button",1,"btn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3," Are you sure you want to save changes? "),e.qZA()()(),e.TgZ(4,"div",2)(5,"button",3),e.NdJ("click",function(){return n.confirm()}),e._uU(6,"Yes"),e.qZA(),e.TgZ(7,"button",3),e.NdJ("click",function(){return n.close(),n.activeModal.close("Close click")}),e._uU(8,"No"),e.qZA()())},styles:[".message[_ngcontent-%COMP%]{text-align:center;padding:50px}.message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:90px;color:#75b878;margin-bottom:30px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:center}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:1px solid #ddd;width:120px;border-radius:30px;display:block;color:#000;font-size:14px;font-weight:600}"]}),o})();var x=c(80529),k=c(69082);let A=(()=>{class o{constructor(t,n){this.http=t,this.sharedService=n,this.apiUrl=this.sharedService.getUrl}getBranches(t,n,i,s){return this.http.get(this.apiUrl+`Branches/GetBranches?Search=${t}&BranchTypeId=${n}&Sort=${i}&PageNo=${s}&PageSize=6`,this.sharedService.getHeaders())}addBranch(t){return this.http.post(this.apiUrl+"Branches/AddBranch",t,this.sharedService.getHeaders())}updateBranch(t){return this.http.post(this.apiUrl+"Branches/UpdateBranch",t,this.sharedService.getHeaders())}getBranchDetails(t){return this.http.get(this.apiUrl+`Branches/GetBranchDetails?branchId=${t}`,this.sharedService.getHeaders())}getUsers(){return this.http.get(this.apiUrl+"User/GetUsers?sort=2&Status=2001&&Invitation=2004PageSize=100",this.sharedService.getHeaders())}getLookupsById(t){return this.http.get(this.apiUrl+"Lookups/GetLookups?lookupTypeId="+t,this.sharedService.getHeaders())}getAddressBylangLat(t,n){return this.http.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${t},${n}&key=AIzaSyAAQ7GPIxJs5PTBccmO9OZwBUy464p59bY`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(x.eN),e.LFG(k.F))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var w=c(97185),N=c(79345),b=c(71603),y=c(36690),F=c(98563),I=c(94349),S=c(80145);const U=["search"];function q(o,r){1&o&&e._UZ(0,"div",56)}function M(o,r){1&o&&e._UZ(0,"img",61)}function J(o,r){1&o&&e._UZ(0,"img",62)}function V(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",57)(1,"button",58),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.editBranchInfo())}),e.YNc(2,M,1,0,"img",59),e.YNc(3,J,1,0,"img",60),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.branchForm.invalid),e.xp6(1),e.Q6J("ngIf",t.isShowBranchInfo),e.xp6(1),e.Q6J("ngIf",!t.isShowBranchInfo)}}function Q(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeBranchName())}),e._UZ(1,"i",29),e.qZA()}}function O(o,r){1&o&&e._UZ(0,"span")}function Y(o,r){1&o&&(e.TgZ(0,"span",67),e._uU(1," This element is required, please fill."),e.qZA())}function H(o,r){1&o&&(e.TgZ(0,"span")(1,"span",67),e._uU(2," Branch name length must be between 6 and 30 character."),e.qZA()())}function E(o,r){if(1&o&&(e.TgZ(0,"div",64),e.YNc(1,O,1,0,"span",65),e.YNc(2,Y,2,0,"span",66),e.YNc(3,H,3,0,"span",65),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.branchName.errors),e.xp6(1),e.Q6J("ngIf",t.formValid.branchName.errors.required),e.xp6(1),e.Q6J("ngIf",t.formValid.branchName.errors.minlength)}}function P(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",68)(1,"input",69),e.NdJ("change",function(){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.selectBranchType(s.id))}),e.qZA(),e.TgZ(2,"label",70),e._uU(3),e.qZA()()}if(2&o){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("id",t.id)("checked",n.branchTypesAry.includes(t.id)),e.xp6(1),e.Q6J("for",t.id),e.xp6(1),e.Oqu(t.name[0].lookupName)}}function W(o,r){if(1&o&&(e.TgZ(0,"span",72)(1,"span",67),e._uU(2,"This element is required, please fill."),e.qZA()()),2&o){const t=e.oxw(2);e.Q6J("hidden",0!=(null==t.branchTypesAry?null:t.branchTypesAry.length))}}function D(o,r){if(1&o&&(e.TgZ(0,"div",64),e.YNc(1,W,3,1,"span",71),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.branchTypes.errors)}}function L(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeemail())}),e._UZ(1,"i",29),e.qZA()}}function z(o,r){1&o&&(e.TgZ(0,"span",67),e._uU(1," the email you entered is incorrect."),e.qZA())}function K(o,r){if(1&o&&(e.TgZ(0,"div",64)(1,"span",72),e.YNc(2,z,2,0,"span",66),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("hidden",""==t.branchForm.get("email").value),e.xp6(1),e.Q6J("ngIf",t.formValid.email.errors)}}function R(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removephone())}),e._UZ(1,"i",29),e.qZA()}}function G(o,r){1&o&&(e.TgZ(0,"span",67),e._uU(1," This element is required, please fill."),e.qZA())}function j(o,r){1&o&&(e.TgZ(0,"span")(1,"span",67),e._uU(2,"The digits are less than 10 for (Mobile) and the digits are more than 8 "),e.qZA()())}function $(o,r){if(1&o&&(e.TgZ(0,"div",73),e.YNc(1,G,2,0,"span",66),e.YNc(2,j,3,0,"span",65),e.qZA()),2&o){const t=e.oxw();e.Q6J("hidden",""==t.branchForm.get("phone").value),e.xp6(1),e.Q6J("ngIf",t.formValid.phone.errors.required),e.xp6(1),e.Q6J("ngIf",t.formValid.phone.errors.minlength)}}function X(o,r){1&o&&(e.TgZ(0,"span")(1,"span",67),e._uU(2,"This element is required, please"),e.qZA()())}function ee(o,r){if(1&o&&(e.TgZ(0,"div",64),e.YNc(1,X,3,0,"span",65),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.country.errors)}}function te(o,r){1&o&&(e.TgZ(0,"span")(1,"span",67),e._uU(2," longitude is required."),e.qZA()())}function ne(o,r){if(1&o&&(e.TgZ(0,"div",64),e.YNc(1,te,3,0,"span",65),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.longitude.errors)}}function oe(o,r){1&o&&(e.TgZ(0,"span")(1,"span",67),e._uU(2," latitude is required."),e.qZA()())}function ie(o,r){if(1&o&&(e.TgZ(0,"div",64),e.YNc(1,oe,3,0,"span",65),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.latitude.errors)}}function re(o,r){1&o&&e._UZ(0,"div",74)}function ae(o,r){1&o&&e._UZ(0,"img",61)}function se(o,r){1&o&&e._UZ(0,"img",62)}function ce(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",57)(1,"button",58),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.editWorkingHours())}),e.YNc(2,ae,1,0,"img",59),e.YNc(3,se,1,0,"img",60),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.branchForm.invalid),e.xp6(1),e.Q6J("ngIf",t.isShowWorkingHours),e.xp6(1),e.Q6J("ngIf",!t.isShowWorkingHours)}}function le(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",75)(1,"div",76)(2,"div",77)(3,"div",78)(4,"div",79)(5,"input",80),e.NdJ("change",function(){const i=e.CHM(t),s=i.$implicit,u=i.index,v=e.oxw();return e.KtG(v.chooseTime(s.value.isActive,u))}),e.qZA(),e.TgZ(6,"label",81),e._uU(7),e.qZA()()()(),e.TgZ(8,"div",77)(9,"div",40)(10,"div",82)(11,"p"),e._uU(12," From "),e.qZA(),e._UZ(13,"input",83),e.qZA()()(),e.TgZ(14,"div",77)(15,"div",40)(16,"div",82)(17,"p"),e._uU(18," To "),e.qZA(),e._UZ(19,"input",84),e.qZA()()()()()}if(2&o){const t=r.$implicit,n=r.index,i=e.oxw();e.xp6(1),e.Q6J("formGroupName",n),e.xp6(4),e.Q6J("disabled",0==i.isEdit),e.xp6(2),e.hij(" ",t.value.dayName," "),e.xp6(6),e.Q6J("disabled",0==t.value.isActive)}}function de(o,r){1&o&&e._UZ(0,"div",85)}function he(o,r){1&o&&e._UZ(0,"img",61)}function me(o,r){1&o&&e._UZ(0,"img",62)}function ue(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",57)(1,"button",58),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.editBranchAdmin())}),e.YNc(2,he,1,0,"img",59),e.YNc(3,me,1,0,"img",60),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.branchForm.invalid),e.xp6(1),e.Q6J("ngIf",t.isShowBranchAdmin),e.xp6(1),e.Q6J("ngIf",!t.isShowBranchAdmin)}}function pe(o,r){1&o&&(e.TgZ(0,"span")(1,"span",67),e._uU(2,"This element is required, please fill"),e.qZA()())}function ge(o,r){if(1&o&&(e.TgZ(0,"div",64),e.YNc(1,pe,3,0,"span",65),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.adminUser.errors)}}function fe(o,r){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.hij("",t.ErrorMessageEn," ")}}function _e(o,r){if(1&o&&(e.TgZ(0,"div",86)(1,"ul"),e.YNc(2,fe,2,1,"li",87),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.errorsList)}}function be(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",88),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.chickForEdit())}),e._uU(1," Save"),e.qZA()}}function ve(o,r){1&o&&(e.TgZ(0,"button",89),e._uU(1," Add"),e.qZA())}function Te(o,r){1&o&&(e.TgZ(0,"button",90),e._UZ(1,"i",91),e.qZA())}const Z=function(){return{standalone:!0}},Ae=function(){return["jo","sa"]},ye=function(o){return{preferredCountries:o}};let C=(()=>{class o{markerDragEnd(t){console.log("dragEnd",t),console.log("dragEnd",t.coords.lat,t.coords.lng),this.lat=t.coords.lat,this.lng=t.coords.lng,console.log("mmmm"),this.getAddressBylangLat(this.lat,this.lng),this.branchForm.get("latitude")?.setValue(this.lat.toString()),this.branchForm.get("longitude")?.setValue(this.lng.toString())}constructor(t,n,i,s,u,v,Ve,Qe,Oe,Ye,B){this.branchService=t,this.toastr=n,this.fb=i,this.httpserviceService=s,this.mapsAPILoader=u,this.ngZone=v,this.router=Ve,this.route=Qe,this.modalService=Oe,this.headerService=Ye,this.formModel={},this.branchWorkingHoursList=[],this.response={},this.branchAdmin=[],this.branchTypes=[],this.branchTypesAry=[],this.pageType="Add",this.isEdit=!1,this.isStatus=!0,this.zoom=15,this.submitted=!1,this.searchText="",this.isShowBranchInfo=!1,this.isShowWorkingHours=!1,this.isShowBranchAdmin=!1,B.backdrop="static",B.keyboard=!1}ngOnInit(){console.log(this.searchElementRef),this.branchId=this.route.snapshot.params.id,this.branchId?(this.isEdit=!0,(this.isEdit=!0)&&this.headerService.setTitle("Branches > View branch")):this.headerService.setTitle("Branches > Add branch"),this.branchId||navigator.geolocation.getCurrentPosition(t=>{console.log("pos",t),this.lng=+t.coords.longitude,this.lat=+t.coords.latitude,this.branchForm.get("latitude")?.setValue(this.lat.toString()),this.branchForm.get("longitude")?.setValue(this.lng.toString())}),this.getFormData(),this.mapsAPILoader.load().then(()=>{let t=new google.maps.places.Autocomplete(this.searchElementRef.nativeElement,{});t.addListener("place_changed",()=>{this.ngZone.run(()=>{let n=t.getPlace(),i=n.address_components.reverse();console.log(i),this.branchForm.get("address")?.setValue(n.formatted_address),this.branchForm.get("country")?.setValue(i[0]?.long_name),this.branchForm.get("city")?.setValue(i[1]?.long_name||""),this.branchForm.get("branchArea")?.setValue(i[3]?.long_name||""),this.lat=n.geometry.location.lat(),this.lng=n.geometry.location.lng(),this.zoom=15,console.log(this.lat),console.log(this.lng),this.branchForm.get("longitude")?.setValue(n.geometry.location.lng().toString()),this.branchForm.get("latitude")?.setValue(n.geometry.location.lat().toString())})})}),this.getBranchTypes(),this.getBranchAdmin(),this.branchId||this.getWorkingHours(),this.branchId&&(this.getBranchDetails(),this.isEdit=!0,this.pageType="View")}getFormData(){this.branchForm=this.fb.group({branchId:0,branchName:"",phone:[""],email:["",[a.kI.email]],country:[""],city:[""],branchArea:[""],address:[""],longitude:[""],latitude:[""],status:2001,adminUser:null,branchTypes:[0,[a.kI.required]],branchWorkingHours:this.fb.array([])})}addBranchWorkingHours(){return this.fb.group({dayId:"",dayName:"",fromTime:"",toTime:"",isActive:!0,status:2001})}chooseTime(t,n){console.log(t),1==t?(this.branchForm.get("branchWorkingHours").at(n).get("fromTime").enable(),this.branchForm.get("branchWorkingHours").at(n).get("toTime").enable(),this.branchForm.get("branchWorkingHours").at(n).get("status").patchValue(2001)):(this.branchForm.get("branchWorkingHours").at(n).get("status").patchValue(2002),this.branchForm.get("branchWorkingHours").at(n).get("fromTime").disable(),this.branchForm.get("branchWorkingHours").at(n).get("toTime").disable())}chooseStatus(){1==this.isStatus?this.branchForm.get("status")?.patchValue(2001):this.branchForm.get("status")?.patchValue(2002)}get branchWorkingHours(){return this.branchForm.get("branchWorkingHours")}get formValid(){return this.branchForm.controls}onSubmit(){if(this.branchForm.get("branchTypes")?.patchValue(this.branchTypesAry),console.log(this.branchForm.get("branchTypes").value),this.submitted=!0,this.branchForm.get("branchName")?.patchValue(this.branchForm.get("branchName")?.value.trim()),this.branchForm.invalid)return window.scroll(0,0);console.log(this.branchForm.value),0==this.branchForm.get("branchId")?.value?this.addBranch():this.updateBranch()}addBranch(){this.isLoading=!0,""==this.branchForm.get("branchName")?.value&&this.branchForm.get("branchName")?.patchValue("-"),this.branchForm.get("email")?.value||delete this.branchForm.value.email,this.branchForm.get("phone")?.value||delete this.branchForm.value.phone,this.branchForm.get("adminUser")?.value||delete this.branchForm.value.adminUser,this.branchService.addBranch(this.branchForm.value).subscribe(t=>{1==t.isSuccess?(this.isLoading=!1,this.modalService.open(_).componentInstance.name=""):("-"==this.branchForm.get("branchName")?.value&&this.branchForm.get("branchName")?.patchValue(""),this.isLoading=!1,this.errorsList=t.Errors||t.errors,setTimeout(()=>{this.errorsList=""},5e3))},t=>{this.isLoading=!1,console.log(t),this.errorMessage=t.statusText})}updateBranch(){this.errorMessage="",this.errorsList="",this.branchForm.get("branchTypes")?.patchValue(this.branchTypesAry),console.log(this.branchForm.get("branchTypes").value),null==this.branchForm.get("adminUser")?.value&&this.branchForm.get("adminUser")?.patchValue(0),this.isLoading=!0,console.log(this.branchForm.value),this.branchForm.get("branchTypes")?.patchValue(this.branchTypesAry),console.log(this.branchForm.get("branchTypes").value),this.branchService.updateBranch(this.branchForm.value).subscribe(t=>{1==t.isSuccess?(this.getBranchDetails(),this.isLoading=!1,this.isShowBranchAdmin=!1,this.modalService.open(_).componentInstance.name="edit"):(this.isLoading=!1,this.errorsList=t.Errors||t.errors)},t=>{this.isLoading=!1,console.log(t),this.errorMessage=t.statusText})}toEdit(){0==this.isEdit?(this.isEdit=!0,this.pageType="Edit"):(this.isEdit=!1,this.pageType="View")}getBranchDetails(){this.branchTypesAry=[],this.branchService.getBranchDetails(this.branchId).subscribe(t=>{if(t){console.log(t);const n=t.data;this.branchForm.patchValue(n),this.branchForm.get("adminUser")?.patchValue(n.adminUser?.userId),this.searchElementRef.nativeElement.value=this.branchForm.get("address")?.value,this.lng=+this.branchForm.get("longitude")?.value,this.lat=+this.branchForm.get("latitude")?.value,console.log(typeof this.lng),setTimeout(()=>{this.zoom=16},2e3),this.isStatus=2001==this.branchForm.value.status,n.branchType.forEach(i=>{this.branchTypesAry.push(i.branchTypeId)}),console.log(this.branchTypesAry);for(let i=this.branchWorkingHours.value.length-1;i>=0;i--)this.branchWorkingHours.removeAt(i);for(let i=0;i<n.branchWorkingHours.length;i++)this.branchWorkingHours.push(this.fb.group({dayId:n.branchWorkingHours[i].dayId,dayName:n.branchWorkingHours[i].day[0].lookupName,fromTime:n.branchWorkingHours[i]?.fromTime,toTime:n.branchWorkingHours[i]?.toTime,isActive:2001==n.branchWorkingHours[i].status,status:n.branchWorkingHours[i].status}))}})}selectBranchType(t){console.log(t),this.branchTypesAry.includes(t)?this.branchTypesAry.splice(this.branchTypesAry.indexOf(t),1):this.branchTypesAry.push(t),console.log(this.branchTypesAry)}getBranchTypes(){this.branchService.getLookupsById(3).subscribe(t=>{this.branchTypes=t.data},t=>{this.errorMessage=t.message})}getWorkingHours(){this.branchService.getLookupsById(6).subscribe(t=>{console.log(t.data);for(let n=0;n<t.data.length;n++)this.branchWorkingHours.push(this.fb.group({dayId:t.data[n]?.id,dayName:t.data[n]?.description,fromTime:"09:00",toTime:"17:00",isActive:!0,status:2001}))},t=>{this.errorMessage=t.message})}getBranchAdmin(){this.branchService.getUsers().subscribe(t=>{this.branchAdmin=t.data},t=>{this.errorMessage=t.message})}getAddressBylangLat(t,n){this.branchService.getAddressBylangLat(t,n).subscribe(i=>{console.log(i);const s=i.results[0],u=s.address_components.reverse();this.branchForm.get("address")?.setValue(s.formatted_address),this.searchElementRef.nativeElement.value=this.branchForm.get("address")?.value,this.branchForm.get("country")?.setValue(u[1].long_name),this.branchForm.get("city")?.setValue(u[2].long_name),this.branchForm.get("branchArea")?.setValue(u[3].long_name)},i=>{this.errorMessage=i.message})}editBranchInfo(){if(0==this.isShowBranchInfo)this.isShowBranchInfo=!0,this.isShowBranchAdmin=!1,this.isShowWorkingHours=!1;else if(1==this.isShowBranchInfo){const t=this.modalService.open(g);t.componentInstance.name="World",t.componentInstance.semdToConfirm.subscribe(n=>{console.log("result",n),this.isShowBranchInfo=!1,this.modalService.dismissAll(),this.updateBranch()}),t.componentInstance.sendToClose.subscribe(n=>{console.log("resulttoclose",n),this.isShowBranchInfo=!1,this.modalService.dismissAll()})}}editWorkingHours(){if(0==this.isShowWorkingHours)this.isShowWorkingHours=!0,this.isShowBranchInfo=!1,this.isShowBranchAdmin=!1;else if(1==this.isShowWorkingHours){const t=this.modalService.open(g);t.componentInstance.name="World",t.componentInstance.semdToConfirm.subscribe(n=>{console.log("result",n),this.isShowWorkingHours=!1,this.modalService.dismissAll(),this.updateBranch(),setTimeout(()=>{this.getBranchDetails()},2e3)}),t.componentInstance.sendToClose.subscribe(n=>{console.log("resulttoclose",n),this.isShowWorkingHours=!1,this.modalService.dismissAll()})}}chickForEdit(){if(1==this.isShowBranchInfo||1==this.isShowWorkingHours||1==this.isShowBranchAdmin){const t=this.modalService.open(g);t.componentInstance.name="name",t.componentInstance.semdToConfirm.subscribe(n=>{console.log("result",n),this.isShowBranchAdmin=!1,this.modalService.dismissAll(),this.updateBranch()}),t.componentInstance.sendToClose.subscribe(n=>{console.log("resulttoclose",n),this.isShowBranchAdmin=!1,this.modalService.dismissAll()})}}applyAllTime(){}editBranchAdmin(){if(0==this.isShowBranchAdmin)this.isShowBranchAdmin=!0,this.isShowWorkingHours=!1,this.isShowBranchInfo=!1;else if(1==this.isShowBranchAdmin){const t=this.modalService.open(g);t.componentInstance.name="World",t.componentInstance.semdToConfirm.subscribe(n=>{console.log("result",n),this.isShowBranchAdmin=!1,this.modalService.dismissAll(),this.updateBranch()}),t.componentInstance.sendToClose.subscribe(n=>{console.log("resulttoclose",n),this.isShowBranchAdmin=!1,this.modalService.dismissAll()})}}numberOnly(t){const n=t.which?t.which:t.keyCode;return!(n>31&&(n<48||n>57))}removeBranchName(){this.branchForm.get("branchName")?.patchValue("")}removeemail(){this.branchForm.get("email")?.patchValue("")}removephone(){this.branchForm.get("phone")?.patchValue("")}removeseacrch(){this.searchElementRef.nativeElement.value="",this.searchText="",this.branchForm.get("longitude")?.setValue(""),this.branchForm.get("latitude")?.setValue(""),this.branchForm.get("address")?.setValue(""),this.branchForm.get("country")?.setValue(""),this.branchForm.get("city")?.setValue(""),this.branchForm.get("branchArea")?.setValue("")}checkSpecialChar(t){var n;return(n=document.all?t.keyCode:t.which)>64&&n<91||n>96&&n<123||8==n||32==n||n>=48&&n<=57}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A),e.Y36(w._W),e.Y36(a.qu),e.Y36(N.h),e.Y36(b.W7),e.Y36(e.R0b),e.Y36(p.F0),e.Y36(p.gz),e.Y36(m.FF),e.Y36(y.r),e.Y36(m.NM))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-branch"]],viewQuery:function(t,n){if(1&t&&e.Gf(U,5),2&t){let i;e.iGM(i=e.CRH())&&(n.searchElementRef=i.first)}},decls:141,vars:47,consts:[[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],[1,"page-title"],[1,"card-form","overflow-hidden","position-relative"],["class","overlay-bi",4,"ngIf"],["class","edit-btn float-end",4,"ngIf"],[1,"col-md-4"],[1,"form-group","overflow-hidden","position-relative"],["formControlName","branchName","name","branchName","type","text","placeholder","Type name","required","","minlength","6","maxlength","30","OnlyCharacter","","autocomplete","off",1,"form-control"],["class","btn btn-remove",3,"click",4,"ngIf"],["class","ng-dirty",4,"ngIf"],[1,"d-flex","justify-content-end"],[1,"form-check","form-switch"],[1,"labelactive"],["name","isStatus","type","checkbox","role","switch",1,"form-check-input",3,"ngModel","ngModelOptions","ngModelChange","change"],[1,"form-group"],["class","form-check form-check-inline",4,"ngFor","ngForOf"],["type","text","formControlName","email","name","email","placeholder","Email","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{1,3}$",1,"form-control"],[1,"form-group","position-relative"],["type","text","formControlName","phone","name","phone","placeholder","","ng2TelInput","","min","8","max","10","minlength","8","maxlength","10",1,"form-control",3,"ng2TelInputOptions","keypress"],["class","ng-dirty",3,"hidden",4,"ngIf"],[1,"col-md-12","d-flex"],[1,"heading1"],[1,"smallTextMuted","mx-3"],[1,"col-md-6"],["type","text","placeholder","Search Location","autocorrect","off","autocapitalize","off","spellcheck","off","type","text",1,"form-control",3,"ngModel","ngModelOptions","keydown.enter","ngModelChange"],["search",""],["type","button",1,"btn","btn-remove",2,"top","4px",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[3,"latitude","longitude","zoom","disableDefaultUI","zoomControl","fullscreenControl"],[3,"latitude","longitude","markerDraggable","dragEnd"],["hidden","",1,"col-md-6"],["formControlName","longitude","name","longitude","type","text","placeholder","longitude","required","",1,"form-control"],["formControlName","latitude","name","latitude","type","text","placeholder","latitude","required","",1,"form-control"],["formControlName","country","name","country","type","text","placeholder","","required","",1,"form-control"],["formControlName","city","name","city","type","text","placeholder","",1,"form-control"],["formControlName","branchArea","name","branchArea","type","text","placeholder","",1,"form-control"],[1,"card-form","whour","overflow-hidden","position-relative"],["class","overlay-wh",4,"ngIf"],[1,""],[1,"form-check","mb-2"],[1,"day-active","mt-0","mb-2"],[1,"px-2","mb-2"],["formArrayName","branchWorkingHours",4,"ngFor","ngForOf"],[1,"card-form","position-relative"],["class","overlay-ba",4,"ngIf"],["name","adminUser","id","adminUser","placeholder","Type name","bindLabel","fullName","bindValue","userId","formControlName","adminUser",3,"items"],[1,"col-md-2"],[1,"col-md-8"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"btns-group"],["type","button",1,"btn","btn-cancel"],["type","button","class","btn btn-save",3,"click",4,"ngIf"],["type","submit","class","btn btn-save",4,"ngIf"],["type","button","class","btn btn-save btn-load","disabled","",4,"ngIf"],[1,"overlay-bi"],[1,"edit-btn","float-end"],["type","button",1,"btn",3,"disabled","click"],["src","assets/images/save.png","class","save-img","alt","",4,"ngIf"],["src","assets/images/edit.png","alt","",4,"ngIf"],["src","assets/images/save.png","alt","",1,"save-img"],["src","assets/images/edit.png","alt",""],[1,"btn","btn-remove",3,"click"],[1,"ng-dirty"],[4,"ngIf"],["class","error",4,"ngIf"],[1,"error"],[1,"form-check","form-check-inline"],["type","checkbox",1,"form-check-input",3,"id","checked","change"],[1,"form-check-label",3,"for"],[3,"hidden",4,"ngIf"],[3,"hidden"],[1,"ng-dirty",3,"hidden"],[1,"overlay-wh"],["formArrayName","branchWorkingHours"],[1,"row",3,"formGroupName"],[1,"col-sm-4"],[1,"form-group","day-active"],[1,"form-check","form-switch","justify-content-between"],["type","checkbox","role","switch","id","flexSwitchCheckDefault","formControlName","isActive",1,"form-check-input",3,"disabled","change"],["for",""],[1,"from-to-time"],["type","time","formControlName","fromTime","name","fromTime","placeholder","",1,"form-control",3,"disabled"],["type","time","formControlName","toTime","name","toTime","placeholder","",1,"form-control"],[1,"overlay-ba"],["role","alert",1,"alert","alert-danger"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-save",3,"click"],["type","submit",1,"btn","btn-save"],["type","button","disabled","",1,"btn","btn-save","btn-load"],[1,"fa-solid","fa-circle-notch","fa-spin"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"form",2),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(4,"div",3)(5,"h3"),e._uU(6," Branch Information "),e.qZA()(),e.TgZ(7,"div",4),e.YNc(8,q,1,0,"div",5),e.YNc(9,V,4,3,"div",6),e.TgZ(10,"div",0)(11,"div",7)(12,"div",8)(13,"label"),e._uU(14,"Branch Name *"),e.qZA(),e._UZ(15,"input",9),e.YNc(16,Q,2,0,"button",10),e.YNc(17,E,4,3,"div",11),e.qZA()(),e._UZ(18,"div",7),e.TgZ(19,"div",7)(20,"div",12)(21,"div",13)(22,"label",14),e._uU(23,"Active "),e.qZA(),e.TgZ(24,"input",15),e.NdJ("ngModelChange",function(s){return n.isStatus=s})("change",function(){return n.chooseStatus()}),e.qZA()()()(),e.TgZ(25,"div",1)(26,"div",16)(27,"label"),e._uU(28," Branch Type "),e.qZA(),e.TgZ(29,"div"),e.YNc(30,P,4,4,"div",17),e.qZA(),e.YNc(31,D,2,1,"div",11),e.qZA()(),e.TgZ(32,"div",7)(33,"div",8)(34,"label"),e._uU(35,"Email"),e.qZA(),e._UZ(36,"input",18),e.YNc(37,L,2,0,"button",10),e.YNc(38,K,3,2,"div",11),e.qZA()(),e.TgZ(39,"div",7)(40,"div",19)(41,"label"),e._uU(42,"Phone Number"),e.qZA(),e.TgZ(43,"div")(44,"input",20),e.NdJ("keypress",function(s){return n.numberOnly(s)}),e.qZA(),e.YNc(45,R,2,0,"button",10),e.YNc(46,$,3,3,"div",21),e.qZA()()()(),e.TgZ(47,"div",0)(48,"div",22)(49,"h3",23),e._uU(50," Branch Location "),e.qZA(),e.TgZ(51,"p",24),e._uU(52," Define Location by Search and select or set location on map"),e.qZA()(),e._UZ(53,"div",25)(54,"div",1),e.TgZ(55,"div",25)(56,"div",8)(57,"input",26,27),e.NdJ("keydown.enter",function(s){return s.preventDefault()})("ngModelChange",function(s){return n.searchText=s}),e.qZA(),e.TgZ(59,"button",28),e.NdJ("click",function(){return n.removeseacrch()}),e._UZ(60,"i",29),e.qZA(),e.TgZ(61,"div"),e.YNc(62,ee,2,1,"div",11),e.qZA()()(),e.TgZ(63,"div",1)(64,"agm-map",30)(65,"agm-marker",31),e.NdJ("dragEnd",function(s){return n.markerDragEnd(s)}),e.TgZ(66,"agm-info-window")(67,"div")(68,"strong"),e._uU(69," My Current Location "),e.qZA()()()()(),e._UZ(70,"br"),e.qZA(),e.TgZ(71,"div",32)(72,"div",16)(73,"label"),e._uU(74,"longitude "),e.qZA(),e._UZ(75,"input",33),e.YNc(76,ne,2,1,"div",11),e.qZA()(),e.TgZ(77,"div",32)(78,"div",16)(79,"label"),e._uU(80,"latitude "),e.qZA(),e._UZ(81,"input",34),e.YNc(82,ie,2,1,"div",11),e.qZA()(),e.TgZ(83,"div",7)(84,"div",16)(85,"label"),e._uU(86,"Country "),e.qZA(),e._UZ(87,"input",35),e.qZA()(),e.TgZ(88,"div",7)(89,"div",16)(90,"label"),e._uU(91," City "),e.qZA(),e._UZ(92,"input",36),e.qZA()(),e.TgZ(93,"div",7)(94,"div",16)(95,"label"),e._uU(96,"Area "),e.qZA(),e._UZ(97,"input",37),e.qZA()()()(),e.TgZ(98,"div",3)(99,"h3"),e._uU(100,"Working Hours"),e.qZA()(),e.TgZ(101,"div",38),e.YNc(102,re,1,0,"div",39),e.YNc(103,ce,4,3,"div",6),e.TgZ(104,"div",40),e._UZ(105,"div",41),e.TgZ(106,"div",0)(107,"div",7)(108,"div",42)(109,"h6"),e._uU(110," Days "),e.qZA()()(),e.TgZ(111,"div",7)(112,"h6",43),e._uU(113," Hours"),e.qZA()(),e._UZ(114,"div",7),e.qZA(),e.YNc(115,le,20,4,"div",44),e.qZA()(),e.TgZ(116,"div",3)(117,"h3"),e._uU(118,"Branch Admin"),e.qZA()(),e.TgZ(119,"div",45),e.YNc(120,de,1,0,"div",46),e.YNc(121,ue,4,3,"div",6),e.TgZ(122,"div",0)(123,"div",7)(124,"div",16)(125,"label"),e._uU(126,"Branch Admin"),e.qZA(),e._UZ(127,"ng-select",47),e.YNc(128,ge,2,1,"div",11),e.qZA()()()(),e.TgZ(129,"div",0),e._UZ(130,"div",48),e.TgZ(131,"div",49),e.YNc(132,_e,3,1,"div",50),e.qZA(),e.TgZ(133,"div",1),e._UZ(134,"div",51),e.TgZ(135,"div",51)(136,"button",52),e._uU(137,"Cancel"),e.qZA(),e.YNc(138,be,2,0,"button",53),e.YNc(139,ve,2,0,"button",54),e.YNc(140,Te,2,0,"button",55),e.qZA()()()()()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",n.branchForm),e.xp6(5),e.Q6J("ngIf",!n.isShowBranchInfo&&n.isEdit),e.xp6(1),e.Q6J("ngIf",n.isEdit),e.xp6(7),e.Q6J("ngIf",n.branchForm.get("branchName").value),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.formValid.branchName.invalid||n.formValid.branchName.invalid&&(n.formValid.branchName.dirty||n.formValid.branchName.touched)),e.xp6(7),e.Q6J("ngModel",n.isStatus)("ngModelOptions",e.DdM(42,Z)),e.xp6(6),e.Q6J("ngForOf",n.branchTypes),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.formValid.branchTypes.invalid||n.formValid.branchTypes.invalid&&(n.formValid.branchTypes.dirty||n.formValid.branchTypes.touched)),e.xp6(6),e.Q6J("ngIf",n.branchForm.get("email").value),e.xp6(1),e.Q6J("ngIf",n.formValid.email.dirty||n.formValid.email.touched),e.xp6(2),e.ekj("overflow-hidden",!n.isShowBranchInfo&&n.isEdit),e.xp6(4),e.Q6J("ng2TelInputOptions",e.VKq(44,ye,e.DdM(43,Ae))),e.xp6(1),e.Q6J("ngIf",n.branchForm.get("phone").value),e.xp6(1),e.Q6J("ngIf",n.formValid.phone.invalid&&(n.formValid.phone.dirty||n.formValid.phone.touched)),e.xp6(11),e.Q6J("ngModel",n.searchText)("ngModelOptions",e.DdM(46,Z)),e.xp6(2),e.Q6J("hidden",0==(null==n.searchText?null:n.searchText.length)),e.xp6(3),e.Q6J("ngIf",n.submitted&&n.formValid.country.invalid||n.formValid.country.invalid&&(n.formValid.country.dirty||n.formValid.country.touched)),e.xp6(2),e.Q6J("latitude",n.lat)("longitude",n.lng)("zoom",n.zoom)("disableDefaultUI",!0)("zoomControl",!0)("fullscreenControl",!0),e.xp6(1),e.Q6J("latitude",n.lat)("longitude",n.lng)("markerDraggable",!0),e.xp6(11),e.Q6J("ngIf",n.formValid.longitude.invalid&&(n.formValid.longitude.dirty||n.formValid.longitude.touched)),e.xp6(6),e.Q6J("ngIf",n.formValid.latitude.invalid&&(n.formValid.latitude.dirty||n.formValid.latitude.touched)),e.xp6(20),e.Q6J("ngIf",!n.isShowWorkingHours&&n.isEdit),e.xp6(1),e.Q6J("ngIf",n.isEdit),e.xp6(12),e.Q6J("ngForOf",n.branchWorkingHours.controls),e.xp6(5),e.Q6J("ngIf",!n.isShowBranchAdmin&&n.isEdit),e.xp6(1),e.Q6J("ngIf",n.isEdit),e.xp6(6),e.Q6J("items",n.branchAdmin),e.xp6(1),e.Q6J("ngIf",n.formValid.adminUser.invalid&&(n.formValid.adminUser.dirty||n.formValid.adminUser.touched)),e.xp6(4),e.Q6J("ngIf",n.errorsList),e.xp6(6),e.Q6J("ngIf",n.isEdit),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&!n.isEdit),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[d.sg,d.O5,F._,a._Y,a.Fj,a.Wl,a.JJ,a.JL,a.Q7,a.wO,a.nD,a.c5,a.sg,a.u,a.x0,a.CE,a.On,I.w9,b.d,b.SA,b.pt,S.Q],styles:["agm-map[_ngcontent-%COMP%]{height:400px}.day-active[_ngcontent-%COMP%]{max-width:70%;margin:10px auto 0}.day-active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#dfdfdf;font-size:16px;font-weight:600}[_ngcontent-%COMP%]::-moz-input-placeholder{color:#dfdfdf;font-size:16px;font-weight:600}[_ngcontent-%COMP%]:-moz-input-placeholder{color:#dfdfdf;font-size:16px;font-weight:600}[_ngcontent-%COMP%]:-ms-input-placeholder{padding:10px;color:#dfdfdf;font-size:16px;font-weight:600}.overlay-bi[_ngcontent-%COMP%], .overlay-wh[_ngcontent-%COMP%], .overlay-ba[_ngcontent-%COMP%]{background-color:#c7c7c736;position:absolute;inset:0;z-index:1}.ovral[_ngcontent-%COMP%]{overflow:initial!important}.whour[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{float:initial;margin-left:10px}.btn-remove[_ngcontent-%COMP%]{position:absolute;right:0;top:37px;color:#999}"]}),o})();var Ze=c(86349),Ce=c(28424),Be=c(59442);function xe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.chooseBranch(s))}),e._uU(1),e.qZA()}if(2&o){const t=r.$implicit,n=e.oxw();e.ekj("active",t.id==n.branchId),e.xp6(1),e.hij(" ",t.name[0].lookupName,"")}}function ke(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",36),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"div",37),e._UZ(11,"input",38)(12,"label",39),e.qZA()(),e.TgZ(13,"td")(14,"a",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.Viewbranch())}),e._uU(15," View details "),e.qZA()()()}if(2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.branchName),e.xp6(2),e.AsE(" ",t.city," , ",t.branchArea,""),e.xp6(2),e.hij(" ",t.email," "),e.xp6(2),e.hij(" ",t.phone," "),e.xp6(3),e.Q6J("checked","2001"==t.status),e.xp6(3),e.MGl("routerLink","/branches/viewbranch/",t.branchId,"")}}function we(o,r){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function Ne(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",26)(2,"div",27)(3,"table",28)(4,"thead")(5,"tr")(6,"th",29)(7,"button",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByBranchName())}),e._uU(8),e._UZ(9,"i",31)(10,"i",32),e.qZA()(),e.TgZ(11,"th",29)(12,"button",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sortByLocation())}),e._uU(13," Location "),e._UZ(14,"i",31)(15,"i",32),e.qZA()(),e.TgZ(16,"th",29)(17,"button",33),e._uU(18," Email "),e.qZA()(),e.TgZ(19,"th",29)(20,"button",33),e._uU(21," Phone "),e.qZA()(),e.TgZ(22,"th",29)(23,"button",33),e._uU(24," Activation "),e.qZA()(),e.TgZ(25,"th",29)(26,"button",33),e._uU(27," Action "),e.qZA()(),e._UZ(28,"th",29),e.qZA()(),e.TgZ(29,"tbody"),e.YNc(30,ke,16,7,"tr",34),e.qZA()()(),e.YNc(31,we,2,0,"div",35),e.qZA()()}if(2&o){const t=r.$implicit,n=e.oxw();e.xp6(7),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(1),e.hij(" ",n.typeName," "),e.xp6(1),e.ekj("active",2==n.sort),e.xp6(1),e.ekj("active",3==n.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",4==n.sort),e.xp6(1),e.ekj("active",5==n.sort),e.xp6(15),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function Fe(o,r){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}const Ie=function(o){return{active:o}};function Se(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",41)(1,"button",42),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.setPage(s))}),e._uU(2),e.qZA()()}if(2&o){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,Ie,n.pageNo===t))("disabled",n.pageNo===t),e.xp6(1),e.hij(" ",t+1," ")}}const Ue=[{path:"",component:(()=>{class o{constructor(t,n,i){this.branchService=t,this.router=n,this.headerService=i,this.searchText="",this.sort=1,this.branchTypes=[],this.branchId=3001,this.typeName="Showroom Branches",this.pageNo=0,this.titleOfPage=new e.vpe}ngOnInit(){this.headerService.setTitle("Branches"),this.getBranches(),this.getBranchTypes()}addbranch(){this.router.navigateByUrl("/branches/addbranch"),this.headerService.setTitle("Branches > Add branch")}Viewbranch(){this.headerService.setTitle("Branches > View branch")}chooseBranch(t){this.branchId=t.id,this.typeName=t.name[0].lookupName,this.pageNo=0,this.searchText="",this.getBranches()}getBranches(){return this.branchService.getBranches(this.searchText,this.branchId,this.sort,this.pageNo).subscribe(t=>{t&&(this.branches=t.data,this.totalAllRecordsCount=t.info?.totalAllRecordsCount,this.totalRecordsCount=t.info?.totalRecordsCount,this.totalRecords=t.info?.totalRecordsCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=Ze.w6(this.pagin),console.log(this.pagin),console.log(this.pages))})}searchRoles(t){console.log(t?.target.value);const n=t.target.value;console.log(n.length),n.length>=3&&(this.searchText=n,this.pageNo=0,this.getBranches()),0==n.length&&this.getBranches()}removeSearch(){this.searchText="",this.sort=1,this.getBranches()}sortByBranchName(){this.sort=3==this.sort?1:2==this.sort?3:2,this.getBranches()}sortByLocation(){this.sort=5==this.sort?1:4==this.sort?5:4,this.getBranches()}sortByActivation(){this.sort=6==this.sort?7:6,this.getBranches()}setPage(t){this.pageNo=t,this.getBranches(),window.scroll(0,0)}getBranchTypes(){this.branchService.getLookupsById(3).subscribe(t=>{this.branchTypes=t.data},t=>{this.errorMessage=t.message})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A),e.Y36(p.F0),e.Y36(y.r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-branches"]],outputs:{titleOfPage:"titleOfPage"},decls:37,vars:12,consts:[[1,"card-page"],[1,"row"],[1,"col-md-9"],[1,"branchesTypes"],["class","btn",3,"active","click",4,"ngFor","ngForOf"],[1,"col-md-3"],[1,"branch-total"],[1,"col-md-5"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"col-md-2"],[1,"col-md-5","d-flex","justify-content-end","btnadd"],[1,"btn","btn-add",3,"click"],["src","assets/images/plus.png","alt",""],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[1,"col-md-6",3,"hidden"],[1,"showing"],[1,"pagination"],["class","page-item",4,"ngFor","ngForOf"],[1,"btn",3,"click"],[1,"card-table"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn"],[4,"ngFor","ngForOf"],[4,"ngIf"],["scope","row"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","flexSwitchCheckChecked","readonly","","disabled","",1,"form-check-input",3,"checked"],["for","flexSwitchCheckChecked",1,"form-check-label"],[1,"btn","btn-view",3,"routerLink","click"],[1,"page-item"],[1,"page-link",3,"ngClass","disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,xe,2,3,"button",4),e.qZA()(),e.TgZ(5,"div",5)(6,"p",6),e._uU(7),e.qZA()(),e.TgZ(8,"div",7)(9,"div",8)(10,"button",9),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(11,"i",10),e.qZA(),e.TgZ(12,"input",11),e.NdJ("ngModelChange",function(s){return n.searchText=s})("keyup",function(s){return n.searchRoles(s)}),e.qZA(),e.TgZ(13,"button",12),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(14,"i",13),e.qZA()()(),e._UZ(15,"div",14),e.TgZ(16,"div",15)(17,"button",16),e.NdJ("click",function(){return n.addbranch()}),e._UZ(18,"img",17),e._uU(19," Add Branch "),e.qZA()()(),e.TgZ(20,"div",1),e.YNc(21,Ne,32,13,"div",18),e.TgZ(22,"div",19),e.YNc(23,Fe,2,0,"ng-template",null,20,e.W1O),e.qZA(),e.TgZ(25,"div",21)(26,"h6",22),e._uU(27," Showing "),e.TgZ(28,"span"),e._uU(29),e.qZA(),e._uU(30," from "),e.TgZ(31,"span"),e._uU(32),e.qZA(),e._uU(33," data "),e.qZA()(),e.TgZ(34,"div",21)(35,"ul",23),e.YNc(36,Se,3,5,"li",24),e.qZA()()()()),2&t){const i=e.MAs(24);e.xp6(4),e.Q6J("ngForOf",n.branchTypes),e.xp6(3),e.hij(" Branches Total No. ",n.totalAllRecordsCount," "),e.xp6(5),e.Q6J("ngModel",n.searchText),e.xp6(1),e.Q6J("hidden",0==n.searchText.length),e.xp6(8),e.Q6J("ngIf",n.branches)("ngIfElse",i),e.xp6(4),e.Q6J("hidden",0==(null==n.branches?null:n.branches.length)),e.xp6(4),e.AsE(" ",6*(n.pageNo+1)-5," - ",6==(null==n.branches?null:n.branches.length)?6*(n.pageNo+1):n.totalRecords," "),e.xp6(3),e.hij(" ",n.totalRecords," "),e.xp6(2),e.Q6J("hidden",n.totalRecordsCount<7),e.xp6(2),e.Q6J("ngForOf",n.pages)}},dependencies:[d.mk,d.sg,d.O5,p.rH,a.Fj,a.JJ,a.On,Ce.N,Be.w],styles:[".branchesTypes[_ngcontent-%COMP%]{margin-bottom:30px}.branchesTypes[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:22px;border:0px;padding:10px 15px;color:#929eae;border-radius:0;margin:0;border-bottom:2px solid #f5f5f5}.branchesTypes[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{color:#000;border-bottom:2px solid #dc3545}.branch-total[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#78778b;text-align:end}"]}),o})(),children:[]},{path:"addbranch",component:C},{path:"viewbranch/:id",component:C}];let qe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(Ue),p.Bz]}),o})();var Me=c(21515);let Je=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,qe,Me.m]}),o})()},59442:(T,f,c)=>{c.d(f,{w:()=>p});var d=c(94650);let p=(()=>{class a{}return a.\u0275fac=function(m){return new(m||a)},a.\u0275cmp=d.Xpm({type:a,selectors:[["app-not-found"]],decls:3,vars:0,consts:[[1,"not-found"]],template:function(m,h){1&m&&(d.TgZ(0,"div",0)(1,"p"),d._uU(2," No data to display "),d.qZA()())},styles:[".not-found[_ngcontent-%COMP%]{text-align:center;padding:10%}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c9c9d1;font-size:16px;font-weight:600}"]}),a})()},80145:(T,f,c)=>{c.d(f,{O:()=>a,Q:()=>p});var d=c(94650);let p=(()=>{class e{constructor(h){this.el=h}onKeyDown(h){[8,9,13,27,46].indexOf(h.keyCode)}onKeyup(h){this.validateFields(h)}blockPaste(h){this.validateFields(h)}validateFields(h){this.el.nativeElement.value=this.el.nativeElement.value.replace(/[^A-Za-z\u0621-\u064a ]/g,""),h.preventDefault()}}return e.\u0275fac=function(h){return new(h||e)(d.Y36(d.SBq))},e.\u0275dir=d.lG2({type:e,selectors:[["","OnlyCharacter",""]],hostBindings:function(h,l){1&h&&d.NdJ("keydown",function(g){return l.onKeyDown(g)})("keyup",function(g){return l.onKeyup(g)})("paste",function(g){return l.blockPaste(g)})},inputs:{validationFieldsType:"validationFieldsType"}}),e})();function a(e){return e.replace(/[^A-Za-z\u0621-\u064a ]/g,"")}}}]);