"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[2715],{52715:(x,v,a)=>{a.r(v),a.d(v,{RolesModule:()=>pe});var d=a(36895),g=a(39485),e=a(94650),p=a(42953);let h=(()=>{class i{constructor(t,o,n){this.activeModal=t,this.modalService=o,this.router=n,this.semdToConfirm=new e.vpe,this.sendToClose=new e.vpe}confirm(){this.semdToConfirm.emit()}close(){this.sendToClose.emit()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.Kz),e.Y36(p.FF),e.Y36(g.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-confirm-role"]],inputs:{name:"name"},outputs:{semdToConfirm:"semdToConfirm",sendToClose:"sendToClose"},decls:9,vars:0,consts:[[1,"modal-body"],[1,"message"],[1,"modal-footer","text-center"],["type","button",1,"btn",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3," Are you sure you want to save changes? "),e.qZA()()(),e.TgZ(4,"div",2)(5,"button",3),e.NdJ("click",function(){return o.confirm()}),e._uU(6,"Yes"),e.qZA(),e.TgZ(7,"button",3),e.NdJ("click",function(){return o.close(),o.activeModal.close("Close click")}),e._uU(8,"No"),e.qZA()())},styles:[".message[_ngcontent-%COMP%]{text-align:center;padding:50px}.message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:90px;color:#75b878;margin-bottom:30px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:center}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:1px solid #ddd;width:120px;border-radius:30px;display:block;color:#000;font-size:14px;font-weight:600}"]}),i})();function m(i,s){1&i&&(e.TgZ(0,"h3"),e._uU(1," Role added successfully"),e.qZA())}function c(i,s){1&i&&(e.TgZ(0,"h3"),e._uU(1," Role updated successfully"),e.qZA())}let C=(()=>{class i{constructor(t,o,n){this.activeModal=t,this.modalService=o,this.router=n}ngOnInit(){console.log(this.name),"add"==this.name?setTimeout(()=>{this.modalService.dismissAll(),this.router.navigateByUrl("/roles")},4e3):setTimeout(()=>{this.modalService.dismissAll()},4e3)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.Kz),e.Y36(p.FF),e.Y36(g.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-role-done"]],inputs:{name:"name"},decls:5,vars:2,consts:[[1,"modal-body"],[1,"message"],[1,"fa-regular","fa-circle-check"],[4,"ngIf"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.YNc(3,m,2,0,"h3",3),e.YNc(4,c,2,0,"h3",3),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"==o.name),e.xp6(1),e.Q6J("ngIf","add"!=o.name))},dependencies:[d.O5],styles:[".message[_ngcontent-%COMP%]{text-align:center;padding:30px 10px}.message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:90px;color:#75b878;margin-bottom:30px}"]}),i})();var f=a(80529),y=a(69082);let I=(()=>{class i{constructor(t,o){this.http=t,this.sharedService=o,this.apiUrl=this.sharedService.getUrl}getRoles(t,o,n){return this.http.get(this.apiUrl+`Roles/GetRoles?Name=${t}&Sort=${o}&PageNo=${n}&PageSize=6`,this.sharedService.getHeaders())}getDefaultPermissions(){return this.http.get(this.apiUrl+"Permissions/GetDefaultPermissions?Status=2001",this.sharedService.getHeaders())}AddRole(t){return this.http.post(this.apiUrl+"Roles/AddRole",t,this.sharedService.getHeaders())}UpdateRole(t){return this.http.post(this.apiUrl+"Roles/UpdateRole",t,this.sharedService.getHeaders())}GetRoleDetails(t){return this.http.get(this.apiUrl+`Roles/GetRoleDetails?roleId=${t}`,this.sharedService.getHeaders())}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(f.eN),e.LFG(y.F))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var A=a(97185),R=a(36690),u=a(24006),k=a(80145);function w(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.removeBranchName())}),e._UZ(1,"i",26),e.qZA()}}function S(i,s){1&i&&e._UZ(0,"span")}function M(i,s){1&i&&(e.TgZ(0,"span",30),e._uU(1," This element is required, please fill."),e.qZA())}function N(i,s){1&i&&(e.TgZ(0,"span")(1,"span",30),e._uU(2," Role name length must be between 6 and 30 characters."),e.qZA()())}function P(i,s){if(1&i&&(e.TgZ(0,"div",27),e.YNc(1,S,1,0,"span",28),e.YNc(2,M,2,0,"span",29),e.YNc(3,N,3,0,"span",28),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formValid.name.errors),e.xp6(1),e.Q6J("ngIf",t.formValid.name.errors.required),e.xp6(1),e.Q6J("ngIf",t.formValid.name.errors.minlength)}}function O(i,s){1&i&&e._UZ(0,"i",37)}function U(i,s){1&i&&e._UZ(0,"i",38)}function J(i,s){1&i&&e._UZ(0,"div",43)}function F(i,s){1&i&&e._UZ(0,"img",48)}function q(i,s){1&i&&e._UZ(0,"img",49)}function G(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",44)(1,"button",45),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).index,r=e.oxw();return e.KtG(r.editrolesList(n))}),e.YNc(2,F,1,0,"img",46),e.YNc(3,q,1,0,"img",47),e.qZA()()}if(2&i){const t=e.oxw(2).index,o=e.oxw();e.xp6(2),e.Q6J("ngIf",o.isShowpermisionsRoles&&o.catRow==t),e.xp6(1),e.Q6J("ngIf",!o.isShowpermisionsRoles||o.catRow!=t)}}function D(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"input",56),e.NdJ("change",function(n){e.CHM(t);const r=e.oxw().$implicit,l=e.oxw().$implicit,_=e.oxw(3);return e.KtG(_.pushPermissionItemId(n,l,r))}),e.qZA(),e.TgZ(2,"label",57),e._uU(3),e.qZA()()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(4);e.xp6(1),e.s9C("id",t.permissionItemId),e.Q6J("value",t.permissionItemId)("checked",o.isChecked(t.permissionItemId)),e.xp6(1),e.Q6J("for",t.permissionItemId),e.xp6(1),e.hij(" ",t.perItemName," ")}}function Y(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"input",58),e.NdJ("change",function(n){e.CHM(t);const r=e.oxw().$implicit,l=e.oxw().$implicit,_=e.oxw(3);return e.KtG(_.pushPermissionItemId(n,l,r))}),e.qZA(),e.TgZ(2,"label",57),e._uU(3),e.qZA()()}if(2&i){const t=e.oxw().$implicit,o=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.s9C("name",o.permissionSubCatId),e.s9C("id",t.permissionItemId),e.Q6J("value",t.permissionItemId)("checked",n.isChecked(t.permissionItemId)),e.xp6(1),e.s9C("for",t.permissionItemId),e.xp6(1),e.hij(" ",t.perItemName," ")}}function Q(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"input",59),e.NdJ("change",function(n){const l=e.CHM(t).$implicit,_=e.oxw().$implicit,b=e.oxw(4);return e.KtG(b.pushPermissionItemDetailId(n,l.permissionItemId,_))}),e.qZA(),e.TgZ(2,"label",57),e._uU(3),e.qZA()()}if(2&i){const t=s.$implicit,o=e.oxw().$implicit,n=e.oxw(4);e.xp6(1),e.MGl("id","d-",t.permissionItemDetailsId,""),e.Q6J("value",t.permissionItemDetailsId)("checked",n.isChecked(o.permissionItemId))("disabled",t.permissionItemId==o.permissionItemId&&!n.isChecked(o.permissionItemId)),e.xp6(1),e.MGl("for","d-",t.permissionItemDetailsId,""),e.xp6(1),e.hij(" ",t.perItemDetailsName," ")}}function E(i,s){if(1&i&&(e.TgZ(0,"div")(1,"div",52),e.YNc(2,D,4,5,"div",53),e.YNc(3,Y,4,6,"div",53),e.qZA(),e.TgZ(4,"div",54),e.YNc(5,Q,4,6,"div",55),e.qZA()()),2&i){const t=s.$implicit;e.xp6(2),e.Q6J("ngIf","View Only"==t.perItemName||"View & Edit"==t.perItemName||"View & Manage"==t.perItemName),e.xp6(1),e.Q6J("ngIf","Yes"==t.perItemName||"No"==t.perItemName),e.xp6(2),e.Q6J("ngForOf",t.permissionItemDetails)}}function K(i,s){if(1&i&&(e.TgZ(0,"div",50)(1,"div")(2,"h4"),e._uU(3),e.qZA()(),e.YNc(4,E,6,3,"div",51),e.qZA()),2&i){const t=s.$implicit;e.xp6(3),e.hij(" ",t.perSubCatName," "),e.xp6(1),e.Q6J("ngForOf",t.permissionItems)}}function B(i,s){if(1&i&&(e.TgZ(0,"div",39),e._UZ(1,"hr"),e.YNc(2,J,1,0,"div",40),e.YNc(3,G,4,2,"div",41),e.YNc(4,K,5,2,"div",42),e.qZA()),2&i){const t=e.oxw(),o=t.index,n=t.$implicit,r=e.oxw();e.xp6(2),e.Q6J("ngIf",o!=r.catRow&&r.isEdit),e.xp6(1),e.Q6J("ngIf",r.isEdit),e.xp6(1),e.Q6J("ngForOf",n.permissionSubCategories)}}function H(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"button",33),e.NdJ("click",function(){const n=e.CHM(t),r=n.$implicit,l=n.index,_=e.oxw();return e.KtG(_.collapseList(r,l))}),e.YNc(5,O,1,0,"i",34),e.YNc(6,U,1,0,"i",35),e.qZA()(),e.YNc(7,B,5,3,"div",36),e.qZA()}if(2&i){const t=s.$implicit,o=s.index,n=e.oxw();e.xp6(3),e.hij("",t.perCatName," "),e.xp6(2),e.Q6J("ngIf",o!=n.ExpandRow),e.xp6(1),e.Q6J("ngIf",o==n.ExpandRow),e.xp6(1),e.Q6J("ngIf",o==n.ExpandRow)}}function $(i,s){if(1&i&&(e.TgZ(0,"button",60),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.isEdit?"Save":"Add"," ")}}function j(i,s){1&i&&(e.TgZ(0,"button",61),e._UZ(1,"i",62),e.qZA())}const z=function(){return{standalone:!0}};let Z=(()=>{class i{constructor(t,o,n,r,l,_,b,T){this.rolesService=t,this.router=o,this.modalService=n,this.toster=r,this.route=l,this.headerService=_,this.fb=b,this.submitted=!1,this.isStatus=!0,this.isShowpermisionsRoles=!1,this.catNo=9,this.editRow=!0,T.backdrop="static",T.keyboard=!1}ngOnInit(){this.getForm(),this.roleId=this.route.snapshot.params.id,this.roleId?(this.getRoleDetails(),this.isEdit=!0,(this.isEdit=!0)&&this.headerService.setTitle("Roles > View role")):(this.headerService.setTitle("Roles > Add role"),this.getDefaultPermissions())}getForm(){this.formGroup=this.fb.group({roleId:0,name:[""],indoor:!1,outdoor:!1,status:2001,rolePermissions:this.fb.array([])})}get rolePermissions(){return this.formGroup.controls.rolePermissions}get formValid(){return this.formGroup.controls}AddRolePermissions(){return this.fb.group({permissionSubCatId:[""],permissionItemId:0,permissionItemDetailId:0})}getDefaultPermissions(){return this.rolesService.getDefaultPermissions().subscribe(t=>{t&&(this.roles=t.data)})}getRoleDetails(){return this.rolesService.GetRoleDetails(this.roleId).subscribe(t=>{if(t){this.roles=t.data.permissions,this.formGroup.patchValue(t.data),this.isStatus=2001==this.formGroup.get("status")?.value,console.log("selected",this.roles?.permissionSubCategories);for(let o=0;o<this.roles?.length;o++)for(let n=0;n<this.roles[o]?.permissionSubCategories?.length;n++)for(let r=0;r<this.roles[o].permissionSubCategories[n].permissionItems?.length;r++)if(1==this.roles[o].permissionSubCategories[n].permissionItems[r].selected){this.rolePermissions.push(this.fb.group({permissionSubCatId:this.roles[o].permissionSubCategories[n].permissionSubCatId,permissionItemId:this.roles[o].permissionSubCategories[n].permissionItems[r].permissionItemId}));for(let l=0;l<this.roles[o].permissionSubCategories[n].permissionItems[r].permissionItemDetails?.length;l++)1==this.roles[o].permissionSubCategories[n].permissionItems[r].permissionItemDetails[l].selected&&this.rolePermissions.push(this.fb.group({permissionSubCatId:this.roles[o].permissionSubCategories[n].permissionSubCatId,permissionItemId:this.roles[o].permissionSubCategories[n].permissionItems[r].permissionItemId,permissionItemDetailId:this.roles[o].permissionSubCategories[n].permissionItems[r].permissionItemDetails[l].permissionItemDetailsId}))}setTimeout(()=>{console.log(this.formGroup.value)},2e3)}})}onSubmit(){if(this.submitted=!0,this.formGroup.get("name")?.patchValue(this.formGroup.get("name")?.value.trim()),this.formGroup.invalid)return window.scroll(0,0);const t=this.formGroup.value.rolePermissions.forEach(o=>{0==o.permissionItemDetailId&&delete o.permissionItemDetailId});console.log(t),console.log(this.formGroup.value),0==this.formGroup.get("roleId")?.value?this.AddRole():this.UpdateRole()}AddRole(){return this.isLoading=!0,console.log(this.formGroup.value),this.rolesService.AddRole(this.formGroup.value).subscribe(t=>{1==t.isSuccess?(this.isLoading=!1,console.log(t),this.modalService.open(C).componentInstance.name="add"):(this.isLoading=!1,this.errorsList=t.Errors||t.errors)},t=>{this.isLoading=!1,console.log(t),this.errorMessage=t.statusText})}UpdateRole(){return this.isLoading=!0,console.log(this.formGroup.value),this.rolesService.UpdateRole(this.formGroup.value).subscribe(t=>{1==t.isSuccess?(console.log(t),this.modalService.open(C).componentInstance.name="edit",this.isLoading=!1,this.isShowpermisionsRoles=!1):(this.isLoading=!1,this.errorsList=t.Errors||t.errors)},t=>{this.isLoading=!1,console.log(t),this.errorMessage=t.statusText})}removeBranchName(){this.formGroup.get("name")?.patchValue("")}chooseStatus(){this.isStatus=0==this.isStatus,1==this.isStatus?(console.log(this.isStatus),this.formGroup.get("status")?.patchValue(2002)):this.formGroup.get("status")?.patchValue(2001)}pushPermissionItemId(t,o,n){console.log(o),console.log(n);let r=this.formGroup.value.rolePermissions.findIndex(l=>l.permissionItemId===n.permissionItemId);this.formGroup.value.rolePermissions.forEach(l=>{console.log(l.permissionSubCatId);let _=this.formGroup.value.rolePermissions.findIndex(b=>b.permissionSubCatId===o.permissionSubCatId);-1!==_&&(console.log("PSubCatId",_),this.formGroup.get("rolePermissions").removeAt(_))}),-1!==r?(console.log("isExist",r),this.formGroup.get("rolePermissions").removeAt(r)):(this.rolePermissions.push(this.fb.group({permissionSubCatId:o.permissionSubCatId,permissionItemId:n.permissionItemId,permissionItemDetailId:0})),n.permissionItemDetails.forEach(l=>{this.rolePermissions.push(this.fb.group({permissionSubCatId:o.permissionSubCatId,permissionItemId:n.permissionItemId,permissionItemDetailId:l.permissionItemDetailsId}))})),console.log(this.formGroup.value)}isChecked(t){return this.formGroup.value.rolePermissions.find(o=>o.permissionItemId===t)}pushPermissionItemDetailId(t,o,n){let r=this.formGroup.value.rolePermissions.findIndex(l=>l.permissionItemDetailId===t.target.value||l.permissionItemDetailId===Number(t.target.value));-1!==r?(console.log("isExist",r),this.formGroup.get("rolePermissions").removeAt(r)):this.rolePermissions.push(this.fb.group({permissionItemId:n.permissionItemId,permissionItemDetailId:Number(t.target.value)})),console.log(this.formGroup.value)}collapseList2(t,o){console.log(t,o),this.isCollapse=!0,this.isIndex=t}collapseList(t,o){this.isShowpermisionsRoles=!1,this.catRow=55,this.ExpandRow=null==this.ExpandRow||this.ExpandRow!=o?o:void 0}editrolesList(t){if(null==this.catRow||this.catRow!=t?(this.catRow=t,this.editRow=!0):this.catRow=void 0,0==this.isShowpermisionsRoles)this.isShowpermisionsRoles=!0;else if(1==this.isShowpermisionsRoles){const o=this.modalService.open(h);o.componentInstance.name="World",o.componentInstance.semdToConfirm.subscribe(n=>{console.log("result",n),this.isShowpermisionsRoles=!1,this.modalService.dismissAll(),this.onSubmit()}),o.componentInstance.sendToClose.subscribe(n=>{console.log("resulttoclose",n),this.isShowpermisionsRoles=!1,this.modalService.dismissAll()})}}checkSpecialChar(t){var o=t;new RegExp("/^([a-zA-Z0-9_\u0600-\u06ff]).{0,30}$/").test(o)?console.log("Valid"):console.log("Invalid")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I),e.Y36(g.F0),e.Y36(p.FF),e.Y36(A._W),e.Y36(g.gz),e.Y36(R.r),e.Y36(u.qu),e.Y36(p.NM))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-roles"]],decls:39,vars:9,consts:[[1,"card-page"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-12"],[1,"card-form","py-3","overflow-hidden","position-relative"],[1,"col-md-4"],[1,"form-group","overflow-hidden","position-relative","mb-0"],["formControlName","name","name","name","type","text","placeholder","Type...","required","","minlength","6","maxlength","30","OnlyCharacter","","autocomplete","off",1,"form-control",3,"keypress"],["class","btn btn-remove",3,"click",4,"ngIf"],["class","ng-dirty",4,"ngIf"],[1,"d-flex","justify-content-end","align-items-center","pt30"],[1,"form-check","form-check-inline"],["type","checkbox","id","indoor","value","option1","formControlName","indoor",1,"form-check-input"],["for","indoor",1,"form-check-label"],["type","checkbox","id","outdoor","value","option2","formControlName","outdoor",1,"form-check-input"],["for","outdoor",1,"form-check-label"],[1,"form-check","form-switch",2,"margin-top","-16px"],[1,"labelactive"],["name","isStatus","type","checkbox","role","switch",1,"form-check-input",3,"ngModel","ngModelOptions","ngModelChange","change"],[1,"page-title"],["class","main-category mt-0",4,"ngFor","ngForOf"],[1,"btns-group"],["type","button",1,"btn","btn-cancel"],["type","submit","class","btn btn-save",4,"ngIf"],["type","button","class","btn btn-save btn-load","disabled","",4,"ngIf"],[1,"btn","btn-remove",3,"click"],[1,"fa-solid","fa-xmark"],[1,"ng-dirty"],[4,"ngIf"],["class","error",4,"ngIf"],[1,"error"],[1,"main-category","mt-0"],[1,"cat-head"],["type","button",1,"btn","btn-book",3,"click"],["class","fa-solid fa-chevron-down",4,"ngIf"],["class","fa-solid fa-chevron-up",4,"ngIf"],["class","bodyroles",4,"ngIf"],[1,"fa-solid","fa-chevron-down"],[1,"fa-solid","fa-chevron-up"],[1,"bodyroles"],["class","overlay-ba",4,"ngIf"],["class","edit-btn float-end",4,"ngIf"],["class","cat-list",4,"ngFor","ngForOf"],[1,"overlay-ba"],[1,"edit-btn","float-end"],["type","button",1,"btn",3,"click"],["src","assets/images/save.png","class","save-img","alt","",4,"ngIf"],["src","assets/images/edit.png","alt","",4,"ngIf"],["src","assets/images/save.png","alt","",1,"save-img"],["src","assets/images/edit.png","alt",""],[1,"cat-list"],[4,"ngFor","ngForOf"],[1,"cat-sub"],["class","form-check form-check-inline",4,"ngIf"],[1,"sub-details"],["class","form-check form-check-inline",4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input",3,"id","value","checked","change"],[1,"form-check-label",3,"for"],["type","radio",1,"form-check-input",3,"name","id","value","checked","change"],["type","checkbox",1,"form-check-input",3,"value","id","checked","disabled","change"],["type","submit",1,"btn","btn-save"],["type","button","disabled","",1,"btn","btn-save","btn-load"],[1,"fa-solid","fa-circle-notch","fa-spin"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",2)(6,"div",5)(7,"div",6)(8,"label"),e._uU(9,"Role Name *"),e.qZA(),e.TgZ(10,"input",7),e.NdJ("keypress",function(r){return o.checkSpecialChar(r)}),e.qZA(),e.YNc(11,w,2,0,"button",8),e.YNc(12,P,4,3,"div",9),e.qZA()(),e._UZ(13,"div",5),e.TgZ(14,"div",5)(15,"div",10)(16,"div",11),e._UZ(17,"input",12),e.TgZ(18,"label",13),e._uU(19," Indoor "),e.qZA()(),e.TgZ(20,"div",11),e._UZ(21,"input",14),e.TgZ(22,"label",15),e._uU(23," Outdoor "),e.qZA()(),e.TgZ(24,"div",16)(25,"label",17),e._uU(26,"Active "),e.qZA(),e.TgZ(27,"input",18),e.NdJ("ngModelChange",function(r){return o.isStatus=r})("change",function(){return o.chooseStatus()}),e.qZA()()()()()()(),e.TgZ(28,"div",3)(29,"div",19)(30,"h3"),e._uU(31," Default Permissions "),e.qZA()(),e.YNc(32,H,8,4,"div",20),e.qZA(),e.TgZ(33,"div",3)(34,"div",21)(35,"button",22),e._uU(36,"Cancel"),e.qZA(),e.YNc(37,$,2,1,"button",23),e.YNc(38,j,2,0,"button",24),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.formGroup),e.xp6(10),e.Q6J("ngIf",o.formGroup.get("name").value),e.xp6(1),e.Q6J("ngIf",o.submitted&&o.formValid.name.invalid||o.formValid.name.invalid&&(o.formValid.name.dirty||o.formValid.name.touched)),e.xp6(15),e.Q6J("ngModel",o.isStatus)("ngModelOptions",e.DdM(8,z)),e.xp6(5),e.Q6J("ngForOf",o.roles),e.xp6(5),e.Q6J("ngIf",!o.isLoading),e.xp6(1),e.Q6J("ngIf",o.isLoading))},dependencies:[d.sg,d.O5,u._Y,u.Fj,u.Wl,u.JJ,u.JL,u.Q7,u.wO,u.nD,u.sg,u.u,u.On,k.Q],styles:[".main-category[_ngcontent-%COMP%]{background:#ffffff;border:.5px solid #c4cdd5;box-shadow:0 5px 25px #0000000d;border-radius:8px;padding:0;margin:30px}.main-category[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:0 5px 5px;color:inherit;border:0;border-top:1px solid;opacity:.25;border-color:#939393}.main-category[_ngcontent-%COMP%]   .cat-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px;align-items:center}.main-category[_ngcontent-%COMP%]   .cat-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:18px;line-height:22px;color:#1b212d}.main-category[_ngcontent-%COMP%]   .cat-head[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#dc3545;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#fff}.main-category[_ngcontent-%COMP%]   .cat-list[_ngcontent-%COMP%]{display:flex;margin-bottom:10px;padding:10px}.main-category[_ngcontent-%COMP%]   .cat-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:20px;color:#1b212d;padding:15px;width:170px}.main-category[_ngcontent-%COMP%]   .cat-sub[_ngcontent-%COMP%]{width:140px}.main-category[_ngcontent-%COMP%]   .cat-sub[_ngcontent-%COMP%]   .form-check-inline[_ngcontent-%COMP%]{display:inline-block;margin-right:1rem;padding:13px 20px}.main-category[_ngcontent-%COMP%]   .sub-details[_ngcontent-%COMP%]{margin:5px -4px}.main-category[_ngcontent-%COMP%]   .bodyroles[_ngcontent-%COMP%]{position:relative;overflow:hidden}label[_ngcontent-%COMP%]{display:inline-block;font-size:14px;font-weight:500;color:#1b212d}.btn-remove[_ngcontent-%COMP%]{position:absolute;right:0;top:37px;color:#999}.card-form[_ngcontent-%COMP%]{box-shadow:none;border:none;margin:0}.pt30[_ngcontent-%COMP%]{padding-top:30px}.page-title[_ngcontent-%COMP%]{padding:0 10px}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#dc3545;border-color:#dc3545}.overlay-bi[_ngcontent-%COMP%], .overlay-wh[_ngcontent-%COMP%], .overlay-ba[_ngcontent-%COMP%]{background-color:#c7c7c736;position:absolute;inset:0;z-index:1}.edit-btn[_ngcontent-%COMP%]{margin:0 15px;z-index:5;position:relative}.edit-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#dc3545;font-size:28px;margin-top:-14px}.edit-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px}.edit-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}"]}),i})();var L=a(86349),V=a(28424),W=a(59442);function X(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1," Indoor "),e.qZA())}function ee(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1," Outdoor "),e.qZA())}function te(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1," Both "),e.qZA())}function oe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",29),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.YNc(6,X,2,0,"span",28),e.YNc(7,ee,2,0,"span",28),e.YNc(8,te,2,0,"span",28),e.qZA(),e.TgZ(9,"td")(10,"div",30),e._UZ(11,"input",31)(12,"label",32),e.qZA()(),e.TgZ(13,"td")(14,"button",33),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.viewRoles())}),e._uU(15,"View details "),e.qZA()()()}if(2&i){const t=s.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.noofUsers),e.xp6(2),e.Q6J("ngIf",1==t.indoor&&0==t.outdoor),e.xp6(1),e.Q6J("ngIf",1==t.outdoor&&0==t.indoor),e.xp6(1),e.Q6J("ngIf",1==t.indoor&&1==t.outdoor),e.xp6(3),e.Q6J("checked","2001"==t.status),e.xp6(3),e.MGl("routerLink","/roles/view-role/",t.roleId,"")}}function ie(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function ne(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",19)(2,"div",20)(3,"table",21)(4,"thead")(5,"tr")(6,"th",22)(7,"button",23),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sortByName())}),e._uU(8," Role Name "),e._UZ(9,"i",24)(10,"i",25),e.qZA()(),e.TgZ(11,"th",22)(12,"button",23),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sortByNoUser())}),e._uU(13," No. of Users "),e._UZ(14,"i",24)(15,"i",25),e.qZA()(),e.TgZ(16,"th",22)(17,"button",23),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sortByIndoorOutdoor())}),e._uU(18," Indoor/Outdoor "),e._UZ(19,"i",24)(20,"i",25),e.qZA()(),e.TgZ(21,"th",22)(22,"button",23),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sortByActivation())}),e._uU(23," Activation "),e._UZ(24,"i",24)(25,"i",25),e.qZA()(),e.TgZ(26,"th",22)(27,"button",26),e._uU(28," Action "),e.qZA()(),e._UZ(29,"th",22),e.qZA()(),e.TgZ(30,"tbody"),e.YNc(31,oe,16,7,"tr",27),e.qZA()()(),e.YNc(32,ie,2,0,"div",28),e.qZA()()}if(2&i){const t=s.$implicit,o=e.oxw();e.xp6(7),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",2==o.sort),e.xp6(1),e.ekj("active",3==o.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",4==o.sort),e.xp6(1),e.ekj("active",5==o.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",6==o.sort),e.xp6(1),e.ekj("active",7==o.sort),e.xp6(2),e.Q6J("disabled",0==(null==t?null:t.length)),e.xp6(2),e.ekj("active",8==o.sort),e.xp6(1),e.ekj("active",9==o.sort),e.xp6(6),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function se(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}const re=function(i){return{active:i}};function le(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"li",34)(1,"button",35),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.setPage(r))}),e._uU(2),e.qZA()()}if(2&i){const t=s.$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,re,o.pageNo===t))("disabled",o.pageNo===t),e.xp6(1),e.hij(" ",t+1," ")}}const ae=[{path:"",component:(()=>{class i{constructor(t,o,n){this.rolesService=t,this.router=o,this.headerService=n,this.searchText="",this.sort=1,this.pageNo=0}ngOnInit(){this.headerService.setTitle("Roles"),this.getRoles()}addRole(){this.router.navigateByUrl("/roles/add-role"),this.headerService.setTitle("Roles > Add role")}viewRoles(){this.headerService.setTitle("Roles > View role")}getRoles(){return this.rolesService.getRoles(this.searchText,this.sort,this.pageNo).subscribe(t=>{t&&(this.roles=t.data,this.totalRecordsCount=t.info.totalRecordsCount,this.totalRecords=t.info.totalRecordsCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=L.w6(this.pagin),console.log(this.pagin),console.log(this.pages))})}searchRoles(t){console.log(t?.target.value);const o=t.target.value;console.log(o.length),o.length>=3&&(this.searchText=o,this.pageNo=0,this.getRoles()),0==o.length&&this.getRoles()}removeSearch(){this.searchText="",this.sort=1,this.getRoles()}sortByName(){this.sort=3==this.sort?1:2==this.sort?3:2,this.getRoles()}sortByNoUser(){this.sort=5==this.sort?1:4==this.sort?5:4,this.getRoles()}sortByIndoorOutdoor(){this.sort=7==this.sort?1:6==this.sort?7:6,this.getRoles()}sortByActivation(){this.sort=9==this.sort?1:8==this.sort?9:8,this.getRoles()}setPage(t){this.pageNo=t,this.getRoles(),window.scroll(0,0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I),e.Y36(g.F0),e.Y36(R.r))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-roles"]],decls:31,vars:10,consts:[[1,"card-page"],[1,"row"],[1,"col-md-5"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"col-md-2","d-flex","justify-content-end","btnadd"],[1,"btn","btn-add",3,"click"],["src","assets/images/plus.png","alt",""],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[1,"col-md-6",3,"hidden"],[1,"showing"],[1,"pagination"],["class","page-item",4,"ngFor","ngForOf"],[1,"card-table"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn"],[4,"ngFor","ngForOf"],[4,"ngIf"],["scope","row"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","flexSwitchCheckChecked","readonly","","disabled","",1,"form-check-input",3,"checked"],["for","flexSwitchCheckChecked",1,"form-check-label"],[1,"btn","btn-view",3,"routerLink","click"],[1,"page-item"],[1,"page-link",3,"ngClass","disabled","click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return o.removeSearch()}),e._UZ(5,"i",5),e.qZA(),e.TgZ(6,"input",6),e.NdJ("ngModelChange",function(r){return o.searchText=r})("keyup",function(r){return o.searchRoles(r)}),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){return o.removeSearch()}),e._UZ(8,"i",8),e.qZA()()(),e._UZ(9,"div",2),e.TgZ(10,"div",9)(11,"button",10),e.NdJ("click",function(){return o.addRole()}),e._UZ(12,"img",11),e._uU(13," Add Role "),e.qZA()()(),e.TgZ(14,"div",1),e.YNc(15,ne,33,22,"div",12),e.TgZ(16,"div",13),e.YNc(17,se,2,0,"ng-template",null,14,e.W1O),e.qZA(),e.TgZ(19,"div",15)(20,"h6",16),e._uU(21," Showing "),e.TgZ(22,"span"),e._uU(23),e.qZA(),e._uU(24," from "),e.TgZ(25,"span"),e._uU(26),e.qZA(),e._uU(27," data "),e.qZA()(),e.TgZ(28,"div",15)(29,"ul",17),e.YNc(30,le,3,5,"li",18),e.qZA()()()()),2&t){const n=e.MAs(18);e.xp6(6),e.Q6J("ngModel",o.searchText),e.xp6(1),e.Q6J("hidden",0==o.searchText.length),e.xp6(8),e.Q6J("ngIf",o.roles)("ngIfElse",n),e.xp6(4),e.Q6J("hidden",(null==o.roles?null:o.roles.length)>7),e.xp6(4),e.AsE(" ",6*(o.pageNo+1)-5," - ",6==(null==o.roles?null:o.roles.length)?6*(o.pageNo+1):o.totalRecords," "),e.xp6(3),e.hij(" ",o.totalRecords," "),e.xp6(2),e.Q6J("hidden",o.totalRecordsCount<7),e.xp6(2),e.Q6J("ngForOf",o.pages)}},dependencies:[d.mk,d.sg,d.O5,g.rH,u.Fj,u.JJ,u.On,V.N,W.w]}),i})()},{path:"add-role",component:Z},{path:"view-role/:id",component:Z}];let ce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(ae),g.Bz]}),i})();var de=a(21515);let pe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,ce,de.m]}),i})()},59442:(x,v,a)=>{a.d(v,{w:()=>g});var d=a(94650);let g=(()=>{class e{}return e.\u0275fac=function(h){return new(h||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-not-found"]],decls:3,vars:0,consts:[[1,"not-found"]],template:function(h,m){1&h&&(d.TgZ(0,"div",0)(1,"p"),d._uU(2," No data to display "),d.qZA()())},styles:[".not-found[_ngcontent-%COMP%]{text-align:center;padding:10%}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c9c9d1;font-size:16px;font-weight:600}"]}),e})()},80145:(x,v,a)=>{a.d(v,{O:()=>e,Q:()=>g});var d=a(94650);let g=(()=>{class p{constructor(m){this.el=m}onKeyDown(m){[8,9,13,27,46].indexOf(m.keyCode)}onKeyup(m){this.validateFields(m)}blockPaste(m){this.validateFields(m)}validateFields(m){this.el.nativeElement.value=this.el.nativeElement.value.replace(/[^A-Za-z\u0621-\u064a ]/g,""),m.preventDefault()}}return p.\u0275fac=function(m){return new(m||p)(d.Y36(d.SBq))},p.\u0275dir=d.lG2({type:p,selectors:[["","OnlyCharacter",""]],hostBindings:function(m,c){1&m&&d.NdJ("keydown",function(f){return c.onKeyDown(f)})("keyup",function(f){return c.onKeyup(f)})("paste",function(f){return c.blockPaste(f)})},inputs:{validationFieldsType:"validationFieldsType"}}),p})();function e(p){return p.replace(/[^A-Za-z\u0621-\u064a ]/g,"")}}}]);