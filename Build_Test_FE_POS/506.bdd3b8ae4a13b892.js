"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[506],{80506:(M,T,s)=>{s.r(T),s.d(T,{CloseRegisterModule:()=>hn});var l=s(36895),m=s(39485),c=s(24006),e=s(94650),p=s(32298),u=s(15070),d=s(1618),g=s(42953),_=s(75304),x=s(94349),v=s(96603),Z=s(80145),C=s(67761);const A=["fileInput"];function f(o,a){1&o&&(e.TgZ(0,"span",32),e._uU(1,"Input is required"),e.qZA())}function b(o,a){1&o&&(e.TgZ(0,"span",32),e._uU(1,"Input allows only digits"),e.qZA())}function N(o,a){if(1&o&&(e.ynx(0),e.YNc(1,f,2,0,"span",31),e.YNc(2,b,2,0,"span",31),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.formValid.ChequeNo||null==t.formValid.ChequeNo.errors?null:t.formValid.ChequeNo.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formValid.ChequeNo||null==t.formValid.ChequeNo.errors?null:t.formValid.ChequeNo.errors.pattern)}}function F(o,a){if(1&o&&(e.ynx(0),e.YNc(1,N,3,2,"ng-container",15),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==t.formValid.ChequeNo?null:t.formValid.ChequeNo.invalid)&&(null==t.formValid.ChequeNo?null:t.formValid.ChequeNo.touched)||(null==t.formValid.ChequeNo?null:t.formValid.ChequeNo.dirty))}}function G(o,a){1&o&&(e.TgZ(0,"span",32),e._uU(1," Bank is required. "),e.qZA())}function E(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,G,2,0,"span",31),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formValid.BankId.errors.required)}}function R(o,a){1&o&&(e.TgZ(0,"div",32),e._uU(1," Name is required "),e.qZA())}function Q(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,R,2,0,"div",31),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formValid.ChequeDrawerName.errors.required)}}function Y(o,a){1&o&&(e.TgZ(0,"div",32),e._uU(1," Date is required"),e.qZA())}function j(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Y,2,0,"div",31),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formValid.ChequeDate.errors.required)}}function z(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",33)(2,"label",34),e._uU(3),e.qZA(),e.TgZ(4,"div",35)(5,"img",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.fileAction("view"))}),e.qZA(),e.TgZ(6,"img",37),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.fileAction("delete"))}),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(3),e.Oqu(t.fileName)}}function L(o,a){if(1&o&&(e.TgZ(0,"small",38),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.invalidFileType)}}function V(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"div",39)(2,"label"),e._uU(3,"Previous Cheque Image"),e.qZA(),e._UZ(4,"view-file",40),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("file",null==t.details?null:t.details.chequeImage)}}function K(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"form",7),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSubmit())}),e.TgZ(2,"div",8)(3,"div",9)(4,"div",10)(5,"label"),e._uU(6,"Amount JOD"),e.qZA(),e._UZ(7,"input",11),e.qZA()(),e.TgZ(8,"div",12)(9,"div",10)(10,"label"),e._uU(11,"Currency"),e.qZA(),e._UZ(12,"input",13),e.qZA()(),e.TgZ(13,"div",12)(14,"div",10)(15,"label"),e._uU(16,"Amount"),e.qZA(),e._UZ(17,"input",13),e.ALo(18,"number"),e.qZA()(),e.TgZ(19,"div",9)(20,"div",10)(21,"label"),e._uU(22,"Cheque No. "),e.qZA(),e._UZ(23,"input",14),e.YNc(24,F,2,1,"ng-container",15),e.qZA()(),e.TgZ(25,"div",9)(26,"div",10)(27,"label"),e._uU(28,"Bank"),e.qZA(),e._UZ(29,"ng-select",16),e.YNc(30,E,2,1,"div",15),e.qZA()(),e.TgZ(31,"div",9)(32,"div",10)(33,"label"),e._uU(34,"Cheque Drawer name "),e.qZA(),e._UZ(35,"input",17),e.YNc(36,Q,2,1,"div",15),e.qZA()(),e.TgZ(37,"div",9)(38,"div",10)(39,"label"),e._uU(40,"Date * "),e.qZA(),e._UZ(41,"input",18),e.YNc(42,j,2,1,"div",15),e.qZA()(),e.TgZ(43,"div",19)(44,"label"),e._uU(45,"Cheque Image"),e.qZA(),e.TgZ(46,"div",20)(47,"div",21),e.NdJ("files",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.filesDropped(i))})("enter",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.enter=!i.enter)})("leave",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.enter=!i.enter)})("click",function(){e.CHM(t);const i=e.MAs(55);return e.KtG(i.click())}),e.TgZ(48,"div",22),e._UZ(49,"img",23),e.TgZ(50,"h5"),e._uU(51,"Select OR Drag & drop files"),e.qZA(),e.TgZ(52,"p"),e._uU(53,"Supported formates: JPEG, PNG, PDF"),e.qZA()()(),e.TgZ(54,"input",24,25),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onSelectFile(i))}),e.qZA()(),e.YNc(56,z,7,1,"ng-container",15),e.YNc(57,L,2,1,"small",26),e.YNc(58,V,5,1,"ng-container",15),e.qZA(),e.TgZ(59,"div",27)(60,"div",28)(61,"button",29),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeModal.close("Close click"))}),e._uU(62,"Cancel"),e.qZA(),e.TgZ(63,"button",30),e._uU(64," Submit "),e.qZA()()()()()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.formGroup),e.xp6(11),e.s9C("value",null==t.details||null==t.details.currency[0]?null:t.details.currency[0].lookupName),e.xp6(5),e.s9C("value",e.xi3(18,11,null==t.details?null:t.details.collectedAmount,"2.3-3")),e.xp6(7),e.Q6J("ngIf",null==t.formValid.ChequeNo?null:t.formValid.ChequeNo.errors),e.xp6(5),e.Q6J("items",t.banks),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formValid.BankId.invalid||t.formValid.BankId.invalid),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formValid.ChequeDrawerName.invalid||t.formValid.ChequeDrawerName.invalid),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formValid.ChequeDate.invalid||t.formValid.ChequeDate.invalid),e.xp6(14),e.Q6J("ngIf",t.fileName),e.xp6(1),e.Q6J("ngIf",t.invalidFileType),e.xp6(1),e.Q6J("ngIf",null==t.details?null:t.details.chequeImage)}}function H(o,a){if(1&o&&(e.TgZ(0,"div",41)(1,"h5"),e._UZ(2,"i",42),e._uU(3),e.qZA()()),2&o){const t=e.oxw();e.xp6(3),e.hij(" ",t.message,"")}}let S=(()=>{class o{constructor(t,n,i,r,h,k,q,U){this.closeRegisterService=t,this._registerSettlementService=n,this.activeModal=i,this.modalService=r,this.fb=h,this.datePipe=k,this.router=q,this._commonService=U,this.loadMainData=new e.vpe,this.loadPageData=new e.vpe,this.fileName="",this.invalidFileType=""}ngOnInit(){this.getForm(),this.getBanks(),this.details&&(console.log(this.details),this.formGroup.get("ChequeCollectionId").patchValue(this.details.chequeCollectionId),this.formGroup.get("ChequeCollectionJod").patchValue(this._commonService.transformDecimal(this.details.chequeCollectionJod)),this.formGroup.get("BankId").patchValue(this.details.bankId),this.formGroup.get("ChequeDrawerName").patchValue(this.details.chequeDrawerName),this.formGroup.get("ChequeNo").patchValue(this.details.chequeNo),this.formGroup.get("ChequeDate").patchValue(this.datePipe.transform(this.details.chequeDate,"yyyy-MM-dd")))}getForm(){this.formGroup=this.fb.group({ChequeCollectionId:0,ChequeCollectionJod:[""],ChequeDate:[""],BankId:"",ChequeDrawerName:[""],ChequeNo:["",[c.kI.required,c.kI.pattern("^[0-9]*$")]]})}get formValid(){return this.formGroup.controls}onSubmit(){if(this.submitted=!0,console.log(this.submitted),this.formGroup.invalid)return this.formGroup.markAllAsTouched(),window.scroll(0,0);const t=new FormData;return t.append("ChequeCollectionId",this.formGroup.get("ChequeCollectionId")?.value),t.append("ChequeCollectionJod",this.formGroup.get("ChequeCollectionJod")?.value),t.append("ChequeDate",this.formGroup.get("ChequeDate")?.value),t.append("BankId",this.formGroup.get("BankId")?.value),t.append("ChequeDrawerName",this.formGroup.get("ChequeDrawerName")?.value),t.append("ChequeNo",this.formGroup.get("ChequeNo")?.value),console.log(this.formGroup.value),console.log(t),this.closeRegisterService.EditCollectionCheuqe(t).subscribe(n=>{console.log(n),1==n.isSuccess&&(this.type="success",this.message="Edit done successfully",this.uploadedFile?.file&&this.addSettleCheckImage(),setTimeout(()=>{this.modalService.dismissAll(),this.toLoadData()},2e3),console.log(n))},n=>{})}toLoadData(){this.loadPageData.emit()}getBanks(){this.closeRegisterService.getLookupsById(11).subscribe(t=>{this.banks=t.data.map(n=>({id:n.id,name:n.name[0].lookupName}))},t=>{})}addSettleCheckImage(){let t=new FormData;t.append("chequeCollectionId",this.formGroup.controls.ChequeCollectionId.value),t.append("Image",this.uploadedFile?.file),this._registerSettlementService.addSettledChequesImages(t).subscribe(n=>{console.log(n)})}fileAction(t){"view"==t?this.modalService.open(p.g,{size:"md"}).componentInstance.imageUploadedView=this.uploadedFile:(this.inputFile.nativeElement.value=null,this.fileName="",this.uploadedFile={})}filesDropped(t){this.enter=!1;let n=this._commonService.checkInvalidImageFormat(t,!0).invalidExtentions;if(this.invalidFileType=this._commonService.checkInvalidImageFormat(t,!0).invalidError,n)return void(this.inputFile.nativeElement.value=null);let i=t.map(r=>r.file);n||i.forEach(r=>{this.fileName=r.name,this._commonService.fileToBase64(r).then(h=>{this.uploadedFile=h})})}onSelectFile(t){let n=[...t.target.files],i=this._commonService.checkInvalidImageFormat(n,!0).invalidExtentions;this.invalidFileType=this._commonService.checkInvalidImageFormat(n,!0).invalidError,i?this.inputFile.nativeElement.value=null:n.length>0&&(i||n.forEach(r=>{this.fileName=r.name,this._commonService.fileToBase64(r).then(h=>{this.uploadedFile=h})}))}removeFile(t){this.inputFile.nativeElement.value=null,this.fileName="",this.uploadedFile=null}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.x),e.Y36(d.D),e.Y36(g.Kz),e.Y36(g.FF),e.Y36(c.qu),e.Y36(l.uU),e.Y36(m.F0),e.Y36(_.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-edit"]],viewQuery:function(t,n){if(1&t&&e.Gf(A,5),2&t){let i;e.iGM(i=e.CRH())&&(n.inputFile=i.first)}},inputs:{details:"details"},outputs:{loadMainData:"loadMainData",loadPageData:"loadPageData"},features:[e._Bn([l.uU])],decls:10,vars:3,consts:[[1,"modal-body"],[1,"modal-head"],[1,"fw-500"],[1,"px-2"],["class","card-form",4,"ngIf"],["class","message",4,"ngIf"],[1,"card-form"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["type","text","placeholder","500 JD","formControlName","ChequeCollectionJod","name","ChequeCollectionJod","readonly","",1,"form-control"],[1,"col-md-3"],["type","text","readonly","",1,"form-control",3,"value"],["name","name","type","text","placeholder","Cheque No.","formControlName","ChequeNo","required","",1,"form-control"],[4,"ngIf"],["id","BankId","placeholder"," Select bank ","bindLabel","name","bindValue","id","formControlName","BankId","name","BankId","required","",3,"items"],["name","name","type","text","placeholder","Cheque Drawer name","formControlName","ChequeDrawerName","name","ChequeDrawerName","OnlyCharacter","","readonly","","required","",1,"form-control"],["type","date","placeholder","","formControlName","ChequeDate","name","ChequeDate","required","",1,"form-control"],[1,"col-sm-6"],[1,"form-group","mb-3"],["appImageDrag","","accept",".png,.jpg,.jpeg,.pdf",1,"card-upload",3,"files","enter","leave","click"],[1,"my-3"],["src","assets/images/upload.png","alt",""],["type","file","id","chequeFile","accept",".png,.jpg,.jpeg,.pdf","hidden","",1,"form-control",3,"change"],["fileInput",""],["class","text-danger",4,"ngIf"],[1,"col-md-12"],[1,"btns-group","my-2"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save"],["class","error",4,"ngIf"],[1,"error"],[1,"d-flex","gap-3","file-item","align-items-center","justify-content-between","mb-2"],[1,"p-0"],[1,"d-flex","gap-2"],["height","20","src","assets/images/eye.png",1,"cursor-pointer",3,"click"],["height","20","src","assets/images/trash.png",1,"cursor-pointer",3,"click"],[1,"text-danger"],[1,"mt-2"],[3,"file"],[1,"message"],[1,"fa-regular","fa-circle-check"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Edit Cheque "),e.qZA(),e.TgZ(4,"p"),e._uU(5," Customer name "),e.TgZ(6,"b",3),e._uU(7),e.qZA()()(),e.YNc(8,K,65,14,"div",4),e.YNc(9,H,4,1,"div",5),e.qZA()),2&t&&(e.xp6(7),e.hij(" ",n.details.chequeCustomer," "),e.xp6(1),e.Q6J("ngIf",!n.type),e.xp6(1),e.Q6J("ngIf",n.type&&"success"==n.type))},dependencies:[l.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.sg,c.u,x.w9,v.z,Z.Q,C.g,l.JJ],styles:[".card-form[_ngcontent-%COMP%]{background:#ffffff;border:0px solid #c4cdd5;box-shadow:none;border-radius:8px;margin:0;padding:0}.modal-head[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid #ddd}.modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#1b212d}.modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#1b212d}.modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#929eae}.message[_ngcontent-%COMP%]{text-align:center}.message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#1b212d;margin:0;padding:20px}.message[_ngcontent-%COMP%]   .fa-circle-check[_ngcontent-%COMP%]{color:#25bb00;font-size:28px;vertical-align:middle;margin:2px 10px 5px}.message[_ngcontent-%COMP%]   .fa-circle-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:28px;vertical-align:middle;margin:2px 10px 5px}.card-upload[_ngcontent-%COMP%]{border:1px dashed #939aa8;text-align:center;padding:10px;border-radius:10px;margin:10px 0;cursor:pointer}.card-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;margin-bottom:15px}.card-upload[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;font-size:18px;color:#0f0f0f}.card-upload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:18px;color:#676767}.file-item[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid #dadada;background:white}.file-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:1;color:green;font-weight:600}"]}),o})();function $(o,a){if(1&o&&(e.TgZ(0,"p"),e._uU(1,"Your Register Closing is completed "),e._UZ(2,"br"),e._uU(3),e.qZA()),2&o){const t=e.oxw(2);e.xp6(3),e.hij(" successfully, you have ",t.remainedSessions," session")}}function W(o,a){1&o&&(e.TgZ(0,"p"),e._uU(1,"Your Closing is completed successfully"),e.qZA())}function X(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.openNewSession())}),e._uU(1,"Open New Session"),e.qZA()}}function ee(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div"),e._UZ(2,"i",2),e.qZA(),e.TgZ(3,"h3"),e._uU(4," Successfully Closed!"),e.qZA(),e.YNc(5,$,4,1,"p",3),e.YNc(6,W,2,0,"p",3),e.TgZ(7,"div",4),e.YNc(8,X,2,0,"button",5),e.TgZ(9,"button",6),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.logOut(),e.KtG(i.activeModal.close("Close click"))}),e._uU(10," Back to portal "),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",0!=t.remainedSessions),e.xp6(1),e.Q6J("ngIf",0==t.remainedSessions),e.xp6(2),e.Q6J("ngIf",0!=t.remainedSessions)}}function te(o,a){if(1&o&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.ErrorMessageEn||t.errorMessageEn," ")}}function ne(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div"),e._UZ(2,"i",8),e.qZA(),e._UZ(3,"br"),e.YNc(4,te,2,1,"h5",9),e.TgZ(5,"div",10)(6,"div",11)(7,"button",6),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.backToStepTwo())}),e._uU(8," Back "),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.messageError)}}let J=(()=>{class o{constructor(t,n,i){this.router=t,this.modalService=n,this.activeModal=i,this.backToSecond=new e.vpe}ngOnInit(){}openNewSession(){this.router.navigate(["/opening-register"]),this.modalService.dismissAll()}backToStepTwo(){this.backToSecond.emit()}logOut(){localStorage.removeItem("fullName"),localStorage.removeItem("role"),localStorage.removeItem("userid"),localStorage.removeItem("branch"),localStorage.removeItem("city"),localStorage.removeItem("register"),localStorage.removeItem("token"),localStorage.removeItem("permissions"),sessionStorage.removeItem("token"),sessionStorage.removeItem("id"),this.redirectUser()}redirectUser(){let t=window.location.host;t.indexOf("dxpos.markaziaapis.com")>=0?window.location.href="https://portal.markaziahub.com":t.indexOf("dxtestpos.markaziaapis.com")>=0?window.location.href="https://dxtestportal.markaziahub.com":t.indexOf("localhost:4200")>=0&&(window.location.href="https://dxdevportal.markaziahub.com")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.F0),e.Y36(g.FF),e.Y36(g.Kz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-close"]],inputs:{name:"name",type:"type",message:"message",messageError:"messageError",routeName:"routeName",remainedSessions:"remainedSessions"},outputs:{backToSecond:"backToSecond"},decls:2,vars:2,consts:[["class","message",4,"ngIf"],[1,"message"],[1,"fa-regular","fa-circle-check"],[4,"ngIf"],[1,"btns-group"],["type","button","class","btn btn-save mb-2",3,"click",4,"ngIf"],["type","button",1,"btn","btn-cancel",3,"click"],["type","button",1,"btn","btn-save","mb-2",3,"click"],[1,"fa-regular","fa-circle-xmark"],[4,"ngFor","ngForOf"],[1,""],[1,"btns-group","my-2"]],template:function(t,n){1&t&&(e.YNc(0,ee,11,3,"div",0),e.YNc(1,ne,9,1,"div",0)),2&t&&(e.Q6J("ngIf","success"==n.type),e.xp6(1),e.Q6J("ngIf","error"==n.type))},dependencies:[l.sg,l.O5],styles:[".message[_ngcontent-%COMP%]{padding:15px;text-align:center}.message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;font-size:20px;color:#54595e;margin:0;padding:20px}.message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#54595e;margin:0;padding:0}.message[_ngcontent-%COMP%]   .fa-circle-check[_ngcontent-%COMP%]{color:#25bb00;font-size:45px;vertical-align:middle;margin:30px 10px 15px}.message[_ngcontent-%COMP%]   .fa-circle-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:28px;vertical-align:middle;margin:2px 10px 5px}.btns-group[_ngcontent-%COMP%]{display:initial}.btns-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:300px;display:block;margin:0 auto}.btns-group[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#ffffff!important;color:#dc3545;border-radius:10px;padding:12px 35px;font-weight:600;border:1px solid #dc3545}"]}),o})();var y=s(69082),oe=s(36690),ie=s(79345),le=s(29444),w=s(28424),ae=s(55134),O=s(86349),P=s(59442);function re(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.ReverseActionsOnCheques(i))}),e._uU(1," Undo "),e._UZ(2,"img",25),e.qZA()}}function ce(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.ActionsOnCheques(i,"right"))}),e._UZ(1,"i",27),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled","right"==t.performedAction||"edit"==t.performedAction)}}function se(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.ActionsOnCheques(i,"wrong"))}),e._UZ(1,"i",29),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled","wrong"==t.performedAction)}}function de(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.openModalEdit(i))}),e._UZ(1,"i",31),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled","edit"==t.performedAction)}}function ue(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e.YNc(20,re,3,0,"button",20),e.YNc(21,ce,2,1,"button",21),e.YNc(22,se,2,1,"button",22),e.YNc(23,de,2,1,"button",23),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",t.chequeCustomer,""),e.xp6(2),e.hij(" ",t.lastChequeNo?t.lastChequeNo:t.chequeNo,""),e.xp6(2),e.hij(" ",e.xi3(7,11,(null==t?null:t.chequeCollectionJod)||(null==t?null:t.lastAmountToPay),"2.3-3")," JOD"),e.xp6(3),e.hij(" ",null==t||null==t.currency[0]?null:t.currency[0].lookupName,""),e.xp6(2),e.hij(" ",e.xi3(12,14,null==t?null:t.collectedAmount,"2.3-3"),""),e.xp6(3),e.hij(" ",t.lastCheckDate?e.xi3(15,17,t.lastCheckDate," d MMM y"):e.xi3(16,20,t.chequeDate," d MMM y"),""),e.xp6(4),e.hij(" ",null!=t.lastBank[0]&&t.lastBank[0].lookupName?null==t.lastBank[0]?null:t.lastBank[0].lookupName:null==t.bank[0]?null:t.bank[0].lookupName," "),e.xp6(2),e.Q6J("ngIf",1==t.actionTaken),e.xp6(1),e.Q6J("ngIf",0==t.actionTaken||"right"==t.performedAction||"edit"==t.performedAction),e.xp6(1),e.Q6J("ngIf",0==t.actionTaken||"wrong"==t.performedAction),e.xp6(1),e.Q6J("ngIf",0==t.actionTaken||"edit"==t.performedAction)}}function _e(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function pe(o,a){if(1&o&&(e.TgZ(0,"div",9)(1,"div",14)(2,"table",15)(3,"thead")(4,"tr",16)(5,"th",17),e._uU(6," Customer "),e.qZA(),e.TgZ(7,"th",17),e._uU(8," Cheque No. "),e.qZA(),e.TgZ(9,"th",17),e._uU(10," Amount JOD "),e.qZA(),e.TgZ(11,"th",17),e._uU(12," Currency "),e.qZA(),e.TgZ(13,"th",17),e._uU(14," Amount"),e.qZA(),e.TgZ(15,"th",17),e._uU(16," Date "),e.qZA(),e.TgZ(17,"th",17),e._uU(18," Bank "),e.qZA(),e.TgZ(19,"th",17),e._uU(20," Action "),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,ue,24,23,"tr",18),e.qZA()()(),e.YNc(23,_e,2,0,"div",19),e.qZA()),2&o){const t=a.$implicit;e.xp6(22),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function ge(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function me(o,a){if(1&o&&(e.TgZ(0,"div",1)(1,"h6",32),e._uU(2," Showing "),e.TgZ(3,"span"),e._uU(4),e.qZA(),e._uU(5," from "),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._uU(8," data "),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.AsE("",6*t.pageNo-5," - ",6==(null==t.collectedData?null:t.collectedData.length)?6*t.pageNo:t.totalRecordsCount,""),e.xp6(3),e.hij(" ",t.totalRecordsCount," ")}}function fe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"ngb-pagination",33),e.NdJ("pageChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.pageNo=i)})("pageChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.pageChange(i))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("collectionSize",t.totalRecordsCount)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}let Ce=(()=>{class o{constructor(t,n,i){this.closeRegisterService=t,this.sharedService=n,this.modalService=i,this.pageNo=1,this.searchText="",this.loadMainData=new e.vpe}ngOnInit(){this.GetCurrentSessionCollectedCheques()}GetCurrentSessionCollectedCheques(){return this.closeRegisterService.GetCurrentSessionCollectedCheques(this.searchText,this.pageNo).subscribe(t=>{t&&(this.collectedData=t.data,this.totalAllRecordsCount=t.info?.totalAllRecordsCount,this.totalRecordsCount=t.info?.totalRecordsCount,this.pagin=Math.ceil(this.totalRecordsCount/6),this.pages=O.w6(this.pagin))})}pageChange(t){this.pageNo=t,this.GetCurrentSessionCollectedCheques(),window.scroll(0,0)}searchData(t){const n=t.target.value;n.length>=3&&(this.searchText=n,this.pageNo=1,this.GetCurrentSessionCollectedCheques()),0==n.length&&(this.pageNo=1,this.GetCurrentSessionCollectedCheques())}removeSearch(){this.searchText="",this.GetCurrentSessionCollectedCheques()}ActionsOnCheques(t,n){const i=new FormData;return i.append("ChequeCollectionId",t.chequeCollectionId),i.append("Action",n),this.closeRegisterService.ActionsOnCheques(i).subscribe(r=>{1==r.isSuccess?this.GetCurrentSessionCollectedCheques():console.log("error",r)})}ReverseActionsOnCheques(t){const n=new FormData;return n.append("ChequeCollectionId",t.chequeCollectionId),this.closeRegisterService.ReverseActionsOnCheques(n).subscribe(i=>{1==i.isSuccess?this.GetCurrentSessionCollectedCheques():console.log("error",i)})}openModalEdit(t){const n=this.modalService.open(S,{size:"lg"});n.componentInstance.details=t,n.componentInstance.loadPageData.subscribe(i=>{this.GetCurrentSessionCollectedCheques(),this.loadMainData.emit()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.x),e.Y36(y.F),e.Y36(g.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-collect-cheque"]],outputs:{loadMainData:"loadMainData"},decls:22,vars:7,consts:[[1,"row"],[1,"col-md-6"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"top-details","justify-content-end","pt-3"],[1,"col-md-12"],[1,"card-table","mt-3"],["class","col-md-12",4,"ngIf","ngIfElse"],["loading",""],["class","col-md-6",4,"ngIf"],[1,"table-responsive"],[1,"table"],[1,"py-2"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","btn btn-undo",3,"click",4,"ngIf"],["class","btn btn-right",3,"disabled","click",4,"ngIf"],["class","btn btn-xmark",3,"disabled","click",4,"ngIf"],["class","btn btn-edit",3,"disabled","click",4,"ngIf"],[1,"btn","btn-undo",3,"click"],["src","assets/images/undo.png","alt",""],[1,"btn","btn-right",3,"disabled","click"],[1,"fa-regular","fa-circle-check"],[1,"btn","btn-xmark",3,"disabled","click"],[1,"fa-regular","fa-circle-xmark"],[1,"btn","btn-edit",3,"disabled","click"],[1,"fa-solid","fa-pen"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"input",5),e.NdJ("ngModelChange",function(r){return n.searchText=r})("keyup",function(r){return n.searchData(r)}),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(7,"i",7),e.qZA()()(),e.TgZ(8,"div",1)(9,"div",8)(10,"p")(11,"span"),e._uU(12),e.qZA()()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"div",0),e.YNc(16,pe,24,2,"div",11),e.TgZ(17,"div",9),e.YNc(18,ge,2,0,"ng-template",null,12,e.W1O),e.qZA()()()(),e.YNc(20,me,9,3,"div",13),e.YNc(21,fe,2,6,"div",13),e.qZA()),2&t){const i=e.MAs(19);e.xp6(5),e.Q6J("ngModel",n.searchText),e.xp6(1),e.Q6J("hidden",0==n.searchText.length),e.xp6(6),e.hij(" No. Of Cheque ",n.totalRecordsCount,""),e.xp6(4),e.Q6J("ngIf",n.collectedData)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",n.totalRecordsCount>6),e.xp6(1),e.Q6J("ngIf",n.totalRecordsCount>6)}},dependencies:[l.sg,l.O5,c.Fj,c.JJ,c.On,g.N9,w.N,P.w,l.JJ,l.uU],styles:[".card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px}.btn-right[_ngcontent-%COMP%]{color:#29a073;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-edit[_ngcontent-%COMP%]{color:#4e9aff;padding:0 5px;margin:0 5px;border:0px}.btn-undo[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:0;border:0px}.btn-undo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.card-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 5px 10px 15px!important}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled, fieldset[_ngcontent-%COMP%]:disabled   .btn[_ngcontent-%COMP%]{color:#a9a9a9!important}"]}),o})();var D=s(86260),I=s(43346),he=s(82757);function xe(o,a){1&o&&(e.TgZ(0,"span",24),e._uU(1," Field is required. "),e.qZA())}function ve(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,xe,2,0,"span",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formValid.LastTerminalId.errors.required)}}function be(o,a){1&o&&(e.TgZ(0,"span",24),e._uU(1," Field is required. "),e.qZA())}function Te(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,be,2,0,"span",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formValid.CardDate.errors.required)}}function Ze(o,a){1&o&&(e.TgZ(0,"span",24),e._uU(1," Field is required. "),e.qZA())}function Ae(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Ze,2,0,"span",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formValid.CardLast4Digits.errors.required||t.formValid.CardLast4Digits.errors.minlength)}}function ke(o,a){1&o&&(e.TgZ(0,"span",24),e._uU(1," Field is required. "),e.qZA())}function Me(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ke,2,0,"span",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formValid.CardDrawerName.errors.required)}}function qe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"form",6),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSubmit())}),e.TgZ(2,"div",7)(3,"div",8)(4,"div",9)(5,"label"),e._uU(6,"Amount JOD"),e.qZA(),e._UZ(7,"input",10),e.qZA()(),e.TgZ(8,"div",11)(9,"div",9)(10,"label"),e._uU(11,"Currency"),e.qZA(),e._UZ(12,"input",12),e.qZA()(),e.TgZ(13,"div",11)(14,"div",9)(15,"label"),e._uU(16,"Amount"),e.qZA(),e._UZ(17,"input",12),e.ALo(18,"number"),e.qZA()(),e.TgZ(19,"div",8)(20,"div",9)(21,"label"),e._uU(22,"Machine Reciept No."),e.qZA(),e._UZ(23,"input",13),e.qZA()(),e.TgZ(24,"div",8)(25,"div",9)(26,"label"),e._uU(27,"Terminal Provider*"),e.qZA(),e._UZ(28,"ng-select",14),e.YNc(29,ve,2,1,"div",15),e.qZA()(),e.TgZ(30,"div",8)(31,"div",9)(32,"label"),e._uU(33,"Date *"),e.qZA(),e._UZ(34,"input",16),e.YNc(35,Te,2,1,"div",15),e.qZA()(),e.TgZ(36,"div",8)(37,"div",9)(38,"label"),e._uU(39,"The last 4 digits of the card"),e.qZA(),e._UZ(40,"input",17),e.YNc(41,Ae,2,1,"div",15),e.qZA()(),e.TgZ(42,"div",8)(43,"div",9)(44,"label"),e._uU(45,"Payer Name"),e.qZA(),e._UZ(46,"input",18),e.YNc(47,Me,2,1,"div",15),e.qZA()(),e.TgZ(48,"div",19)(49,"div",20)(50,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeModal.close("Close click"))}),e._uU(51,"Cancel"),e.qZA(),e.TgZ(52,"button",22),e._uU(53," Submit "),e.qZA()()()()()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.formGroup),e.xp6(11),e.s9C("value",null==t.details||null==t.details.currency[0]?null:t.details.currency[0].lookupName),e.xp6(5),e.s9C("value",e.xi3(18,8,null==t.details?null:t.details.collectedAmount,"2.3-3")),e.xp6(11),e.Q6J("items",t.terminals),e.xp6(1),e.Q6J("ngIf",t.formValid.LastTerminalId.invalid&&(t.formValid.LastTerminalId.touched||t.formValid.LastTerminalId.dirty)),e.xp6(6),e.Q6J("ngIf",t.formValid.CardDate.invalid&&(t.formValid.CardDate.touched||t.formValid.CardDate.dirty)),e.xp6(6),e.Q6J("ngIf",t.formValid.CardLast4Digits.invalid&&(t.formValid.CardLast4Digits.touched||t.formValid.CardLast4Digits.dirty)),e.xp6(6),e.Q6J("ngIf",t.formValid.CardDrawerName.invalid&&(t.formValid.CardDrawerName.touched||t.formValid.CardDrawerName.dirty))}}function Ne(o,a){if(1&o&&(e.TgZ(0,"div",25)(1,"h5"),e._UZ(2,"i",26),e._uU(3),e.qZA()()),2&o){const t=e.oxw();e.xp6(3),e.hij(" ",t.message,"")}}let ye=(()=>{class o{constructor(t,n,i,r,h,k){this.closeRegisterService=t,this.activeModal=n,this.modalService=i,this.fb=r,this._collectService=h,this.datePipe=k,this.loadMainData=new e.vpe,this.terminals=[],this.loadPageData=new e.vpe}ngOnInit(){if(this.getForm(),this.getTerminalProviders(),this.details){let t={OrdersCardsCollectionId:this.details.ordersCardsCollectionId,LastTerminalId:this.details?.cardProvide?.providerId,CardDrawerName:this.details?.cardPayerName,LastCollectedAmount:this.details.lastCollectedAmount,MachineReceiptNumber:this.details.machineReceiptNumber,CardDate:this.datePipe.transform(this.details.collectionAt,"yyyy-MM-dd"),CardLast4Digits:this.details?.cardLast4Digits};this.formGroup.patchValue(t)}}getTerminalProviders(){this._collectService.getTerminalProviders().subscribe(t=>{this.terminals=t.data.map(n=>({id:n.providerId,name:n.providerName}))})}getForm(){this.formGroup=this.fb.group({OrdersCardsCollectionId:0,LastTerminalId:[""],LastCollectedAmount:[""],CardDrawerName:"",MachineReceiptNumber:[""],CardDate:[""],CardLast4Digits:[""]})}get formValid(){return this.formGroup.controls}onSubmit(){if(this.formGroup.invalid)return this.formGroup.markAllAsTouched(),window.scroll(0,0);const t=this.formGroup.value,n=new FormData;return n.append("OrdersCardsCollectionId",t?.OrdersCardsCollectionId),n.append("LastTerminalId",t?.LastTerminalId),n.append("CardDrawerName",t?.CardDrawerName),n.append("MachineReceiptNumber",t?.MachineReceiptNumber),n.append("CardLast4Digits",t?.CardLast4Digits),this.closeRegisterService.EditCollectionByCards(n).subscribe(i=>{console.log(i),i.isSuccess&&(this.type="success",this.message="Edit done successfully",setTimeout(()=>{this.modalService.dismissAll(),this.toLoadData()},2e3),console.log(i))},i=>{})}toLoadData(){this.loadPageData.emit()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.x),e.Y36(g.Kz),e.Y36(g.FF),e.Y36(c.qu),e.Y36(I.k),e.Y36(l.uU))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-edit-card"]],inputs:{details:"details"},outputs:{loadMainData:"loadMainData",loadPageData:"loadPageData"},features:[e._Bn([l.uU])],decls:10,vars:3,consts:[[1,"modal-body"],[1,"modal-head"],[1,"px-2"],["class","card-form",4,"ngIf"],["class","message",4,"ngIf"],[1,"card-form"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["name","name","type","text","formControlName","LastCollectedAmount","readonly","",1,"form-control"],[1,"col-md-3"],["type","text","readonly","",1,"form-control",3,"value"],["name","name","type","text","formControlName","MachineReceiptNumber","numbersOnly","",1,"form-control"],["placeholder","--Terminal---","bindLabel","name","bindValue","id","required","","formControlName","LastTerminalId",3,"items"],[4,"ngIf"],["type","date","formControlName","CardDate","name","CardDate","required","","readonly","",1,"form-control"],["name","name","type","text","formControlName","CardLast4Digits","minlength","4","maxlength","4","numbersOnly","","required","",1,"form-control"],["name","name","type","text","formControlName","CardDrawerName","OnlyCharacter","","required","","readonly","",1,"form-control"],[1,"col-md-12"],[1,"btns-group","my-2"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save"],["class","error",4,"ngIf"],[1,"error"],[1,"message"],[1,"fa-regular","fa-circle-check"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3,"Edit Card "),e.qZA(),e.TgZ(4,"p"),e._uU(5," Customer name "),e.TgZ(6,"b",2),e._uU(7),e.qZA()()(),e.YNc(8,qe,54,11,"div",3),e.YNc(9,Ne,4,1,"div",4),e.qZA()),2&t&&(e.xp6(7),e.hij(" ",n.details.customer," "),e.xp6(1),e.Q6J("ngIf",!n.type),e.xp6(1),e.Q6J("ngIf",n.type&&"success"==n.type))},dependencies:[l.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.wO,c.nD,c.sg,c.u,x.w9,he.N,Z.Q,l.JJ],styles:[".card-form[_ngcontent-%COMP%]{background:#ffffff;border:0px solid #c4cdd5;box-shadow:none;border-radius:8px;margin:0;padding:0}.modal-head[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid #ddd}.modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#1b212d}.modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#1b212d}.modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#929eae}.message[_ngcontent-%COMP%]{padding:50px 10px;text-align:center}.message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#1b212d;margin:0;padding:20px}.message[_ngcontent-%COMP%]   .fa-circle-check[_ngcontent-%COMP%]{color:#25bb00;font-size:28px;vertical-align:middle;margin:2px 10px 5px}.message[_ngcontent-%COMP%]   .fa-circle-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:28px;vertical-align:middle;margin:2px 10px 5px}"]}),o})();var we=s(87192),Oe=s(68423);function Pe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.ReverseActionsOnCard(i))}),e._uU(1," Undo "),e._UZ(2,"img",29),e.qZA()}}function De(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.ActionsOnCard(i,"right"))}),e._UZ(1,"i",31),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled","right"==t.performedAction||"edit"==t.performedAction)}}function Ie(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.ActionsOnCard(i,"wrong"))}),e._UZ(1,"i",33),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled","wrong"==t.performedAction)}}function Ue(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.openModalEdit(i))}),e._UZ(1,"i",35),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled","edit"==t.performedAction)}}function Se(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"number"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"number"),e.qZA(),e.TgZ(19,"td"),e.YNc(20,Pe,3,0,"button",24),e.YNc(21,De,2,1,"button",25),e.YNc(22,Ie,2,1,"button",26),e.YNc(23,Ue,2,1,"button",27),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",t.customer,""),e.xp6(2),e.hij(" ",null==t.paymentCardType[0]?null:t.paymentCardType[0].lookupName," "),e.xp6(2),e.hij(" ",t.lastCardLast4Digits||(null==t?null:t.cardLast4Digits),""),e.xp6(2),e.hij(" ",(null==t?null:t.lastMachineReceiptNumber)||(null==t?null:t.machineReceiptNumber),""),e.xp6(2),e.hij(" ",(null==t||null==t.lastCardProvide?null:t.lastCardProvide.providerName)||(null==t||null==t.cardProvide?null:t.cardProvide.providerName),""),e.xp6(2),e.hij(" ",e.xi3(13,12,null==t?null:t.cardCollectionJod,"2.3-3")," JOD"),e.xp6(3),e.hij(" ",null==t||null==t.currency[0]?null:t.currency[0].lookupName,""),e.xp6(2),e.hij(" ",e.xi3(18,15,null==t?null:t.collectedAmount,"2.3-3"),""),e.xp6(3),e.Q6J("ngIf",1==t.actionTaken),e.xp6(1),e.Q6J("ngIf",0==t.actionTaken||"right"==t.performedAction||"edit"==t.performedAction),e.xp6(1),e.Q6J("ngIf",0==t.actionTaken||"wrong"==t.performedAction),e.xp6(1),e.Q6J("ngIf",0==t.actionTaken||"edit"==t.performedAction)}}function Je(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function Be(o,a){if(1&o&&(e.TgZ(0,"div",13)(1,"div",18)(2,"table",19)(3,"thead")(4,"tr",20)(5,"th",21),e._uU(6," Customer "),e.qZA(),e.TgZ(7,"th",21),e._uU(8," Card type "),e.qZA(),e.TgZ(9,"th",21),e._uU(10," Last 4 Digits "),e.qZA(),e.TgZ(11,"th",21),e._uU(12," Machine Receipt No"),e.qZA(),e.TgZ(13,"th",21),e._uU(14," Terminal Provider "),e.qZA(),e.TgZ(15,"th",21),e._uU(16," Amount JOD "),e.qZA(),e.TgZ(17,"th",21),e._uU(18," Currency "),e.qZA(),e.TgZ(19,"th",21),e._uU(20," Amount"),e.qZA(),e.TgZ(21,"th",21),e._uU(22," Action "),e.qZA()()(),e.TgZ(23,"tbody"),e.YNc(24,Se,24,18,"tr",22),e.qZA()()(),e.YNc(25,Je,2,0,"div",23),e.qZA()),2&o){const t=a.$implicit;e.xp6(24),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function Fe(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function Ge(o,a){if(1&o&&(e.TgZ(0,"div",1)(1,"h6",36),e._uU(2," Showing "),e.TgZ(3,"span"),e._uU(4),e.qZA(),e._uU(5," from "),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._uU(8," data "),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.AsE("",6*t.pageNo-5," - ",6==(null==t.collectedData?null:t.collectedData.length)?6*t.pageNo:t.totalRecordsCount,""),e.xp6(3),e.hij(" ",t.totalRecordsCount," ")}}function Ee(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"ngb-pagination",37),e.NdJ("pageChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.pageNo=i)})("pageChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.pageChange(i))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("collectionSize",t.totalRecordsCount)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}let Re=(()=>{class o{constructor(t,n,i,r){this.closeRegisterService=t,this.sharedService=n,this.modalService=i,this._spinnerService=r,this.pageNo=1,this.searchText="",this.groupActionFlag=!1,this.cardCollectionIds="",this.loadMainData=new e.vpe}ngOnInit(){this.GetCurrentSessionCollectedCard(),this.getCurrentSessionCollectedCardAll()}confirmGrouping(){if(!this.cardCollectionIds)return;const t=this.modalService.open(we.z,{centered:!0});t.componentInstance.data={body:"Are you sure you want to accept all cards?"},t.componentInstance.eventData.subscribe(n=>{n&&this.groupActionsOnCard()})}getCurrentSessionCollectedCardAll(){return this.closeRegisterService.GetCurrentSessionCollectedCard("",1,1e3).subscribe(t=>{if(t){let n=t.data;this.groupActionFlag=n.every(i=>i.actionTaken),this.cardCollectionIds=n.map(i=>i.ordersCardsCollectionId).toString()}})}groupActionsOnCard(){this._spinnerService.show();const t=new FormData;t.append("OrdersCardsCollectionIds",this.cardCollectionIds),t.append("Action","right"),this.closeRegisterService.actionsOnCardGroup(t).subscribe({next:n=>{n.isSuccess&&(this.responseModal("success","The action done successfully"),this.GetCurrentSessionCollectedCard())},error:n=>{this.responseModal("error",n?.error?.errors)}}).add(()=>this._spinnerService.hide())}responseModal(t,n){const i=this.modalService.open(D.i);i.componentInstance.type=t,"success"==t?i.componentInstance.message=n:i.componentInstance.messageError=n}GetCurrentSessionCollectedCard(){return this.closeRegisterService.GetCurrentSessionCollectedCard(this.searchText,this.pageNo).subscribe(t=>{t&&(console.log(t),this.collectedData=t.data,this.totalAllRecordsCount=t.info?.totalAllRecordsCount,this.totalRecordsCount=t.info?.totalRecordsCount,this.pagin=Math.ceil(this.totalRecordsCount/6),this.pages=O.w6(this.pagin))})}pageChange(t){this.pageNo=t,this.GetCurrentSessionCollectedCard(),window.scroll(0,0)}searchData(t){console.log(t?.target.value);const n=t.target.value;console.log(n.length),n.length>=3&&(this.searchText=n,this.pageNo=1,this.GetCurrentSessionCollectedCard()),0==n.length&&(this.pageNo=1,this.GetCurrentSessionCollectedCard())}removeSearch(){this.searchText="",this.GetCurrentSessionCollectedCard()}ActionsOnCard(t,n){const i=new FormData;return i.append("OrdersCardsCollectionId",t.ordersCardsCollectionId),i.append("Action",n),console.log(i),this.closeRegisterService.ActionsOnCard(i).subscribe(r=>{r?(this.GetCurrentSessionCollectedCard(),this.getCurrentSessionCollectedCardAll()):console.log("error",r)})}ReverseActionsOnCard(t){const n=new FormData;return n.append("OrdersCardsCollectionId",t.ordersCardsCollectionId),console.log(n),this.closeRegisterService.ReverseActionsOnCard(n).subscribe(i=>{i?(this.GetCurrentSessionCollectedCard(),this.getCurrentSessionCollectedCardAll()):console.log("error",i)})}openModalEdit(t){const n=this.modalService.open(ye);n.componentInstance.details=t,n.componentInstance.loadPageData.subscribe(i=>{console.log("result",i),this.GetCurrentSessionCollectedCard(),this.loadMainData.emit()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.x),e.Y36(y.F),e.Y36(g.FF),e.Y36(Oe.t2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-collect-card"]],outputs:{loadMainData:"loadMainData"},decls:25,vars:8,consts:[[1,"row"],[1,"col-md-6"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"col-md-6","d-flex","justify-content-end","align-items-center","gap-2"],[1,"btns-group","m-0"],["type","button",1,"font-14","btn","btn-save","py-2","px-3",3,"disabled","click"],[1,"top-details","justify-content-end"],[1,"m-0"],[1,"col-md-12"],[1,"card-table","mt-3"],["class","col-md-12",4,"ngIf","ngIfElse"],["loading",""],["class","col-md-6",4,"ngIf"],[1,"table-responsive"],[1,"table"],[1,"py-2"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","btn btn-undo",3,"click",4,"ngIf"],["class","btn btn-right",3,"disabled","click",4,"ngIf"],["class","btn btn-xmark",3,"disabled","click",4,"ngIf"],["class","btn btn-edit",3,"disabled","click",4,"ngIf"],[1,"btn","btn-undo",3,"click"],["src","assets/images/undo.png","alt",""],[1,"btn","btn-right",3,"disabled","click"],[1,"fa-regular","fa-circle-check"],[1,"btn","btn-xmark",3,"disabled","click"],[1,"fa-regular","fa-circle-xmark"],[1,"btn","btn-edit",3,"disabled","click"],[1,"fa-solid","fa-pen"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"input",5),e.NdJ("ngModelChange",function(r){return n.searchText=r})("keyup",function(r){return n.searchData(r)}),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(7,"i",7),e.qZA()()(),e.TgZ(8,"div",8)(9,"div",9)(10,"button",10),e.NdJ("click",function(){return n.confirmGrouping()}),e._uU(11,"Accept All"),e.qZA()(),e.TgZ(12,"div",11)(13,"p",12)(14,"span"),e._uU(15),e.qZA()()()(),e.TgZ(16,"div",13)(17,"div",14)(18,"div",0),e.YNc(19,Be,26,2,"div",15),e.TgZ(20,"div",13),e.YNc(21,Fe,2,0,"ng-template",null,16,e.W1O),e.qZA()()()(),e.YNc(23,Ge,9,3,"div",17),e.YNc(24,Ee,2,6,"div",17),e.qZA()),2&t){const i=e.MAs(22);e.xp6(5),e.Q6J("ngModel",n.searchText),e.xp6(1),e.Q6J("hidden",0==n.searchText.length),e.xp6(4),e.Q6J("disabled",n.groupActionFlag),e.xp6(5),e.hij(" No. Of Transactions ",n.totalRecordsCount,""),e.xp6(4),e.Q6J("ngIf",n.collectedData)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",n.totalRecordsCount>6),e.xp6(1),e.Q6J("ngIf",n.totalRecordsCount>6)}},dependencies:[l.sg,l.O5,c.Fj,c.JJ,c.On,g.N9,w.N,P.w,l.JJ],styles:[".card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px}.btn-right[_ngcontent-%COMP%]{color:#29a073;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-edit[_ngcontent-%COMP%]{color:#4e9aff;font-size:18px;padding:0 5px;margin:0 5px;border:0px}.btn-undo[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:0;border:0px}.btn-undo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.card-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 5px 10px 15px!important}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled, fieldset[_ngcontent-%COMP%]:disabled   .btn[_ngcontent-%COMP%]{color:#a9a9a9!important}"]}),o})();var B=s(71891);function Qe(o,a){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",(null==t||null==t.bankAccount?null:t.bankAccount.bankNameEnglish)+" - "+(null==t||null==t.bankAccount?null:t.bankAccount.accountName)+" - "+(null==t||null==t.bankAccount?null:t.bankAccount.accountNumber),"")}}function Ye(o,a){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",(null==t||null==t.lastBankAccount?null:t.lastBankAccount.bankNameEnglish)+" - "+(null==t||null==t.lastBankAccount?null:t.lastBankAccount.accountName)+" - "+(null==t||null==t.lastBankAccount?null:t.lastBankAccount.accountNumber),"")}}function je(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.reverseActionOnBankTransfer(i))}),e._uU(1," Undo "),e._UZ(2,"img",25),e.qZA()}}function ze(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.actionsOnBankTransfer(i,"right"))}),e._UZ(1,"i",27),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled","right"==t.performedAction||"edit"==t.performedAction)}}function Le(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.actionsOnBankTransfer(i,"wrong"))}),e._UZ(1,"i",29),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled","wrong"==t.performedAction)}}function Ve(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2),h=e.MAs(23);return e.KtG(r.openModalEdit(i,h))}),e._UZ(1,"i",31),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled","edit"==t.performedAction)}}function Ke(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.ALo(16,"date"),e.qZA(),e.YNc(17,Qe,2,1,"td",19),e.YNc(18,Ye,2,1,"td",19),e.TgZ(19,"td"),e.YNc(20,je,3,0,"button",20),e.YNc(21,ze,2,1,"button",21),e.YNc(22,Le,2,1,"button",22),e.YNc(23,Ve,2,1,"button",23),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",(null==t?null:t.lastDrawerName)||(null==t?null:t.custoemrName),""),e.xp6(2),e.hij(" ",(null==t?null:t.lastTransfereReference)||(null==t?null:t.transfereReference),""),e.xp6(2),e.hij(" ",e.xi3(7,12,null==t?null:t.paidAmountJod,"2.3-3")+" JOD",""),e.xp6(3),e.hij(" ",null==t||null==t.currency[0]?null:t.currency[0].lookupName,""),e.xp6(2),e.hij(" ",e.xi3(12,15,null==t?null:t.collectedAmount,"2.3-3"),""),e.xp6(3),e.hij(" ",e.xi3(15,18,null==t?null:t.lastTransfereDate,"mediumDate")||e.xi3(16,21,null==t?null:t.transfereDate,"mediumDate"),""),e.xp6(3),e.Q6J("ngIf",!(null!=t&&null!=t.lastBankAccount&&t.lastBankAccount.bankNameEnglish)),e.xp6(1),e.Q6J("ngIf",null==t||null==t.lastBankAccount?null:t.lastBankAccount.bankNameEnglish),e.xp6(2),e.Q6J("ngIf",1==t.actionTaken),e.xp6(1),e.Q6J("ngIf",0==t.actionTaken||"right"==t.performedAction||"edit"==t.performedAction),e.xp6(1),e.Q6J("ngIf",0==t.actionTaken||"wrong"==t.performedAction),e.xp6(1),e.Q6J("ngIf",0==t.actionTaken||"edit"==t.performedAction)}}function He(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function $e(o,a){if(1&o&&(e.TgZ(0,"div",9)(1,"div",15)(2,"table",16)(3,"thead")(4,"tr",17)(5,"th"),e._uU(6," Customer "),e.qZA(),e.TgZ(7,"th"),e._uU(8," Transfer Reference "),e.qZA(),e.TgZ(9,"th"),e._uU(10," Amount JOD "),e.qZA(),e.TgZ(11,"th"),e._uU(12," Currency "),e.qZA(),e.TgZ(13,"th"),e._uU(14," Amount"),e.qZA(),e.TgZ(15,"th"),e._uU(16," Transfer Date "),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Markazia Bank "),e._UZ(19,"br"),e._uU(20,"Account No. "),e.qZA(),e.TgZ(21,"th"),e._uU(22," Action "),e.qZA()()(),e.TgZ(23,"tbody"),e.YNc(24,Ke,24,24,"tr",18),e.qZA()()(),e.YNc(25,He,2,0,"div",19),e.qZA()),2&o){const t=a.$implicit;e.xp6(24),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function We(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function Xe(o,a){if(1&o&&(e.TgZ(0,"div",1)(1,"h6",32),e._uU(2," Showing "),e.TgZ(3,"span"),e._uU(4),e.qZA(),e._uU(5," from "),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._uU(8," data "),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.AsE("",6*t.pageNo-5," - ",6==(null==t.collectedData?null:t.collectedData.length)?6*t.pageNo:t.totalRecordsCount,""),e.xp6(3),e.hij(" ",t.totalRecordsCount," ")}}function et(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"ngb-pagination",33),e.NdJ("pageChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.pageNo=i)})("pageChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.pageChange(i))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("collectionSize",t.totalRecordsCount)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}function tt(o,a){1&o&&(e.TgZ(0,"span",53),e._uU(1,"Input is required"),e.qZA())}function nt(o,a){if(1&o&&(e.ynx(0),e.YNc(1,tt,2,0,"span",52),e.BQk()),2&o){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("transfereReference"))?null:n.errors.required)}}function ot(o,a){if(1&o&&(e.ynx(0),e.YNc(1,nt,2,1,"ng-container",19),e.BQk()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("transfereReference"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("transfereReference"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("transfereReference"))?null:n.dirty))}}function it(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=a.item;e.xp6(1),e.Oqu((null==t?null:t.name)+" - "+(null==t?null:t.accountName)+" - "+(null==t?null:t.accountNumber))}}function lt(o,a){1&o&&(e.TgZ(0,"span",53),e._uU(1,"Input is required"),e.qZA())}function at(o,a){if(1&o&&(e.ynx(0),e.YNc(1,lt,2,0,"span",52),e.BQk()),2&o){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.errors.required)}}function rt(o,a){if(1&o&&(e.ynx(0),e.YNc(1,at,2,1,"ng-container",19),e.BQk()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.dirty))}}function ct(o,a){1&o&&(e.TgZ(0,"span",53),e._uU(1,"Input is required"),e.qZA())}function st(o,a){if(1&o&&(e.ynx(0),e.YNc(1,ct,2,0,"span",52),e.BQk()),2&o){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("drawerName"))?null:n.errors.required)}}function dt(o,a){if(1&o&&(e.ynx(0),e.YNc(1,st,2,1,"ng-container",19),e.BQk()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("drawerName"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("drawerName"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("drawerName"))?null:n.dirty))}}function ut(o,a){1&o&&(e.TgZ(0,"span",53),e._uU(1,"Input is required"),e.qZA())}function _t(o,a){if(1&o&&(e.ynx(0),e.YNc(1,ut,2,0,"span",52),e.BQk()),2&o){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("transfereDate"))?null:n.errors.required)}}function pt(o,a){if(1&o&&(e.ynx(0),e.YNc(1,_t,2,1,"ng-container",19),e.BQk()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("transfereDate"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("transfereDate"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("transfereDate"))?null:n.dirty))}}function gt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"img",65),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.fileAction("view"))}),e.qZA(),e.TgZ(2,"img",66),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.fileAction("delete"))}),e.qZA()()}}function mt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",61)(1,"input",62,63),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(3);return e.KtG(r.onSelectFile(i))}),e.qZA(),e.TgZ(3,"label",64),e._uU(4),e.qZA(),e.YNc(5,gt,3,0,"div",19),e.qZA()}if(2&o){const t=e.oxw(3);e.xp6(3),e.ekj("text-success",null==t.formGroup?null:t.formGroup.get("attachment").value),e.xp6(1),e.Oqu((null==t.formGroup?null:t.formGroup.get("attachment").value)&&(null==t.formGroup?null:t.formGroup.get("attachment").value)||"Upload file"),e.xp6(1),e.Q6J("ngIf",null==t.formGroup?null:t.formGroup.get("attachment").value)}}function ft(o,a){if(1&o&&(e.TgZ(0,"span",53),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.invalidFileType)}}function Ct(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",40)(2,"label"),e._uU(3,"Transfer Attachment"),e.qZA(),e.YNc(4,mt,6,4,"div",54),e.YNc(5,ft,2,1,"span",52),e.qZA(),e.TgZ(6,"div",55)(7,"label",56),e._uU(8),e.qZA(),e.TgZ(9,"div",57)(10,"img",58),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.viewFile())}),e.qZA(),e.TgZ(11,"a",59),e._UZ(12,"img",60),e.qZA()()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.isNewFile),e.xp6(1),e.Q6J("ngIf",t.invalidFileType),e.xp6(3),e.Oqu(null==t.fileDetails?null:t.fileDetails.fileName),e.xp6(3),e.s9C("href",null==t.fileDetails?null:t.fileDetails.file,e.LSH)}}function ht(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",34)(1,"div",35)(2,"h3",36),e._uU(3,"Edit Bank Transfer"),e.qZA(),e.TgZ(4,"p",37),e._uU(5," Customer Name "),e.TgZ(6,"span",38),e._uU(7),e.qZA()()(),e.TgZ(8,"form",39),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSubmit())}),e.TgZ(9,"div",0)(10,"div",1)(11,"div",40)(12,"label"),e._uU(13,"Paid Amount JOD"),e.qZA(),e._UZ(14,"input",41),e.qZA()(),e.TgZ(15,"div",1)(16,"div",40)(17,"label"),e._uU(18,"Currency"),e.qZA(),e._UZ(19,"input",42),e.qZA()(),e.TgZ(20,"div",1)(21,"div",40)(22,"label"),e._uU(23,"Transfer Reference* "),e.qZA(),e._UZ(24,"input",43),e.YNc(25,ot,2,1,"ng-container",19),e.qZA()(),e.TgZ(26,"div",1)(27,"div",40)(28,"label"),e._uU(29,"Markazia Bank Account No.*"),e.qZA(),e.TgZ(30,"ng-select",44),e.YNc(31,it,2,1,"ng-template",45),e.qZA(),e.YNc(32,rt,2,1,"ng-container",19),e.qZA()(),e.TgZ(33,"div",1)(34,"div",40)(35,"label"),e._uU(36,"Payer Name*"),e.qZA(),e._UZ(37,"input",46),e.YNc(38,dt,2,1,"ng-container",19),e.qZA()(),e.TgZ(39,"div",1)(40,"div",40)(41,"label"),e._uU(42,"Transfer Date "),e.qZA(),e._UZ(43,"input",47),e.YNc(44,pt,2,1,"ng-container",19),e.qZA()(),e.TgZ(45,"div",1)(46,"div",40)(47,"label"),e._uU(48,"Same Customer"),e.qZA(),e.TgZ(49,"div")(50,"input",48),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.sameCustomer(i))}),e.qZA()()()(),e.YNc(51,Ct,13,4,"div",13),e.TgZ(52,"div",9)(53,"div",49)(54,"button",50),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Close click"))}),e._uU(55,"Cancel"),e.qZA(),e.TgZ(56,"button",51),e._uU(57," Submit "),e.qZA()()()()()()}if(2&o){const t=e.oxw();let n,i,r,h;e.xp6(7),e.hij(" ",t.payerName," "),e.xp6(1),e.Q6J("formGroup",t.formGroup),e.xp6(11),e.s9C("value",t.currency),e.xp6(6),e.Q6J("ngIf",null==(n=t.formGroup.get("transfereReference"))?null:n.errors),e.xp6(5),e.Q6J("items",t.banks),e.xp6(2),e.Q6J("ngIf",null==(i=t.formGroup.get("bankId"))?null:i.errors),e.xp6(6),e.Q6J("ngIf",null==(r=t.formGroup.get("drawerName"))?null:r.errors),e.xp6(6),e.Q6J("ngIf",null==(h=t.formGroup.get("transfereDate"))?null:h.errors),e.xp6(7),e.Q6J("ngIf",null==t.fileDetails?null:t.fileDetails.fileName)}}let xt=(()=>{class o{constructor(t,n,i,r,h,k,q){this.closeRegisterService=t,this.sharedService=n,this._modalService=i,this.fb=r,this._collectService=h,this._commonService=k,this._datePipe=q,this.banks=[],this.payerName="",this.currency="",this.pageNo=1,this.searchText="",this.fileDetails={fileName:"",file:""},this.isNewFile=!1,this.invalidFileType="",this.loadMainData=new e.vpe}ngOnInit(){this.getCurrentSessionCollectedBankTransfere(),this.initForm(),this.getBankAccounts()}initForm(){this.formGroup=this.fb.group({collectionId:[""],paidAmountJod:[{value:"",disabled:!0}],bankId:[null,[c.kI.required]],drawerName:["",[c.kI.required]],transfereDate:[null,[c.kI.required]],transfereReference:[null,[c.kI.required]],transfereAttachment:[null],attachment:[null]})}getCurrentSessionCollectedBankTransfere(){return this.closeRegisterService.getCurrentSessionCollectedBankTransfere(this.searchText,this.pageNo).subscribe(t=>{t&&(this.collectedData=t.data,console.log(this.collectedData),this.totalAllRecordsCount=t.info?.totalAllRecordsCount,this.totalRecordsCount=t.info?.totalRecordsCount,this.pagin=Math.ceil(this.totalRecordsCount/6),this.pages=O.w6(this.pagin))})}pageChange(t){this.pageNo=t,this.getCurrentSessionCollectedBankTransfere(),window.scroll(0,0)}searchData(t){const n=t.target.value;n.length>=1&&(this.searchText=n,this.pageNo=1,this.getCurrentSessionCollectedBankTransfere()),0==n.length&&(this.pageNo=1,this.getCurrentSessionCollectedBankTransfere())}removeSearch(){this.searchText="",this.getCurrentSessionCollectedBankTransfere()}actionsOnBankTransfer(t,n){const i=new FormData;return i.append("CollectionId",t.orderBankTransfereCollectionId),i.append("Action",n),this.closeRegisterService.actionsOnBankTransfere(i).subscribe(r=>{r.isSuccess?this.getCurrentSessionCollectedBankTransfere():console.log("error",r)})}reverseActionOnBankTransfer(t){const n=new FormData;return n.append("ChequeCollectionId",t.orderBankTransfereCollectionId),this.closeRegisterService.reverseActionsOnBankTransfere(n).subscribe(i=>{i.isSuccess?this.getCurrentSessionCollectedBankTransfere():console.log("error",i)})}openModalEdit(t,n){console.log(t),this.payerName=t?.custoemrName,this.currency=t?.currency[0]?.lookupName;let i={collectionId:t?.orderBankTransfereCollectionId,paidAmountJod:t?.paidAmountJod.toFixed(3),bankId:t?.bankAccount?.accountId,transfereDate:this._datePipe.transform(t?.transfereDate,"yyyy-MM-dd"),transfereReference:t?.transfereReference,drawerName:t?.cardPayerName},r=t?.transfereAttachment.split("/").pop();this.fileDetails={file:t?.transfereAttachment,fileName:r},this.formGroup.patchValue(i),this._modalService.open(n,{centered:!0,size:"lg"})}uploadNewFile(){this.isNewFile=!this.isNewFile}viewFile(){this._modalService.open(B.W,{size:"md"}).componentInstance.file=this.fileDetails?.file}onSelectFile(t){let n=[...t.target.files],i=this._commonService.checkInvalidImageFormat(n);if(i)return document.getElementById("file-input").value=null,this.invalidFileType="This file not support, supported formates: JPEG, JPG, PNG, PDF",void setTimeout(()=>{this.invalidFileType=""},5e3);n.length>0&&(i||n.forEach(r=>{this.uploadFile(r),this.formGroup.get("attachment")?.setValue(r.name),this._commonService.fileToBase64(r).then(h=>{this.uploadedFile=h})}))}fileAction(t){"view"==t?this._modalService.open(p.g,{size:"md"}).componentInstance.imageUploadedView=this.uploadedFile:(document.getElementById("file-input").value=null,this.formGroup.get("attachment")?.setValue(""),this.formGroup.get("transfereAttachment")?.setValue(""))}uploadFile(t){const n=new FormData;n.append("Folder","BankTransfer"),n.append("File",t),this._collectService.uploadFile(n).subscribe(i=>{i.isSuccess&&this.formGroup.get("transfereAttachment")?.setValue(i.data)})}onSubmit(){if(this.formGroup.invalid)this.formGroup.markAllAsTouched();else{let t=this.formGroup.value;const n=new FormData;n.append("CollectionId",t?.collectionId),n.append("BankId",t?.bankId),n.append("DrawerName",t?.drawerName),n.append("TransfereDate",t?.transfereDate),n.append("TransfereReference",t?.transfereReference),this.closeRegisterService.editCollectionBankTransfere(n).subscribe(i=>{console.log(i),i.isSuccess&&(this._modalService.dismissAll(),this.successModal("success","Data saved successfully!"),this.getCurrentSessionCollectedBankTransfere())},i=>{this.successModal("error",i.error.errors)})}}successModal(t,n){const i=this._modalService.open(D.i,{size:"md"});i.componentInstance.type=t,"success"==t?i.componentInstance.message=n:"error"==t&&(i.componentInstance.messageError=n)}getBankAccounts(){this._collectService.getBankAccounts("?AccountType=15001&currencyId=9001&Status=2001&PageNo=0&PageSize=1000").subscribe(n=>{n.isSuccess&&(this.banks=n.data.map(i=>({id:i.accountId,name:i.bankNameEnglish,accountName:i.accountName,accountNumber:i.accountNumber})))})}sameCustomer(t){t?.target?.checked?this.formGroup.get("drawerName").setValue(this.payerName):this.formGroup.get("drawerName").setValue("")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.x),e.Y36(y.F),e.Y36(g.FF),e.Y36(c.qu),e.Y36(I.k),e.Y36(_.v),e.Y36(l.uU))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-collect-bank-transfers"]],outputs:{loadMainData:"loadMainData"},decls:24,vars:7,consts:[[1,"row"],[1,"col-md-6"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"top-details","justify-content-end","pt-3"],[1,"col-md-12"],[1,"card-table","mt-3"],["class","col-md-12",4,"ngIf","ngIfElse"],["loading",""],["class","col-md-6",4,"ngIf"],["editModal",""],[1,"table-responsive"],[1,"table"],[1,"py-2"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","btn btn-undo",3,"click",4,"ngIf"],["class","btn btn-right",3,"disabled","click",4,"ngIf"],["class","btn btn-xmark",3,"disabled","click",4,"ngIf"],["class","btn btn-edit",3,"disabled","click",4,"ngIf"],[1,"btn","btn-undo",3,"click"],["src","assets/images/undo.png","alt",""],[1,"btn","btn-right",3,"disabled","click"],[1,"fa-regular","fa-circle-check"],[1,"btn","btn-xmark",3,"disabled","click"],[1,"fa-regular","fa-circle-xmark"],[1,"btn","btn-edit",3,"disabled","click"],[1,"fa-solid","fa-pen"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"],["ngbAutoFocus","",1,"modal-body"],[1,"modal-head"],[1,"fw-700","font-18"],[1,"fw-600","font-16"],[1,"px-2","gray-500","text-capitalize"],[3,"formGroup","submit"],[1,"form-group"],["name","name","type","text","formControlName","paidAmountJod",1,"form-control"],["type","text","disabled","",1,"form-control",3,"value"],["name","name","type","text","formControlName","transfereReference",1,"form-control"],["placeholder"," Select bank ","bindLabel","name","bindValue","id","formControlName","bankId",3,"items"],["ng-option-tmp",""],["type","text","formControlName","drawerName",1,"form-control"],["type","date","formControlName","transfereDate",1,"form-control"],["type","checkbox",1,"form-check-input",3,"change"],[1,"btns-group","my-2"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save"],["class","error",4,"ngIf"],[1,"error"],["class","custom-file px-2 align-items-center d-flex justify-content-between",4,"ngIf"],[1,"file-item","d-flex","justify-content-between","align-items-center","py-2","px-3"],[1,"fw-600","green-clr","mb-0"],[1,"d-flex","gap-2","align-items-center"],["height","20","src","assets/images/eye.png",1,"cursor-pointer",3,"click"],["target","_blank","download","",3,"href"],["height","20","src","assets/images/Download.png",1,"cursor-pointer"],[1,"custom-file","px-2","align-items-center","d-flex","justify-content-between"],["type","file","id","file-input",1,"file-input__input",3,"change"],["fileInput",""],["for","file-input",1,"file-input__label","mb-0"],["height","20","src","assets/images/eye.png",1,"cursor-pointer","me-2",3,"click"],["height","20","src","assets/images/trash.png",1,"cursor-pointer",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"input",5),e.NdJ("ngModelChange",function(r){return n.searchText=r})("keyup",function(r){return n.searchData(r)}),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(7,"i",7),e.qZA()()(),e.TgZ(8,"div",1)(9,"div",8)(10,"p")(11,"span"),e._uU(12),e.qZA()()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"div",0),e.YNc(16,$e,26,2,"div",11),e.TgZ(17,"div",9),e.YNc(18,We,2,0,"ng-template",null,12,e.W1O),e.qZA()()()(),e.YNc(20,Xe,9,3,"div",13),e.YNc(21,et,2,6,"div",13),e.qZA(),e.YNc(22,ht,58,9,"ng-template",null,14,e.W1O)),2&t){const i=e.MAs(19);e.xp6(5),e.Q6J("ngModel",n.searchText),e.xp6(1),e.Q6J("hidden",0==n.searchText.length),e.xp6(6),e.hij("No. Of Transfers ",n.totalRecordsCount,""),e.xp6(4),e.Q6J("ngIf",n.collectedData)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",n.totalRecordsCount>6),e.xp6(1),e.Q6J("ngIf",n.totalRecordsCount>6)}},dependencies:[l.sg,l.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,c.On,x.w9,x.ir,g.N9,w.N,P.w,l.JJ,l.uU],styles:[".card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px}.btn-right[_ngcontent-%COMP%]{color:#29a073;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-edit[_ngcontent-%COMP%]{color:#4e9aff;padding:0 5px;margin:0 5px;border:0px}.btn-undo[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:0;border:0px}.btn-undo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.card-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 5px 10px 15px!important}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled, fieldset[_ngcontent-%COMP%]:disabled   .btn[_ngcontent-%COMP%]{color:#a9a9a9!important}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid #ddd}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#1b212d}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#1b212d}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#929eae}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:7px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:46px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-weight:500;color:var(--primary);font-size:15px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:20px;height:20px;accent-color:var(--primary)}.modal-body[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{border:1px solid #2eb93e;border-radius:5px}.custom-file[_ngcontent-%COMP%]{border:1px solid #dadada;display:flex;height:46px;border-radius:.375rem;justify-content:center;gap:5px;background:#fff}.file-input__input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.file-input__label[_ngcontent-%COMP%]{cursor:pointer;display:inline-flex;align-items:center;border-radius:4px;font-weight:600;color:var(--gray-500);font-size:14px}"]}),o})();function vt(o,a){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t||null==t.bank[0]?null:t.bank[0].lookupName,"")}}function bt(o,a){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t||null==t.lastBank[0]?null:t.lastBank[0].lookupName,"")}}function Tt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.reverseActionsOnBankPledge(i))}),e._uU(1," Undo "),e._UZ(2,"img",25),e.qZA()}}function Zt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.actionsOnBankPledge(i,"right"))}),e._UZ(1,"i",27),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled","right"==t.performedAction||"edit"==t.performedAction)}}function At(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.actionsOnBankPledge(i,"wrong"))}),e._UZ(1,"i",29),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled","wrong"==t.performedAction)}}function kt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2),h=e.MAs(23);return e.KtG(r.openModalEdit(i,h))}),e._UZ(1,"i",31),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled","edit"==t.performedAction)}}function Mt(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.ALo(16,"date"),e.qZA(),e.YNc(17,vt,2,1,"td",19),e.YNc(18,bt,2,1,"td",19),e.TgZ(19,"td"),e.YNc(20,Tt,3,0,"button",20),e.YNc(21,Zt,2,1,"button",21),e.YNc(22,At,2,1,"button",22),e.YNc(23,kt,2,1,"button",23),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",null==t?null:t.custoemrName,""),e.xp6(2),e.hij(" ",(null==t?null:t.lastBankPledgeNumber)||(null==t?null:t.bankPledgeNumber),""),e.xp6(2),e.hij(" ",e.xi3(7,12,null==t?null:t.pledgeAmountJod,"2.3-3")+" JOD",""),e.xp6(3),e.hij(" ",null==t||null==t.currency[0]?null:t.currency[0].lookupName,""),e.xp6(2),e.hij(" ",e.xi3(12,15,null==t?null:t.collectedAmount,"2.3-3"),""),e.xp6(3),e.hij(" ",e.xi3(15,18,null==t?null:t.lastBankPledgeDate,"mediumDate")||e.xi3(16,21,null==t?null:t.bankPledgeDate,"mediumDate"),""),e.xp6(3),e.Q6J("ngIf",!(null!=t&&null!=t.lastBank&&t.lastBank.length)),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.lastBank.length)>0),e.xp6(2),e.Q6J("ngIf",1==t.actionTaken),e.xp6(1),e.Q6J("ngIf",0==t.actionTaken||"right"==t.performedAction||"edit"==t.performedAction),e.xp6(1),e.Q6J("ngIf",0==t.actionTaken||"wrong"==t.performedAction),e.xp6(1),e.Q6J("ngIf",0==t.actionTaken||"edit"==t.performedAction)}}function qt(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-not-found"),e.qZA())}function Nt(o,a){if(1&o&&(e.TgZ(0,"div",9)(1,"div",15)(2,"table",16)(3,"thead")(4,"tr",17)(5,"th"),e._uU(6," Customer "),e.qZA(),e.TgZ(7,"th"),e._uU(8," Bank Pledge Number"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Amount JOD"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Currency"),e.qZA(),e.TgZ(13,"th"),e._uU(14," Amount"),e.qZA(),e.TgZ(15,"th"),e._uU(16," Bank Pledge Date "),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Bank Name "),e.qZA(),e.TgZ(19,"th"),e._uU(20," Action "),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,Mt,24,24,"tr",18),e.qZA()()(),e.YNc(23,qt,2,0,"div",19),e.qZA()),2&o){const t=a.$implicit;e.xp6(22),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function yt(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function wt(o,a){if(1&o&&(e.TgZ(0,"div",1)(1,"h6",32),e._uU(2," Showing "),e.TgZ(3,"span"),e._uU(4),e.qZA(),e._uU(5," from "),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._uU(8," data "),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.AsE("",6*t.pageNo-5," - ",6==(null==t.collectedData?null:t.collectedData.length)?6*t.pageNo:t.totalRecordsCount,""),e.xp6(3),e.hij(" ",t.totalRecordsCount," ")}}function Ot(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"ngb-pagination",33),e.NdJ("pageChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.pageNo=i)})("pageChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.pageChange(i))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("collectionSize",t.totalRecordsCount)("page",t.pageNo)("maxSize",3)("pageSize",6)("rotate",!0)("ellipses",!1)}}function Pt(o,a){1&o&&(e.TgZ(0,"span",50),e._uU(1,"Input is required"),e.qZA())}function Dt(o,a){if(1&o&&(e.ynx(0),e.YNc(1,Pt,2,0,"span",49),e.BQk()),2&o){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("bankPledgeNumber"))?null:n.errors.required)}}function It(o,a){if(1&o&&(e.ynx(0),e.YNc(1,Dt,2,1,"ng-container",19),e.BQk()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("bankPledgeNumber"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("bankPledgeNumber"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("bankPledgeNumber"))?null:n.dirty))}}function Ut(o,a){1&o&&(e.TgZ(0,"span",50),e._uU(1,"Input is required"),e.qZA())}function St(o,a){if(1&o&&(e.ynx(0),e.YNc(1,Ut,2,0,"span",49),e.BQk()),2&o){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.errors.required)}}function Jt(o,a){if(1&o&&(e.ynx(0),e.YNc(1,St,2,1,"ng-container",19),e.BQk()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("bankId"))?null:n.dirty))}}function Bt(o,a){1&o&&(e.TgZ(0,"span",50),e._uU(1,"Input is required"),e.qZA())}function Ft(o,a){if(1&o&&(e.ynx(0),e.YNc(1,Bt,2,0,"span",49),e.BQk()),2&o){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("ngIf",null==t.formGroup||null==(n=t.formGroup.get("bankPledgeDate"))?null:n.errors.required)}}function Gt(o,a){if(1&o&&(e.ynx(0),e.YNc(1,Ft,2,1,"ng-container",19),e.BQk()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==t.formGroup||null==(n=t.formGroup.get("bankPledgeDate"))?null:n.invalid)&&(null==t.formGroup||null==(n=t.formGroup.get("bankPledgeDate"))?null:n.touched)||(null==t.formGroup||null==(n=t.formGroup.get("bankPledgeDate"))?null:n.dirty))}}function Et(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"img",62),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.fileAction("view"))}),e.qZA(),e.TgZ(2,"img",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.fileAction("delete"))}),e.qZA()()}}function Rt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",58)(1,"input",59,60),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(3);return e.KtG(r.onSelectFile(i))}),e.qZA(),e.TgZ(3,"label",61),e._uU(4),e.qZA(),e.YNc(5,Et,3,0,"div",19),e.qZA()}if(2&o){const t=e.oxw(3);e.xp6(3),e.ekj("text-success",null==t.formGroup?null:t.formGroup.get("attachment").value),e.xp6(1),e.Oqu((null==t.formGroup?null:t.formGroup.get("attachment").value)&&(null==t.formGroup?null:t.formGroup.get("attachment").value)||"Upload file"),e.xp6(1),e.Q6J("ngIf",null==t.formGroup?null:t.formGroup.get("attachment").value)}}function Qt(o,a){if(1&o&&(e.TgZ(0,"span",50),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.invalidFileType)}}function Yt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",40)(2,"label"),e._uU(3,"Pledge Attachment"),e.qZA(),e.YNc(4,Rt,6,4,"div",51),e.YNc(5,Qt,2,1,"span",49),e.qZA(),e.TgZ(6,"div",52)(7,"label",53),e._uU(8),e.qZA(),e.TgZ(9,"div",54)(10,"img",55),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.viewFile())}),e.qZA(),e.TgZ(11,"a",56),e._UZ(12,"img",57),e.qZA()()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.isNewFile),e.xp6(1),e.Q6J("ngIf",t.invalidFileType),e.xp6(3),e.Oqu(null==t.fileDetails?null:t.fileDetails.fileName),e.xp6(3),e.s9C("href",null==t.fileDetails?null:t.fileDetails.file,e.LSH)}}function jt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",34)(1,"div",35)(2,"h3",36),e._uU(3,"Edit Bank Pledge"),e.qZA(),e.TgZ(4,"p",37),e._uU(5," Customer Name "),e.TgZ(6,"span",38),e._uU(7),e.qZA()()(),e.TgZ(8,"form",39),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSubmit())}),e.TgZ(9,"div",0)(10,"div",1)(11,"div",40)(12,"label"),e._uU(13,"Paid Amount JOD"),e.qZA(),e._UZ(14,"input",41),e.qZA()(),e.TgZ(15,"div",1)(16,"div",40)(17,"label"),e._uU(18,"Currency"),e.qZA(),e._UZ(19,"input",42),e.qZA()(),e.TgZ(20,"div",1)(21,"div",40)(22,"label"),e._uU(23,"Bank Pledge Number*"),e.qZA(),e._UZ(24,"input",43),e.YNc(25,It,2,1,"ng-container",19),e.qZA()(),e.TgZ(26,"div",1)(27,"div",40)(28,"label"),e._uU(29,"Bank Name"),e.qZA(),e._UZ(30,"ng-select",44),e.YNc(31,Jt,2,1,"ng-container",19),e.qZA()(),e.TgZ(32,"div",1)(33,"div",40)(34,"label"),e._uU(35,"Bank Pledge Date*"),e.qZA(),e._UZ(36,"input",45),e.YNc(37,Gt,2,1,"ng-container",19),e.qZA()(),e.YNc(38,Yt,13,4,"div",13),e.TgZ(39,"div",9)(40,"div",46)(41,"button",47),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Close click"))}),e._uU(42,"Cancel"),e.qZA(),e.TgZ(43,"button",48),e._uU(44," Submit "),e.qZA()()()()()()}if(2&o){const t=e.oxw();let n,i,r;e.xp6(7),e.hij(" ",t.payerName," "),e.xp6(1),e.Q6J("formGroup",t.formGroup),e.xp6(11),e.s9C("value",t.currency),e.xp6(6),e.Q6J("ngIf",null==(n=t.formGroup.get("bankPledgeNumber"))?null:n.errors),e.xp6(5),e.Q6J("items",t.banks),e.xp6(1),e.Q6J("ngIf",null==(i=t.formGroup.get("bankId"))?null:i.errors),e.xp6(6),e.Q6J("ngIf",null==(r=t.formGroup.get("bankPledgeDate"))?null:r.errors),e.xp6(1),e.Q6J("ngIf",null==t.fileDetails?null:t.fileDetails.fileName)}}let zt=(()=>{class o{constructor(t,n,i,r,h,k,q){this.closeRegisterService=t,this.sharedService=n,this._modalService=i,this.fb=r,this._collectService=h,this._commonService=k,this._datePipe=q,this.banks=[],this.payerName="",this.currency="",this.pageNo=1,this.searchText="",this.fileDetails={fileName:"",file:""},this.isNewFile=!1,this.invalidFileType="",this.loadMainData=new e.vpe}ngOnInit(){this.getCurrentSessionCollectedBankPledge(),this.initForm(),this.getBanks()}initForm(){this.formGroup=this.fb.group({collectionId:[""],paidAmountJod:[{value:"",disabled:!0}],bankId:[null,[c.kI.required]],bankPledgeDate:[null,[c.kI.required]],bankPledgeNumber:[null,[c.kI.required]],pledgeAttachment:[null],attachment:[null]})}getCurrentSessionCollectedBankPledge(){return this.closeRegisterService.getCurrentSessionCollectedBankPledge(this.searchText,this.pageNo).subscribe(t=>{t&&(this.collectedData=t.data,console.log(this.collectedData),this.totalAllRecordsCount=t.info?.totalAllRecordsCount,this.totalRecordsCount=t.info?.totalRecordsCount,this.pagin=Math.ceil(this.totalRecordsCount/6),this.pages=O.w6(this.pagin))})}pageChange(t){this.pageNo=t,this.getCurrentSessionCollectedBankPledge(),window.scroll(0,0)}searchData(t){const n=t.target.value;n.length>=1&&(this.searchText=n,this.pageNo=1,this.getCurrentSessionCollectedBankPledge()),0==n.length&&(this.pageNo=1,this.getCurrentSessionCollectedBankPledge())}removeSearch(){this.searchText="",this.getCurrentSessionCollectedBankPledge()}actionsOnBankPledge(t,n){const i=new FormData;return i.append("CollectionId",t.ordersBanksPledgeCollectionId),i.append("Action",n),this.closeRegisterService.actionsOnBankPledge(i).subscribe(r=>{r.isSuccess?this.getCurrentSessionCollectedBankPledge():console.log("error",r)})}reverseActionsOnBankPledge(t){const n=new FormData;return n.append("ChequeCollectionId",t.ordersBanksPledgeCollectionId),this.closeRegisterService.reverseActionsOnBankPledge(n).subscribe(i=>{i.isSuccess?this.getCurrentSessionCollectedBankPledge():console.log("error",i)})}openModalEdit(t,n){console.log(t),this.payerName=t?.custoemrName,this.currency=t?.currency[0]?.lookupName;let i={collectionId:t?.ordersBanksPledgeCollectionId,paidAmountJod:t?.pledgeAmountJod.toFixed(3),bankId:t?.bankId,bankPledgeDate:this._datePipe.transform(t?.bankPledgeDate,"yyyy-MM-dd"),bankPledgeNumber:t?.bankPledgeNumber},r=t?.pledgeAttachment.split("/").pop();this.fileDetails={file:t?.pledgeAttachment,fileName:r},this.formGroup.patchValue(i),this._modalService.open(n,{centered:!0,size:"lg"})}uploadNewFile(){this.isNewFile=!this.isNewFile}viewFile(){this._modalService.open(B.W,{size:"md"}).componentInstance.file=this.fileDetails?.file}onSelectFile(t){let n=[...t.target.files],i=this._commonService.checkInvalidImageFormat(n);if(i)return document.getElementById("file-input").value=null,this.invalidFileType="This file not support, supported formates: JPEG, JPG, PNG, PDF",void setTimeout(()=>{this.invalidFileType=""},5e3);n.length>0&&(i||n.forEach(r=>{this.uploadFile(r),this.formGroup.get("attachment")?.setValue(r.name),this._commonService.fileToBase64(r).then(h=>{this.uploadedFile=h})}))}fileAction(t){"view"==t?this._modalService.open(p.g,{size:"md"}).componentInstance.imageUploadedView=this.uploadedFile:(document.getElementById("file-input").value=null,this.formGroup.get("attachment")?.setValue(""),this.formGroup.get("pledgeAttachment")?.setValue(""))}uploadFile(t){const n=new FormData;n.append("Folder","BankTransfer"),n.append("File",t),this._collectService.uploadFile(n).subscribe(i=>{i.isSuccess&&this.formGroup.get("pledgeAttachment")?.setValue(i.data)})}onSubmit(){if(this.formGroup.invalid)this.formGroup.markAllAsTouched();else{let t=this.formGroup.value;const n=new FormData;n.append("CollectionId",t?.collectionId),n.append("BankId",t?.bankId),n.append("DrawerName",t?.drawerName),n.append("BankPledgeDate",t?.bankPledgeDate),n.append("BankPledgeNumber",t?.bankPledgeNumber),this.closeRegisterService.editCollectionBankPledge(n).subscribe(i=>{console.log(i),i.isSuccess&&(this._modalService.dismissAll(),this.successModal("success","Data saved successfully!"),this.getCurrentSessionCollectedBankPledge())},i=>{this.successModal("error",i.error.errors)})}}successModal(t,n){const i=this._modalService.open(D.i,{size:"md"});i.componentInstance.type=t,"success"==t?i.componentInstance.message=n:"error"==t&&(i.componentInstance.messageError=n)}getBanks(){this._collectService.getLookupsById(11).subscribe(t=>{this.banks=t.data.map(n=>({id:n.id,name:n.name[0].lookupName}))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.x),e.Y36(y.F),e.Y36(g.FF),e.Y36(c.qu),e.Y36(I.k),e.Y36(_.v),e.Y36(l.uU))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-collect-bank-pledge"]],outputs:{loadMainData:"loadMainData"},decls:24,vars:7,consts:[[1,"row"],[1,"col-md-6"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"top-details","justify-content-end","pt-3"],[1,"col-md-12"],[1,"card-table","mt-3"],["class","col-md-12",4,"ngIf","ngIfElse"],["loading",""],["class","col-md-6",4,"ngIf"],["editModal",""],[1,"table-responsive"],[1,"table"],[1,"py-2"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","btn btn-undo",3,"click",4,"ngIf"],["class","btn btn-right",3,"disabled","click",4,"ngIf"],["class","btn btn-xmark",3,"disabled","click",4,"ngIf"],["class","btn btn-edit",3,"disabled","click",4,"ngIf"],[1,"btn","btn-undo",3,"click"],["src","assets/images/undo.png","alt",""],[1,"btn","btn-right",3,"disabled","click"],[1,"fa-regular","fa-circle-check"],[1,"btn","btn-xmark",3,"disabled","click"],[1,"fa-regular","fa-circle-xmark"],[1,"btn","btn-edit",3,"disabled","click"],[1,"fa-solid","fa-pen"],[1,"showing"],[3,"collectionSize","page","maxSize","pageSize","rotate","ellipses","pageChange"],["ngbAutoFocus","",1,"modal-body"],[1,"modal-head"],[1,"fw-700","font-18"],[1,"fw-600","font-16"],[1,"px-2","gray-500","text-capitalize"],[3,"formGroup","submit"],[1,"form-group"],["name","name","type","text","formControlName","paidAmountJod",1,"form-control"],["type","text","disabled","",1,"form-control",3,"value"],["name","name","type","text","formControlName","bankPledgeNumber",1,"form-control"],["placeholder"," Select bank ","bindLabel","name","bindValue","id","formControlName","bankId",3,"items"],["type","date","formControlName","bankPledgeDate",1,"form-control"],[1,"btns-group","my-2"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save"],["class","error",4,"ngIf"],[1,"error"],["class","custom-file px-2 align-items-center d-flex justify-content-between",4,"ngIf"],[1,"file-item","d-flex","justify-content-between","align-items-center","py-2","px-3"],[1,"fw-600","green-clr","mb-0"],[1,"d-flex","gap-2","align-items-center"],["height","20","src","assets/images/eye.png",1,"cursor-pointer",3,"click"],["target","_blank","download","",3,"href"],["height","20","src","assets/images/Download.png",1,"cursor-pointer"],[1,"custom-file","px-2","align-items-center","d-flex","justify-content-between"],["type","file","id","file-input",1,"file-input__input",3,"change"],["fileInput",""],["for","file-input",1,"file-input__label","mb-0"],["height","20","src","assets/images/eye.png",1,"cursor-pointer","me-2",3,"click"],["height","20","src","assets/images/trash.png",1,"cursor-pointer",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"input",5),e.NdJ("ngModelChange",function(r){return n.searchText=r})("keyup",function(r){return n.searchData(r)}),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(7,"i",7),e.qZA()()(),e.TgZ(8,"div",1)(9,"div",8)(10,"p")(11,"span"),e._uU(12),e.qZA()()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"div",0),e.YNc(16,Nt,24,2,"div",11),e.TgZ(17,"div",9),e.YNc(18,yt,2,0,"ng-template",null,12,e.W1O),e.qZA()()()(),e.YNc(20,wt,9,3,"div",13),e.YNc(21,Ot,2,6,"div",13),e.qZA(),e.YNc(22,jt,45,8,"ng-template",null,14,e.W1O)),2&t){const i=e.MAs(19);e.xp6(5),e.Q6J("ngModel",n.searchText),e.xp6(1),e.Q6J("hidden",0==n.searchText.length),e.xp6(6),e.hij("No. Of Pledges ",n.totalRecordsCount,""),e.xp6(4),e.Q6J("ngIf",n.collectedData)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",n.totalRecordsCount>6),e.xp6(1),e.Q6J("ngIf",n.totalRecordsCount>6)}},dependencies:[l.sg,l.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,c.On,x.w9,g.N9,w.N,P.w,l.JJ,l.uU],styles:[".card-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px}.btn-right[_ngcontent-%COMP%]{color:#29a073;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-xmark[_ngcontent-%COMP%]{color:#dc3545;font-size:20px;padding:0 5px;margin:0 5px;border:0px}.btn-edit[_ngcontent-%COMP%]{color:#4e9aff;padding:0 5px;margin:0 5px;border:0px}.btn-undo[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:0;border:0px}.btn-undo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.card-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 5px 10px 15px!important}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled, fieldset[_ngcontent-%COMP%]:disabled   .btn[_ngcontent-%COMP%]{color:#a9a9a9!important}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid #ddd}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#1b212d}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#1b212d}.modal-body[_ngcontent-%COMP%]   .modal-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#929eae}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:7px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:46px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-weight:500;color:var(--primary);font-size:15px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:20px;height:20px;accent-color:var(--primary)}.modal-body[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{border:1px solid #2eb93e;border-radius:5px}.custom-file[_ngcontent-%COMP%]{border:1px solid #dadada;display:flex;height:46px;border-radius:.375rem;justify-content:center;gap:5px;background:#fff}.file-input__input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.file-input__label[_ngcontent-%COMP%]{cursor:pointer;display:inline-flex;align-items:center;border-radius:4px;font-weight:600;color:var(--gray-500);font-size:14px}"]}),o})();const Lt=["errorModal"];function Vt(o,a){if(1&o&&(e.TgZ(0,"p",7),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage)}}function Kt(o,a){1&o&&e._UZ(0,"span",49)}function Ht(o,a){1&o&&e._UZ(0,"span",49)}function $t(o,a){if(1&o&&(e.ynx(0),e.YNc(1,Kt,1,0,"span",48),e.YNc(2,Ht,1,0,"span",48),e.BQk()),2&o){const t=e.oxw(2).index,n=e.oxw(5);let i,r;e.xp6(1),e.Q6J("ngIf",null==(i=n.registerSessionClosingAmounts.controls[t].get("actualAmount"))?null:i.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=n.registerSessionClosingAmounts.controls[t].get("actualAmount"))?null:r.errors.min)}}function Wt(o,a){if(1&o&&(e.ynx(0),e.YNc(1,$t,3,2,"ng-container",5),e.BQk()),2&o){const t=e.oxw().index,n=e.oxw(5);e.xp6(1),e.Q6J("ngIf",n.registerSessionClosingAmounts.controls[t].get("actualAmount").invalid&&n.registerSessionClosingAmounts.controls[t].get("actualAmount").touched||n.registerSessionClosingAmounts.controls[t].get("actualAmount").dirty)}}function Xt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",38)(1,"div",39)(2,"div",40)(3,"div",41)(4,"h3"),e._uU(5),e.qZA()()(),e.TgZ(6,"div",32)(7,"div",33)(8,"p"),e._uU(9,"Registered Amount "),e.qZA(),e.TgZ(10,"div",34),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"h6",42),e._uU(14),e.qZA()()(),e.TgZ(15,"div",32)(16,"div",43)(17,"p"),e._uU(18,"Actual Amount "),e.qZA(),e.TgZ(19,"div",44)(20,"input",45),e.NdJ("change",function(i){const h=e.CHM(t).index,k=e.oxw(5);return e.KtG(k.calcDifference(i,h))})("focusout",function(){const r=e.CHM(t).index,h=e.oxw(5);return e.KtG(h.actualAmountFocusOut("actualAmount",r))}),e.qZA(),e.YNc(21,Wt,2,1,"ng-container",5),e.qZA(),e.TgZ(22,"h6",42),e._uU(23),e.qZA()()(),e.TgZ(24,"div",32)(25,"div",46)(26,"p"),e._uU(27,"Differences"),e.qZA(),e.TgZ(28,"div",47),e._uU(29),e.ALo(30,"number"),e.qZA()()()()()}if(2&o){const t=a.$implicit,n=a.index,i=e.oxw(5);let r;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(4),e.AsE(" ",n+1," . ",t.value.currencyName," Currency "),e.xp6(6),e.hij(" ",e.xi3(12,9,t.value.registeredAmount,"2.3-3"),""),e.xp6(3),e.Oqu(t.value.currencyName),e.xp6(7),e.Q6J("ngIf",null==(r=i.registerSessionClosingAmounts.controls[n].get("actualAmount"))?null:r.errors),e.xp6(2),e.Oqu(t.value.currencyName),e.xp6(5),e.Q6J("ngClass",0==t.value.differenceAmount?"":+t.value.differenceAmount>0?"greenHighlight":"redHighlight"),e.xp6(1),e.hij(" ",e.xi3(30,12,i.removeMinusFromNegativeValue(t.value.differenceAmount),"2.3-3")," ")}}function en(o,a){if(1&o&&(e.TgZ(0,"div",30)(1,"div",1)(2,"div",2)(3,"div",31)(4,"div",1)(5,"div",32)(6,"div",33)(7,"p"),e._uU(8," Petty Cash Remaining "),e.qZA(),e.TgZ(9,"div",34),e._uU(10),e.ALo(11,"number"),e.qZA()()(),e.TgZ(12,"div",32)(13,"div",33)(14,"p"),e._uU(15,"Initial Fund"),e.qZA(),e.TgZ(16,"div",34),e._uU(17),e.ALo(18,"number"),e.qZA()()()()()(),e.TgZ(19,"div",2)(20,"form",35)(21,"div",24)(22,"div",3)(23,"h3"),e._uU(24," Cash"),e.qZA(),e.TgZ(25,"p")(26,"span"),e._uU(27),e.qZA()()(),e.TgZ(28,"div"),e.YNc(29,Xt,31,15,"div",36),e.TgZ(30,"div",37),e._UZ(31,"hr"),e.qZA()()()()()()()),2&o){const t=e.oxw(4);e.xp6(10),e.hij(" ",e.xi3(11,5,t.registerData.prettyCashRemainging,"2.3-3")," JOD"),e.xp6(7),e.hij(" ",e.xi3(18,8,t.registerData.initialFund,"2.3-3")," JOD"),e.xp6(3),e.Q6J("formGroup",t.formGroup),e.xp6(7),e.hij(" No. Of Currencies ",t.registerData.noOfCurrencies," "),e.xp6(2),e.Q6J("ngForOf",t.registerSessionClosingAmounts.controls)}}function tn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"app-collect-cheque",50),e.NdJ("loadMainData",function(i){e.CHM(t);const r=e.oxw(4);return e.KtG(r.loadPageData(i))}),e.qZA()()}}function nn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"app-collect-card",50),e.NdJ("loadMainData",function(i){e.CHM(t);const r=e.oxw(4);return e.KtG(r.loadPageData(i))}),e.qZA()()}}function on(o,a){1&o&&(e.TgZ(0,"div",30),e._UZ(1,"app-collect-bank-transfers"),e.qZA())}function ln(o,a){1&o&&(e.TgZ(0,"div",30),e._UZ(1,"app-collect-bank-pledge"),e.qZA())}function an(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",11)(3,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.chooseTab("cash"))}),e.TgZ(4,"div",13)(5,"div",14),e._UZ(6,"img",15),e.qZA(),e.TgZ(7,"div",16)(8,"p"),e._uU(9," Total Cash "),e.qZA(),e.TgZ(10,"h5"),e._uU(11),e.ALo(12,"number"),e.qZA()()()(),e.TgZ(13,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.chooseTab("cheque"))}),e.TgZ(14,"div",13)(15,"div",14),e._UZ(16,"img",17),e.qZA(),e.TgZ(17,"div",16)(18,"p"),e._uU(19," Total Cheque "),e.qZA(),e.TgZ(20,"h5"),e._uU(21),e.ALo(22,"number"),e.qZA()()()(),e.TgZ(23,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.chooseTab("cards"))}),e.TgZ(24,"div",13)(25,"div",14),e._UZ(26,"img",18),e.qZA(),e.TgZ(27,"div",16)(28,"p"),e._uU(29," Total Card "),e.qZA(),e.TgZ(30,"h5"),e._uU(31),e.ALo(32,"number"),e.qZA()()()(),e.TgZ(33,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.chooseTab("bankTransfer"))}),e.TgZ(34,"div",13)(35,"div",14),e._UZ(36,"img",19),e.qZA(),e.TgZ(37,"div",16)(38,"p"),e._uU(39," TTL.Bank Transfers "),e.qZA(),e.TgZ(40,"h5"),e._uU(41),e.ALo(42,"number"),e.qZA()()()(),e.TgZ(43,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.chooseTab("bankPledge"))}),e.TgZ(44,"div",13)(45,"div",14),e._UZ(46,"img",20),e.qZA(),e.TgZ(47,"div",16)(48,"p"),e._uU(49," TTL.Bank Pledges "),e.qZA(),e.TgZ(50,"h5"),e._uU(51),e.ALo(52,"number"),e.qZA()()()()(),e.TgZ(53,"div",1)(54,"div",2)(55,"div",21),e.YNc(56,en,32,11,"div",22),e.YNc(57,tn,2,0,"div",22),e.YNc(58,nn,2,0,"div",22),e.YNc(59,on,2,0,"div",22),e.YNc(60,ln,2,0,"div",22),e.qZA()(),e.TgZ(61,"div",23)(62,"div",24)(63,"div",1)(64,"div",25)(65,"div",26)(66,"label"),e._uU(67," Notes "),e.qZA(),e.TgZ(68,"textarea",27),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw(3);return e.KtG(r.closingNotes=i)}),e.qZA()()()()()(),e.TgZ(69,"div",2)(70,"div",28)(71,"button",29),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.nextStep())}),e._uU(72," Next"),e.qZA()()()()()()}if(2&o){const t=e.oxw(3);e.xp6(3),e.ekj("active","cash"==t.selectedTab),e.xp6(8),e.hij(" ",e.xi3(12,21,t.registerData.totalCollectedCashJod,"2.3-3")," JOD "),e.xp6(2),e.ekj("active","cheque"==t.selectedTab),e.xp6(8),e.hij("",e.xi3(22,24,t.registerData.totalCollectedCheques,"2.3-3")," JOD "),e.xp6(2),e.ekj("active","cards"==t.selectedTab),e.xp6(8),e.hij(" ",e.xi3(32,27,t.registerData.totalCollectedCards,"2.3-3")," JOD "),e.xp6(2),e.ekj("active","bankTransfer"==t.selectedTab),e.xp6(8),e.hij(" ",e.xi3(42,30,t.registerData.totalCollectedBankTransfere,"2.3-3")," JOD "),e.xp6(2),e.ekj("active","bankPledge"==t.selectedTab),e.xp6(8),e.hij(" ",e.xi3(52,33,t.registerData.totalCollectedBankPledge,"2.3-3")," JOD "),e.xp6(5),e.Q6J("ngIf",null==t.closeSessionTabs?null:t.closeSessionTabs.cash),e.xp6(1),e.Q6J("ngIf",null==t.closeSessionTabs?null:t.closeSessionTabs.cheque),e.xp6(1),e.Q6J("ngIf",null==t.closeSessionTabs?null:t.closeSessionTabs.cards),e.xp6(1),e.Q6J("ngIf",null==t.closeSessionTabs?null:t.closeSessionTabs.bankTransfer),e.xp6(1),e.Q6J("ngIf",null==t.closeSessionTabs?null:t.closeSessionTabs.bankPledge),e.xp6(8),e.Q6J("ngModel",t.closingNotes)}}function rn(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-loading"),e.qZA())}function cn(o,a){if(1&o&&(e.ynx(0),e.YNc(1,an,73,36,"div",9),e.TgZ(2,"div",1)(3,"div",2),e.YNc(4,rn,2,0,"ng-template",null,10,e.W1O),e.qZA()(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.registerData)}}function sn(o,a){if(1&o&&(e.TgZ(0,"div",53)(1,"div",54)(2,"div",55),e._UZ(3,"img",15),e.qZA(),e.TgZ(4,"div",56)(5,"h6",57),e._uU(6,"Cash"),e.qZA(),e.TgZ(7,"h6",58),e._uU(8),e.ALo(9,"number"),e.TgZ(10,"span",59),e._uU(11),e.qZA()()()()()),2&o){const t=a.$implicit;e.xp6(8),e.hij(" ",e.xi3(9,2,null==t||null==t.value?null:t.value.actualAmount,"2.3-3"),""),e.xp6(3),e.hij(" ",null==t||null==t.value?null:t.value.currencyName,"")}}function dn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",51),e.YNc(2,sn,12,5,"div",52),e.TgZ(3,"div",53)(4,"div",54)(5,"div",55),e._UZ(6,"img",17),e.qZA(),e.TgZ(7,"div",56)(8,"h6",57),e._uU(9,"Cheques"),e.qZA(),e.TgZ(10,"h6",58),e._uU(11),e.ALo(12,"number"),e.TgZ(13,"span",59),e._uU(14," JOD"),e.qZA()()()()(),e.TgZ(15,"div",53)(16,"div",54)(17,"div",55),e._UZ(18,"img",18),e.qZA(),e.TgZ(19,"div",56)(20,"h6",57),e._uU(21,"Cards"),e.qZA(),e.TgZ(22,"h6",58),e._uU(23),e.ALo(24,"number"),e.TgZ(25,"span",59),e._uU(26," JOD"),e.qZA()()()()(),e.TgZ(27,"div",53)(28,"div",54)(29,"div",55),e._UZ(30,"img",19),e.qZA(),e.TgZ(31,"div",56)(32,"h6",57),e._uU(33,"Bank Transfer"),e.qZA(),e.TgZ(34,"h6",58),e._uU(35),e.ALo(36,"number"),e.TgZ(37,"span",59),e._uU(38," JOD"),e.qZA()()()()(),e.TgZ(39,"div",53)(40,"div",54)(41,"div",55),e._UZ(42,"img",20),e.qZA(),e.TgZ(43,"div",56)(44,"h6",57),e._uU(45,"Bank Pledges"),e.qZA(),e.TgZ(46,"h6",58),e._uU(47),e.ALo(48,"number"),e.TgZ(49,"span",59),e._uU(50," JOD"),e.qZA()()()()()(),e.TgZ(51,"div",60)(52,"p",61),e._uU(53,"To close the register, please click on the button below"),e.qZA(),e.TgZ(54,"div",62)(55,"button",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.goBack())}),e._uU(56," Back "),e.qZA(),e.TgZ(57,"button",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.CloseRegisterSession())}),e._uU(58," Close Register "),e.qZA()()()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.registerSessionClosingAmounts.controls),e.xp6(9),e.hij(" ",e.xi3(12,5,null==t.closingData?null:t.closingData.totalCollectedCheques,"2.3-3"),""),e.xp6(12),e.hij(" ",e.xi3(24,8,null==t.closingData?null:t.closingData.totalCollectedCards,"2.3-3"),""),e.xp6(12),e.hij(" ",e.xi3(36,11,null==t.closingData?null:t.closingData.totalCollectedBankTransfere,"2.3-3"),""),e.xp6(12),e.hij(" ",e.xi3(48,14,null==t.closingData?null:t.closingData.totalCollectedBankPledge,"2.3-3"),"")}}function un(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,cn,6,1,"ng-container",5),e.YNc(2,dn,59,17,"div",8),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isClose),e.xp6(1),e.Q6J("ngIf",t.isClose)}}function _n(o,a){if(1&o&&(e.TgZ(0,"div")(1,"div",64)(2,"h5"),e._uU(3),e.qZA()()()),2&o){const t=e.oxw();e.xp6(3),e.hij(" ",t.isNoOPenSessionMessage,"")}}function pn(o,a){if(1&o&&(e.TgZ(0,"h5",67),e._UZ(1,"i",68),e._uU(2),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(t.errorMessage)}}function gn(o,a){if(1&o&&(e.TgZ(0,"div",65),e.YNc(1,pn,3,1,"h5",66),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.errorMessage)}}const mn=[{path:"",component:(()=>{class o{constructor(t,n,i,r,h,k,q,U,xn,vn){this.closeRegisterService=t,this.modalService=n,this.sharedService=i,this.route=r,this.fb=h,this.headerService=k,this.httpserviceService=U,this._commonService=xn,this._subjectService=vn,this.isShow=!0,this.items=[1,2,1,2,1,2],this.submitted=!1,this.currentDate=new Date,this.selected=1,this.selectedTab="cash",this.pageNo=0,this.errorMessage="",this.closeSessionTabs={cash:!0,cheque:!1,cards:!1,bankTransfer:!1,bankPledge:!1},q.backdrop="static",q.keyboard=!1}ngOnInit(){this.headerService.setTitle("Close Register"),this.registerName=this.sharedService.getRegister?.registerObj?.registersName,this.registerId=this.sharedService.getRegister?.registerObj?.id,this.branchName=this.sharedService?.getRegister?.registerObj.registeBranch.branchName,this.cityName=this.sharedService?.getRegister?.registerObj.registeBranch.city,this.getForm(),this.GetRegisterClosingData(),this.intervalId=setInterval(()=>{this.currentDate=new Date},1e3)}getForm(){this.formGroup=this.fb.group({registerId:this.registerId,closingNotes:0,registerSessionClosingAmounts:this.fb.array([])})}goBack(){this.isClose=!1;const t=Object.keys(this.closeSessionTabs);t.forEach(n=>this.closeSessionTabs[n]=!1),this.closeSessionTabs.cash=!0,this.selectedTab=t[0]}AddCurruncys(){return this.fb.group({currencyID:0,registeredAmount:0,actualAmount:[null,c.kI.min(1)],differenceAmount:0,currencyName:""})}get registerSessionClosingAmounts(){return this.formGroup.controls.registerSessionClosingAmounts}chooseTab(t){t?(Object.keys(this.closeSessionTabs).forEach(i=>this.closeSessionTabs[i]=!1),this.closeSessionTabs[t]=!0,this.selectedTab=t):(this.getRegisterClosingDataFinal(),this.isClose=!0)}getRegisterClosingDataFinal(){this.closeRegisterService.getRegisterClosingDataFinal().subscribe(t=>{console.log(t),t.isSuccess&&(this.closingData=t.data)})}GetRegisterClosingData(){return this.closeRegisterService.GetRegisterClosingData().subscribe(t=>{if(t){if(this.registerData=t.data,console.log(t),0==this.registerSessionClosingAmounts.length)for(let n=0;n<this.registerData?.cashCollected.length;n++)this.registerSessionClosingAmounts.push(this.fb.group({registeredAmount:this.registerData.cashCollected[n].collectedAmount,actualAmount:null,differenceAmount:0,currencyID:this.registerData.cashCollected[n].currencyId,currencyName:this.registerData.cashCollected[n]?.currencyName[0].lookupName}));t?.Errors&&(console.log(t.Errors),console.log(t.Errors[0].StatusCode),82==t.Errors[0].StatusCode&&(this.isNoOPenSession=!0,this.isNoOPenSessionMessage=t?.Errors[0]?.ErrorMessageEn))}},t=>{this.errorMessage=t.error?.Errors[0]?.ErrorMessageEn})}loadPageData(t){this.GetRegisterClosingData()}actualAmountFocusOut(t,n){let i=this.formGroup.get("registerSessionClosingAmounts").at(n),r=+i.controls[t].value;r>0&&i.controls[t].setValue(r.toFixed(3))}calcDifference(t,n){const i=t.target.value;this.formGroup.get("registerSessionClosingAmounts").at(n).get("differenceAmount").patchValue(this.formGroup.get("registerSessionClosingAmounts").at(n).get("registeredAmount").value-i)}removeMinusFromNegativeValue(t){return Math.abs(t)}openModalEdit(){this.modalService.open(S).componentInstance.name="add"}nextStep(){const t=Object.keys(this.closeSessionTabs);for(let n=0;n<t.length;n++)if(this.closeSessionTabs[t[n]]){this.chooseTab(t[n+1]);break}}getUserMenu(){this.httpserviceService.GetUserMenuNew(17001).subscribe(t=>{let n=t?.data?.menu;for(let i of n){let r=i.items.find(h=>h.canClick);if(r){this._commonService.NavigateToRoute(r.url),console.log(r);break}}})}CloseRegisterSession(){return this.formGroup.invalid?(this.goBack(),this.formGroup.markAllAsTouched(),!1):(this.formGroup.get("closingNotes").patchValue(this.closingNotes),this.closeRegisterService.CloseRegisterSession(this.formGroup.value).subscribe(t=>{if(t.isSuccess){this.remainedSessions=t.info.remainedSessions,console.log(t);const n=this.modalService.open(J);n.componentInstance.type="success",n.componentInstance.message="Close session done successfully",n.componentInstance.remainedSessions=t.info.remainedSessions,n.componentInstance.routeName="/close-register",this._subjectService.isRegisterOpen.next(!0),this._subjectService.sessionDetails.next({opened:!1}),n.componentInstance?.loadPageData?.subscribe(i=>{console.log("result",i),localStorage.removeItem("closeSession")})}else{console.log("error",t);const n=this.modalService.open(J);n.componentInstance.type="error",n.componentInstance.messageError=t.Errors,n.componentInstance.routeName="/close-register",n.componentInstance.backToSecond.subscribe(i=>{console.log("result",i),this.modalService.dismissAll(),this.isClose=!1,this.selected=2})}},t=>{this.errorMessage=t?.error?.errors[0]?.ErrorMessageEn,setTimeout(()=>{this.errorMessage=""},4e3)}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.x),e.Y36(g.FF),e.Y36(y.F),e.Y36(m.gz),e.Y36(c.qu),e.Y36(oe.r),e.Y36(g.NM),e.Y36(ie.h),e.Y36(_.v),e.Y36(le._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-close-register"]],viewQuery:function(t,n){if(1&t&&e.Gf(Lt,5),2&t){let i;e.iGM(i=e.CRH())&&(n.errorModal=i.first)}},decls:18,vars:11,consts:[[1,"card-page"],[1,"row"],[1,"col-md-12"],[1,"top-details"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["errorModal",""],[1,"alert","alert-danger"],["class","col-md-12",4,"ngIf"],["class","row",4,"ngIf"],["loading",""],[1,"tab-nav"],[1,"btn",3,"click"],[1,"d-flex","gap-3","align-items-center"],[1,"imag"],["src","assets/images/wallet.png","alt",""],[1,"info"],["src","assets/images/cheque.png","alt",""],["src","assets/images/card.png","alt",""],["src","assets/images/bt.svg","alt",""],["src","assets/images/bp.svg","alt",""],[1,"tab-content"],["class","tab-item",4,"ngIf"],[1,"col-md-12","mt-3"],[1,"card-collect"],[1,"col-md-8"],[1,"form-group","mb-3"],["rows","4","minlength","200","maxlength","200",1,"form-control",3,"ngModel","ngModelChange"],[1,"btns-group","my-1","mx-1"],["type","submit",1,"btn","btn-save",3,"click"],[1,"tab-item"],[1,"card-collect","py-2"],[1,"col-sm-4"],[1,"total-card"],[1,"total"],[3,"formGroup"],["formArrayName","registerSessionClosingAmounts",4,"ngFor","ngForOf"],[1,"pt-1","pb-3"],["formArrayName","registerSessionClosingAmounts"],[1,"row","mb-3",3,"formGroupName"],[1,"col-sm-12"],[1,"curncy"],[1,"font-16","fw-600","m-0"],[1,"total-card","justify-content-center"],[1,"actual-amount"],["type","text","formControlName","actualAmount","appDecimalNumber","","required","",1,"form-control",3,"change","focusout"],[1,"total-card","justify-content-end"],[1,"difference-amount",3,"ngClass"],["class","error",4,"ngIf"],[1,"error"],[3,"loadMainData"],[1,"main-fund-container","d-flex","gap-4","mb-4","flex-wrap"],["class","main-fund-wrapper",4,"ngFor","ngForOf"],[1,"main-fund-wrapper"],[1,"main-fund-div"],[1,"currency-symbol"],[1,"d-flex","flex-column"],[1,"fw-700","font-18"],[1,"fw-700","font-18","m-0"],[1,"primary-clr"],[1,"d-flex","flex-column","align-items-center","justify-content-center",2,"height","400px"],[1,"text-center","m-0","my-3"],[1,"btns-group","justify-content-center","m-0"],["type","button",1,"btn","btn-save",3,"click"],[1,"nosession"],[1,"modal-body"],["class","m-0 py-3 text-center",4,"ngIf"],[1,"m-0","py-3","text-center"],[1,"text-danger","fa-regular","fa-circle-xmark","me-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p"),e._uU(5," Date "),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"date"),e.qZA(),e._uU(9," \xa0 Time "),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"date"),e.qZA()()(),e.YNc(13,Vt,2,1,"p",4),e.qZA(),e.YNc(14,un,3,2,"div",5),e.YNc(15,_n,4,1,"div",5),e.qZA()(),e.YNc(16,gn,2,1,"ng-template",null,6,e.W1O)),2&t&&(e.xp6(7),e.hij(" ",e.xi3(8,5,n.currentDate," d MMM y ")," "),e.xp6(4),e.hij(" ",e.xi3(12,8,n.currentDate,"hh:mm:ss a ")," "),e.xp6(2),e.Q6J("ngIf",n.errorMessage),e.xp6(1),e.Q6J("ngIf",!n.isNoOPenSession),e.xp6(1),e.Q6J("ngIf",n.isNoOPenSession))},dependencies:[l.mk,l.sg,l.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.wO,c.nD,c.sg,c.u,c.x0,c.CE,c.On,w.N,ae.Q,Ce,Re,xt,zt,l.JJ,l.uU],styles:[".difference-amount[_ngcontent-%COMP%]{background-color:#e9ecef;font-size:14px;font-weight:600;display:block;border-radius:9px;display:flex;align-items:center;height:38px;min-width:130px;padding:0 10px}.open-reg[_ngcontent-%COMP%]{text-align:center;padding:10px}.open-reg[_ngcontent-%COMP%]   .bgimg[_ngcontent-%COMP%]{background-color:#f8f8f8;width:225px;height:225px;padding:30px;display:block;margin:10px auto 30px;border-radius:50%}.open-reg[_ngcontent-%COMP%]   .bgimg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.open-reg[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#202020;font-size:18px;font-weight:500;margin-bottom:20px}.open-reg[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#6d7985;font-size:18px;padding:5px}.open-reg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6d7985;font-size:16px;font-weight:400;margin:5px}.open-reg[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff;font-size:16px;padding:12px 50px;margin:25px 0 0}.tab-nav[_ngcontent-%COMP%]{display:flex;gap:30px;margin-bottom:30px}.tab-nav[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{border:1px solid #dc3545;box-shadow:0 15px 25px #0000001a}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:1px solid #ced5dd;border-radius:10px;padding:15px 20px}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .imag[_ngcontent-%COMP%]{width:55px;height:55px;background:#f8f8f8;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:10px}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .imag[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{text-align:start}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:500;padding:3px}.tab-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0;padding:3px}.actual-amount[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:130px}.error[_ngcontent-%COMP%]{color:#f44336;font-size:14px;padding:5px;display:block;font-weight:500}.nosession[_ngcontent-%COMP%]{text-align:center;padding:60px 30px}.main-fund-wrapper[_ngcontent-%COMP%]{box-sizing:border-box;background:#FFFFFF;border:1px solid #E9E9E9;box-shadow:0 10px 20px #0000001a;border-radius:8px;padding:10px 15px;flex:0 1 240px;height:100px;display:flex;align-items:center}.main-fund-wrapper[_ngcontent-%COMP%]   .main-fund-div[_ngcontent-%COMP%]{display:flex;gap:15px}.main-fund-wrapper[_ngcontent-%COMP%]   .main-fund-div[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:55px;height:55px;background:#F6F6F6;box-shadow:0 10px 20px #0000001a;border-radius:50%;padding:8px}.main-fund-wrapper[_ngcontent-%COMP%]   .main-fund-div[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}"]}),o})()}];let fn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(mn),m.Bz]}),o})();var Cn=s(21515);let hn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.ez,fn,Cn.m]}),o})()},32298:(M,T,s)=>{s.d(T,{g:()=>Z});var l=s(94650),m=s(42953),c=s(11481),e=s(36895);function p(C,A){if(1&C&&(l.ynx(0),l._UZ(1,"img",6),l.BQk()),2&C){const f=l.oxw(2);l.xp6(1),l.Q6J("src",null==f.imageUploadedView?null:f.imageUploadedView.base64,l.LSH)}}function u(C,A){if(1&C&&(l.TgZ(0,"div",7),l._UZ(1,"img",8)(2,"br"),l.TgZ(3,"a",9),l._uU(4,"click to open pdf "),l.qZA()()),2&C){const f=l.oxw(2);l.xp6(3),l.Q6J("href",f.viewPdf(null==f.imageUploadedView?null:f.imageUploadedView.file),l.LSH)}}function d(C,A){if(1&C){const f=l.EpF();l.ynx(0),l.TgZ(1,"div",2),l.YNc(2,p,2,1,"ng-container",0),l.YNc(3,u,5,1,"ng-template",null,3,l.W1O),l.qZA(),l.TgZ(5,"div",4)(6,"button",5),l.NdJ("click",function(){l.CHM(f);const N=l.oxw();return l.KtG(N.activeModal.close("Close click"))}),l._uU(7," Close "),l.qZA()(),l.BQk()}if(2&C){const f=l.MAs(4),b=l.oxw();l.xp6(2),l.Q6J("ngIf","image/png"==(null==b.imageUploadedView?null:b.imageUploadedView.fileType)||"image/jpeg"==(null==b.imageUploadedView?null:b.imageUploadedView.fileType)||"image/jpg"==(null==b.imageUploadedView?null:b.imageUploadedView.fileType))("ngIfElse",f)}}function g(C,A){if(1&C&&(l.ynx(0),l._UZ(1,"img",11),l.BQk()),2&C){const f=l.oxw(2);l.xp6(1),l.Q6J("src",f.fileURL,l.LSH)}}function _(C,A){if(1&C&&(l.ynx(0),l.TgZ(1,"div",7),l._UZ(2,"img",8)(3,"br"),l.TgZ(4,"a",9),l._uU(5,"click to open PDF "),l.qZA()(),l.BQk()),2&C){const f=l.oxw(3);l.xp6(4),l.s9C("href",f.fileURL,l.LSH)}}function x(C,A){if(1&C&&(l.ynx(0,12),l.YNc(1,_,6,1,"ng-container",13),l.BQk()),2&C){const f=l.oxw(2);l.Q6J("ngSwitch",f.fileType),l.xp6(1),l.Q6J("ngSwitchCase","pdf")}}function v(C,A){if(1&C){const f=l.EpF();l.TgZ(0,"div",2),l.YNc(1,g,2,1,"ng-container",0),l.YNc(2,x,2,2,"ng-template",null,10,l.W1O),l.qZA(),l.TgZ(4,"div",4)(5,"button",5),l.NdJ("click",function(){l.CHM(f);const N=l.oxw();return l.KtG(N.activeModal.close("Close click"))}),l._uU(6," Close "),l.qZA()()}if(2&C){const f=l.MAs(3),b=l.oxw();l.xp6(1),l.Q6J("ngIf","png"==b.fileType||"jpeg"==b.fileType||"jpg"==b.fileType||"svg"==b.fileType)("ngIfElse",f)}}let Z=(()=>{class C{constructor(f,b){this.activeModal=f,this.sanitizer=b,this.viewOnly=!1,this.fileType="",this.fileURL=""}ngOnInit(){console.log(this.imageUploadedView),this.viewOnly=this.imageUploadedView?.viewOnly,this.viewOnly&&(this.fileType=this.getFileType(this.imageUploadedView.url),this.fileURL=this.imageUploadedView.url)}viewPdf(f){let b=URL.createObjectURL(f);return this.sanitizer.bypassSecurityTrustResourceUrl(b)}getFileType(f){return f?.split(".").pop().trim().toLowerCase()}}return C.\u0275fac=function(f){return new(f||C)(l.Y36(m.Kz),l.Y36(c.H7))},C.\u0275cmp=l.Xpm({type:C,selectors:[["app-view-file"]],inputs:{imageUploadedView:"imageUploadedView"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["viewOnlyURL",""],[1,"modal-body","p-2"],["pdf",""],[1,"btns-group","my-2","mx-0"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"w-100",3,"src"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],["height","80","width","80","src","assets/images/pdf.png","alt",""],["target","_blank",1,"text-decoration-none","text-capitalize",3,"href"],["elseExtViewBlock",""],[1,"w-100","mb-2",3,"src"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(f,b){if(1&f&&(l.YNc(0,d,8,2,"ng-container",0),l.YNc(1,v,7,2,"ng-template",null,1,l.W1O)),2&f){const N=l.MAs(2);l.Q6J("ngIf",!b.viewOnly)("ngIfElse",N)}},dependencies:[e.O5,e.RF,e.n9],styles:[".imagepath[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.imagepath-no[_ngcontent-%COMP%]{text-align:center;padding:50px}.btns-group[_ngcontent-%COMP%]{display:flex;justify-content:center}.btns-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#f8f8f8;color:#dc3545;border-radius:10px;padding:12px 35px;font-weight:600}.card-pdf[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px}.card-pdf[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;font-size:18px;font-weight:600;display:block;padding:15px}"]}),C})()},71891:(M,T,s)=>{s.d(T,{W:()=>g});var l=s(94650),m=s(42953),c=s(36895);function e(_,x){if(1&_&&(l.ynx(0),l._UZ(1,"img",7),l.BQk()),2&_){const v=l.oxw(2);l.xp6(1),l.Q6J("src",v.file,l.LSH)}}function p(_,x){if(1&_&&(l.TgZ(0,"div",8),l._UZ(1,"img",9)(2,"br"),l.TgZ(3,"a",10),l._uU(4,"click to open pdf "),l.qZA()()),2&_){const v=l.oxw(2);l.xp6(3),l.s9C("href",v.file,l.LSH)}}function u(_,x){if(1&_&&(l.ynx(0),l.YNc(1,e,2,1,"ng-container",1),l.YNc(2,p,5,1,"ng-template",null,6,l.W1O),l.BQk()),2&_){const v=l.MAs(3),Z=l.oxw();l.xp6(1),l.Q6J("ngIf","png"==Z.fileType||"jpeg"==Z.fileType||"jpg"==Z.fileType)("ngIfElse",v)}}function d(_,x){1&_&&(l.TgZ(0,"p",11),l._uU(1,"No attachemnt..."),l.qZA())}let g=(()=>{class _{constructor(v){this._activeModal=v,this.fileType=""}ngOnInit(){this.getFileType(this.file)}getFileType(v){this.fileType=v?.split(".").pop()}}return _.\u0275fac=function(v){return new(v||_)(l.Y36(m.Kz))},_.\u0275cmp=l.Xpm({type:_,selectors:[["app-view-uploaded-file"]],inputs:{file:"file"},decls:8,vars:2,consts:[[1,"modal-body","p-2"],[4,"ngIf","ngIfElse"],["noFile",""],[1,"flex-end"],[1,"btns-group","my-2","mx-0"],["type","button",1,"btn","btn-save",3,"click"],["pdf",""],[1,"w-100",3,"src"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],["height","80","width","80","src","assets/images/pdf.png","alt",""],["target","_blank",1,"text-decoration-none","text-capitalize",3,"href"],[1,"primary-clr","mx-0","my-3"]],template:function(v,Z){if(1&v&&(l.TgZ(0,"div",0),l.YNc(1,u,4,2,"ng-container",1),l.YNc(2,d,2,0,"ng-template",null,2,l.W1O),l.TgZ(4,"div",3)(5,"div",4)(6,"button",5),l.NdJ("click",function(){return Z._activeModal.close("Close click")}),l._uU(7," Close "),l.qZA()()()()),2&v){const C=l.MAs(3);l.xp6(1),l.Q6J("ngIf",Z.file)("ngIfElse",C)}},dependencies:[c.O5]}),_})()},87192:(M,T,s)=>{s.d(T,{z:()=>u});var l=s(94650),m=s(42953),c=s(36895);function e(d,g){1&d&&(l.ynx(0),l.TgZ(1,"h6",11),l._uU(2,"Are you sure?"),l.qZA(),l.BQk())}function p(d,g){if(1&d&&l._UZ(0,"p",12),2&d){const _=l.oxw();l.Q6J("innerHTML",null==_.data?null:_.data.body,l.oJD)}}let u=(()=>{class d{constructor(_){this._activeModel=_,this.eventData=new l.vpe}confirm(_){this.eventData.emit(_),this._activeModel.dismiss()}}return d.\u0275fac=function(_){return new(_||d)(l.Y36(m.Kz))},d.\u0275cmp=l.Xpm({type:d,selectors:[["app-confirm-modal"]],inputs:{data:"data"},outputs:{eventData:"eventData"},decls:15,vars:5,consts:[[1,"row"],[1,"col-12"],[1,"modal-header","border-0"],["ngbAutoFocus","",1,"font-20","fw-600","mb-0"],[1,"modal-body"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"modal-footer","border-0"],[1,"btns-group","gap-2","mx-0"],["type","button",1,"btn","btn-save",3,"click"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"mb-0","fw-500"],[1,"mb-0","fs-16","fw-500",3,"innerHTML"]],template:function(_,x){if(1&_&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),l._uU(4),l.qZA()(),l.TgZ(5,"div",4),l.YNc(6,e,3,0,"ng-container",5),l.YNc(7,p,1,1,"ng-template",null,6,l.W1O),l.qZA(),l.TgZ(9,"div",7)(10,"div",8)(11,"button",9),l.NdJ("click",function(){return x.confirm(!0)}),l._uU(12),l.qZA(),l.TgZ(13,"button",10),l.NdJ("click",function(){return x.confirm(!1)}),l._uU(14),l.qZA()()()()()),2&_){const v=l.MAs(8);l.xp6(4),l.Oqu((null==x.data?null:x.data.headingText)||"Confirm"),l.xp6(2),l.Q6J("ngIf",!(null!=x.data&&x.data.body))("ngIfElse",v),l.xp6(6),l.Oqu((null==x.data?null:x.data.confirmText)||"Yes"),l.xp6(2),l.Oqu((null==x.data?null:x.data.cancelText)||"No")}},dependencies:[c.O5]}),d})()},59442:(M,T,s)=>{s.d(T,{w:()=>m});var l=s(94650);let m=(()=>{class c{}return c.\u0275fac=function(p){return new(p||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["app-not-found"]],decls:3,vars:0,consts:[[1,"not-found"]],template:function(p,u){1&p&&(l.TgZ(0,"div",0)(1,"p"),l._uU(2," No data to display "),l.qZA()())},styles:[".not-found[_ngcontent-%COMP%]{text-align:center;padding:10%}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c9c9d1;font-size:16px;font-weight:600}"]}),c})()},67761:(M,T,s)=>{s.d(T,{g:()=>e});var l=s(71891),m=s(94650),c=s(42953);let e=(()=>{class p{constructor(d){this._modalService=d}ngOnInit(){}fileAction(d){"view"==d&&this.openFileModal()}openFileModal(){this._modalService.open(l.W).componentInstance.file=this.file}getFileType(d){return d?.split("/").pop()}}return p.\u0275fac=function(d){return new(d||p)(m.Y36(c.FF))},p.\u0275cmp=m.Xpm({type:p,selectors:[["view-file"]],inputs:{file:"file",data:"data"},decls:8,vars:1,consts:[[1,"file-item"],[1,"d-flex","gap-3","align-items-center","justify-content-between"],[1,"m-0","green-clr"],[1,"d-flex","gap-2","align-items-center"],[1,"fas","fa-eye","cursor-pointer","gray-500",3,"click"],["target","_blank",3,"href"],[1,"fas","fa-download","green-clr"]],template:function(d,g){1&d&&(m.TgZ(0,"div",0)(1,"div",1)(2,"label",2),m._uU(3,"Attachment"),m.qZA(),m.TgZ(4,"div",3)(5,"i",4),m.NdJ("click",function(){return g.fileAction("view")}),m.qZA(),m.TgZ(6,"a",5),m._UZ(7,"i",6),m.qZA()()()()),2&d&&(m.xp6(6),m.s9C("href",g.file,m.LSH))},styles:[".file-item[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid var(--green);background:white;max-width:100%}.file-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:1;color:green;font-weight:600}"]}),p})()},80145:(M,T,s)=>{s.d(T,{O:()=>c,Q:()=>m});var l=s(94650);let m=(()=>{class e{constructor(u){this.el=u}onKeyDown(u){[8,9,13,27,46].indexOf(u.keyCode)}onKeyup(u){this.validateFields(u)}blockPaste(u){this.validateFields(u)}validateFields(u){this.el.nativeElement.value=this.el.nativeElement.value.replace(/[^A-Za-z\u0621-\u064a ]/g,""),u.preventDefault()}}return e.\u0275fac=function(u){return new(u||e)(l.Y36(l.SBq))},e.\u0275dir=l.lG2({type:e,selectors:[["","OnlyCharacter",""]],hostBindings:function(u,d){1&u&&l.NdJ("keydown",function(_){return d.onKeyDown(_)})("keyup",function(_){return d.onKeyup(_)})("paste",function(_){return d.blockPaste(_)})},inputs:{validationFieldsType:"validationFieldsType"}}),e})();function c(e){return e.replace(/[^A-Za-z\u0621-\u064a ]/g,"")}},55134:(M,T,s)=>{s.d(T,{Q:()=>m});var l=s(94650);let m=(()=>{class c{constructor(p){this.el=p,this.regex=new RegExp(/^\d*\.?\d{0,50}$/g),this.specialKeys=["Backspace","Tab","End","Home","ArrowLeft","ArrowRight","Del","Delete"]}onKeyDown(p){if(-1!==this.specialKeys.indexOf(p.key))return;const d=this.el.nativeElement.value.concat(p.key);d&&!String(d).match(this.regex)&&p.preventDefault()}setInputFocusOut(){let p=+this.el.nativeElement.value;p>0&&(this.el.nativeElement.value=p.toFixed(3))}}return c.\u0275fac=function(p){return new(p||c)(l.Y36(l.SBq))},c.\u0275dir=l.lG2({type:c,selectors:[["","appDecimalNumber",""]],hostBindings:function(p,u){1&p&&l.NdJ("keydown",function(g){return u.onKeyDown(g)})("blur",function(){return u.setInputFocusOut()})}}),c})()},96603:(M,T,s)=>{s.d(T,{z:()=>c});var l=s(94650),m=s(11481);let c=(()=>{class e{constructor(u){this.sanitizer=u,this.files=new l.vpe,this.enter=new l.vpe,this.leave=new l.vpe,this.background="",this.border=""}onDragEnter(u){u.preventDefault(),u.stopPropagation(),this.enter.emit()}onDragOver(u){u.preventDefault(),u.stopPropagation(),this.background="#d9e4f0",this.border="2px dashed #226BC0"}onDragLeave(u){u.preventDefault(),u.stopPropagation(),this.leave.emit(),this.background="",this.border=""}onDrop(u){u.preventDefault(),u.stopPropagation(),this.background="",this.border="";let d=[];for(let g=0;g<u.dataTransfer.files.length;g++){const _=u.dataTransfer.files[g],x=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(_));d.push({file:_,url:x})}d.length>0&&this.files.emit(d)}}return e.\u0275fac=function(u){return new(u||e)(l.Y36(m.H7))},e.\u0275dir=l.lG2({type:e,selectors:[["","appImageDrag",""]],hostVars:4,hostBindings:function(u,d){1&u&&l.NdJ("dragenter",function(_){return d.onDragEnter(_)})("dragover",function(_){return d.onDragOver(_)})("dragleave",function(_){return d.onDragLeave(_)})("drop",function(_){return d.onDrop(_)}),2&u&&l.Udp("background",d.background)("border",d.border)},outputs:{files:"files",enter:"enter",leave:"leave"}}),e})()},82757:(M,T,s)=>{s.d(T,{N:()=>m});var l=s(94650);let m=(()=>{class c{onInputChange(p){return!!new RegExp("[0-9]").test(p.key)||(p.preventDefault(),!1)}}return c.\u0275fac=function(p){return new(p||c)},c.\u0275dir=l.lG2({type:c,selectors:[["input","numbersOnly",""]],hostBindings:function(p,u){1&p&&l.NdJ("keypress",function(g){return u.onInputChange(g)})}}),c})()}}]);