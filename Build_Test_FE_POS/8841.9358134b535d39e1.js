"use strict";(self.webpackChunkmarkaizaAdmin=self.webpackChunkmarkaizaAdmin||[]).push([[8841],{51445:(q,x,u)=>{u.d(x,{U:()=>p});var r=u(61135),g=u(94650),t=u(80529),h=u(69082);let p=(()=>{class m{constructor(l,_){this.http=l,this.sharedService=_,this.apiUrl=this.sharedService.getUrl,this.despositeAmount=new r.X(void 0),this._viewDepositAmount=new r.X(void 0),this._mainFundAlocationOrderItemDetails=new r.X(void 0)}allocationOrdersService(l){return this.http.post(this.apiUrl+"AllocationOrdersService/AllocationOrderDepositCash",l,this.sharedService.getHeaders())}getRegisterDirectDeposits(l){return this.http.get(this.apiUrl+`AllocationOrdersService/GetRegisterDirectDeposits${l}`,this.sharedService.getHeaders())}getRegisterUnsettledCheques(l){return this.http.get(this.apiUrl+`AllocationOrdersService/GetRegisterUnsettledCheques${l}`,this.sharedService.getHeaders())}addRegisterDirectCashDepositToMarkaziaAccount(l){return this.http.post(this.apiUrl+"AllocationOrdersService/AddRegisterDirectCashDepositToMarkaziaAccount",l,this.sharedService.getHeaders())}addRegisterDirectChequesToMarkaziaAccount(l){return this.http.post(this.apiUrl+"AllocationOrdersService/AddRegisterDirectChequesToMarkaziaAccount",l,this.sharedService.getHeaders())}addCashDepositToMarkaziaAccount(l){return this.http.post(this.apiUrl+"AllocationOrdersService/AddCashDepositToMarkaziaAccount",l,this.sharedService.getHeaders())}addChequesToMarkaziaAccount(l){return this.http.post(this.apiUrl+"AllocationOrdersService/AddChequesToMarkaziaAccount",l,this.sharedService.getHeaders())}allocationOrderDepositCheque(l){return this.http.post(this.apiUrl+"AllocationOrdersService/AllocationOrderDepositCheque",l,this.sharedService.getHeaders())}getCashDepositDetails(l){return this.http.get(this.apiUrl+`AllocationOrdersService/GetCashDepositDetails?depositeId=${l}`,this.sharedService.getHeaders())}getRegisterDirectCashDepositDetails(l){return this.http.get(this.apiUrl+`AllocationOrdersService/GetRegisterDirectCashDepositDetails?depositeId=${l}`,this.sharedService.getHeaders())}getMainFundCash(){return this.http.get(this.apiUrl+"Mainfund/GetMainFundCash",this.sharedService.getHeaders())}getRegisterDirectChequeDepositDetails(l){return this.http.get(this.apiUrl+`AllocationOrdersService/GetRegisterDirectChequeDepositDetails${l}`,this.sharedService.getHeaders())}getChequeDepositDetails(l){return this.http.get(this.apiUrl+`AllocationOrdersService/GetChequeDepositDetails${l}`,this.sharedService.getHeaders())}getDepositsById(l,_){return this.http.get(this.apiUrl+`AllocationOrdersService/GetDeposits?DepositeId=${l}&DepositeType=${_}`,this.sharedService.getHeaders())}getRegisterDirectDepositsNew(l,_){return this.http.get(this.apiUrl+`AllocationOrdersService/GetRegisterDirectDeposits?DepositeId=${l}&DepositeType=${_}`,this.sharedService.getHeaders())}getCurrencyList(){return this.http.get(this.apiUrl+"Lookups/GetLookups?lookupTypeId=9",this.sharedService.getHeaders())}getMainFundSettledCheques(l){return this.http.get(this.apiUrl+`AllocationOrdersService/GetMainFundSettledCheques${l}`,this.sharedService.getHeaders())}getMainFundSettledChequesNew(l){return this.http.get(this.apiUrl+`AllocationOrdersService/GetMainFundSettledChequesNew${l}`,this.sharedService.getHeaders())}getLastAllocation(){return this.http.get(this.apiUrl+"AllocationOrdersService/GetLastAllocationOrder",this.sharedService.getHeaders())}getAllocation(l,_,v){let b=`AllocationOrdersService/GetAllocationOrders?PageNo=${l}&PageSize=6&sort=${v}`;return _&&(b+=`&search=${_}`),this.http.get(this.apiUrl+b,this.sharedService.getHeaders())}getViewDetailAllocation(l){return this.http.get(this.apiUrl+`AllocationOrdersService/GetAllocationOrderDetails?OrderId=${l}`,this.sharedService.getHeaders())}getListOfSettledChequesForAllocationOrderDetails(l){return this.http.get(this.apiUrl+`AllocationOrdersService/ListOfSettledChequesForAllocationOrderDetails${l}`,this.sharedService.getHeaders())}viewCashAllocationOrderDetailsDeposits(l){return this.http.get(this.apiUrl+`AllocationOrdersService/ViewCashAllocationOrderDetailsDeposits?allocationOrderDetailsId=${l}`,this.sharedService.getHeaders())}viewChequeAllocationOrderDetailsDeposits(l){return this.http.get(this.apiUrl+`AllocationOrdersService/ViewChequeAllocationOrderDetailsDeposits?allocationOrderDetailsId=${l}`,this.sharedService.getHeaders())}}return m.\u0275fac=function(l){return new(l||m)(g.LFG(t.eN),g.LFG(h.F))},m.\u0275prov=g.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},38841:(q,x,u)=>{u.r(x),u.d(x,{AllocationModule:()=>Ht});var r=u(36895),g=u(39485),t=u(94650),h=u(36690),p=u(79541),m=u(86349),f=u(28424),l=u(59442);function _(i,a){if(1&i&&(t.TgZ(0,"div",17)(1,"div",18)(2,"div",19),t._UZ(3,"img",20),t.qZA(),t.TgZ(4,"h4",21),t._uU(5),t.qZA()(),t.TgZ(6,"h4",22),t._uU(7,"Not Allocated"),t.qZA(),t.TgZ(8,"h4",23),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"div",24)(12,"span",25),t._uU(13,"Allocation In Progress"),t.qZA(),t.TgZ(14,"span",26),t._uU(15),t.ALo(16,"number"),t.qZA()()()),2&i){const e=a.$implicit;t.xp6(3),t.Q6J("src",null==e?null:e.accountTypeImage,t.LSH),t.xp6(2),t.Oqu(null==e||null==e.accountType[0]?null:e.accountType[0].lookupName),t.xp6(4),t.AsE("",t.xi3(10,6,null==e?null:e.remainingAmountTobeDistributed,"2.3-3")," ",null==e||null==e.currency[0]?null:e.currency[0].lookupName,""),t.xp6(6),t.AsE("",t.xi3(16,9,null==e?null:e.pendingDistributedAmount,"2.3-3")," ",null==e||null==e.currency[0]?null:e.currency[0].lookupName,"")}}function v(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.accountName," "),t.xp6(2),t.hij(" ",e.accountNo," "),t.xp6(2),t.Oqu(t.xi3(7,5,e.amount,"2.3-3")),t.xp6(3),t.hij(" ",e.currency[0].lookupName," "),t.xp6(2),t.hij(" ",e.accountPercentage," % ")}}function b(i,a){1&i&&(t.TgZ(0,"div",37),t._UZ(1,"app-not-found"),t.qZA())}function F(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",27)(2,"div",28)(3,"table",29)(4,"thead")(5,"tr")(6,"th",30)(7,"button",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortByAccountName())}),t._uU(8," Account Name "),t._UZ(9,"i",32)(10,"i",33),t.qZA()(),t.TgZ(11,"th",30)(12,"button",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortByAccountNo())}),t._uU(13," Account No "),t._UZ(14,"i",32)(15,"i",33),t.qZA()(),t.TgZ(16,"th",30)(17,"button",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortByAmount())}),t._uU(18," Amount "),t._UZ(19,"i",32)(20,"i",33),t.qZA()(),t.TgZ(21,"th",30)(22,"button",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortByCurrency())}),t._uU(23," Currency "),t._UZ(24,"i",32)(25,"i",33),t.qZA()(),t.TgZ(26,"th",30)(27,"button",34),t._uU(28," Percentage "),t.qZA()()()(),t.TgZ(29,"tbody"),t.YNc(30,v,12,8,"tr",35),t.qZA()()(),t.YNc(31,b,2,0,"div",36),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(7),t.Q6J("disabled",0==(null==e.mainFundCashData?null:e.mainFundCashData.length)),t.xp6(2),t.ekj("active",1==e.sort),t.xp6(1),t.ekj("active",2==e.sort),t.xp6(2),t.Q6J("disabled",0==(null==e.mainFundCashData?null:e.mainFundCashData.length)),t.xp6(2),t.ekj("active",3==e.sort),t.xp6(1),t.ekj("active",4==e.sort),t.xp6(2),t.Q6J("disabled",0==(null==e.mainFundCashData?null:e.mainFundCashData.length)),t.xp6(2),t.ekj("active",5==e.sort),t.xp6(1),t.ekj("active",6==e.sort),t.xp6(2),t.Q6J("disabled",0==(null==e.mainFundCashData?null:e.mainFundCashData.length)),t.xp6(2),t.ekj("active",7==e.sort),t.xp6(1),t.ekj("active",8==e.sort),t.xp6(2),t.Q6J("disabled",0==(null==e.mainFundCashData?null:e.mainFundCashData.length)),t.xp6(3),t.Q6J("ngForOf",e.sageBankAccountData),t.xp6(1),t.Q6J("ngIf",0==(null==e.sageBankAccountData?null:e.sageBankAccountData.length))}}function k(i,a){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-loading"),t.qZA())}const P=function(i){return{active:i}};function w(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"li",38)(1,"button",39),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.setPage(s))}),t._uU(2),t.qZA()()}if(2&i){const e=a.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,P,n.pageNo===e))("disabled",n.pageNo===e),t.xp6(1),t.hij(" ",e+1," ")}}let N=(()=>{class i{constructor(e){this.treasuryService=e,this.sort=0,this.pageNo=0,this.searchText="",this.pageSize=0,this.totalMainFund=0}ngOnInit(){this.getMainFundData(),this.getSageBanksAccountsData()}allocationSearchedData(e,n,o){this.treasuryService.sortSageBanksAccounts(e,n,o).subscribe(s=>{s&&(this.sageBankAccountData=s.data)})}getMainFundData(){this.treasuryService.getMainFundCash().subscribe(e=>{e&&(this.mainFundCashData=e.data,this.totalMainFund=e.info?.totalMainFundCash)})}getSageBanksAccountsData(){this.treasuryService.getSageBanksAccounts().subscribe(e=>{e&&(this.sageBankAccountData=e.data,this.totalSageAmount=e.info.sageTotalAmouunt,this.totalRecords=e.totalRecordCount,this.pagins=Math.ceil(this.totalRecords/6),this.pages=m.w6(this.pagins))})}getColor(e){switch(e){case"JOD":return"#B9E0CA";case"USD":return"#F4CEFA";case"EURO":return"#F8E2BE";default:return"#FFD7E7"}}getCurrencyFormatColor(e){switch(e){case"JOD":return"#38B36D";case"USD":return"#DB5AEE";case"EURO":return"#FFB536";default:return"#FFD7E7"}}sortByAccountName(){this.sort=2==this.sort?0:1==this.sort?2:1,this.allocationSearchedData(this.sort,this.pageNo,this.pageSize)}sortByAccountNo(){4==this.sort?this.sort=0:(this.sort=3==this.sort?4:3,this.allocationSearchedData(this.sort,this.pageNo,this.pageSize))}sortByAmount(){6==this.sort?this.sort=0:(this.sort=5==this.sort?6:5,this.allocationSearchedData(this.sort,this.pageNo,this.pageSize))}sortByCurrency(){8==this.sort?this.sort=0:(this.sort=7==this.sort?8:7,this.allocationSearchedData(this.sort,this.pageNo,this.pageSize))}setPage(e){this.pageNo=e,this.allocationSearchedData(this.sort,this.pageNo,this.pageSize),window.scroll(0,0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["main-fund"]],decls:40,vars:17,consts:[[1,"main-fund"],[1,"heading-main-fund","mb-3"],[1,"main-fund-controls"],[1,"main-fund-container","gap-4"],["class","main-fund-wrapper",4,"ngFor","ngForOf"],[1,"row"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[1,"col-md-6",3,"hidden"],[1,"showing"],[1,"pagination"],["class","page-item",4,"ngFor","ngForOf"],[1,"total-amount-container"],[1,"sage-total-amount"],[1,"amount"],[1,"currency-format"],[1,"main-fund-wrapper"],[1,"main-fund-div"],[1,"currency-symbol"],["alt","",3,"src"],[1,"heading-main-fund"],[1,"heading-main-fund","font-13"],[1,"heading-main-fund","font-15","primary-clr","fw-600","my-1"],[1,"d-flex","justify-content-between","align-items-center"],[1,"gray-500","font-11","fw-500"],[1,"font-10","fw-600","primary-clr"],[1,"card-table","mt-2"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn",3,"disabled"],[4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"not-found"],[1,"page-item"],[1,"page-link",3,"ngClass","disabled","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Main Fund"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3),t.YNc(5,_,17,12,"div",4),t.qZA()(),t.TgZ(6,"div",5),t.YNc(7,F,32,23,"div",6),t.TgZ(8,"div",7),t.YNc(9,k,2,0,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(11,"div",9)(12,"h6",10),t._uU(13," Showing "),t.TgZ(14,"span"),t._uU(15),t.qZA(),t._uU(16," from "),t.TgZ(17,"span"),t._uU(18),t.qZA(),t._uU(19," data "),t.qZA()(),t.TgZ(20,"div",9)(21,"ul",11),t.YNc(22,w,3,5,"li",12),t.qZA()()(),t.TgZ(23,"div",5)(24,"div",7)(25,"div",13)(26,"div",14)(27,"h5"),t._uU(28," Sage Total Amount "),t.qZA(),t.TgZ(29,"div",15)(30,"span",16),t._uU(31),t.ALo(32,"number"),t.qZA()()(),t.TgZ(33,"div",14)(34,"h5"),t._uU(35," Main Fund Total Amount "),t.qZA(),t.TgZ(36,"div",15)(37,"span",16),t._uU(38),t.ALo(39,"number"),t.qZA()()()()()()()),2&e){const o=t.MAs(10);t.xp6(5),t.Q6J("ngForOf",n.mainFundCashData),t.xp6(2),t.Q6J("ngIf",n.sageBankAccountData)("ngIfElse",o),t.xp6(4),t.Q6J("hidden",0==(null==n.sageBankAccountData?null:n.sageBankAccountData.length)),t.xp6(4),t.AsE(" ",6*(n.pageNo+1)-5," - ",6==(null==n.sageBankAccountData?null:n.sageBankAccountData.length)?6*(n.pageNo+1):n.totalRecords," "),t.xp6(3),t.hij(" ",n.totalRecords," "),t.xp6(2),t.Q6J("hidden",n.totalRecords<7),t.xp6(2),t.Q6J("ngForOf",n.pages),t.xp6(9),t.hij("",t.xi3(32,11,n.totalSageAmount,"2.3-3")," "),t.xp6(7),t.hij("",t.xi3(39,14,n.totalMainFund,"2.3-3")," ")}},dependencies:[r.mk,r.sg,r.O5,f.N,l.w,r.JJ],styles:[".main-fund[_ngcontent-%COMP%]{margin-bottom:30.09px}.main-fund[_ngcontent-%COMP%]   .heading-main-fund[_ngcontent-%COMP%]{font-size:12px;font-weight:600;margin:0}.main-fund[_ngcontent-%COMP%]   .main-fund-controls[_ngcontent-%COMP%]{margin-bottom:30.09px}.main-fund[_ngcontent-%COMP%]   .main-fund-controls[_ngcontent-%COMP%]   .main-fund-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.main-fund[_ngcontent-%COMP%]   .main-fund-controls[_ngcontent-%COMP%]   .main-fund-container[_ngcontent-%COMP%]   .main-fund-wrapper[_ngcontent-%COMP%]{box-sizing:border-box;background:#FFFFFF;border:1px solid #E9E9E9;box-shadow:0 10px 20px #0000001a;border-radius:8px;padding:10px 15px;flex:0 1 240px}.main-fund[_ngcontent-%COMP%]   .main-fund-controls[_ngcontent-%COMP%]   .main-fund-container[_ngcontent-%COMP%]   .main-fund-wrapper[_ngcontent-%COMP%]   .main-fund-div[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;margin-bottom:14px}.main-fund[_ngcontent-%COMP%]   .main-fund-controls[_ngcontent-%COMP%]   .main-fund-container[_ngcontent-%COMP%]   .main-fund-wrapper[_ngcontent-%COMP%]   .main-fund-div[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#F6F6F6;box-shadow:0 10px 20px #0000001a;border-radius:8px}.main-fund[_ngcontent-%COMP%]   .main-fund-controls[_ngcontent-%COMP%]   .control-right[_ngcontent-%COMP%]{position:absolute;right:0}.main-fund[_ngcontent-%COMP%]   .total-amount-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;box-sizing:border-box;width:100%;height:98.77px;left:290.32px;top:956.46px;background:#FFFFFF;border:.5px solid #F5F5F5;box-shadow:0 15px 25px #0000001a;border-radius:8px}.main-fund[_ngcontent-%COMP%]   .total-amount-container[_ngcontent-%COMP%]   .sage-total-amount[_ngcontent-%COMP%]{display:flex;align-items:center;padding:25px 21px}.main-fund[_ngcontent-%COMP%]   .total-amount-container[_ngcontent-%COMP%]   .sage-total-amount[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:700;line-height:20px;letter-spacing:0px;text-align:left}.main-fund[_ngcontent-%COMP%]   .total-amount-container[_ngcontent-%COMP%]   .sage-total-amount[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{margin-right:30px}.main-fund[_ngcontent-%COMP%]   .total-amount-container[_ngcontent-%COMP%]   .sage-total-amount[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{box-sizing:border-box;padding:14px 34px 14px 35px;gap:10px;height:48px;left:1255.16px;top:981.85px;background:#F8F8F8;border:.5px solid #E9E9E9;border-radius:10px}.main-fund[_ngcontent-%COMP%]   .total-amount-container[_ngcontent-%COMP%]   .sage-total-amount[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px;font-weight:600;line-height:22px;letter-spacing:0em;text-align:left}"]}),i})();var y=u(75304),O=u(42953);const S=["allocationSucess"],I=["daRef"];function L(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td")(2,"div",32)(3,"div",33),t._UZ(4,"img",34),t.qZA(),t.TgZ(5,"h4",35),t._uU(6),t.qZA()()(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA()()),2&i){const e=a.$implicit;t.xp6(4),t.Q6J("src",null==e?null:e.accountTypeImage,t.LSH),t.xp6(2),t.Oqu(null==e||null==e.accountType[0]?null:e.accountType[0].lookupName),t.xp6(2),t.hij(" ",t.xi3(9,5,e.remainingAmountTobeDistributed,"2.3-3")," "),t.xp6(3),t.Oqu(t.xi3(12,8,null==e?null:e.distributedAmount,"2.3-3")),t.xp6(3),t.Oqu(t.xi3(15,11,null==e?null:e.difference,"2.3-3"))}}function B(i,a){if(1&i&&(t.TgZ(0,"div",31)(1,"div",18)(2,"table",19)(3,"thead")(4,"tr")(5,"th",20),t._uU(6,"Account Type"),t.qZA(),t.TgZ(7,"th",20)(8,"button",21),t._uU(9,"Main Fund Current Amounts"),t.qZA()(),t.TgZ(10,"th",20)(11,"button",21),t._uU(12,"Distributed Amounts"),t.qZA()(),t.TgZ(13,"th",20)(14,"button",21),t._uU(15,"Difference"),t.qZA()()()(),t.TgZ(16,"tbody"),t.YNc(17,L,16,14,"tr",22),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(17),t.Q6J("ngForOf",e.mainFundCashData)}}function j(i,a){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-loading"),t.qZA())}function J(i,a){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-loading"),t.qZA())}function E(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.bankName," "),t.xp6(2),t.hij(" ",e.accountName," "),t.xp6(2),t.hij(" ",e.accountNo," "),t.xp6(2),t.hij(" ",t.xi3(9,6,e.amount,"2.3-3")," "),t.xp6(3),t.hij(" ",e.currency[0].lookupName," "),t.xp6(2),t.hij(" ",e.accountPercentage," % ")}}function Q(i,a){1&i&&(t.TgZ(0,"div",38),t._UZ(1,"app-not-found"),t.qZA())}function Y(i,a){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-loading"),t.qZA())}function H(i,a){if(1&i&&(t.TgZ(0,"div",3)(1,"div",17)(2,"div",18)(3,"table",36)(4,"thead")(5,"tr")(6,"th",20)(7,"button",21),t._uU(8," Bank Name "),t.qZA()(),t.TgZ(9,"th",20)(10,"button",21),t._uU(11," Account Name "),t.qZA()(),t.TgZ(12,"th",20)(13,"button",21),t._uU(14," Account No "),t.qZA()(),t.TgZ(15,"th",20)(16,"button",21),t._uU(17," Amount "),t.qZA()(),t.TgZ(18,"th",20)(19,"button",21),t._uU(20," Currency "),t.qZA()(),t.TgZ(21,"th",20)(22,"button",21),t._uU(23," Percentage "),t.qZA()()()(),t.TgZ(24,"tbody"),t.YNc(25,E,14,9,"tr",22),t.qZA()()(),t.YNc(26,Q,2,0,"div",37),t.YNc(27,Y,2,0,"ng-template",null,10,t.W1O),t.qZA()()),2&i){const e=t.oxw();t.xp6(25),t.Q6J("ngForOf",e.sageBankAccountData),t.xp6(1),t.Q6J("ngIf",0==(null==e.sageBankAccountData?null:e.sageBankAccountData.length))}}function R(i,a){if(1&i&&(t.TgZ(0,"p",39),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Oqu(t.xi3(2,1,e.isAmountDistributed,"2.3-3"))}}function z(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",40,41)(4,"input",42),t.NdJ("input",function(o){const s=t.CHM(e),d=s.$implicit,c=s.index,C=t.oxw();return t.KtG(C.onInputChage(o,d,c))})("focusout",function(o){const d=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.handleFoucusOut(o,d))})("keypress",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s._commonService.numberOnly(o))}),t.qZA()()(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"number"),t.qZA()()}if(2&i){const e=a.$implicit,n=a.index;t.xp6(2),t.Q6J("id","distributedAmount"+n),t.xp6(4),t.hij(" ",t.xi3(7,2,null==e?null:e.distributedPercentage,"1.0-2")," % ")}}function G(i,a){1&i&&(t.TgZ(0,"h5",46),t._UZ(1,"i",47),t._uU(2,"Something wen wrong!"),t.qZA())}function $(i,a){if(1&i&&(t.TgZ(0,"h5",48),t._UZ(1,"i",49),t._uU(2),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.allocationSuccessMessage)}}function K(i,a){if(1&i&&(t.TgZ(0,"div",43),t.YNc(1,G,3,0,"h5",44),t.YNc(2,$,3,1,"h5",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.response||null==e.response.Errors?null:e.response.Errors.length),t.xp6(1),t.Q6J("ngIf",null==e.response?null:e.response.data)}}let V=(()=>{class i{constructor(e,n,o){this.treasuryService=e,this._commonService=n,this._modalSerivce=o,this.accumlatedArray=[],this.percentage=[],this.totalDistributedAmount=0,this.sort=0,this.pageNo=0,this.searchText="",this.isAmountDistributed="",this.allocationSuccessMessage="",this.isExceeded=!1,this.payload={totalAmountDistibuted:0,mainFundAlocationOrderDetails:[]},this.allocationOrderDetails={sageBankID:0,distributedAmount:0,distributedPercentage:0,currencyId:0,accountTypeId:0}}ngOnInit(){this.getMainFundData(),this.getSageBanksAccountsData()}getMainFundData(){this.treasuryService.getMainFundCash().subscribe(e=>{e&&(this.mainFundCashData=e.data,this.mainFundCashData=this.mainFundCashData.map(n=>({...n,difference:"0",distributedAmount:"0"})))})}onInputChage(e,n,o){let s=+e.target.value,d=this.mainFundCashData.findIndex(Z=>Z.currencyID==n.currencyID&&Z.accountTypeID==n.accountTypeID),c=this.mainFundCashData[d],C=this.sageBankAccountDistributedAmount[o],T=this.daRef.get(o).nativeElement;const D=document.createElement("span");D.classList.add("validation-text-danger","test");const Rt=T.getElementsByTagName("span");if(s>c.remainingAmountTobeDistributed)return D.textContent=`Exceed existing ${c.accountType[0]?.lookupName} amount limit`,Rt.length<=0&&T.appendChild(D),c.distributedAmount=0,c.difference=0,C.distributedPercentage="",this.mainFundCashData.splice(d,c),this.sageBankAccountDistributedAmount.splice(o,C),void(this.isExceeded=!0);{let Z=T.getElementsByTagName("span")[0];this.isExceeded=!1,Z&&Z.remove()}c.distributedAmount=s,c.difference=c.remainingAmountTobeDistributed-s,C.distributedPercentage=(s/c.remainingAmountTobeDistributed*100).toFixed(3),s<=0&&(c.distributedAmount=0,c.difference=0,C.distributedPercentage=""),this.mainFundCashData.splice(d,c),this.sageBankAccountDistributedAmount.splice(o,C)}handleFoucusOut(e,n){if(!this.isExceeded){let o=+e.target.value,s={sageBankID:n?.sageBankId,currencyId:n?.currencyID,accountTypeId:n?.accountTypeID,convertedAmount:this.exchangeCurrency(o,n.currencyID),distributedAmount:o,distributedPercentage:n?.distributedPercentage};if(o>=0){if(this.accumlatedArray.length){let d=this.accumlatedArray.findIndex(c=>c.accountTypeId==n?.accountTypeID);if(d>=0){let c=this.accumlatedArray[d];c.convertedAmount=this.exchangeCurrency(o,n.currencyID),c.distributedAmount=o,c.distributedPercentage=n?.distributedPercentage,this.accumlatedArray.splice(d,c)}else this.accumlatedArray=[...this.accumlatedArray,s]}else this.accumlatedArray=[...this.accumlatedArray,s];console.log(this.accumlatedArray)}this.totalDistributedAmount=this.accumlatedArray.reduce((d,c)=>d+c.convertedAmount,0)}}getSageBanksAccountsData(){this.treasuryService.getSageBanksAccounts().subscribe(e=>{e&&(console.log(e),this.sageBankAccountData=e.data,this.sageBankAccountDistributedAmount=e.data)})}exchangeCurrency(e,n){let o=0;return e>0&&(9003==n?o=+(e/1.33).toFixed(3):9002==n?o=+(e/1.41).toFixed(3):9001==n&&(o=e)),o}createAllocationOrder(){if(this.totalDistributedAmount<=0)return this.isAmountDistributed="At least one distribute amount input is required",void setTimeout(()=>{this.isAmountDistributed=""},5e3);let e={totalAmountDistibuted:this.totalDistributedAmount,mainFundAlocationOrderDetails:this.accumlatedArray.filter(n=>n.distributedAmount>0)};this.treasuryService.createAllocationOrders(e).subscribe(n=>{console.log(n),this.response=n,n.data&&(this.allocationSuccessMessage="Allocation order successfully created!",this._modalSerivce.open(this.allocationSucess),setTimeout(()=>{this._modalSerivce.dismissAll(),this.getMainFundData()},3e3))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.N),t.Y36(y.v),t.Y36(O.FF))},i.\u0275cmp=t.Xpm({type:i,selectors:[["create-allocation"]],viewQuery:function(e,n){if(1&e&&(t.Gf(S,5),t.Gf(I,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.allocationSucess=o.first),t.iGM(o=t.CRH())&&(n.daRef=o)}},decls:61,vars:10,consts:[["id","create-allocation"],[1,"create-allocation-container"],[1,"row"],[1,"col-md-12"],[1,"create-allocation-order-container","container-padding"],[1,"title"],[1,"hr"],[1,"data-table"],["class","card-table",4,"ngIf","ngIfElse"],["mainfundloading",""],["loading",""],[1,"col-md-12","sage-distributed-table"],[1,"create-allocation-order-container","sage-accounts-table"],[1,"sage-bank-account-container"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"create-allocation-order-container","distributed-amount-table"],["class","text-danger",4,"ngIf"],[1,"card-table","mt-2"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn"],[4,"ngFor","ngForOf"],[1,"total-distributed-amount-container"],[1,"distributed-total-amount"],[1,"amount"],[1,"currency-format"],[1,"btns-group","mb-0","mx-0","mt-3"],["type","button",1,"btn","btn-cancel"],["type","submit",1,"btn","btn-save",3,"click"],["allocationSucess",""],[1,"card-table"],[1,"main-fund-div"],[1,"currency-symbol"],["alt","",3,"src"],[1,"heading-main-fund"],[1,"table","sage-bank-account-table"],["class","not-found",4,"ngIf"],[1,"not-found"],[1,"text-danger"],[3,"id"],["daRef",""],["name","categoryName","type","text","placeholder","Enter Amount",1,"form-control",3,"input","focusout","keypress"],[1,"modal-body"],["class","text-danger m-0 py-5 text-center",4,"ngIf"],["class","m-0 py-5 text-center",4,"ngIf"],[1,"text-danger","m-0","py-5","text-center"],[1,"fa-regular","fa-circle-xmark","me-2"],[1,"m-0","py-5","text-center"],[1,"green-clr","fa-regular","fa-circle-check","me-2"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t._uU(6,"Create Allocation Order"),t.qZA(),t._UZ(7,"div",6),t.TgZ(8,"div",7),t.YNc(9,B,18,1,"div",8),t.qZA(),t.TgZ(10,"div",3),t.YNc(11,j,2,0,"ng-template",null,9,t.W1O),t.qZA()()(),t.TgZ(13,"div",3),t.YNc(14,J,2,0,"ng-template",null,10,t.W1O),t.qZA()(),t.TgZ(16,"div",2)(17,"div",11)(18,"div",12)(19,"h4",5),t._uU(20,"Sage Bank Accounts"),t.qZA(),t._UZ(21,"div",6),t.TgZ(22,"div",13),t.YNc(23,H,29,2,"div",14),t.qZA()(),t.TgZ(24,"div",15)(25,"h4",5),t._uU(26,"Distribute Amounts"),t.qZA(),t.YNc(27,R,3,4,"p",16),t._UZ(28,"div",6),t.TgZ(29,"div",17)(30,"div",18)(31,"table",19)(32,"thead")(33,"tr")(34,"th",20)(35,"button",21),t._uU(36," Distributed Amounts "),t.qZA()(),t.TgZ(37,"th",20)(38,"button",21),t._uU(39," Percentage "),t.qZA()()()(),t.TgZ(40,"tbody"),t.YNc(41,z,8,5,"tr",22),t.qZA()()()()()()(),t.TgZ(42,"div",2)(43,"div",3)(44,"div",23)(45,"div",24)(46,"h5"),t._uU(47," Total Distributed Amount "),t.qZA(),t.TgZ(48,"div",25)(49,"span",26),t._uU(50),t.ALo(51,"number"),t.qZA()()()()()(),t.TgZ(52,"div",2)(53,"div",3)(54,"div",27)(55,"button",28),t._uU(56,"Cancel"),t.qZA(),t.TgZ(57,"button",29),t.NdJ("click",function(){return n.createAllocationOrder()}),t._uU(58," Create "),t.qZA()()()()()(),t.YNc(59,K,3,2,"ng-template",null,30,t.W1O)),2&e){const o=t.MAs(12),s=t.MAs(15);t.xp6(9),t.Q6J("ngIf",n.mainFundCashData)("ngIfElse",o),t.xp6(14),t.Q6J("ngIf",n.sageBankAccountData)("ngIfElse",s),t.xp6(4),t.Q6J("ngIf",n.isAmountDistributed),t.xp6(14),t.Q6J("ngForOf",n.sageBankAccountDistributedAmount),t.xp6(9),t.hij("",t.xi3(51,7,n.totalDistributedAmount,"2.3-3")," ")}},dependencies:[r.sg,r.O5,f.N,l.w,r.JJ],styles:["#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.883rem}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]{margin:0!important;border:none;box-shadow:none;width:100%;box-sizing:border-box;background:#FFFFFF;border-radius:8px}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .sage-distributed-table[_ngcontent-%COMP%]{display:flex;gap:1rem}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .sage-distributed-table[_ngcontent-%COMP%]   .sage-accounts-table[_ngcontent-%COMP%]{width:80%}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .sage-distributed-table[_ngcontent-%COMP%]   .distributed-amount-table[_ngcontent-%COMP%]{width:20%;padding:22.5px 10.88px}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .create-allocation-order-container[_ngcontent-%COMP%]{box-sizing:border-box;background:#FFFFFF;border:.5px solid #F5F5F5;box-shadow:0 15px 25px #0000001a;border-radius:8px;padding:30px 30px 0}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .create-allocation-order-container[_ngcontent-%COMP%]   .sage-bank-account-container[_ngcontent-%COMP%]   .sage-bank-account-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:18.5px 17px 18.5px 30px!important}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .create-allocation-order-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;line-height:22px;letter-spacing:0em;text-align:left;margin-bottom:10.42px}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .create-allocation-order-container[_ngcontent-%COMP%]   .hr[_ngcontent-%COMP%]{border-bottom:1px solid #E9E9E9;margin-bottom:10.61px}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .create-allocation-order-container[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]{display:flex;gap:2.131rem}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .create-allocation-order-container[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:18.5px 17px 18.5px 30px!important}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .create-allocation-order-container[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .cash-cheques-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .create-allocation-order-container[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .cash-cheques-container[_ngcontent-%COMP%]   .cheque-amount[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:220px;height:272px;background:#F8F8F8;box-shadow:0 10px 20px #0000001a}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .create-allocation-order-container[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .cash-cheques-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:700;line-height:20px;letter-spacing:0em;text-align:left}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .total-distributed-amount-container[_ngcontent-%COMP%]   .distributed-total-amount[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:end;gap:1.509rem;width:100%;height:98.77px;padding:25.39px 32.99px;background:#FFFFFF;border:.5px solid #F5F5F5;box-shadow:0 15px 25px #0000001a;border-radius:8px}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .total-distributed-amount-container[_ngcontent-%COMP%]   .distributed-total-amount[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:139px;height:48px;background:#F8F8F8;border:.5px solid #E9E9E9;border-radius:10px}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .total-distributed-amount-container[_ngcontent-%COMP%]   .distributed-total-amount[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;font-weight:600;line-height:19px;letter-spacing:0em;text-align:left}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .main-fund-div[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;margin-bottom:14px}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .main-fund-div[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#F6F6F6;box-shadow:0 10px 20px #0000001a;border-radius:8px}#create-allocation[_ngcontent-%COMP%]   .create-allocation-container[_ngcontent-%COMP%]   .heading-main-fund[_ngcontent-%COMP%]{font-size:12px;font-weight:600;margin:0}"]}),i})();var W=u(1618),A=u(24006),M=u(72402),X=u(94349);const tt=["success"];function et(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.resetOrderNo())}),t._UZ(1,"i",26),t.qZA()}}function nt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"i",27),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.resetDate())}),t.qZA()}}const it=function(i,a){return{"background-color":i,color:a}};function ot(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"div",38),t._uU(13),t.qZA()(),t.TgZ(14,"td"),t._UZ(15,"i",39),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(null==e?null:e.mainFundAllocationOrderId),t.xp6(2),t.Oqu(t.xi3(5,7,null==e?null:e.createdAt,"mediumDate")),t.xp6(3),t.hij("",t.xi3(8,10,null==e?null:e.totalAmountDistibuted,"2.3-3")," JOD"),t.xp6(3),t.Oqu(null==e||null==e.createdBy?null:e.createdBy.fullName),t.xp6(2),t.Q6J("ngStyle",t.WLB(13,it,null==e||null==e.statusObj?null:e.statusObj.lookupBGColor,null==e||null==e.statusObj?null:e.statusObj.lookupTextColor)),t.xp6(1),t.hij(" ",null==e||null==e.statusObj||null==e.statusObj.translations[0]?null:e.statusObj.translations[0].lookupName," "),t.xp6(2),t.MGl("routerLink","/allocation/order-log-detail/",null==e?null:e.mainFundAllocationOrderId,"")}}function at(i,a){1&i&&(t.TgZ(0,"div",40),t._UZ(1,"app-not-found"),t.qZA())}function lt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",19)(1,"div",28)(2,"div",29)(3,"table",30)(4,"thead")(5,"tr")(6,"th",31)(7,"button",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortByOrder())}),t._uU(8," Order No "),t._UZ(9,"i",33)(10,"i",34),t.qZA()(),t.TgZ(11,"th",31)(12,"button",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortByDate())}),t._uU(13," Date "),t._UZ(14,"i",33)(15,"i",34),t.qZA()(),t.TgZ(16,"th",31)(17,"button",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortByDistributed())}),t._uU(18," Total Distributed "),t._UZ(19,"i",33)(20,"i",34),t.qZA()(),t.TgZ(21,"th",31)(22,"button",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortByCreated())}),t._uU(23," Created By "),t._UZ(24,"i",33)(25,"i",34),t.qZA()(),t.TgZ(26,"th",31)(27,"button",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortByStatus())}),t._uU(28," Status "),t._UZ(29,"i",33)(30,"i",34),t.qZA()(),t.TgZ(31,"th",31)(32,"button",35),t._uU(33," Action "),t.qZA()()()(),t.TgZ(34,"tbody"),t.YNc(35,ot,16,16,"tr",36),t.qZA()()(),t.YNc(36,at,2,0,"div",37),t.qZA()()}if(2&i){const e=a.$implicit,n=t.oxw();t.xp6(7),t.Q6J("disabled",0==(null==e?null:e.length)),t.xp6(2),t.ekj("active",2==n.sort),t.xp6(1),t.ekj("active",3==n.sort),t.xp6(2),t.Q6J("disabled",0==(null==e?null:e.length)),t.xp6(2),t.ekj("active",4==n.sort),t.xp6(1),t.ekj("active",5==n.sort),t.xp6(2),t.Q6J("disabled",0==(null==e?null:e.length)),t.xp6(2),t.ekj("active",6==n.sort),t.xp6(1),t.ekj("active",7==n.sort),t.xp6(2),t.Q6J("disabled",0==(null==e?null:e.length)),t.xp6(2),t.ekj("active",8==n.sort),t.xp6(1),t.ekj("active",9==n.sort),t.xp6(2),t.Q6J("disabled",0==(null==e?null:e.length)),t.xp6(2),t.ekj("active",10==n.sort),t.xp6(1),t.ekj("active",11==n.sort),t.xp6(5),t.Q6J("ngForOf",e),t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.length))}}function st(i,a){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-loading"),t.qZA())}const rt=function(i){return{active:i}};function ct(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"li",41)(1,"button",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.setPage(s))}),t._uU(2),t.qZA()()}if(2&i){const e=a.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,rt,n.pageNo===e))("disabled",n.pageNo===e),t.xp6(1),t.hij(" ",e+1," ")}}const dt=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}};let ut=(()=>{class i{constructor(e,n,o,s,d){this._registerSettlementService=e,this._headerService=n,this.treasuryService=o,this.fb=s,this.datepipe=d,this.searchText="",this.filterParams=void 0,this.sort=1,this.totalRecords=0,this.pageNo=0,this.pageSize=6,this.pages=[],this.allocationOrderList=[],this.statusList=[],this.usersList=[]}initFilterForm(){this.orderLogFilterForm=this.fb.group({search:[""],createdBy:[null],date:[""],status:[null]})}ngOnInit(){this.getAllocationOrders(this.filterParams),this.getStatusList(14),this.getUsersList(),this.initFilterForm(),this.orderLogFilterForm.valueChanges.subscribe(e=>{let o,n={fromDate:"",toDate:""};e.date&&(n.fromDate=this.datepipe.transform(e.date[0],"yyyy-MM-dd"),n.toDate=this.datepipe.transform(e.date[1],"yyyy-MM-dd")),o={...e,...n},delete o.date;let s=!0;for(let d in e)e[d]&&(this.pageNo=0,s=!1),null==o[d]&&(o[d]="");this.filterParams="?"+new URLSearchParams(o).toString(),s&&(this.filterParams=void 0,this.pageNo=0),console.log(this.filterParams),this.getAllocationOrders(this.filterParams)})}navigateTo(e,n){}resetDate(){this.orderLogFilterForm.controls.date.setValue("")}resetOrderNo(){this.orderLogFilterForm.controls.search.setValue("")}getAllocationOrders(e=this.filterParams){let n=`pageNo=${this.pageNo}&sort=${this.sort}&pageSize=${this.pageSize}`;this.treasuryService.getAllocationOrders(e&&e+`&${n}`||`?${n}`).subscribe(o=>{this.allocationOrderList=o?.data,this.totalRecords=o?.totalRecordCount,this.pagin=Math.ceil(this.totalRecords/6),this.pages=m.w6(this.pagin)})}getStatusList(e){this._registerSettlementService.getStatusList(e).subscribe(n=>{this.statusList=n.data})}getUsersList(){this.treasuryService.getUsers("?Status=2001&Invitation=2004&PageNo=0&PageSize=1000").subscribe(n=>{this.usersList=n.data})}sortByOrder(){this.sort=3==this.sort?1:2==this.sort?3:2,this.getAllocationOrders()}sortByDate(){this.sort=5==this.sort?1:4==this.sort?5:4,this.getAllocationOrders()}sortByDistributed(){this.sort=7==this.sort?1:6==this.sort?7:6,this.getAllocationOrders()}sortByCreated(){this.sort=9==this.sort?1:8==this.sort?9:8,this.getAllocationOrders()}sortByStatus(){this.sort=11==this.sort?1:10==this.sort?11:10,this.getAllocationOrders()}setPage(e){this.pageNo=e,window.scroll(0,0),this.getAllocationOrders()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(W.D),t.Y36(h.r),t.Y36(p.N),t.Y36(A.qu),t.Y36(r.uU))},i.\u0275cmp=t.Xpm({type:i,selectors:[["orders-log"]],viewQuery:function(e,n){if(1&e&&t.Gf(tt,5),2&e){let o;t.iGM(o=t.CRH())&&(n.success=o.first)}},decls:36,vars:16,consts:[[1,"page-layout"],[3,"formGroup"],[1,"row","align-items-stretch"],[1,"col-12","col-sm-6","col-md-4","col-lg-5"],[1,"input-group","search-box","h-100"],["type","button",1,"btn"],[1,"fa-solid","fa-search"],["type","text","formControlName","search","placeholder","Order No",1,"form-control"],["class","btn","type","button",3,"click",4,"ngIf"],[1,"col-12","col-sm-6","col-md-4","col-lg-2"],["formControlName","createdBy","placeholder","Created By","bindLabel","fullName","bindValue","userId",1,"flex-grow-1",3,"items"],["formControlName","status","placeholder","Status","bindLabel","description","bindValue","id",1,"flex-grow-1",3,"items"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","position-relative"],["class","fa-solid fa-times","style","position:absolute;top:15px;right:30px;cursor:pointer",3,"click",4,"ngIf"],["type","text","formControlName","date","placeholder","Select Date","bsDaterangepicker","","placement","left",1,"form-control","mt-3","mt-lg-0",2,"height","46px",3,"bsConfig"],[1,"d-flex","justify-content-end"],[1,"total-records"],[1,"row"],["class","col-md-12",4,"ngIf","ngIfElse"],[1,"col-md-12"],["loading",""],[1,"col-md-6",3,"hidden"],[1,"showing"],[1,"pagination"],["class","page-item",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"],[1,"fa-solid","fa-xmark"],[1,"fa-solid","fa-times",2,"position","absolute","top","15px","right","30px","cursor","pointer",3,"click"],[1,"card-table","mt-2","register-sessions-table"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn"],[4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"status-tag",3,"ngStyle"],[1,"cursor-pointer","fa","fa-eye","font-16","gray-500",3,"routerLink"],[1,"not-found"],[1,"page-item"],[1,"page-link",3,"ngClass","disabled","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),t._UZ(6,"i",6),t.qZA(),t._UZ(7,"input",7),t.YNc(8,et,2,0,"button",8),t.qZA()(),t.TgZ(9,"div",9),t._UZ(10,"ng-select",10),t.qZA(),t.TgZ(11,"div",9),t._UZ(12,"ng-select",11),t.qZA(),t.TgZ(13,"div",12),t.YNc(14,nt,1,0,"i",13),t._UZ(15,"input",14),t.qZA()()(),t.TgZ(16,"div",15)(17,"p",16),t._uU(18),t.qZA()(),t.TgZ(19,"div",17),t.YNc(20,lt,37,27,"div",18),t.TgZ(21,"div",19),t.YNc(22,st,2,0,"ng-template",null,20,t.W1O),t.qZA(),t.TgZ(24,"div",21)(25,"h6",22),t._uU(26," Showing "),t.TgZ(27,"span"),t._uU(28),t.qZA(),t._uU(29," from "),t.TgZ(30,"span"),t._uU(31),t.qZA(),t._uU(32," data "),t.qZA()(),t.TgZ(33,"div",21)(34,"ul",23),t.YNc(35,ct,3,5,"li",24),t.qZA()()()()),2&e){const o=t.MAs(23);t.xp6(1),t.Q6J("formGroup",n.orderLogFilterForm),t.xp6(7),t.Q6J("ngIf",""!==n.orderLogFilterForm.controls.search.value),t.xp6(2),t.Q6J("items",n.usersList),t.xp6(2),t.Q6J("items",n.statusList),t.xp6(2),t.Q6J("ngIf",n.orderLogFilterForm.controls.date.value.length),t.xp6(1),t.Q6J("bsConfig",t.DdM(15,dt)),t.xp6(3),t.hij("Total No. ",n.totalRecords,""),t.xp6(2),t.Q6J("ngIf",n.allocationOrderList)("ngIfElse",o),t.xp6(4),t.Q6J("hidden",0==(null==n.allocationOrderList?null:n.allocationOrderList.length)),t.xp6(4),t.AsE(" ",6*(n.pageNo+1)-5," - ",6==(null==n.allocationOrderList?null:n.allocationOrderList.length)?6*(n.pageNo+1):n.totalRecords," "),t.xp6(3),t.hij(" ",n.totalRecords," "),t.xp6(2),t.Q6J("hidden",n.totalRecords<7),t.xp6(2),t.Q6J("ngForOf",n.pages)}},dependencies:[r.mk,r.sg,r.O5,r.PC,g.rH,M.FR,M.TB,A._Y,A.Fj,A.JJ,A.JL,A.sg,A.u,X.w9,f.N,l.w,r.JJ,r.uU]}),i})();function gt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.createAlocation())}),t._UZ(1,"img",13),t._uU(2," Create Allocation Order "),t.qZA()}}function pt(i,a){1&i&&(t.ynx(0),t._UZ(1,"main-fund"),t.BQk())}function mt(i,a){1&i&&t._UZ(0,"orders-log")}function _t(i,a){if(1&i&&(t.ynx(0),t.YNc(1,pt,2,0,"ng-container",10),t.YNc(2,mt,1,0,"ng-template",null,14,t.W1O),t.BQk()),2&i){const e=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",1==n.selected)("ngIfElse",e)}}function ht(i,a){1&i&&t._UZ(0,"create-allocation")}let ft=(()=>{class i{constructor(e,n){this.headerService=e,this.treasuryService=n,this.selected=1,this.headerService.setTitle("Allocation")}goToPage(e){this.selected=e,this.iscreateAllocation=!1,this.headerService.setTitle(1==e?"Allocation":"Allocation > Allocation Orders Log")}createAlocation(){this.iscreateAllocation=!0,this.headerService.setTitle("Allocation > Create Allocation Order"),this.selected=0}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.r),t.Y36(p.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-allocation"]],decls:15,vars:7,consts:[[1,"card-page"],[1,"row"],[1,"col-md-12","display-flex"],[1,"branchesTypes"],[1,"btn","active",3,"click"],[1,"btn",3,"click"],[1,"btnadd"],["class","btn btn-add",3,"click",4,"ngIf"],[1,"col-md-12"],[1,"tab-content"],[4,"ngIf","ngIfElse"],["createAllocation",""],[1,"btn","btn-add",3,"click"],["src","assets/images/plus.png","alt",""],["ordersLog",""]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return n.goToPage(1)}),t._uU(5," Accounts and Main Fund Cash"),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return n.goToPage(2)}),t._uU(7," Allocation Orders Log "),t.qZA()(),t.TgZ(8,"div",6),t.YNc(9,gt,3,0,"button",7),t.qZA()(),t.TgZ(10,"div",8)(11,"div",9),t.YNc(12,_t,4,2,"ng-container",10),t.YNc(13,ht,1,0,"ng-template",null,11,t.W1O),t.qZA()()()()),2&e){const o=t.MAs(14);t.xp6(4),t.ekj("active",1==n.selected),t.xp6(2),t.ekj("active",2==n.selected),t.xp6(3),t.Q6J("ngIf",!n.iscreateAllocation),t.xp6(3),t.Q6J("ngIf",!n.iscreateAllocation)("ngIfElse",o)}},dependencies:[r.O5,N,V,ut],styles:[".display-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.display-flex[_ngcontent-%COMP%]   .branchesTypes[_ngcontent-%COMP%]{margin-bottom:30px}.display-flex[_ngcontent-%COMP%]   .branchesTypes[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:22px;border:0px;padding:10px 15px;color:#929eae;border-radius:0;margin:0;border-bottom:2px solid #f5f5f5}.display-flex[_ngcontent-%COMP%]   .branchesTypes[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{color:#000;border-bottom:2px solid #dc3545}.sage-bank-account[_ngcontent-%COMP%]   .heading-sage-bank-account[_ngcontent-%COMP%]{font-size:18px;font-weight:600;line-height:22px;letter-spacing:0em;text-align:left}"]}),i})();var U=u(51445);function At(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td")(2,"div",27)(3,"div",28),t._UZ(4,"img",29),t.qZA(),t.TgZ(5,"h4",30),t._uU(6),t.qZA()()(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA()()),2&i){const e=a.$implicit;t.xp6(4),t.Q6J("src",null==e?null:e.imagePath,t.LSH),t.xp6(2),t.Oqu(null==e||null==e.accountTypeName[0]?null:e.accountTypeName[0].lookupName),t.xp6(2),t.hij(" ",t.xi3(9,5,(null==e||null==e.mainFundAlocationOrderDetails[0]?null:e.mainFundAlocationOrderDetails[0].remainingToBedistriputed)||0,"2.3-3")," "),t.xp6(3),t.hij(" ",t.xi3(12,8,(null==e||null==e.mainFundAlocationOrderDetails[0]?null:e.mainFundAlocationOrderDetails[0].distributedAmount)||0,"2.3-3")," "),t.xp6(3),t.hij(" ",t.xi3(15,11,(null==e||null==e.mainFundAlocationOrderDetails[0]?null:e.mainFundAlocationOrderDetails[0].difference)||0,"2.3-3")," ")}}function Ct(i,a){if(1&i&&(t.TgZ(0,"div",22)(1,"div",23)(2,"table",24)(3,"thead")(4,"tr")(5,"th",25),t._uU(6,"Account Type"),t.qZA(),t.TgZ(7,"th",25),t._uU(8,"Main Fund Current Amounts"),t.qZA(),t.TgZ(9,"th",25),t._uU(10,"Distributed Amounts"),t.qZA(),t.TgZ(11,"th",25),t._uU(12,"Difference"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,At,16,14,"tr",26),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",null==e.orderLogDetails?null:e.orderLogDetails.mainFundAlocationOrderDetails)}}const xt=function(i,a){return{"background-color":i,color:a}},bt=function(){return{cursor:"pointer"}},Zt=function(){return{cursor:"default"}};function vt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",27)(3,"div",28),t._UZ(4,"img",29),t.qZA(),t.TgZ(5,"h4",30),t._uU(6),t.qZA()()(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td")(19,"div",35),t._uU(20),t.qZA()(),t.TgZ(21,"td")(22,"i",36),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw(2),c=t.MAs(43);return t.KtG(d.viewAction(s,c))}),t.qZA()()()}if(2&i){const e=a.$implicit;t.xp6(4),t.Q6J("src",null==e||null==e.sageBank?null:e.sageBank.imagePath,t.LSH),t.xp6(2),t.Oqu(null==e||null==e.sageBank||null==e.sageBank.accountTypeName[0]?null:e.sageBank.accountTypeName[0].lookupName),t.xp6(2),t.hij(" ",e.bankName," "),t.xp6(2),t.hij(" ",e.accountName," "),t.xp6(2),t.hij(" ",e.accountNo," "),t.xp6(2),t.hij(" ",t.xi3(15,11,(null==e||null==e.distributedAmounts?null:e.distributedAmounts.distributedAmount)||0,"2.3-3"),""),t.xp6(3),t.hij(" ",(null==e||null==e.distributedAmounts?null:e.distributedAmounts.distributedPercentage)||0," %"),t.xp6(2),t.Q6J("ngStyle",t.WLB(14,xt,null==e||null==e.distributedAmounts||null==e.distributedAmounts.statusObj?null:e.distributedAmounts.statusObj.lookupBGColor,null==e||null==e.distributedAmounts||null==e.distributedAmounts.statusObj?null:e.distributedAmounts.statusObj.lookupTextColor)),t.xp6(1),t.hij(" ",(null==e||null==e.distributedAmounts||null==e.distributedAmounts.statusObj||null==e.distributedAmounts.statusObj.translations[0]?null:e.distributedAmounts.statusObj.translations[0].lookupName)||"-"," "),t.xp6(2),t.Q6J("ngClass",14002==(null==e||null==e.distributedAmounts||null==e.distributedAmounts.statusObj?null:e.distributedAmounts.statusObj.lookupId)||14003==(null==e||null==e.distributedAmounts||null==e.distributedAmounts.statusObj?null:e.distributedAmounts.statusObj.lookupId)?"gray-600":"gray-500")("ngStyle",14002==(null==e||null==e.distributedAmounts||null==e.distributedAmounts.statusObj?null:e.distributedAmounts.statusObj.lookupId)||14003==(null==e||null==e.distributedAmounts||null==e.distributedAmounts.statusObj?null:e.distributedAmounts.statusObj.lookupId)?t.DdM(17,bt):t.DdM(18,Zt))}}function Ot(i,a){1&i&&(t.TgZ(0,"div",37),t._UZ(1,"app-not-found"),t.qZA())}function Tt(i,a){if(1&i&&(t.TgZ(0,"div",31)(1,"h4",12),t._uU(2,"Distributed Amounts in Sage Bank Accounts"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",32)(5,"div",23)(6,"table",33)(7,"thead")(8,"tr")(9,"th",25),t._uU(10,"Account Type"),t.qZA(),t.TgZ(11,"th",25),t._uU(12,"Bank Name"),t.qZA(),t.TgZ(13,"th",25),t._uU(14,"Account Name"),t.qZA(),t.TgZ(15,"th",25),t._uU(16,"Account No"),t.qZA(),t.TgZ(17,"th",25),t._uU(18,"Distribute Amounts"),t.qZA(),t.TgZ(19,"th",25),t._uU(20,"Percentage"),t.qZA(),t.TgZ(21,"th",25),t._uU(22,"Status"),t.qZA(),t.TgZ(23,"th",25),t._uU(24,"Action"),t.qZA()()(),t.TgZ(25,"tbody"),t.YNc(26,vt,23,19,"tr",26),t.qZA()()(),t.YNc(27,Ot,2,0,"div",34),t.qZA()()),2&i){const e=t.oxw();t.xp6(26),t.Q6J("ngForOf",null==e.orderLogDetails?null:e.orderLogDetails.sageBankAccounts),t.xp6(1),t.Q6J("ngIf",0==(null==e.orderLogDetails||null==e.orderLogDetails.sageBankAccounts?null:e.orderLogDetails.sageBankAccounts.length))}}function Dt(i,a){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-loading"),t.qZA())}function qt(i,a){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-loading"),t.qZA())}function yt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",50)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"div",51)(4,"button",52),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw(2),c=t.MAs(45);return t.KtG(d.openFileModal(s,c))}),t._UZ(5,"img",53),t.qZA(),t.TgZ(6,"button",54)(7,"a",55),t._UZ(8,"img",56),t.qZA()()()()}if(2&i){const e=a.$implicit,n=a.index,o=t.oxw(2);t.xp6(2),t.AsE("",n+1,".",o.getFileType(null==e?null:e.file),""),t.xp6(5),t.s9C("href",null==e?null:e.file,t.LSH),t.Q6J("download",null==e?null:e.file)}}function Mt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",38)(1,"div",39)(2,"div",8)(3,"div",40),t._uU(4,"Bank Name"),t.qZA(),t.TgZ(5,"div",41),t._uU(6),t.qZA()(),t.TgZ(7,"div",8)(8,"div",40),t._uU(9,"Account Name"),t.qZA(),t.TgZ(10,"div",41),t._uU(11),t.qZA()(),t.TgZ(12,"div",8)(13,"div",40),t._uU(14,"Account No"),t.qZA(),t.TgZ(15,"div",41),t._uU(16),t.qZA()(),t.TgZ(17,"div",8)(18,"div",40),t._uU(19,"Currency"),t.qZA(),t.TgZ(20,"div",41),t._uU(21),t.qZA()(),t.TgZ(22,"div",8)(23,"div",40),t._uU(24,"Deposited Amount"),t.qZA(),t.TgZ(25,"div",41),t._uU(26),t.ALo(27,"number"),t.qZA()()(),t.TgZ(28,"h6",42),t._uU(29,"To Complete the process Please upload the bank deposit voucher"),t.qZA(),t.TgZ(30,"h6",43),t._uU(31,"Attachments"),t.qZA(),t.TgZ(32,"p",44),t._uU(33,"Uploaded files"),t.qZA(),t.TgZ(34,"div",2)(35,"div",45),t.YNc(36,yt,9,4,"div",46),t.qZA()(),t.TgZ(37,"div",47)(38,"div",48)(39,"button",49),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.close("Close click"))}),t._uU(40," Close "),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(6),t.hij(" ",null==e.viewCashDeposit||null==e.viewCashDeposit.sageBank?null:e.viewCashDeposit.sageBank.bankName," "),t.xp6(5),t.hij(" ",null==e.viewCashDeposit||null==e.viewCashDeposit.sageBank?null:e.viewCashDeposit.sageBank.accountName," "),t.xp6(5),t.hij(" ",null==e.viewCashDeposit||null==e.viewCashDeposit.sageBank?null:e.viewCashDeposit.sageBank.accountNo," "),t.xp6(5),t.hij(" ",null==e.viewCashDeposit||null==e.viewCashDeposit.currency[0]?null:e.viewCashDeposit.currency[0].lookupName," "),t.xp6(5),t.hij(" ",t.xi3(27,6,null==e.viewCashDeposit?null:e.viewCashDeposit.depositedAmount,"2.3-3")," "),t.xp6(10),t.Q6J("ngForOf",null==e.viewCashDeposit?null:e.viewCashDeposit.files)}}function Ut(i,a){if(1&i&&(t.ynx(0),t._UZ(1,"img",60),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("src",null==e.fileItem?null:e.fileItem.file,t.LSH)}}function Ft(i,a){if(1&i&&(t.TgZ(0,"div",61),t._UZ(1,"img",62)(2,"br"),t.TgZ(3,"a",63),t._uU(4,"click to open pdf "),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(3),t.s9C("href",null==e.fileItem?null:e.fileItem.file,t.LSH)}}function kt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",57),t.YNc(1,Ut,2,1,"ng-container",58),t.YNc(2,Ft,5,1,"ng-template",null,59,t.W1O),t.TgZ(4,"div",47)(5,"div",48)(6,"button",49),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.close("Close click"))}),t._uU(7," Close "),t.qZA()()()()}if(2&i){const e=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf","png"==(null==n.fileItem?null:n.fileItem.fileType)||"jpeg"==(null==n.fileItem?null:n.fileItem.fileType)||"jpg"==(null==n.fileItem?null:n.fileItem.fileType))("ngIfElse",e)}}function wt(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(null==e?null:e.chequeCustomer),t.xp6(2),t.Oqu(null==e?null:e.chequeNo),t.xp6(2),t.Oqu(null==e||null==e.bank[0]?null:e.bank[0].lookupName),t.xp6(2),t.Oqu(t.xi3(9,5,null==e?null:e.chequeDate,"shortDate")),t.xp6(3),t.hij("",t.xi3(12,8,null==e?null:e.chequeCollectionJod,"2.3-3")," JD")}}function Nt(i,a){1&i&&(t.TgZ(0,"div",32),t._UZ(1,"app-not-found"),t.qZA())}function St(i,a){if(1&i&&(t.TgZ(0,"div",2)(1,"div",25)(2,"div",26)(3,"table",27)(4,"thead")(5,"tr")(6,"th",28)(7,"button",29),t._uU(8,"Customer"),t.qZA()(),t.TgZ(9,"th",28)(10,"button",29),t._uU(11,"Cheque No."),t.qZA()(),t.TgZ(12,"th",28)(13,"button",29),t._uU(14,"Bank"),t.qZA()(),t.TgZ(15,"th",28)(16,"button",29),t._uU(17,"Date"),t.qZA()(),t.TgZ(18,"th",28)(19,"button",29),t._uU(20,"Amount"),t.qZA()()()(),t.TgZ(21,"tbody"),t.YNc(22,wt,13,11,"tr",30),t.qZA()()(),t.YNc(23,Nt,2,0,"div",31),t.qZA()()),2&i){const e=t.oxw();t.xp6(22),t.Q6J("ngForOf",null==e.depositedChequesDetails?null:e.depositedChequesDetails.cheques),t.xp6(1),t.Q6J("ngIf",0==(null==e.depositedChequesDetails||null==e.depositedChequesDetails.cheques?null:e.depositedChequesDetails.cheques.length))}}function It(i,a){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-loading"),t.qZA())}function Lt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",33)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"div",34)(4,"button",35),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw(),c=t.MAs(70);return t.KtG(d.openFileModal(s,c))}),t._UZ(5,"img",36),t.qZA(),t.TgZ(6,"button",37)(7,"a",38),t._UZ(8,"img",39),t.qZA()()()()}if(2&i){const e=a.$implicit,n=a.index,o=t.oxw();t.xp6(2),t.AsE("",n+1,".",o.getFileType(null==e?null:e.file),""),t.xp6(5),t.Q6J("href",null==e?null:e.file,t.LSH)}}function Bt(i,a){if(1&i&&(t.ynx(0),t._UZ(1,"img",46),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("src",null==e.fileItem?null:e.fileItem.file,t.LSH)}}function jt(i,a){if(1&i&&(t.TgZ(0,"div",47),t._UZ(1,"img",48)(2,"br"),t.TgZ(3,"a",49),t._uU(4,"click to open pdf "),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(3),t.s9C("href",null==e.fileItem?null:e.fileItem.file,t.LSH)}}function Jt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",40),t.YNc(1,Bt,2,1,"ng-container",41),t.YNc(2,jt,5,1,"ng-template",null,42,t.W1O),t.TgZ(4,"div",43)(5,"div",44)(6,"button",45),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.close("Close click"))}),t._uU(7," Close "),t.qZA()()()()}if(2&i){const e=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf","png"==(null==n.fileItem?null:n.fileItem.fileType)||"jpeg"==(null==n.fileItem?null:n.fileItem.fileType)||"jpg"==(null==n.fileItem?null:n.fileItem.fileType))("ngIfElse",e)}}const Et=[{path:"",component:ft},{path:"order-log-detail/:orderId",component:(()=>{class i{constructor(e,n,o,s,d,c){this._allocationService=e,this.treasuryService=n,this.headerService=o,this._commonService=s,this._activeRoute=d,this._modalService=c}ngOnInit(){this.headerService.setTitle("Allocation > Allocation Orders Log > Details"),this.getMainFundData(),this.getSageBanksAccountsData(),this._activeRoute.params.subscribe(e=>{this.getAllocationOrderDetails(+e.orderId)})}getAllocationOrderDetails(e){this.treasuryService.getAllocationOrderDetails(e).subscribe(n=>{console.log(n),this.orderLogDetails=n.data})}getMainFundData(){this.treasuryService.getMainFundCash().subscribe(e=>{e&&(this.mainFundCashData=e.data,this.mainFundCashData=this.mainFundCashData.map(n=>({...n,difference:"0",distributedAmount:"0"})))})}getSageBanksAccountsData(){this.treasuryService.getSageBanksAccounts().subscribe(e=>{e&&(this.sageBankAccountData=e.data)})}viewAction(e,n){e.isCash?this._allocationService.viewCashAllocationOrderDetailsDeposits(e?.distributedAmounts?.allocationOrderDetailsId).subscribe(o=>{this.viewCashDeposit=o.data[0],this._modalService.open(n)}):this._commonService.NavigateToRoute("/allocation/view-deposited-cheques/"+e?.distributedAmounts?.allocationOrderDetailsId)}openFileModal(e,n){let o=this.getFileType(e?.file);this.fileItem=e,this.fileItem.fileType=o,this._modalService.open(n)}getFileType(e){return e?.split(".").pop()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(U.U),t.Y36(p.N),t.Y36(h.r),t.Y36(y.v),t.Y36(g.gz),t.Y36(O.FF))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-order-log-details"]],decls:46,vars:10,consts:[["id","create-allocation"],[1,"create-allocation-container"],[1,"row"],[1,"col-md-12"],[1,"card-collect","card-with-details"],[1,"d-flex","align-items-center","justify-content-between"],[1,"card-inner-heading"],[1,"d-flex","mt-4","justify-content-between","flex-wrap","gap-3"],[1,"d-flex","flex-column"],[1,"dark-gray"],[1,"light-gray","fw-400"],[1,"create-allocation-order-container","container-padding"],[1,"title"],[1,"hr"],[1,"data-table"],["class","card-table",4,"ngIf","ngIfElse"],[1,"create-allocation-order-container"],["class","col-12",4,"ngIf","ngIfElse"],["mainfundloading",""],["loadingBankAccounts",""],["viewDepositCashModal",""],["fileModal",""],[1,"card-table"],[1,"table-responsive"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"main-fund-div"],[1,"currency-symbol"],["alt","",3,"src"],[1,"heading-main-fund"],[1,"col-12"],[1,"card-table","mt-2"],[1,"table","sage-bank-account-table"],["class","not-found",4,"ngIf"],[1,"status-tag",3,"ngStyle"],[1,"fa","fa-eye","font-16",3,"ngClass","ngStyle","click"],[1,"not-found"],[1,"modal-body","p-4"],[1,"d-grid"],[1,"mdtext"],[1,"smText"],[1,"font-20","fw-600","my-5"],[1,"font-18","fw-600","my-3"],[1,"fw-700","font-14","gray-500","mb-3"],[1,"col-sm-6"],["class","uploadedfile mb-2",4,"ngFor","ngForOf"],[1,"flex-end"],[1,"btns-group","my-2","mx-0"],["type","button",1,"btn","btn-save",3,"click"],[1,"uploadedfile","mb-2"],[1,"d-flex"],["type","button",1,"btn","fview",3,"click"],["src","assets/images/eye.png","alt",""],["type","button",1,"btn"],["target","_blank",1,"btn","fview",3,"href","download"],["src","assets/images/Download.png","alt",""],[1,"modal-body","p-2"],[4,"ngIf","ngIfElse"],["pdf",""],[1,"w-100",3,"src"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],["height","80","width","80","src","assets/images/pdf.png","alt",""],["target","_blank",1,"text-decoration-none","text-capitalize",3,"href"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h6",6),t._uU(7,"Allocation Order Details"),t.qZA()(),t._UZ(8,"hr"),t.TgZ(9,"div",7)(10,"div",8)(11,"h6",9),t._uU(12,"Adding Date"),t.qZA(),t.TgZ(13,"h6",10),t._uU(14),t.ALo(15,"date"),t.qZA()(),t.TgZ(16,"div",8)(17,"h6",9),t._uU(18,"Add By"),t.qZA(),t.TgZ(19,"h6",10),t._uU(20),t.qZA()(),t.TgZ(21,"div",8)(22,"h6",9),t._uU(23,"Order No"),t.qZA(),t.TgZ(24,"h6",10),t._uU(25),t.qZA()()()()(),t.TgZ(26,"div",3)(27,"div",11)(28,"h4",12),t._uU(29,"Create Allocation Order"),t.qZA(),t._UZ(30,"div",13),t.TgZ(31,"div",14),t.YNc(32,Ct,15,1,"div",15),t.qZA()()()(),t.TgZ(33,"div",2)(34,"div",3)(35,"div",16)(36,"div",2),t.YNc(37,Tt,28,2,"div",17),t.qZA()()()()()(),t.YNc(38,Dt,2,0,"ng-template",null,18,t.W1O),t.YNc(40,qt,2,0,"ng-template",null,19,t.W1O),t.YNc(42,Mt,41,9,"ng-template",null,20,t.W1O),t.YNc(44,kt,8,2,"ng-template",null,21,t.W1O)),2&e){const o=t.MAs(39),s=t.MAs(41);t.xp6(14),t.Oqu(t.xi3(15,7,null==n.orderLogDetails?null:n.orderLogDetails.createdAt,"mediumDate")),t.xp6(6),t.Oqu(null==n.orderLogDetails||null==n.orderLogDetails.createdBy?null:n.orderLogDetails.createdBy.fullName),t.xp6(5),t.Oqu(null==n.orderLogDetails?null:n.orderLogDetails.mainFundAllocationOrderId),t.xp6(7),t.Q6J("ngIf",null==n.orderLogDetails||null==n.orderLogDetails.mainFundAlocationOrderDetails?null:n.orderLogDetails.mainFundAlocationOrderDetails.length)("ngIfElse",o),t.xp6(5),t.Q6J("ngIf",null==n.orderLogDetails||null==n.orderLogDetails.sageBankAccounts?null:n.orderLogDetails.sageBankAccounts.length)("ngIfElse",s)}},dependencies:[r.mk,r.sg,r.O5,r.PC,f.N,l.w,r.JJ,r.uU],styles:[".create-allocation-order-container[_ngcontent-%COMP%]{box-sizing:border-box;background:#FFFFFF;border:.5px solid #F5F5F5;box-shadow:0 15px 25px #0000001a;border-radius:8px;padding:30px 30px 0;margin-bottom:30px}.main-fund-div[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;margin-bottom:14px}.main-fund-div[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#F6F6F6;box-shadow:0 10px 20px #0000001a;border-radius:8px}.heading-main-fund[_ngcontent-%COMP%]{font-size:12px;font-weight:600;margin:0}.mdtext[_ngcontent-%COMP%]{font-style:normal;font-weight:600;font-size:16px;color:#1b212d}.smText[_ngcontent-%COMP%]{font-style:normal;font-weight:500;font-size:15px;color:#858585}.d-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(173px,1fr));gap:20px}.uploadedfile[_ngcontent-%COMP%]{border:1px solid #11af22;border-radius:4px;display:flex;justify-content:space-between;align-items:center}.uploadedfile[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:50%;margin:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.uploadedfile[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px}.uploadedfile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;padding:10px;color:#696969;margin:0;cursor:pointer}"]}),i})()},{path:"view-deposited-cheques/:orderId",component:(()=>{class i{constructor(e,n,o,s){this._modalService=e,this._headerService=n,this._allocationService=o,this._activeRoute=s,this.viewDetailsAllocationOrderList=[]}ngOnInit(){this._headerService.setTitle("Allocation > View Details > Deposit Cheque "),this._activeRoute.params.subscribe(e=>{this.viewChequeAllocationOrderDetailsDeposits(+e.orderId)})}viewChequeAllocationOrderDetailsDeposits(e){this._allocationService.viewChequeAllocationOrderDetailsDeposits(e).subscribe(n=>{this.depositedChequesDetails=n.data.pop(),console.log(this.depositedChequesDetails)})}openFileModal(e,n){this.fileItem=e,this.fileItem.fileType=this.getFileType(e?.file),this._modalService.open(n,{centered:!0,size:"md"})}getFileType(e){return e?.split(".").pop()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(O.FF),t.Y36(h.r),t.Y36(U.U),t.Y36(g.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-view-deposited-cheques"]],decls:71,vars:17,consts:[[1,"card-page"],[1,"row"],[1,"col-md-12"],[1,"card-collect","card-with-details"],[1,"d-flex","align-items-center","justify-content-between"],[1,"fw-700","font-18"],[1,"d-flex","flex-column"],[1,"m-0","fw-700","font-14"],[1,"d-grid","gap-4"],[1,"dark-gray"],[1,"light-gray","fw-500"],[1,"d-flex","justify-content-end","fw-600","font-18","align-items-center","gap-2"],[1,"bg-gray-400","py-3","px-5","rounded","d-flex","align-items-center"],[1,"m-0"],[1,"row","my-3"],[1,"col-12","d-flex","align-items-center","justify-content-between"],[1,"fw-600","font-16","gray-500"],["class","col-md-12",4,"ngIf","ngIfElse"],["loading",""],[1,"col-12"],[1,"fw-600","font-18"],[1,"fw-700","font-14","gray-500"],[1,"col-sm-6","col-md-4"],["class","uploadedfile mb-2",4,"ngFor","ngForOf"],["fileModal",""],[1,"card-table","mt-2"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"btn"],[4,"ngFor","ngForOf"],["class","not-found",4,"ngIf"],[1,"not-found"],[1,"uploadedfile","mb-2"],[1,"d-flex"],["type","button",1,"btn","fview",3,"click"],["src","assets/images/eye.png","alt",""],["type","button",1,"btn"],["download","",1,"btn","fview",3,"href"],["src","assets/images/Download.png","alt",""],[1,"modal-body","p-2"],[4,"ngIf","ngIfElse"],["pdf",""],[1,"flex-end"],[1,"btns-group","my-2","mx-0"],["type","button",1,"btn","btn-save",3,"click"],[1,"w-100",3,"src"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],["height","80","width","80","src","assets/images/pdf.png","alt",""],["target","_blank",1,"text-decoration-none","text-capitalize",3,"href"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h6",5),t._uU(6,"Deposit Cheque"),t.qZA(),t.TgZ(7,"div",6)(8,"p",7),t._uU(9,"Closing Date & Time"),t.qZA(),t.TgZ(10,"span"),t._uU(11),t.ALo(12,"date"),t.qZA()()(),t._UZ(13,"hr"),t.TgZ(14,"div",8)(15,"div",6)(16,"h6",9),t._uU(17,"Deposit ID"),t.qZA(),t.TgZ(18,"h6",10),t._uU(19),t.qZA()(),t.TgZ(20,"div",6)(21,"h6",9),t._uU(22,"Employee"),t.qZA(),t.TgZ(23,"h6",10),t._uU(24),t.qZA()(),t.TgZ(25,"div",6)(26,"h6",9),t._uU(27,"Account Name"),t.qZA(),t.TgZ(28,"h6",10),t._uU(29),t.qZA()(),t.TgZ(30,"div",6)(31,"h6",9),t._uU(32,"Account No"),t.qZA(),t.TgZ(33,"h6",10),t._uU(34),t.qZA()(),t.TgZ(35,"div",6)(36,"h6",9),t._uU(37,"Currency "),t.qZA(),t.TgZ(38,"h6",10),t._uU(39),t.qZA()()(),t._UZ(40,"hr"),t.TgZ(41,"div",11)(42,"h6"),t._uU(43,"Deposited Amount"),t.qZA(),t.TgZ(44,"div",12)(45,"h6",13),t._uU(46),t.ALo(47,"number"),t.qZA()()()()()(),t.TgZ(48,"div",14)(49,"div",15)(50,"h5",5),t._uU(51,"Deposit Cheque"),t.qZA(),t.TgZ(52,"p",16),t._uU(53),t.qZA()()(),t.TgZ(54,"div",1),t.YNc(55,St,24,2,"div",17),t.TgZ(56,"div",2),t.YNc(57,It,2,0,"ng-template",null,18,t.W1O),t.qZA()(),t.TgZ(59,"div",1)(60,"div",19)(61,"div",3)(62,"h6",20),t._uU(63,"Attachment"),t.qZA(),t.TgZ(64,"p",21),t._uU(65,"Uploaded files"),t.qZA(),t.TgZ(66,"div",1)(67,"div",22),t.YNc(68,Lt,9,3,"div",23),t.qZA()()()()()(),t.YNc(69,Jt,8,2,"ng-template",null,24,t.W1O)),2&e){const o=t.MAs(58);t.xp6(11),t.Oqu(t.xi3(12,11,null==n.depositedChequesDetails?null:n.depositedChequesDetails.createdAt,"medium")),t.xp6(8),t.Oqu(null==n.depositedChequesDetails?null:n.depositedChequesDetails.depositAllocationRecordId),t.xp6(5),t.Oqu(null==n.depositedChequesDetails||null==n.depositedChequesDetails.createdBy?null:n.depositedChequesDetails.createdBy.fullName),t.xp6(5),t.Oqu(null==n.depositedChequesDetails||null==n.depositedChequesDetails.sageBank?null:n.depositedChequesDetails.sageBank.accountName),t.xp6(5),t.Oqu(null==n.depositedChequesDetails||null==n.depositedChequesDetails.sageBank?null:n.depositedChequesDetails.sageBank.accountNo),t.xp6(5),t.Oqu(null==n.depositedChequesDetails||null==n.depositedChequesDetails.currency[0]?null:n.depositedChequesDetails.currency[0].lookupName),t.xp6(7),t.hij("",t.xi3(47,14,null==n.depositedChequesDetails?null:n.depositedChequesDetails.depositedAmount,"2.3-3")," JD"),t.xp6(7),t.hij("Total No ",null==n.depositedChequesDetails||null==n.depositedChequesDetails.cheques?null:n.depositedChequesDetails.cheques.length,""),t.xp6(2),t.Q6J("ngIf",null==n.depositedChequesDetails?null:n.depositedChequesDetails.cheques)("ngIfElse",o),t.xp6(13),t.Q6J("ngForOf",null==n.depositedChequesDetails?null:n.depositedChequesDetails.files)}},dependencies:[r.sg,r.O5,f.N,l.w,r.JJ,r.uU],styles:[".d-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}.uploadedfile[_ngcontent-%COMP%]{border:1px solid #11af22;border-radius:4px;display:flex;justify-content:space-between;align-items:center}.uploadedfile[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:50%;margin:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.uploadedfile[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px}.uploadedfile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;padding:10px;color:#696969;margin:0;cursor:pointer}"]}),i})()}];let Qt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.Bz.forChild(Et),g.Bz]}),i})();var Yt=u(21515);let Ht=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[r.ez,Qt,Yt.m]}),i})()},59442:(q,x,u)=>{u.d(x,{w:()=>g});var r=u(94650);let g=(()=>{class t{}return t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-not-found"]],decls:3,vars:0,consts:[[1,"not-found"]],template:function(p,m){1&p&&(r.TgZ(0,"div",0)(1,"p"),r._uU(2," No data to display "),r.qZA()())},styles:[".not-found[_ngcontent-%COMP%]{text-align:center;padding:10%}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c9c9d1;font-size:16px;font-weight:600}"]}),t})()}}]);