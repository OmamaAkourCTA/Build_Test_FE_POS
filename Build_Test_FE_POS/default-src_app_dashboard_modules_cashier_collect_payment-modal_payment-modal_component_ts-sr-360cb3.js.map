{"version":3,"file":"default-src_app_dashboard_modules_cashier_collect_payment-modal_payment-modal_component_ts-sr-360cb3.js","mappings":"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","sources":["./src/app/dashboard/modules/cashier/collect/modal-payment/modal-pay-done/modal-pay-done.component.ts","./src/app/dashboard/modules/cashier/collect/modal-payment/modal-pay-done/modal-pay-done.component.html","./src/app/dashboard/modules/cashier/collect/payment-modal/bank-pledge/bank-pledge.component.ts","./src/app/dashboard/modules/cashier/collect/payment-modal/bank-pledge/bank-pledge.component.html","./src/app/dashboard/modules/cashier/collect/payment-modal/bank-transfer/bank-transfer.component.ts","./src/app/dashboard/modules/cashier/collect/payment-modal/bank-transfer/bank-transfer.component.html","./src/app/dashboard/modules/cashier/collect/payment-modal/card-form/card-form.component.ts","./src/app/dashboard/modules/cashier/collect/payment-modal/card-form/card-form.component.html","./src/app/dashboard/modules/cashier/collect/payment-modal/cash/cash.component.ts","./src/app/dashboard/modules/cashier/collect/payment-modal/cash/cash.component.html","./src/app/dashboard/modules/cashier/collect/payment-modal/cheque/cheque.component.ts","./src/app/dashboard/modules/cashier/collect/payment-modal/cheque/cheque.component.html","./src/app/dashboard/modules/cashier/collect/payment-modal/confirm-payment-modal/confirm-payment-modal.component.html","./src/app/dashboard/modules/cashier/collect/payment-modal/confirm-payment-modal/confirm-payment-modal.component.ts","./src/app/dashboard/modules/cashier/collect/payment-modal/on-account/on-account.component.ts","./src/app/dashboard/modules/cashier/collect/payment-modal/on-account/on-account.component.html","./src/app/dashboard/modules/cashier/collect/payment-modal/other-revenue-form/components/add-new-customer/add-new-customer.component.ts","./src/app/dashboard/modules/cashier/collect/payment-modal/other-revenue-form/components/add-new-customer/add-new-customer.component.html","./src/app/dashboard/modules/cashier/collect/payment-modal/other-revenue-form/other-revenue-form.component.ts","./src/app/dashboard/modules/cashier/collect/payment-modal/other-revenue-form/other-revenue-form.component.html","./src/app/dashboard/modules/cashier/collect/payment-modal/payment-modal.component.ts","./src/app/dashboard/modules/cashier/collect/payment-modal/payment-modal.component.html","./src/app/dashboard/modules/cashier/collect/payment-modal/terminal-provider-modal/terminal-provider-modal.component.ts","./src/app/dashboard/modules/cashier/collect/payment-modal/terminal-provider-modal/terminal-provider-modal.component.html","./src/app/dashboard/modules/cashier/collect/payment-modal/view-file/view-file.component.html","./src/app/dashboard/modules/cashier/collect/payment-modal/view-file/view-file.component.ts","./src/app/dashboard/modules/cashier/collect/payment-modal/voucher/voucher.component.ts","./src/app/dashboard/modules/cashier/collect/payment-modal/voucher/voucher.component.html","./src/app/dashboard/modules/cashier/markazia-vouchers/services/markazia-voucher.service.ts","./src/app/services/http.service.ts","./src/app/shared/enums/enum.ts","./src/app/shared/routes/apiUrl.ts","./src/app/shared/routes/appRoutes.ts"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { NgbActiveModal, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { SubjectService } from '../../../../../../services/subject.service';\n\n@Component({\n  selector: 'app-modal-pay-done',\n  templateUrl: './modal-pay-done.component.html',\n  styleUrls: ['./modal-pay-done.component.scss'],\n})\nexport class ModalPayDoneComponent implements OnInit {\n  @Input() name;\n  @Input() data;\n  @Input() errors;\n  @Input() response;\n  @Input() routeName;\n  @Input() notAutoDismiss;\n  @Output() eventData = new EventEmitter();\n  constructor(\n    private router: Router,\n    private modalService: NgbModal,\n    public activeModal: NgbActiveModal,\n    public _subjectService: SubjectService\n  ) { }\n\n  ngOnInit(): void {\n    if (this.name == 'ok') {\n      setTimeout(() => {\n        //this.modalService.dismissAll();\n        //this.router.navigateByUrl('/collect');\n        //  window.location.reload()\n      }, 4000);\n    } else if (this.name == 'remain') {\n      setTimeout(() => {\n        // this.modalService.dismissAll();\n      }, 4000);\n    } else {\n      setTimeout(() => {\n        // this.modalService.dismissAll();\n      }, 4000);\n    }\n  }\n  navigateTo() {\n    if (this.data?.collectionType !== 7008) {\n      this.modalService.dismissAll();\n      //this.router.navigateByUrl('/collect');\n      if (this.routeName) this.router.navigateByUrl(`/${this.routeName}`);\n      else this._subjectService.isCollectionPaymentDone.next(true);\n    }\n  }\n  emitData() {\n    if (this.data?.collectionType == 7008) {\n      this._subjectService.paymentDoneModalClosed.next({ closed: true });\n    }\n  }\n  downloadInvoices() {\n    let isArray = Array.isArray(this.response.data);\n    if (isArray) {\n      this.response.data.forEach(x => {\n        this.iterateData(x);\n      })\n    }\n    else {\n      this.iterateData(this.response.data)\n    }\n    if (!this.notAutoDismiss) {\n      setTimeout(() => {\n        if (this.routeName) this.router.navigateByUrl(`/${this.routeName}`);\n        else this._subjectService.isCollectionPaymentDone.next(true);\n        this.modalService.dismissAll();\n      }, 3000)\n    }\n    else {\n      if (this.routeName) this.router.navigateByUrl(`/${this.routeName}`);\n    }\n  }\n  iterateData(data) {\n    for (let key in data) {\n      let item = data[key];\n      if (item) {\n        setTimeout(() => {\n          this.downloadURI(item)\n        }, 500)\n      }\n    }\n  }\n  downloadURI(uri: string) {\n    let name = uri.split('/').pop();\n    var link = document.createElement(\"a\");\n    //link.setAttribute('download', name);\n    link.setAttribute('target', '_blank');\n    link.href = uri;\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n  }\n}\n","<div class=\"message\" *ngIf=\"name == 'ok'\">\n  <h5>\n    <i class=\"fa-regular fa-circle-check\"></i>\n    {{\n      data?.reverse && 'Collection Successfully Updated' ||\n      data?.refund && 'Refund Successfully Performed' ||\n      'Your payment successfully completed'\n    }}\n  </h5>\n  <div class=\"btns-group gap-2 my-0\">\n    <ng-container *ngIf=\"!data?.isMultiCollect\">\n      <!--Show inovice and receipt buttons in case of not multi collect-->\n      <button *ngIf=\"(data?.collectionType !== 7001 && data?.collectionType !== 7002 && data?.collectionType !== 7003);else elseBlock\"\n              class=\"redBtn\" (click)=\"downloadInvoices()\">\n        {{(data?.collectionType == 7004 || data?.collectionType == 7005 || data?.collectionType == 7008 || data?.collectionType == 7009) && 'View Receipt' || 'View Invoice'}}\n      </button>\n    </ng-container>\n    <button class=\"redBtn\" (click)=\"activeModal.close('Close click');navigateTo();emitData()\">Close </button>\n  </div>\n  <ng-template #elseBlock>\n    <!--For spareparts,services-->\n    <ng-container *ngIf=\"!data?.reverse && !data?.refund\">\n      <a *ngIf=\"data.status == 10004 && data?.collectionType !== 7002\" href=\"{{data?.invoice}}\" target=\"_blank\">\n        <button type=\"button\" class=\"redBtn\">View Invoice</button>\n      </a>\n    </ng-container>\n    <!--For spareparts,services,directpayment-->\n    <a *ngIf=\"(data.status == 10004 || data.status == 10005) && (data?.invoiceType !== 'credit' && data?.invoiceType !== 'internal' && data?.invoiceType !== 'tmc')\" href=\"{{data?.receipt}}\" target=\"_blank\">\n      <button type=\"button\" class=\"redBtn\">View Receipt</button>\n    </a>\n  </ng-template>\n</div>\n\n<div class=\"message\" *ngIf=\"name == 'no'\">\n  <h5 *ngFor=\" let item of errors\"> <i class=\"fa-regular fa-circle-xmark\"></i> {{item.errorMessageEn ||item.ErrorMessageEn}} </h5>\n  <button class=\"btn btnclose\" (click)=\"activeModal.close('Close click');emitData()\">Close </button>\n</div>\n\n<div class=\"message\" *ngIf=\"name == 'remain'\">\n  <h5> <i class=\"fa-regular fa-circle-xmark\"></i> Payment must be completed, there is an amount left to pay </h5>\n  <button class=\"btn btnclose\" (click)=\"activeModal.close('Close click');emitData()\">Close </button>\n</div>\n\n","\nimport { Component, ElementRef, EventEmitter, HostListener, Input, Optional, Output, QueryList, ViewChild, ViewChildren } from '@angular/core';\nimport { AbstractControl, FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NgbActiveModal, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Subscription } from 'rxjs';\nimport { CommonService } from '../../../../../../services/common.service';\nimport { SubjectService } from '../../../../../../services/subject.service';\nimport { CollectService } from '../../services/collect.service';\nimport { ViewFileComponent } from '../view-file/view-file.component';\nimport * as _ from 'lodash';\n\n@Component({\n  selector: 'bankPledge',\n  templateUrl: './bank-pledge.component.html',\n  styleUrls: ['./bank-pledge.component.scss']\n})\nexport class BankPledgeComponent {\n  invalidFileType = '';\n  fileTypes = ['image/jpeg', 'image/jpg', 'image/png', 'application/pdf'];\n  @Input() banks = [];\n  @Input() currencies: [];\n  uploadedFile;\n  bankPledgeForm: FormGroup;\n  @Input() otherData;\n  @Input() recentFormValues\n  @Input() isPending: boolean;\n  filesSubscription = new Subscription();\n  @Output() amountEvent: EventEmitter<any> = new EventEmitter<any>();\n  @Output() formValueEvent: EventEmitter<any> = new EventEmitter<any>();\n  @HostListener('document:keydown.tab', ['$event']) onKeydownHandler() {\n    this.handleTabKeyDown();\n  }\n  @ViewChild('fileInput') inputRef: ElementRef<any>;\n  @ViewChildren('fileInput') inputRefList: QueryList<any>;\n  uploadedFiles: string[] = [];\n  filesArray = [];\n  colllectedViaMachine = false;\n  constructor(private fb: FormBuilder, private _modalService: NgbModal, @Optional() public _activeModal: NgbActiveModal,\n    public _commonService: CommonService, public _subjectService: SubjectService, private _collectService: CollectService) {\n  }\n  ngOnInit() {\n    this.colllectedViaMachine = JSON.parse(localStorage.getItem('pos_mc'));\n    this.initForm();\n    this.bankPledgeForm.statusChanges.subscribe(x => {\n      let touched;\n      if (this.otherData?.reverse) touched = (x == 'VALID' || x == 'DISABLED') ? false : true;\n      else touched = x == 'VALID' ? false : true;\n      this.bankPledgeForm.markAllAsTouched();\n      this.formValueEvent.emit({ values: this.bankPledgeForm.getRawValue(), touched })\n    })\n    // ONLY IN CASE OF Refund\n    if (this.otherData?.refund)\n      this.pledgeArrControls.disable({ emitEvent: false });\n    // ONLY IN CASE OF REVERSE\n    if (this.otherData?.reverse) {\n      this.disableReversedItems();\n    }\n  }\n  disableReversedItems() {\n    this.pledgeArrControls.controls.forEach((control: FormGroup) => {\n      // THIS OPERATION IS DONE BECAUSE WHILE REVERSE IN BELOW CONTROLS THE VALUE IS FULL URL OF FILE FROM SERVER,\n      // SO IN TEMPLATE WE NEED TO SHOW TEXT OF ATTACHMENT ONLY INSTEAD OF FULL URL.\n      let pledgeAttachment = control.get('attachment');\n      // PUSH VALUES ARRAY TO MANUPLATE THE ARRAY ACCORDING TO FORMARRY LENGTH\n      let pledgeAttachmentValue = pledgeAttachment.getRawValue();\n      this.filesArray.push(pledgeAttachmentValue);\n      if (pledgeAttachmentValue) {\n        pledgeAttachment.setValue('Attachment');\n      }\n      // END HERE\n      let isNew = control.get('isNew').value;\n      if (!isNew)\n        control.disable();\n    })\n  }\n  initForm() {\n    this.bankPledgeForm = this.fb.group({\n      pledgeArray: this.fb.array([this.pledgeFormControls()])\n    })\n    if (this.recentFormValues?.bankPledge?.pledgeArray?.length) {\n      let values = this.recentFormValues['bankPledge'].pledgeArray\n      let formArray = (this.bankPledgeForm.get('pledgeArray') as FormArray);\n      formArray.removeAt(0)\n      for (let item of values) {\n        formArray.push(this.pledgeFormControls(item))\n      }\n      let filesSub = this._subjectService.bankPledgeFiles.subscribe(files => {\n        if (files?.length > 0) {\n          this.filesArray = files;\n        }\n      })\n      this.filesSubscription.add(filesSub);\n    }\n  }\n  ngOnDestroy() {\n    if (this.recentFormValues?.bankPledge?.pledgeArray[0]?.pledgeAmountJod > 0) {\n      this.formValueEvent.emit({ values: this.bankPledgeForm.getRawValue(), touched: false })\n      this._subjectService.bankPledgeFiles.next(this.filesArray);\n      this.filesSubscription.unsubscribe();\n    }\n  }\n  handleAmountFocus() {\n    this.bankPledgeForm.markAllAsTouched();\n  }\n  pledgeFormControls(item?) {\n    //let lineNew = false;\n    //if (item?.lineNew) lineNew = true;\n    //else if (item?.isNew == undefined || item?.isNew == null) lineNew = true;\n    console.log(item?.isNew);\n    return this.fb.group({\n      pledgeAmountJod: [item?.pledgeAmountJod || '', [Validators.min(0.0000000000000001), Validators.required]],\n      bankPledgeDate: [item?.bankPledgeDate || (new Date()).toISOString().substring(0, 10), [Validators.required]],\n      bankId: [item?.bankId || null, [Validators.required]],\n      bankPledgeNumber: [item?.bankPledgeNumber || '', [Validators.required, Validators.pattern('^[0-9]*$')]],\n      pledgeAttachment: [item?.pledgeAttachment || ''],\n      attachment: [item?.attachment || ''],\n      currencyId: [9001, [Validators.required]],\n      isReversed: [(item?.isReversed ?? item?.isReversed) || false],\n      isNew: [item?.isNew ?? (!this.otherData?.reverse ? true : (+item?.pledgeAmountJod) > 0 ? false : true)],\n      lineNew: [item?.lineNew ?? (!this.otherData?.reverse ? true : (+item?.pledgeAmountJod) > 0 ? false : true)],\n    })\n  }\n  fileAction(fileName, index, action) {\n    if (action == 'view') {\n      const modelRef = this._modalService.open(ViewFileComponent, { size: 'md' });\n      let isReversed = (this.pledgeArrControls.at(index) as FormGroup).get('isReversed').getRawValue();\n      let isNew = (this.pledgeArrControls.at(index) as FormGroup).get('isNew').getRawValue();\n      if (!this.otherData?.reverse || isReversed === false) {\n        let file = this.filesArray[index];\n        if (isNew)\n          modelRef.componentInstance.imageUploadedView = file;\n        else\n          modelRef.componentInstance.imageUploadedView = { viewOnly: true, url: file };\n      }\n      else {\n        // IN CASE OF REVERSE ONLY\n        if (isReversed === null || isReversed) {\n          let file = this.filesArray[index];\n          modelRef.componentInstance.imageUploadedView = { viewOnly: true, url: file }\n        }\n      }\n    }\n    else {\n      if (this.otherData?.reverse) {\n        let isNew = this.pledgeArrControls.at(index).get('isNew').getRawValue();\n        if (!isNew) return;\n      }\n      this.filesArray.splice(index, 1, {});\n      let inputRef = this.inputRefList.toArray()[index] as ElementRef;\n      (this.bankPledgeForm.get('pledgeArray') as FormArray).at(index).get('attachment')?.setValue('');\n      (this.bankPledgeForm.get('pledgeArray') as FormArray).at(index).get('pledgeAttachment')?.setValue('');\n      inputRef.nativeElement.value = null;\n      this.removeFileFromLocalStorage(index);\n    }\n  }\n  removeFileFromLocalStorage(index) {\n    let files = localStorage.getItem('bpUploadedFiles');\n    if (files) {\n      this.uploadedFiles = [...JSON.parse(files)];\n      this.uploadedFiles.splice(index, 1, 'noFile');\n      localStorage.setItem('bpUploadedFiles', JSON.stringify(this.uploadedFiles));\n    }\n  }\n  onFileChange(event, i) {\n    let files = [...event.target.files];\n    let formArray = (this.bankPledgeForm.get('pledgeArray') as FormArray);\n    if (files.length > 0) {\n      let isInvalid = this.checkInvalidImageFormat(files);\n      if (!isInvalid) {\n        files.forEach((file: File) => {\n          this.uploadFile(file, i);\n          this._commonService.fileToBase64(file).then(response => {\n            this.filesArray.splice(i, 1, response)\n            formArray.at(i).get('attachment')?.setValue('Attachment');\n          })\n        })\n      }\n    }\n  }\n  uploadFile(file, index) {\n    const formData = new FormData();\n    formData.append('Folder', 'BankPledge');\n    formData.append('File', file);\n    this._collectService.uploadFile(formData).subscribe(response => {\n      if (response.isSuccess) {\n        this.uploadedFiles.splice(index, 1, response['data']);\n        (this.bankPledgeForm.get('pledgeArray') as FormArray).at(index).get('pledgeAttachment')?.setValue(response['data']);\n        localStorage.setItem('bpUploadedFiles', JSON.stringify(this.uploadedFiles));\n      }\n    })\n  }\n  checkInvalidImageFormat(data) {\n    let files;\n    let getFiles = data.map(x => {\n      return x.file\n    })\n    if (getFiles[0] !== undefined) {\n      files = getFiles;\n    }\n    else {\n      files = data;\n    }\n    let invalidExtentions = false;\n    for (let file of files) {\n      if (!this.fileTypes.includes(file.type)) {\n        invalidExtentions = true;\n        this.invalidFileType = 'This file not support, supported formates: JPEG, JPG, PNG, PDF';\n        this.bankPledgeForm.get('attachment')?.patchValue('');\n        setTimeout(() => this.invalidFileType = '', 3000)\n        break;\n      }\n    }\n    return invalidExtentions;\n  }\n  removeItem(i) {\n    if (this.otherData.refund) return;\n    this.filesArray.splice(i, 1);\n    this.pledgeArrControls.removeAt(i);\n    this.removeFileFromLocalStorage(i);\n    this.sendAmount();\n  }\n  get pledgeArrControls() {\n    return this.bankPledgeForm ? this.bankPledgeForm.get('pledgeArray') as FormArray : null;\n  }\n  handleTabKeyDown() {\n    if (this.otherData.refund || this.bankPledgeForm.invalid) {\n      return;\n    }\n    if (this.otherData['amountExceeded']) {\n      return;\n    }\n    if (!this.otherData?.isMultiCollect)\n      this.addNewRow();\n\n  }\n  addNewRow() {\n    if (this.getDisabledFormGroupCount() == 2 && this.otherData?.reverse) {\n      let obj = { isReversed: false, isNew: true, lineNew: true }\n      this.pledgeArrControls.push(this.pledgeFormControls(obj));\n      this.bankPledgeForm.markAsUntouched();\n    }\n  }\n  getDisabledFormGroupCount(): number {\n    let disabledCount = 0;\n    this.pledgeArrControls.controls.forEach(control => {\n      if (control.disabled) disabledCount++;\n    });\n    return disabledCount;\n  }\n  handleSubmit() {\n    if (this.bankPledgeForm.invalid) {\n      this.bankPledgeForm.getRawValue()\n      this.bankPledgeForm.markAllAsTouched();\n    }\n    else {\n      console.log(this.bankPledgeForm.getRawValue());\n      this.formValueEvent.emit({ values: this.bankPledgeForm.getRawValue(), submit: true })\n    }\n  }\n  get f() {\n    return this.bankPledgeForm.controls;\n  }\n  sendAmount() {\n    this.calculateAmount();\n  }\n  calculateAmount() {\n    let amount = 0;\n    for (let item of this.pledgeArrControls.controls) {\n      let formGroup = item as FormGroup;\n      amount += +(formGroup.controls['pledgeAmountJod'].getRawValue());\n    }\n    this.amountEvent.emit({ amount });\n  }\n  reverse(item: AbstractControl, index: number) {\n    const previousFormGroup = this.pledgeArrControls.at(index) as FormGroup;\n    const newFormGroup = this.fb.group({});\n    Object.keys(previousFormGroup.controls).forEach(controlName => {\n      const controlValue = _.cloneDeep(previousFormGroup.get(controlName)?.value);\n      newFormGroup.addControl(controlName, new FormControl(controlValue));\n    });\n    let negativeValue = (previousFormGroup.get('pledgeAmountJod').value) * -1;\n    newFormGroup.patchValue({\n      pledgeAmountJod: negativeValue,\n      isReversed: true,\n      lineNew: true,\n    })\n    previousFormGroup.get('isReversed').setValue(true);\n    previousFormGroup.get('lineNew').setValue(false);\n    this.pledgeArrControls.insert(index + 1, newFormGroup);\n    let attachment = this.filesArray[index];\n    this.filesArray.splice(index + 1, 0, attachment);\n    (this.pledgeArrControls.at(index) as FormGroup).disable();\n    (this.pledgeArrControls.at(index + 1) as FormGroup).disable();\n    this.sendAmount();\n  }\n  resetForm() {\n    this.bankPledgeForm.reset();\n    this.bankPledgeForm.markAsUntouched();\n    this.formValueEvent.emit({ values: this.bankPledgeForm.getRawValue(), touched: false, reset: true });\n    this.amountEvent.emit({ amount: 0 });\n  }\n  closeModal() {\n    if (this._activeModal)\n      this._activeModal.close()\n    else\n      this._commonService.NavigateToRoute(`/${this.otherData?.redirectRoute}`)\n  }\n}\n\n\n","<div class=\"tab-item\">\n  <div class=\"row\">\n    <!--{{pledgeArrControls.getRawValue()  | json}}-->\n    <form [formGroup]=\"bankPledgeForm\" (submit)=\"handleSubmit()\">\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <div class=\"card-table\">\n            <div class=\"\">\n              <table class=\"table\">\n                <thead>\n                  <tr>\n                    <th>Pledge Amount*</th>\n                    <th>Currency*</th>\n                    <th>Bank Pledge Date*</th>\n                    <th>Bank Name*</th>\n                    <th width=\"15%\">Bank Pledge<br /> Number*</th>\n                    <th width=\"20%\">Pledge Attachment</th>\n                    <th>Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <ng-container formArrayName=\"pledgeArray\" *ngFor=\"let item of pledgeArrControls?.controls;let i = index\">\n                    <tr [formGroupName]=\"i\">\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"number\" class=\"form-control\" placeholder=\"Amount\" formControlName=\"pledgeAmountJod\"\n                                 (change)=\"sendAmount()\" appDecimalNumber (input)=\"handleAmountFocus()\">\n                          <ng-container *ngIf=\"item?.get('pledgeAmountJod')?.errors\">\n                            <ng-container *ngIf=\"item?.get('pledgeAmountJod')?.invalid && item?.get('pledgeAmountJod')?.touched || item?.get('pledgeAmountJod')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('pledgeAmountJod')?.errors['required']\">Input is required</span>\n                              <span class=\"error\" *ngIf=\"item?.get('pledgeAmountJod')?.errors['min']\">Value must be greater than zero</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"ngselect-curruncy form-group\">\n                          <ng-select placeholder=\"Currency\" [items]=\"currencies\"\n                                     bindLabel=\"name\" bindValue=\"lookupId\" formControlName=\"currencyId\">\n                          </ng-select>\n                          <ng-container *ngIf=\"item?.get('currencyId')?.errors\">\n                            <ng-container *ngIf=\"item?.get('currencyId')?.invalid && item?.get('currencyId')?.touched || item?.get('currencyId')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('currencyId')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"date\" class=\"form-control\" formControlName=\"bankPledgeDate\">\n                          <ng-container *ngIf=\"item?.get('bankPledgeDate')?.errors\">\n                            <ng-container *ngIf=\"item?.get('bankPledgeDate')?.invalid && item?.get('bankPledgeDate')?.touched || item?.get('bankPledgeDate')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('bankPledgeDate')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <ng-select id=\"bankId\" placeholder=\" Select Bank \" [items]=\"banks\" bindLabel=\"name\" bindValue=\"id\"\n                                     formControlName=\"bankId\">\n                          </ng-select>\n                          <ng-container *ngIf=\"item?.get('bankId')?.errors\">\n                            <ng-container *ngIf=\"item?.get('bankId')?.invalid && item?.get('bankId')?.touched || item?.get('bankId')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('bankId')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"text\" class=\"form-control\" formControlName=\"bankPledgeNumber\">\n                          <ng-container *ngIf=\"item?.get('bankPledgeNumber')?.errors\">\n                            <ng-container *ngIf=\"item?.get('bankPledgeNumber')?.invalid && item?.get('bankPledgeNumber')?.touched || item?.get('bankPledgeNumber')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('bankPledgeNumber')?.errors['required']\">Input is required</span>\n                              <span class=\"error\" *ngIf=\"item?.get('bankPledgeNumber')?.errors['pattern']\">Input allows only digits</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"custom-file align-items-center\" [class.disable-elm]=\"otherData.refund\">\n                          <input *ngIf=\"item.get('isNew').value\"\n                                 type=\"file\" [id]=\"i+'file-input'\"\n                                 class=\"file-input__input\"\n                                 (change)=\"onFileChange($event,i)\" />\n                          <label class=\"file-input__label\" [class.text-success]=\"item?.value.attachment\" [attr.for]=\"i+'file-input'\">{{item?.value.attachment && item?.value.attachment || 'Upload file'}}</label>\n                          <ng-container *ngIf=\"item?.value.attachment\">\n                            <img height=\"20\" class=\"cursor-pointer\" src=\"assets/images/eye.png\" (click)=\"fileAction(item?.value.attachment,i,'view')\" />\n                            <img height=\"20\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"fileAction(item?.value.attachment,i,'delete')\" />\n                          </ng-container>\n                        </div>\n                        <ng-container *ngIf=\"item?.get('attachment')?.errors\">\n                          <ng-container *ngIf=\"item?.get('attachment')?.invalid && item?.get('attachment')?.touched || item?.get('attachment')?.dirty\">\n                            <div class=\"form-group\">\n                              <span class=\"error\" *ngIf=\"item?.get('attachment')?.errors['required']\">Input is required</span>\n                            </div>\n                          </ng-container>\n                        </ng-container>\n                      </td>\n                      <td>\n                        <ng-container *ngIf=\"!otherData.refund\">\n                          <ng-container *ngIf=\"!otherData?.reverse;else reverseCase\">\n                            <img style=\"width:25px\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"removeItem(i)\" alt=\"\">\n                          </ng-container>\n                        </ng-container>\n                        <!--Reverse Case Only Start-->\n                        <ng-template #reverseCase>\n                          <ng-container *ngIf=\"item.get('isNew').value;else reverseTemp\">\n                            <img style=\"width:25px\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"removeItem(i)\" alt=\"\">\n                          </ng-container>\n                          <ng-template #reverseTemp>\n                            <ng-container *ngIf=\"!item.get('isReversed').value\">\n                              <i (click)=\"reverse(item,i)\" class=\"cursor-pointer green-clr fas fa-rotate-left font-20\"></i>\n                            </ng-container>\n                          </ng-template>\n                        </ng-template>\n                        <!--Reverse Case Only End-->\n                      </td>\n                    </tr>\n                  </ng-container>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          <div class=\"col-md-12 d-flex mt-2\" *ngIf=\"otherData?.reverse\">\n            <p class=\"blue-clr d-flex align-items-center fw-500 gap-1\">\n              <i class=\"fa-solid fa-circle-plus primary-clr fa-2x\"></i>Press Tab to add new row\n            </p>\n          </div>\n        </div>\n      </div>\n      <!-----------------------------------TABLE END HERE----------------------------->\n      <div class=\"col-12 mb-4\" *ngIf=\"otherData.collectionType == 7001 || otherData.collectionType == 7004 || otherData.collectionType == 7005 || otherData.collectionType == 7008 || otherData.collectionType == 7009 || (otherData.collectionType == 7002 && otherData.refund)\">\n        <label class=\"input-label\">Cashier Notes</label>\n        <textarea class=\"form-control\" (change)=\"_subjectService.cashierNote.next($any($event).target.value)\"></textarea>\n      </div>\n      <div class=\"col-md-12\">\n        <div class=\"btns-group my-2 me-0\">\n          <button type=\"button\" class=\"btn btn-cancel\" [disabled]=\"colllectedViaMachine\" (click)=\"closeModal()\">Cancel</button>\n          <button type=\"submit\" class=\"btn btn-save\" [disabled]=\"isPending\">\n            {{isPending && 'Saving' || 'Confirm'}}\n            <i *ngIf=\"isPending\" class=\"fa-solid fa-circle-notch fa-spin\"></i>\n          </button>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n","import { Component, ElementRef, EventEmitter, HostListener, Input, Optional, Output, QueryList, ViewChildren } from '@angular/core';\nimport { AbstractControl, FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NgbActiveModal, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Subscription } from 'rxjs';\nimport { CommonService } from '../../../../../../services/common.service';\nimport { SubjectService } from '../../../../../../services/subject.service';\nimport { CollectService } from '../../services/collect.service';\nimport { ViewFileComponent } from '../view-file/view-file.component';\nimport * as _ from 'lodash';\n\n@Component({\n  selector: 'bankTransfer',\n  templateUrl: './bank-transfer.component.html',\n  styleUrls: ['./bank-transfer.component.scss']\n})\nexport class BankTransferComponent {\n  invalidFileType = '';\n  fileTypes = ['image/jpeg', 'image/jpg', 'image/png', 'application/pdf'];\n  @Input() accounts = [];\n  @Input() currencies: [];\n  filesArray = [];\n  bankTransferForm: FormGroup;\n  uploadedFiles: string[] = [];\n  @Input() recentFormValues\n  @Input() isPending: boolean;\n  @Input() otherData;\n  filesSubscription = new Subscription();\n  @Output() amountEvent: EventEmitter<any> = new EventEmitter<any>();\n  @Output() formValueEvent: EventEmitter<any> = new EventEmitter<any>();\n  @HostListener('document:keydown.tab', ['$event']) onKeydownHandler() {\n    this.handleTabKeyDown();\n  }\n  @ViewChildren('fileInput') inputRefList: QueryList<any>;\n  colllectedViaMachine = false;\n  constructor(private fb: FormBuilder, private _modalService: NgbModal, @Optional() public _activeModal: NgbActiveModal,\n    public _commonService: CommonService, public _subjectService: SubjectService, private _collectService: CollectService) {\n  }\n  ngOnInit() {\n    this.colllectedViaMachine = JSON.parse(localStorage.getItem('pos_mc'));\n    this.getBankAccounts();\n    this.accounts = [{ id: 1, name: 78954 }, { id: 1, name: 78954 },]\n    this.initForm();\n    this.bankTransferForm.statusChanges.subscribe(x => {\n      let touched;\n      if (this.otherData?.reverse) touched = (x == 'VALID' || x == 'DISABLED') ? false : true;\n      else touched = x == 'VALID' ? false : true;\n      this.bankTransferForm.markAllAsTouched();\n      this.formValueEvent.emit({ values: this.bankTransferForm.getRawValue(), touched })\n    })\n    // ONLY IN CASE OF Refund\n    if (this.otherData?.refund)\n      this.bankArrControls.disable({ emitEvent: false });\n    // ONLY IN CASE OF REVERSE\n    if (this.otherData?.reverse) {\n      this.disableReversedItems();\n    }\n  }\n  disableReversedItems() {\n    this.bankArrControls.controls.forEach((control: FormGroup) => {\n      // THIS OPERATION IS DONE BECAUSE WHILE REVERSE IN BELOW CONTROLS THE VALUE IS FULL URL OF FILE FROM SERVER,\n      // SO IN TEMPLATE WE NEED TO SHOW TEXT OF ATTACHMENT ONLY INSTEAD OF FULL URL.\n      let attachment = control.get('attachment');\n      // PUSH VALUES ARRAY TO MANUPLATE THE ARRAY ACCORDING TO FORMARRY LENGTH\n      let attachmentValue = attachment.getRawValue();\n      this.filesArray.push(attachmentValue);\n      if (attachmentValue) {\n        attachment.setValue('Attachment');\n      }\n      // END HERE\n      let isNew = control.get('isNew').value;\n      if (!isNew)\n        control.disable();\n    })\n  }\n  getBankAccounts() {\n    let params = `?AccountType=15001&currencyId=9001&Status=2001&PageNo=0&PageSize=1000`\n    this._collectService.getBankAccounts(params).subscribe((response: any) => {\n      if (response.isSuccess) {\n        this.accounts = response['data'].map(x => { return { id: x.accountId, name: x.bankNameEnglish, accountNumber: x.accountNumber } });\n        console.log(response);\n      }\n    })\n  }\n  initForm() {\n    this.bankTransferForm = this.fb.group({\n      bankArray: this.fb.array([this.bankFormControls()])\n    })\n    if (this.recentFormValues?.bankTransfer?.bankArray?.length) {\n      let values = this.recentFormValues['bankTransfer'].bankArray\n      let formArray = (this.bankTransferForm.get('bankArray') as FormArray);\n      formArray.removeAt(0)\n      for (let item of values) {\n        formArray.push(this.bankFormControls(item))\n      }\n      let filesSub = this._subjectService.bankTransferFiles.subscribe(files => {\n        if (files?.length > 0) {\n          this.filesArray = files;\n        }\n      })\n      this.filesSubscription.add(filesSub);\n    }\n  }\n  ngOnDestroy() {\n    if (this.recentFormValues?.bankTransfer?.bankArray[0]?.paidAmountJod > 0) {\n      this.formValueEvent.emit({ values: this.bankTransferForm.getRawValue(), touched: false })\n      this._subjectService.bankTransferFiles.next(this.filesArray);\n      this.filesSubscription.unsubscribe();\n    }\n  }\n  handleAmountFocus() {\n    this.bankTransferForm.markAllAsTouched();\n  }\n  bankFormControls(item?) {\n    if (item) {\n      return this.fb.group({\n        sameCustomer: [item?.sameCustomer],\n        paidAmountJod: [item?.paidAmountJod, [Validators.min(0.0000000000000001), Validators.required]],\n        transfereDate: [item?.transfereDate, [Validators.required]],\n        markaziaBankAccountId: [item?.markaziaBankAccountId, [Validators.required]],\n        transfereReference: [item?.transfereReference, [Validators.required, Validators.pattern('^[0-9]*$')]],\n        transfereAttachment: [item?.transfereAttachment],\n        attachment: [item?.attachment],\n        cardPayerName: [item?.cardPayerName, this.otherData.collectionType != 7004 && [Validators.required]],\n        currencyId: [item?.currencyId, [Validators.required]],\n        isReversed: [(item?.isReversed ?? item?.isReversed) || false],\n        isNew: [(item?.isNew ?? item?.isNew) || false],\n        lineNew: [(item?.lineNew ?? item?.lineNew) || false],\n      });\n    }\n    else {\n      return this.fb.group({\n        sameCustomer: [true],\n        paidAmountJod: ['', [Validators.min(0.0000000000000001), Validators.required]],\n        transfereDate: [(new Date()).toISOString().substring(0, 10), [Validators.required]],\n        markaziaBankAccountId: [null, [Validators.required]],\n        transfereReference: ['', [Validators.required, Validators.pattern('^[0-9]*$')]],\n        transfereAttachment: [''],\n        attachment: [''],\n        cardPayerName: [localStorage.getItem('pmcn') || 'No Customer', this.otherData.collectionType != 7004 && [Validators.required]],\n        currencyId: [9001, [Validators.required]],\n        isReversed: [false],\n        isNew: [true],\n        lineNew: [true],\n      });\n    }\n  }\n  fileAction(fileName, index, action) {\n    if (action == 'view') {\n      const modelRef = this._modalService.open(ViewFileComponent, { size: 'md' });\n      let isReversed = (this.bankArrControls.at(index) as FormGroup).get('isReversed').getRawValue();\n      let isNew = (this.bankArrControls.at(index) as FormGroup).get('isNew').getRawValue();\n      if (!this.otherData?.reverse || isReversed === false) {\n        let file = this.filesArray[index];\n        if (isNew)\n          modelRef.componentInstance.imageUploadedView = file;\n        else\n          modelRef.componentInstance.imageUploadedView = { viewOnly: true, url: file };\n      }\n      else {\n        // IN CASE OF REVERSE ONLY\n        if (isReversed === null || isReversed) {\n          let file = this.filesArray[index];\n          modelRef.componentInstance.imageUploadedView = { viewOnly: true, url: file }\n        }\n      }\n    }\n    else {\n      if (this.otherData?.reverse) {\n        let isNew = this.bankArrControls.at(index).get('isNew').getRawValue();\n        if (!isNew) return;\n      }\n      this.filesArray.splice(index, 1, {});\n      let inputRef = this.inputRefList.toArray()[index] as ElementRef;\n      (this.bankTransferForm.get('bankArray') as FormArray).at(index).get('attachment')?.setValue('');\n      (this.bankTransferForm.get('bankArray') as FormArray).at(index).get('transfereAttachment')?.setValue('');\n      inputRef.nativeElement.value = null;\n      this.removeFileFromLocalStorage(index);\n    }\n  }\n  removeFileFromLocalStorage(index) {\n    let files = localStorage.getItem('bpUploadedFiles');\n    if (files) {\n      this.uploadedFiles = [...JSON.parse(localStorage.getItem('btUploadedFiles'))];\n      this.uploadedFiles.splice(index, 1, 'noFile');\n      localStorage.setItem('btUploadedFiles', JSON.stringify(this.uploadedFiles));\n    }\n  }\n  onFileChange(event, i) {\n    let files = [...event.target.files];\n    //this.filesArray.splice(i, 1);\n    let formArray = (this.bankTransferForm.get('bankArray') as FormArray);\n    if (files.length > 0) {\n      let isInvalid = this.checkInvalidImageFormat(files);\n      if (!isInvalid) {\n        files.forEach((file: File) => {\n          this.uploadFile(file, i);\n          this._commonService.fileToBase64(file).then(response => {\n            this.filesArray.splice(i, 1, response)\n            formArray.at(i).get('attachment')?.setValue('Attachment');\n          })\n        })\n      }\n    }\n  }\n  uploadFile(file, index) {\n    const formData = new FormData();\n    formData.append('Folder', 'BankTransfer');\n    formData.append('File', file);\n    this._collectService.uploadFile(formData).subscribe(response => {\n      if (response.isSuccess) {\n        this.uploadedFiles.splice(index, 1, response['data']);\n        (this.bankTransferForm.get('bankArray') as FormArray).at(index).get('transfereAttachment')?.setValue(response['data']);\n        localStorage.setItem('btUploadedFiles', JSON.stringify(this.uploadedFiles));\n      }\n    })\n  }\n  checkInvalidImageFormat(data) {\n    let files;\n    let getFiles = data.map(x => {\n      return x.file\n    })\n    if (getFiles[0] !== undefined) {\n      files = getFiles;\n    }\n    else {\n      files = data;\n    }\n    let invalidExtentions = false;\n    for (let file of files) {\n      if (!this.fileTypes.includes(file.type)) {\n        invalidExtentions = true;\n        this.invalidFileType = 'This file not support, supported formates: JPEG, JPG, PNG, PDF';\n        this.bankTransferForm.get('attachment')?.patchValue('');\n        setTimeout(() => this.invalidFileType = '', 3000)\n        break;\n      }\n    }\n    return invalidExtentions;\n  }\n  removeItem(i) {\n    if (this.otherData.refund) return;\n    this.filesArray.splice(i, 1);\n    this.bankArrControls.removeAt(i);\n    this.removeFileFromLocalStorage(i);\n    this.sendAmount();\n  }\n  get bankArrControls() {\n    return this.bankTransferForm ? this.bankTransferForm.get('bankArray') as FormArray : null;\n  }\n  handleTabKeyDown() {\n    if (this.otherData.refund || this.bankTransferForm.invalid) {\n      return;\n    }\n    if (this.otherData['amountExceeded']) {\n      return;\n    }\n    if (!this.otherData?.isMultiCollect)\n      this.addNewRow();\n\n  }\n  addNewRow() {\n    this.bankArrControls.push(this.bankFormControls());\n    this.bankTransferForm.markAsUntouched();\n  }\n  isSameCustomer(event, index) {\n    let formGroup = this.bankArrControls.at(index) as FormGroup;\n    if (event.target.checked) {\n      if (this.otherData.collectionType == 7004) {\n        formGroup.controls['cardPayerName'].setValue('No Customer');\n      }\n      else {\n        let customerName = localStorage.getItem('pmcn');\n        formGroup.controls['cardPayerName'].setValue(customerName);\n      }\n    }\n    else {\n      formGroup.controls['cardPayerName'].setValue('');\n    }\n  }\n  handleSubmit() {\n    if (this.bankTransferForm.invalid) {\n      this.bankTransferForm.markAllAsTouched();\n    }\n    else {\n      console.log(this.bankTransferForm.getRawValue());\n      this.formValueEvent.emit({ values: this.bankTransferForm.getRawValue(), submit: true })\n    }\n  }\n  get f() {\n    return this.bankTransferForm.controls;\n  }\n  sendAmount() {\n    this.calculateAmount();\n  }\n  calculateAmount() {\n    let amount = 0;\n    for (let item of this.bankArrControls.controls) {\n      let formGroup = item as FormGroup;\n      amount += +(formGroup.controls['paidAmountJod'].getRawValue());\n    }\n    this.amountEvent.emit({ amount });\n  }\n  reverse(item: AbstractControl, index: number) {\n    const previousFormGroup = this.bankArrControls.at(index) as FormGroup;\n    const newFormGroup = this.fb.group({});\n    Object.keys(previousFormGroup.controls).forEach(controlName => {\n      const controlValue = _.cloneDeep(previousFormGroup.get(controlName)?.value);\n      newFormGroup.addControl(controlName, new FormControl(controlValue));\n    });\n    let negativeValue = (previousFormGroup.get('paidAmountJod').value) * -1;\n    newFormGroup.patchValue({\n      paidAmountJod: negativeValue,\n      isReversed: true,\n      lineNew: true,\n    })\n    previousFormGroup.get('isReversed').setValue(true);\n    previousFormGroup.get('lineNew').setValue(false);\n    this.bankArrControls.insert(index + 1, newFormGroup);\n    let attachment = this.filesArray[index];\n    this.filesArray.splice(index + 1, 0, attachment);\n    (this.bankArrControls.at(index) as FormGroup).disable();\n    (this.bankArrControls.at(index + 1) as FormGroup).disable();\n    this.sendAmount();\n  }\n  resetForm() {\n    this.bankArrControls.clear();\n    this.bankArrControls.push(this.bankFormControls())\n    this.bankTransferForm.markAsUntouched();\n    this.formValueEvent.emit({ values: this.bankTransferForm.getRawValue(), touched: false, reset: true });\n    this.amountEvent.emit({ amount: 0 });\n  }\n  closeModal() {\n    if (this._activeModal)\n      this._activeModal.close()\n    else\n      this._commonService.NavigateToRoute(`/${this.otherData?.redirectRoute}`)\n  }\n\n}\n\n","<div class=\"tab-item\">\n  <div class=\"row\">\n    <div class=\"col-md-12 text-end my-2\">\n      <button *ngIf=\"!otherData.reverse && !otherData.refund\" type=\"button\" class=\"btn btn-trash\" (click)=\"resetForm()\">\n        <img style=\"width:25px\" src=\"assets/images/reload.png\" alt=\"\">\n      </button>\n    </div>\n    <!--{{bankTransferForm.getRawValue()  | json}}-->\n    <form [formGroup]=\"bankTransferForm\" (submit)=\"handleSubmit()\">\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <div class=\"card-table\">\n            <div class=\"\">\n              <table class=\"table\">\n                <thead>\n                  <tr>\n                    <th>Paid Amount*</th>\n                    <th>Currency*</th>\n                    <th>Transfer Date*</th>\n                    <th width=\"15%\">Markazia Bank<br /> Account No*</th>\n                    <th>Transfer Refernece*</th>\n                    <th width=\"15%\">Transfer Attachment</th>\n                    <th>Payer Name</th>\n                    <th>Same Customer</th>\n                    <th *ngIf=\"!otherData?.isMultiCollect\">Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <ng-container formArrayName=\"bankArray\" *ngFor=\"let item of bankArrControls?.controls;let i = index\">\n                    <tr [formGroupName]=\"i\">\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"number\" class=\"form-control\" placeholder=\"Amount\" formControlName=\"paidAmountJod\"\n                                 (change)=\"sendAmount()\" appDecimalNumber (input)=\"handleAmountFocus()\">\n                          <ng-container *ngIf=\"item?.get('paidAmountJod')?.errors\">\n                            <ng-container *ngIf=\"item?.get('paidAmountJod')?.invalid && item?.get('paidAmountJod')?.touched || item?.get('paidAmountJod')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('paidAmountJod')?.errors['required']\">Input is required</span>\n                              <span class=\"error\" *ngIf=\"item?.get('paidAmountJod')?.errors['min']\">Value must be greater than zero</span>\n\n                            </ng-container>\n                          </ng-container>\n                        </div>\n\n                      </td>\n                      <td>\n                        <div class=\"ngselect-curruncy form-group\">\n                          <ng-select placeholder=\"Currency\" [items]=\"currencies\"\n                                     bindLabel=\"name\" bindValue=\"lookupId\" formControlName=\"currencyId\">\n                          </ng-select>\n                          <ng-container *ngIf=\"item.get('currencyId')?.errors\">\n                            <ng-container *ngIf=\"item?.get('currencyId')?.invalid && item?.get('currencyId')?.touched || item?.get('currencyId')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('currencyId')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"date\" class=\"form-control\" formControlName=\"transfereDate\">\n                          <ng-container *ngIf=\"item?.get('transfereDate')?.errors\">\n                            <ng-container *ngIf=\"item?.get('transfereDate')?.invalid && item?.get('transfereDate')?.touched || item?.get('transfereDate')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('transfereDate')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <ng-select id=\"accountNo\" placeholder=\" Select Bank Account \" [items]=\"accounts\" bindLabel=\"name\" bindValue=\"id\"\n                                     formControlName=\"markaziaBankAccountId\">\n                            <ng-template ng-option-tmp let-item=\"item\">\n                              <span>{{item?.name+ ' - ' +item?.accountNumber}}</span>\n                            </ng-template>\n                          </ng-select>\n                          <ng-container *ngIf=\"item?.get('markaziaBankAccountId')?.errors\">\n                            <ng-container *ngIf=\"item?.get('markaziaBankAccountId')?.invalid && item?.get('markaziaBankAccountId')?.touched || item?.get('markaziaBankAccountId')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('markaziaBankAccountId')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"text\" class=\"form-control\" formControlName=\"transfereReference\">\n                          <ng-container *ngIf=\"item?.get('transfereReference')?.errors\">\n                            <ng-container *ngIf=\"item?.get('transfereReference')?.invalid && item?.get('transfereReference')?.touched || item?.get('transfereReference')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('transfereReference')?.errors['required']\">Input is required</span>\n                              <span class=\"error\" *ngIf=\"item?.get('transfereReference')?.errors['pattern']\">Input allows only digits</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"custom-file align-items-center\" [class.disable-elm]=\"otherData.refund\">\n                          <input *ngIf=\"item.get('isNew').value\" type=\"file\" [id]=\"i+'file-input'\"\n                                 class=\"file-input__input\" (change)=\"onFileChange($event,i)\" />\n                          <label class=\"file-input__label\" [class.text-success]=\"item?.value.attachment\"\n                                 [attr.for]=\"i+'file-input'\">{{item?.value.attachment && item?.value.attachment || 'Upload file'}}</label>\n                          <ng-container *ngIf=\"item?.value.attachment\">\n                            <img height=\"20\" class=\"cursor-pointer\" src=\"assets/images/eye.png\" (click)=\"fileAction(item?.value.attachment,i,'view')\" />\n                            <img height=\"20\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"fileAction(item?.value.attachment,i,'delete')\" />\n                          </ng-container>\n                        </div>\n                        <ng-container *ngIf=\"item?.get('attachment')?.errors\">\n                          <ng-container *ngIf=\"item?.get('attachment')?.invalid && item?.get('attachment')?.touched || item?.get('attachment')?.dirty\">\n                            <div class=\"form-group\">\n                              <span class=\"error\" *ngIf=\"item?.get('attachment')?.errors['required']\">Input is required</span>\n                            </div>\n                          </ng-container>\n                        </ng-container>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"text\" class=\"form-control\" placeholder=\"\" formControlName=\"cardPayerName\" OnlyCharacter>\n                          <ng-container *ngIf=\"item?.get('cardPayerName')?.errors\">\n                            <ng-container *ngIf=\"item?.get('cardPayerName')?.invalid && item?.get('cardPayerName')?.touched || item?.get('cardPayerName')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('cardPayerName')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-check\">\n                          <input class=\"form-check-input\" type=\"checkbox\" formControlName=\"sameCustomer\" (change)=\"isSameCustomer($event,i)\">\n                        </div>\n                      </td>\n                      <td *ngIf=\"!otherData?.isMultiCollect && !otherData.refund\">\n                        <ng-container *ngIf=\"!otherData?.reverse;else reverseCase\">\n                          <img style=\"width:25px\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"removeItem(i)\" alt=\"\">\n                        </ng-container>\n                        <!--Reverse Case Only Start-->\n                        <ng-template #reverseCase>\n                          <ng-container *ngIf=\"item.get('isNew').value;else reverseTemp\">\n                            <img style=\"width:25px\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"removeItem(i)\" alt=\"\">\n                          </ng-container>\n                          <ng-template #reverseTemp>\n                            <ng-container *ngIf=\"!item.get('isReversed').value\">\n                              <i (click)=\"reverse(item,i)\" class=\"cursor-pointer green-clr fas fa-rotate-left font-20\"></i>\n                            </ng-container>\n                          </ng-template>\n                        </ng-template>\n                        <!--Reverse Case Only End-->\n                      </td>\n                    </tr>\n                  </ng-container>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          <div class=\"col-md-12 d-flex mt-2\" *ngIf=\"!otherData?.isMultiCollect && !otherData.refund\">\n            <p class=\"blue-clr d-flex align-items-center fw-500 gap-1\">\n              <i class=\"fa-solid fa-circle-plus primary-clr fa-2x\"></i>Press Tab to add payment in another currency\n            </p>\n          </div>\n        </div>\n      </div>\n      <!-----------------------------------TABLE END HERE----------------------------->\n      <div class=\"col-12 mb-4\" *ngIf=\"otherData.collectionType == 7001 || otherData.collectionType == 7004 || otherData.collectionType == 7005 || otherData.collectionType == 7008 || otherData.collectionType == 7009 || (otherData.collectionType == 7002 && otherData.refund)\">\n        <label class=\"input-label\">Cashier Notes</label>\n        <textarea class=\"form-control\" (change)=\"_subjectService.cashierNote.next($any($event).target.value)\"></textarea>\n      </div>\n      <div class=\"col-md-12\">\n        <div class=\"btns-group my-2 me-0\">\n          <button type=\"button\" class=\"btn btn-cancel\" [disabled]=\"colllectedViaMachine\" (click)=\"closeModal()\">Cancel</button>\n          <button type=\"submit\" class=\"btn btn-save\" [disabled]=\"isPending\">\n            {{isPending && 'Saving' || 'Confirm'}}\n            <i *ngIf=\"isPending\" class=\"fa-solid fa-circle-notch fa-spin\"></i>\n          </button>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n","import { Component, EventEmitter, HostListener, Input, Optional, Output } from '@angular/core';\nimport { AbstractControl, FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NgbActiveModal, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { CommonService } from '../../../../../../services/common.service';\nimport { CollectService } from '../../services/collect.service';\nimport { SubjectService } from '../../../../../../services/subject.service';\nimport { Subscription, Observable, Subject, takeUntil } from 'rxjs';\nimport * as _ from 'lodash';\nimport { HttpService } from '../../../../../../services/http.service';\nimport { ResponseModalComponent } from '../../../../../../shared/components/response-modal/response-modal.component';\nimport { ConfirmModalComponent } from '../../../../../../shared/components/confirm-modal/confirm-modal.component';\nimport { SharedService } from '../../../../../../services/shared.service';\nimport { TerminalProviderModalComponent } from '../terminal-provider-modal/terminal-provider-modal.component';\n\n@Component({\n  selector: 'card-form',\n  templateUrl: './card-form.component.html',\n  styleUrls: ['./card-form.component.scss']\n})\nexport class CardFormComponent {\n  destroy$ = new Subject<void>;\n  @Input() form: FormGroup;\n  @Input() terminals = [];\n  @Input() currencies = [];\n  currencyList = [];\n  providerMachineList = [];\n  subscription = new Subscription();\n  isMachineResponse = false;\n  @Input() recentFormValues\n  @Input() isPending: boolean;\n  @Input() otherData;\n  @Input() paymentTypeId;\n  @Output() amountEvent: EventEmitter<any> = new EventEmitter<any>();\n  @Output() formValueEvent: EventEmitter<any> = new EventEmitter<any>();\n  f: FormGroup;\n  colllectedViaMachine = false;\n  isMachineFgReset = false;\n  @HostListener('document:keydown.tab', ['$event']) onKeydownHandler() {\n    this.handleTabKeyDown();\n  }\n  constructor(private collectService: CollectService,\n    private fb: FormBuilder,\n    @Optional() public _activeModal: NgbActiveModal,\n    private _commonService: CommonService,\n    public _subjectService: SubjectService,\n    public _modalService: NgbModal,\n    private _httpService: HttpService,\n    private _sharedService: SharedService,\n  ) {\n  }\n  ngOnInit() {\n    //console.log(this.otherData);\n    this.colllectedViaMachine = JSON.parse(localStorage.getItem('pos_mc'));\n    this.isMachineFgReset = JSON.parse(localStorage.getItem('isMachineFgReset'));\n    this.isMachineResponse = this.paymentTypeId == 13013 ? false : true;\n    if (this.otherData?.refund) this.isMachineResponse = true;\n\n    this.currencyList = this.currencies.filter((x: any) => x.lookupId == 9001);\n    if (this.paymentTypeId == 13013 && this.isMachineFgReset) {\n      this.cardArrayControl.clear();\n    }\n    if (this.cardArrayControl.length == 0) {\n      this.cardArrayControl.push(this.cardControls());\n      // bind all the remaining amount to POS Machine collection when we collect via POS machine\n      if (!this.colllectedViaMachine && this.paymentTypeId == 13013) {\n        let initialAmount = '';\n        let amount = (+this.otherData?.remainingAmountAfterSomeCollection || 0)\n        initialAmount = amount > 0 && amount || this.otherData?.remainingAmount;\n        //Zero index because the POS Machine can only have one row for collection.\n        this.cardArrayControl.at(0).get('cardCollectionJod').setValue(initialAmount)\n        this.convertCash(0);\n        localStorage.setItem('isMachineFgReset', JSON.stringify(false));\n      }\n    }\n    this.form.statusChanges.pipe(takeUntil(this.destroy$)).subscribe(x => {\n      let touched;\n      if (this.otherData?.reverse) touched = (x == 'VALID' || x == 'DISABLED') ? false : true;\n      else touched = x == 'VALID' ? false : true;\n      this.form.markAllAsTouched();\n      this.formValueEvent.emit({ values: this.form.value, touched })\n    })\n    // ONLY IN CASE OF Refund\n    if (this.otherData?.refund)\n      this.cardArrayControl.disable({ emitEvent: false });\n    // ONLY IN CASE OF REVERSE\n    if (this.otherData?.reverse) {\n      this.disableReversedItems();\n    }\n  }\n  disableReversedItems() {\n    this.cardArrayControl.controls.forEach((control: FormGroup) => {\n      //let isReversed = control.get('isReversed').getRawValue();\n      //if (isReversed)\n      //  control.disable();\n      let isNew = control.get('isNew').value;\n      if (!isNew)\n        control.disable();\n    })\n  }\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  cardControls(): FormGroup {\n    return this.fb.group({\n      isChecked: [true],\n      cardCollectionJod: ['', [Validators.min(0.0000000000000001), Validators.required]],\n      machineReceiptNumber: ['', [Validators.pattern('^[0-9]*$')]],\n      cardTerminalProviderId: [null, [Validators.required]],\n      machineID: ['', [Validators.required, Validators.pattern('^[a-zA-Z0-9 ]*$')]],\n      cardPayerName: [localStorage.getItem('pmcn') || 'No Customer', this.otherData.collectionType != 7004 && [Validators.required]],\n      cardLast4Digits: ['', [Validators.required, Validators.pattern('^[0-9]{4}$')]],\n      paymentCardTypeId: [this.paymentTypeId],\n      currencyId: [9001, [Validators.required]],\n      rate: [''],\n      vjod: [''],\n      isReversed: [false],\n      isNew: [true],\n      lineNew: [true],\n    });\n  }\n  get cardArrayControl(): FormArray {\n    return this.form ? this.form.get('card') as FormArray : null;\n  }\n  handleTabKeyDown() {\n    if (this.otherData.refund || this.form.invalid) {\n      return;\n    }\n    if (this.otherData?.['amountExceeded']) {\n      return;\n    }\n    if (!this.otherData?.isMultiCollect)\n      this.addNewRow();\n  }\n  chooseCurrency(event, i) {\n    this.form.markAllAsTouched();\n    let control = this.cardArrayControl.at(i).get('vjod');\n    let value = this.cardArrayControl.at(i).get('cardCollectionJod').getRawValue();\n    this.cardArrayControl.at(i).get('rate').setValue(event?.rate);\n    if (event?.lookupId == 9001) {\n      control.patchValue((value * 1).toFixed(3));\n    } else if (event?.lookupId == 9002) {\n      control.patchValue((value * +(event?.rate)).toFixed(3));\n    } else if (event?.lookupId == 9003) {\n      control.patchValue((value * +(event?.rate)).toFixed(3));\n    }\n    this.calculateAmount();\n  }\n  convertCash(i) {\n    let control = this.cardArrayControl.at(i).get('vjod');\n    let row = this.cardArrayControl.at(i);\n    let value = this.cardArrayControl.at(i).get('cardCollectionJod').getRawValue();\n    let currencyId = this.cardArrayControl.at(i).get('currencyId').getRawValue();\n    if (currencyId == 9001) {\n      control.patchValue((value * 1).toFixed(3));\n    } else if (currencyId == 9002) {\n      control.patchValue((value * 0.71).toFixed(3));\n    } else if (currencyId == 9003) {\n      control.patchValue((value * 0.76).toFixed(3));\n    }\n    this.calculateAmount();\n\n  }\n  getTerminalProviderMachine(data) {\n    let registerId = +this._sharedService.getRegister?.registerObj?.id || 0;\n    if (!registerId) return;\n    this._httpService._spinnerService.show();\n    let URL = this._httpService.apiUrl.POSMachine.GetTerminalProviderMachine + `?registerId=${registerId}&status=2001&pageSize=1000`;\n    this._httpService.get(URL, 'admin').pipe(takeUntil(this.destroy$)).subscribe({\n      next: response => {\n        if (response.isSuccess) {\n          this.providerMachineList = response.data;\n          if (this.providerMachineList?.length) {\n            if (this.providerMachineList.length == 1) {\n              this.handleConfirmCardRequest({ ...data, ...this.providerMachineList[0] });\n            }\n            else {\n              const ref = this._modalService.open(TerminalProviderModalComponent, { size: 'md', centered: true });\n              ref.componentInstance.data = { providerList: this.providerMachineList };\n              ref.componentInstance.eventData.pipe(takeUntil(this.destroy$)).subscribe(res => {\n                ref.close();\n                this.handleConfirmCardRequest({ ...data, ...res });\n              })\n            }\n          }\n          else\n            this.responseModal('error', 'Their is no POS terminal machine defined for this register.');\n\n        }\n      },\n      error: err => {\n        this.responseModal('error', err?.error.errors[0].errorMessageEn || err?.error.errors[0].ErrorMessageEn || err?.error?.info);\n      }\n    }).add(() => { this._httpService._spinnerService.hide() })\n\n  }\n  handleConfirmCardRequest(terminalData) {\n    this.confirmCreditCardRequest(terminalData).pipe(takeUntil(this.destroy$)).subscribe({\n      next: res => {\n        if (res) {\n          this.sendCreditCardRequest(terminalData).pipe(takeUntil(this.destroy$)).subscribe({\n            next: response => {\n              if (response.isSuccess) {\n                let row = terminalData?.formGroup;\n                let data = response.data;\n                if (data?.posRespStatus == 1) {\n                  let cardLast4Digits = data?.posPan.split('*').pop();\n                  let obj = {\n                    cardLast4Digits,\n                    machineReceiptNumber: data?.posInvoiceNumber,\n                    cardTerminalProviderId: terminalData?.providerName?.providerId,\n                    machineID: terminalData?.machineID,\n                  };\n                  row.patchValue(obj);\n                  this.isMachineResponse = true;\n                  row.disable({ emitEvent: false });\n                  localStorage.setItem('pos_mc', 'true');\n                  this.colllectedViaMachine = true;\n                  this.responseModal('success', data?.posRespText);\n                }\n                else if (data?.posRespStatus == 0) {\n                  this.responseModal('error', data?.posRespText || data?.webResponseErrorDesc);\n                }\n              }\n            },\n            error: err => {\n              this.responseModal('error', err?.error.errors[0].errorMessageEn || err?.error.errors[0].ErrorMessageEn || err?.error?.info);\n            }\n          }).add(() => { this._httpService._spinnerService.hide() })\n        }\n      }\n    })\n\n  }\n  handlePOSMachineClick(row) {\n    if (this.colllectedViaMachine) return;\n    let amount = row.get('vjod').value;\n    if ((+amount) <= 0) {\n      this.responseModal('error', 'Please enter amount to pay via POS machine.');\n      return;\n    }\n    else {\n      this.getTerminalProviderMachine({ amount, formGroup: row });\n      return;\n    }\n  }\n  sendCreditCardRequest(data) {\n    this._httpService._spinnerService.show();\n    const formData = new FormData();\n    formData.append('MID', data?.machineID);\n    formData.append('TerminalID', data?.terminalID);\n    formData.append('SecurityKey', data?.secretKey);\n    formData.append('Amount', data?.amount);\n    //formData.append('MID', '111111111111111');\n    //formData.append('TerminalID', '99000084');\n    //formData.append('SecurityKey', '0123456789ABCDEF0123456789ABCDEF');\n    //formData.append('Amount', amount);\n    let URL = this._httpService.apiUrl.POSMachine.SendCreditCardRequest;\n    return this._httpService.post(`${URL}`, formData)\n  }\n  responseModal(type, message) {\n    const modalRef = this._modalService.open(ResponseModalComponent, { centered: true });\n    modalRef.componentInstance.type = type;\n    modalRef.componentInstance.message = message;\n  }\n  confirmCreditCardRequest(data) {\n    const modalRef = this._modalService.open(ConfirmModalComponent, { centered: true });\n    modalRef.componentInstance.data = {\n      headingText: 'Confirm Request',\n      body: `Are you sure you want to pay <span class='primary-clr'>${this._httpService._helperService.transformDecimal(data?.amount)} JOD</span> using POS machine?`\n    };\n    return modalRef.componentInstance.eventData as Observable<any>;\n  }\n  addNewRow() {\n    if (this.paymentTypeId == 13013 && this.cardArrayControl.length == 1) {\n      this.responseModal('error', 'Only one line allowed to pay via POS machine');\n      return;\n    }\n    this.cardArrayControl.push(this.cardControls());\n    this.form.markAsUntouched();\n  }\n  removeItem(i) {\n    // Don't allow reset if collected via machine\n    if (this.colllectedViaMachine && this.paymentTypeId == 13013) {\n      return;\n    }\n    if (this.otherData.refund) return;\n    this.cardArrayControl.removeAt(i);\n    this.sendAmount();\n  }\n  handleAmountFocus() {\n    this.form.markAllAsTouched();\n  }\n  sendAmount() {\n    this.calculateAmount();\n  }\n  reverse(item: AbstractControl, index: number) {\n    const previousFormGroup = this.cardArrayControl.at(index) as FormGroup;\n    if (+previousFormGroup.value.cardCollectionJod <= 0)\n      return\n    previousFormGroup.get('isReversed').setValue(true);\n    previousFormGroup.get('lineNew').setValue(false);\n    const newFormGroup = this.fb.group({});\n    Object.keys(previousFormGroup.controls).forEach(controlName => {\n      const controlValue = _.cloneDeep(previousFormGroup.get(controlName)?.value);\n      newFormGroup.addControl(controlName, new FormControl(controlValue));\n    });\n    let negativeValue = (previousFormGroup.get('vjod').getRawValue()) * -1;\n    newFormGroup.patchValue({\n      vjod: negativeValue,\n      cardCollectionJod: negativeValue,\n      isReversed: true,\n      lineNew: true,\n    })\n    this.cardArrayControl.insert(index + 1, newFormGroup);\n    (this.cardArrayControl.at(index) as FormGroup).disable();\n    (this.cardArrayControl.at(index + 1) as FormGroup).disable();\n    this.sendAmount();\n  }\n  calculateAmount() {\n    let amount = 0;\n    for (let item of this.cardArrayControl.controls) {\n      let formGroup = item as FormGroup;\n      amount += +(formGroup.controls['vjod'].getRawValue());\n    }\n    this.amountEvent.emit({ amount });\n  }\n  handleSubmit() {\n    if (this.form.invalid) {\n      this.form.markAllAsTouched();\n    }\n    else {\n      this.formValueEvent.emit({ submit: true })\n    }\n  }\n\n  resetForm() {\n    // Don't allow reset if collected via machine\n    if (this.colllectedViaMachine && this.paymentTypeId == 13013) {\n      return;\n    }\n    if (this.paymentTypeId == 13013) {\n      localStorage.setItem('isMachineFgReset', JSON.stringify(true));\n    }\n    this.cardArrayControl.clear();\n    this.cardArrayControl.push(this.cardControls())\n    this.form.markAsUntouched();\n    this.formValueEvent.emit({ touched: false, reset: true });\n    this.amountEvent.emit({ amount: 0 });\n  }\n  isSameCustomer(event, index) {\n    let formGroup = this.cardArrayControl.at(index) as FormGroup;\n    if (event.target.checked) {\n      if (this.otherData.collectionType == 7004) {\n        formGroup.controls['cardPayerName'].setValue('No Customer');\n      }\n      else {\n        let customerName = localStorage.getItem('pmcn');\n        formGroup.controls['cardPayerName'].setValue(customerName);\n      }\n    }\n    else {\n      formGroup.controls['cardPayerName'].setValue('');\n    }\n  }\n  closeModal() {\n    if (this._activeModal)\n      this._activeModal.close()\n    else\n      this._commonService.NavigateToRoute(`/${this.otherData?.redirectRoute}`)\n  }\n}\n\n// Below test data from Front end side\n//let row = terminalData?.formGroup;\n//let data = {\n//  posRespStatus: 1,\n//  posInvoiceNumber: '455822',\n//  posPan: '536578******7505',\n//  machineID: '111111111111111',\n//  posRespText: 'Approved 08569'\n//}\n//if (data?.posRespStatus == 1) {\n//  let cardLast4Digits = data?.posPan.split('*').pop();\n//  let obj = {\n//    cardLast4Digits,\n//    machineReceiptNumber: data?.posInvoiceNumber,\n//    cardTerminalProviderId: terminalData?.providerName?.providerId,\n//    machineID: terminalData?.machineID,\n//  };\n//  row.patchValue(obj);\n//  this.calculateAmount();\n//  row.disable({ emitEvent: false });\n//  localStorage.setItem('pos_mc', 'true');\n//  this.colllectedViaMachine = true;\n//  this.responseModal('success', data?.posRespText);\n//}\n//else if (data?.posRespStatus == 0) {\n//  this.responseModal('error', data?.posRespText);\n//}\n//return;\n","<div class=\"tab-item\">\n  <div class=\"row\">\n    <div class=\"col-md-12 text-end my-2\">\n      <button *ngIf=\"!otherData.reverse && !otherData.refund\" type=\"button\" class=\"btn btn-trash\" (click)=\"resetForm()\">\n        <img style=\"width:25px\" src=\"assets/images/reload.png\" alt=\"\">\n      </button>\n    </div>\n    <!--{{form.getRawValue() | json}}-->\n    <form [formGroup]=\"form\" (submit)=\"handleSubmit()\">\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <div class=\"card-table\">\n            <div class=\"\">\n              <table class=\"table\">\n                <thead>\n                  <tr>\n                    <th>Paid Amount*</th>\n                    <th>Currency*</th>\n                    <th>Rate</th>\n                    <th>Value in JOD</th>\n                    <th>Last 4 Card #*</th>\n                    <th>Credit Card Machince <br /> Recepit No</th>\n                    <th>Terminal Provider</th>\n                    <th>Merchant ID</th>\n                    <th>Payer Name</th>\n                    <th>Same Customer</th>\n                    <th *ngIf=\"!otherData?.isMultiCollect\">Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <ng-container formArrayName=\"card\" *ngFor=\"let item of cardArrayControl?.controls;let i = index\">\n                    <tr [formGroupName]=\"i\">\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"number\" class=\"form-control\" placeholder=\"Amount\" formControlName=\"cardCollectionJod\"\n                                 (change)=\"convertCash(i)\" appDecimalNumber (input)=\"handleAmountFocus()\">\n                          <ng-container *ngIf=\"item?.get('cardCollectionJod')?.errors\">\n                            <ng-container *ngIf=\"item?.get('cardCollectionJod')?.invalid && item?.get('cardCollectionJod')?.touched || item?.get('cardCollectionJod')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('cardCollectionJod')?.errors['required']\">Input is required</span>\n                              <span class=\"error\" *ngIf=\"item?.get('cardCollectionJod')?.errors['min']\">Value must be greater than zero</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"ngselect-curruncy form-group\">\n                          <ng-select placeholder=\"Currency\" [items]=\"currencyList\"\n                                     bindLabel=\"name\" bindValue=\"lookupId\" formControlName=\"currencyId\" (change)=\"chooseCurrency($event,i)\">\n                          </ng-select>\n                          <ng-container *ngIf=\"item.get('currencyId')?.errors\">\n                            <ng-container *ngIf=\"item?.get('currencyId')?.invalid && item?.get('currencyId')?.touched || item?.get('currencyId')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('currencyId')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>{{item?.get('rate')?.value || 0}}</td>\n                      <td>\n                        <div class=\"d-flex gap-2 align-items-center\">\n                          {{item?.value?.vjod || 0}}\n                          <ng-container *ngIf=\"paymentTypeId == 13013 && !otherData.refund\">\n                            <img height=\"40\"\n                                 class=\"cursor-pointer\"\n                                 src=\"/assets/images/pos-machine.png\"\n                                 (click)=\"handlePOSMachineClick(item)\" />\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"text\" class=\"form-control\" placeholder=\"\" formControlName=\"cardLast4Digits\">\n                          <ng-container *ngIf=\"item?.get('cardLast4Digits')?.errors\">\n                            <ng-container *ngIf=\"item?.get('cardLast4Digits')?.invalid && item?.get('cardLast4Digits')?.touched || item?.get('cardLast4Digits')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('cardLast4Digits')?.errors['required']\">Input is required</span>\n                              <span class=\"error\" *ngIf=\"item?.get('cardLast4Digits')?.errors['pattern']\">Input allows min and max 4 digits</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"text\" class=\"form-control\" placeholder=\"\" formControlName=\"machineReceiptNumber\">\n                          <ng-container *ngIf=\"item?.get('machineReceiptNumber')?.errors\">\n                            <ng-container *ngIf=\"item?.get('machineReceiptNumber')?.invalid && item?.get('machineReceiptNumber')?.touched || item?.get('machineReceiptNumber')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('machineReceiptNumber')?.errors['required']\">Input is required</span>\n                              <span class=\"error\" *ngIf=\"item?.get('machineReceiptNumber')?.errors['pattern']\">Input allows only digits</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <ng-select id=\"cardTerminalProviderId\" placeholder=\" Select Terminal \" [items]=\"terminals\" bindLabel=\"name\" bindValue=\"id\"\n                                     formControlName=\"cardTerminalProviderId\">\n                          </ng-select>\n                          <ng-container *ngIf=\"item?.get('cardTerminalProviderId')?.errors\">\n                            <ng-container *ngIf=\"item?.get('cardTerminalProviderId')?.invalid && item?.get('cardTerminalProviderId')?.touched || item?.get('cardTerminalProviderId')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('cardTerminalProviderId')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"text\" class=\"form-control\" formControlName=\"machineID\">\n                          <ng-container *ngIf=\"item?.get('machineID')?.errors\">\n                            <ng-container *ngIf=\"item?.get('machineID')?.invalid && item?.get('machineID')?.touched || item?.get('machineID')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('machineID')?.errors['required']\">Input is required</span>\n                              <span class=\"error\" *ngIf=\"item?.get('machineID')?.errors['pattern']\">Input allows only alphabets</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"text\" class=\"form-control\" placeholder=\"\" formControlName=\"cardPayerName\" OnlyCharacter>\n                          <ng-container *ngIf=\"item?.get('cardPayerName')?.errors\">\n                            <ng-container *ngIf=\"item?.get('cardPayerName')?.invalid && item?.get('cardPayerName')?.touched || item?.get('cardPayerName')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('cardPayerName')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-check\">\n                          <input class=\"form-check-input\" type=\"checkbox\" formControlName=\"isChecked\" (change)=\"isSameCustomer($event,i)\">\n                        </div>\n                      </td>\n                      <td *ngIf=\"!otherData?.isMultiCollect && !otherData.refund\">\n                        <ng-container *ngIf=\"!otherData?.reverse;else reverseCase\">\n                          <img style=\"width:25px\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"removeItem(i)\" alt=\"\">\n                        </ng-container>\n                        <!--Reverse Case Only Start-->\n                        <ng-template #reverseCase>\n                          <ng-container *ngIf=\"item.get('isNew').value;else reverseTemp\">\n                            <img style=\"width:25px\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"removeItem(i)\" alt=\"\">\n                          </ng-container>\n                          <ng-template #reverseTemp>\n                            <ng-container *ngIf=\"!item.get('isReversed').value\">\n                              <i (click)=\"reverse(item,i)\" class=\"cursor-pointer green-clr fas fa-rotate-left font-20\"></i>\n                            </ng-container>\n                          </ng-template>\n                        </ng-template>\n                        <!--Reverse Case Only End-->\n                      </td>\n                    </tr>\n                  </ng-container>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          <div class=\"col-md-12 d-flex mt-2\" *ngIf=\"!otherData?.isMultiCollect && !otherData.refund\">\n            <p class=\"blue-clr d-flex align-items-center fw-500 gap-1\">\n              <i class=\"fa-solid fa-circle-plus primary-clr fa-2x\"></i>Press Tab to add payment in another currency\n            </p>\n          </div>\n        </div>\n      </div>\n      <!-----------------------------------TABLE END HERE----------------------------->\n      <div class=\"col-12 mb-4\" *ngIf=\"otherData.collectionType == 7001 || otherData.collectionType == 7004 || otherData.collectionType == 7005 || otherData.collectionType == 7008 || otherData.collectionType == 7009 || (otherData.collectionType == 7002 && otherData.refund)\">\n        <label class=\"input-label\">Cashier Notes</label>\n        <textarea class=\"form-control\" (change)=\"_subjectService.cashierNote.next($any($event).target.value)\"></textarea>\n      </div>\n      <div class=\"col-md-12\">\n        <div class=\"btns-group my-2 me-0\">\n          <button type=\"button\" class=\"btn btn-cancel\" [disabled]=\"colllectedViaMachine\" (click)=\"closeModal()\">Cancel</button>\n          <button type=\"submit\" class=\"btn btn-save\" [disabled]=\"isPending || !isMachineResponse\">\n            {{isPending && 'Saving' || 'Confirm'}}\n            <i *ngIf=\"isPending\" class=\"fa-solid fa-circle-notch fa-spin\"></i>\n          </button>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n","import { Component, EventEmitter, HostListener, Input, Optional, Output } from '@angular/core';\nimport { AbstractControl, FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { ToastrService } from 'ngx-toastr';\nimport { CommonService } from '../../../../../../services/common.service';\nimport { SubjectService } from '../../../../../../services/subject.service';\nimport { Subscription } from 'rxjs';\nimport * as _ from 'lodash';\n\n@Component({\n  selector: 'paymentCashForm',\n  templateUrl: './cash.component.html',\n  styleUrls: ['./cash.component.scss']\n})\nexport class CashComponent {\n  cashForm: FormGroup;\n  sameCustomer: boolean;\n  curruncyAry = [];\n  currenciesArray = [];\n  subscription = new Subscription();\n  @Input() currencies = [];\n  @Input() isPending: boolean;\n  @Input() recentFormValues;\n  @Input() otherData;\n  @Output() amountEvent: EventEmitter<any> = new EventEmitter<any>();\n  @Output() formValueEvent: EventEmitter<any> = new EventEmitter<any>();\n  colllectedViaMachine = false;\n  @HostListener('document:keydown.tab', ['$event']) onKeydownHandler() {\n    this.handleTabKeyDown();\n  }\n  constructor(private fb: FormBuilder, @Optional() public _activeModal: NgbActiveModal, private _commonService: CommonService, public _subjectService: SubjectService) { }\n  ngOnInit() {\n    this.colllectedViaMachine = JSON.parse(localStorage.getItem('pos_mc'));\n    this.initForm();\n    this.cashForm.statusChanges.subscribe(x => {\n      this.cashForm.markAllAsTouched();\n      let touched;\n      if (this.otherData?.reverse) touched = (x == 'VALID' || x == 'DISABLED') ? false : true;\n      else touched = x == 'VALID' ? false : true;\n      this.formValueEvent.emit({ values: this.cashForm.getRawValue(), touched })\n    })\n    if (this.recentFormValues?.cash?.cashArray?.length) {\n      let formArray = this.cashForm.controls[\"cashArray\"] as FormArray;\n      formArray.removeAt(0);\n      for (let item of this.recentFormValues?.cash?.cashArray) {\n        formArray.push(this.initCashForm(item));\n        this.currenciesArray.push(item['currencyId']);\n      }\n      // ONLY IN CASE OF REVERSE\n      if (this.otherData?.reverse)\n        this.disableReversedItems();\n    }\n    // ONLY IN CASE OF Refund\n    if (this.otherData?.refund)\n      this.cashArrControls.disable({ emitEvent: false });\n  }\n  disableReversedItems() {\n    this.cashArrControls.controls.forEach((control: FormGroup) => {\n      let isNew = control.get('isNew').value;\n      if (!isNew)\n        control.disable();\n    })\n  }\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n    if (this.recentFormValues?.cash?.cashArray[0]?.collectedAmount > 0)\n      this.formValueEvent.emit({ values: this.cashForm.getRawValue(), touched: false })\n  }\n  closeModal() {\n    if (this._activeModal)\n      this._activeModal.close()\n    else\n      this._commonService.NavigateToRoute(`/${this.otherData?.redirectRoute}`)\n  }\n  initForm() {\n    this.cashForm = this.fb.group({\n      cashArray: this.fb.array([this.initCashForm()])\n    })\n  }\n  initCashForm(item?) {\n    if (item) {\n      return this.fb.group({\n        currencyId: [item?.currencyId, [Validators.required]],\n        collectedAmount: [item?.collectedAmount, [Validators.required, Validators.min(0.0000000000000001)]],\n        vjod: item?.vjod,\n        sameCustomer: [item?.sameCustomer],\n        cashPayerName: [item?.cashPayerName, this.otherData.collectionType != 7004 && [Validators.required]],\n        rate: [item?.rate],\n        isReversed: [(item?.isReversed ?? item?.isReversed) || false],\n        isNew: [(item?.isNew ?? item?.isNew) || false],\n        lineNew: [(item?.lineNew ?? item?.lineNew) || false],\n      });\n    }\n    else {\n      return this.fb.group({\n        currencyId: [9001, [Validators.required]],\n        collectedAmount: [null, [Validators.required, Validators.min(0.0000000000000001)]],\n        vjod: null,\n        sameCustomer: [true],\n        cashPayerName: [localStorage.getItem('pmcn') || 'No Customer', this.otherData.collectionType != 7004 && [Validators.required]],\n        rate: [1],\n        isReversed: [false],\n        isNew: true,\n        lineNew: true,\n      });\n    }\n  }\n  handleTabKeyDown() {\n    if (this.otherData?.refund || this.cashForm.invalid) {\n      return;\n    }\n    if (this.otherData['amountExceeded']) {\n      return;\n    }\n    //NEW WILL BE ADDED IF ITS NO MULTI COLLECT\n    if (!this.otherData?.isMultiCollect) {\n      this.addNewCurrency();\n    }\n  }\n  handleAmountFocus() {\n    this.cashForm.markAllAsTouched();\n  }\n  chooseCurrency(event, i) {\n    this.cashForm.markAllAsTouched();\n    let control = this.cashArrControls.at(i).get('vjod');\n    let value = +(this.cashArrControls.at(i).get('collectedAmount').value);\n    let rate = +(event?.rate);\n    let convertedAmount = (value * rate).toFixed(3);\n    this.cashArrControls.at(i).get('rate').setValue(event?.rate);\n    if (event?.lookupId == 9001) {\n      control.setValue((value * 1).toFixed(3));\n    } else if (event?.lookupId == 9002) {\n      control.setValue(convertedAmount);\n    } else if (event?.lookupId == 9003) {\n      control.setValue(convertedAmount);\n    }\n    this.currenciesArray = [];\n    for (let item of this.cashArrControls.controls) {\n      let formGroup = item as FormGroup;\n      this.currenciesArray.push(formGroup.controls['currencyId'].value);\n    }\n    this.calculateAmount();\n  }\n  handleAmountChange(i) {\n    let vjod = this.cashArrControls.at(i).get('vjod');\n    let value = +(this.cashArrControls.at(i).get('collectedAmount').value);\n    let rate = +this.cashArrControls.at(i).get('rate').value;\n    let convertedAmount = (value * rate).toFixed(3);\n    vjod.setValue(convertedAmount);\n    this.calculateAmount();\n  }\n  reverse(item: AbstractControl, index: number) {\n    const previousFormGroup = this.cashArrControls.at(index) as FormGroup;\n    if (previousFormGroup.invalid)\n      return;\n    const newFormGroup = this.fb.group({});\n    Object.keys(previousFormGroup.controls).forEach(controlName => {\n      const controlValue = _.cloneDeep(previousFormGroup.get(controlName)?.value);\n      newFormGroup.addControl(controlName, new FormControl(controlValue));\n    });\n    let amountJOD = +(previousFormGroup.get('vjod').value);\n    let negativeValue = (previousFormGroup.get('collectedAmount').value) * -1;\n    let negativeJODValue = amountJOD * -1;\n    newFormGroup.patchValue({\n      vjod: negativeJODValue,\n      collectedAmount: negativeValue,\n      isReversed: true,\n      lineNew: true,\n    })\n    previousFormGroup.get('isReversed').setValue(true);\n    previousFormGroup.get('lineNew').setValue(false);\n    this.cashArrControls.insert(index + 1, newFormGroup);\n    (this.cashArrControls.at(index) as FormGroup).disable();\n    (this.cashArrControls.at(index + 1) as FormGroup).disable();\n    this.calculateAmount();\n  }\n  calculateAmount() {\n    let amount = 0;\n    for (let item of this.cashArrControls.controls) {\n      let formGroup = item as FormGroup;\n      amount += +(formGroup.controls['vjod'].getRawValue());\n    }\n    this.amountEvent.emit({ amount });\n  }\n  removeItem(i) {\n    if (this.otherData.refund) return;\n    this.cashArrControls.removeAt(i);\n    this.currenciesArray = [];\n    for (let item of this.cashArrControls.controls) {\n      let formGroup = item as FormGroup;\n      this.currenciesArray.push(formGroup.controls['currencyId'].value);\n    }\n    this.calculateAmount();\n  }\n  addNewCurrency() {\n    let length = this.cashArrControls.length + 1;\n    if (this.otherData?.reverse)\n      length = length - this.getDisabledFormGroupCount();\n    if (length <= this.currencies.length) {\n      this.cashArrControls.push(this.initCashForm())\n    }\n    this.cashForm.markAsUntouched();\n  }\n  getDisabledFormGroupCount(): number {\n    let disabledCount = 0;\n    this.cashArrControls.controls.forEach(control => {\n      if (control.disabled) disabledCount++;\n    });\n    return disabledCount;\n  }\n  resetForm() {\n    this.cashArrControls.clear();\n    this.cashArrControls.push(this.initCashForm());\n    this.cashForm.markAsUntouched();\n    this.formValueEvent.emit({ values: this.cashForm.getRawValue(), touched: false, reset: true });\n    this.calculateAmount();\n    this.currenciesArray = [];\n    this.amountEvent.emit({ amount: 0 });\n  }\n  isSameCustomer(event, index) {\n    let formGroup = this.cashArrControls.at(index) as FormGroup;\n    if (event.target.checked) {\n      if (this.otherData.collectionType == 7004)\n        formGroup.controls['cashPayerName'].setValue('No Customer');\n      else {\n        let customerName = localStorage.getItem('pmcn');\n        formGroup.controls['cashPayerName'].setValue(customerName);\n      }\n    }\n    else {\n      formGroup.controls['cashPayerName'].setValue('');\n    }\n  }\n  get cashArrControls() {\n    return this.cashForm ? this.cashForm.get('cashArray') as FormArray : null;\n  }\n  get f() {\n    return this.cashForm.controls;\n  }\n  handleSubmit() {\n    if (this.cashForm.invalid) {\n      this.cashForm.markAllAsTouched();\n    }\n    else {\n      this.formValueEvent.emit({ values: this.cashForm.getRawValue(), submit: true })\n    }\n  }\n}\n","<div class=\"tab-item\">\n  <div class=\"row\">\n    <div class=\"col-md-12 text-end my-2\">\n      <button *ngIf=\"!otherData.reverse && !otherData?.refund\" type=\"button\" class=\"btn btn-trash\" (click)=\"resetForm()\">\n        <img style=\"width:25px\" src=\"assets/images/reload.png\" alt=\"\">\n      </button>\n    </div>\n    <!--{{cashForm.getRawValue() | json}}-->\n    <form [formGroup]=\"cashForm\" (submit)=\"handleSubmit()\">\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <div class=\"card-table\">\n            <div class=\"\">\n              <table class=\"table\">\n                <thead>\n                  <tr>\n                    <th>Amount To Pay</th>\n                    <th>Currency</th>\n                    <th>Rate</th>\n                    <th>Value in JOD</th>\n                    <th>Payer Name</th>\n                    <th>Same Customer</th>\n                    <th *ngIf=\"!otherData?.isMultiCollect\">Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <ng-container formArrayName=\"cashArray\" *ngFor=\"let item of cashArrControls?.controls;let i = index\">\n                    <tr [formGroupName]=\"i\">\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"number\" class=\"form-control\" placeholder=\"Amount\" (input)=\"handleAmountFocus()\"\n                                 formControlName=\"collectedAmount\" (change)=\"handleAmountChange(i)\" appDecimalNumber>\n                          <ng-container *ngIf=\"item.get('collectedAmount')?.errors\">\n                            <ng-container *ngIf=\"item?.get('collectedAmount')?.invalid && item?.get('collectedAmount')?.touched || item?.get('collectedAmount')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('collectedAmount')?.errors['required']\">Input is required</span>\n                              <span class=\"error\" *ngIf=\"item?.get('collectedAmount')?.errors['min']\">Value must be greater than zero</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"ngselect-curruncy form-group\">\n                          <ng-select placeholder=\"Currency\" [items]=\"currencies\"\n                                     bindLabel=\"name\" bindValue=\"lookupId\" formControlName=\"currencyId\"\n                                     (change)=\"chooseCurrency($event,i)\">\n                            <ng-template ng-option-tmp let-item=\"item\" let-index=\"index\">\n                              <span [hidden]=\"currenciesArray.includes(item.lookupId)\">\n                                {{item.name}}\n                              </span>\n                            </ng-template>\n                          </ng-select>\n                          <ng-container *ngIf=\"item.get('currencyId')?.errors\">\n                            <ng-container *ngIf=\"item?.get('currencyId')?.invalid && item?.get('currencyId')?.touched || item?.get('currencyId')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('currencyId')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>{{item?.get('rate')?.value || 0}}</td>\n                      <td>\n                        {{item?.value?.vjod || 0}}\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"text\" class=\"form-control\" placeholder=\"\" formControlName=\"cashPayerName\" OnlyCharacter />\n                          <ng-container *ngIf=\"item?.get('cashPayerName')?.errors\">\n                            <ng-container *ngIf=\"item?.get('cashPayerName')?.invalid && item?.get('cashPayerName')?.touched || item?.get('cashPayerName')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('cashPayerName')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-check\">\n                          <input class=\"form-check-input\" type=\"checkbox\" formControlName=\"sameCustomer\" (change)=\"isSameCustomer($event,i)\">\n                        </div>\n                      </td>\n                      <td *ngIf=\"!otherData?.isMultiCollect && !otherData.refund\">\n                        <ng-container *ngIf=\"!otherData?.reverse;else reverseCase\">\n                          <img style=\"width:25px\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"removeItem(i)\" alt=\"\">\n                        </ng-container>\n                        <!--Reverse Case Only Start-->\n                        <ng-template #reverseCase>\n                          <ng-container *ngIf=\"item.get('isNew').value;else reverseTemp\">\n                            <img style=\"width:25px\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"removeItem(i)\" alt=\"\">\n                          </ng-container>\n                          <ng-template #reverseTemp>\n                            <ng-container *ngIf=\"!item.get('isReversed').value\">\n                              <i (click)=\"reverse(item,i)\" class=\"cursor-pointer green-clr fas fa-rotate-left font-20\"></i>\n                            </ng-container>\n                          </ng-template>\n                        </ng-template>\n                        <!--Reverse Case Only End-->\n                      </td>\n                    </tr>\n                  </ng-container>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          <!--WILL BE HIDDEN IN CASE OF MULTI SELECT-->\n          <div class=\"col-md-12 d-flex mt-2\" *ngIf=\"!otherData?.isMultiCollect && !otherData?.refund\">\n            <p class=\"blue-clr d-flex align-items-center fw-500 gap-1\">\n              <i class=\"fa-solid fa-circle-plus primary-clr fa-2x\"></i>Press Tab to add payment in another currency\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <!-----------------------------------TABLE END HERE----------------------------->\n      <div class=\"col-12 mb-4\" *ngIf=\"otherData.collectionType == 7001 || otherData.collectionType == 7004 || otherData.collectionType == 7005 || otherData.collectionType == 7008 || otherData.collectionType == 7009 || (otherData.collectionType == 7002 && otherData.refund)\">\n        <label class=\"input-label\">Cashier Notes</label>\n        <textarea class=\"form-control\" (change)=\"_subjectService.cashierNote.next($any($event).target.value)\"></textarea>\n      </div>\n      <div class=\"col-md-12\">\n        <div class=\"btns-group my-2 me-0\">\n          <button type=\"button\" class=\"btn btn-cancel\" [disabled]=\"colllectedViaMachine\" (click)=\"closeModal()\">Cancel</button>\n          <button type=\"submit\" class=\"btn btn-save\" [disabled]=\"isPending\">\n            {{isPending && 'Saving' || 'Confirm'}}\n            <i *ngIf=\"isPending\" class=\"fa-solid fa-circle-notch fa-spin\"></i>\n          </button>\n        </div>\n      </div>\n    </form>\n    <!--NG-CONTENT-->\n    <div class=\"col-12 ng_validation\" *ngIf=\"otherData?.remainingAmountMessage\">\n      <p class=\"alert alert-danger\">{{otherData?.remainingAmountMessage}}</p>\n    </div>\n  </div>\n</div>\n\n","import { Component, ElementRef, EventEmitter, HostListener, Input, Optional, Output, QueryList, ViewChildren } from '@angular/core';\nimport { AbstractControl, FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NgbActiveModal, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { CommonService } from '../../../../../../services/common.service';\nimport { CollectService } from '../../services/collect.service';\nimport { SubjectService } from '../../../../../../services/subject.service';\nimport { Subscription } from 'rxjs';\nimport { ViewFileComponent } from '../view-file/view-file.component';\nimport { DatePipe } from '@angular/common';\nimport _ from 'lodash';\n@Component({\n  selector: 'paymentChequeForm',\n  templateUrl: './cheque.component.html',\n  styleUrls: ['./cheque.component.scss']\n})\nexport class PaymentChequeComponent {\n  @Input() banks = [];\n  @Input() currencies: [];\n  chequeForm: FormGroup;\n  @Input() recentFormValues;\n  @Input() isPending: boolean;\n  @Input() otherData;\n  @Output() amountEvent: EventEmitter<any> = new EventEmitter<any>();\n  @Output() formValueEvent: EventEmitter<any> = new EventEmitter<any>();\n  @HostListener('document:keydown.tab', ['$event']) onKeydownHandler() {\n    this.handleTabKeyDown();\n  }\n  filesSubscription = new Subscription();\n  filesArray = [];\n  financeApprovalFiles = [];\n  uploadedFiles = [];\n  @ViewChildren('fileInput') inputRefList: QueryList<any>;\n  @ViewChildren('fileInput2') input2RefList: QueryList<any>;\n  minDate: Date;\n  maxDate: Date;\n  colllectedViaMachine = false;\n  constructor(private fb: FormBuilder, @Optional() public _activeModal: NgbActiveModal,\n    private _datePipe: DatePipe,\n    private _commonService: CommonService,\n    private _modalService: NgbModal,\n    private _collectService: CollectService,\n    public _subjectService: SubjectService) {\n  }\n  ngOnInit() {\n    this.colllectedViaMachine = JSON.parse(localStorage.getItem('pos_mc'));\n    let flagType = this.otherData.collectionType == 7002 && this.otherData?.flag?.toLowerCase();\n    if (flagType == 'cash') {\n      this.minDate = new Date();\n      const startDate = new Date(this.minDate.getFullYear(), this.minDate.getMonth() - 1, 1);\n      this.minDate = startDate;\n      this.maxDate = new Date();\n      this.maxDate.setDate(this.maxDate.getDate() + 4);\n    }\n    this.initForm();\n    this.chequeForm.statusChanges.subscribe(x => {\n      let touched;\n      if (this.otherData?.reverse) touched = (x == 'VALID' || x == 'DISABLED') ? false : true;\n      else touched = x == 'VALID' ? false : true;\n      this.chequeForm.markAllAsTouched();\n      this.formValueEvent.emit({ values: this.chequeForm.getRawValue(), touched })\n    })\n    let chequeImages = this._subjectService.chequeFiles.subscribe(files => {\n      if (files?.length > 0) {\n        this.filesArray = files;\n      }\n    })\n    let financeApproval = this._subjectService.chequeFinanceApprovalFiles.subscribe(files => {\n      if (files?.length > 0) {\n        this.financeApprovalFiles = files;\n      }\n    })\n    this.filesSubscription.add(chequeImages);\n    this.filesSubscription.add(financeApproval);\n    // ONLY IN CASE OF Refund\n    if (this.otherData?.refund)\n      this.chequeArrControls.disable({ emitEvent: false });\n    // ONLY IN CASE OF REVERSE\n    if (this.otherData?.reverse) {\n      this.disableReversedItems();\n    }\n  }\n  disableReversedItems() {\n    this.chequeArrControls.controls.forEach((control: FormGroup) => {\n      // THIS OPERATION IS DONE BECAUSE WHILE REVERSE IN BELOW CONTROLS THE VALUE IS FULL URL OF FILE FROM SERVER,\n      // SO IN TEMPLATE WE NEED TO SHOW TEXT OF ATTACHMENT ONLY INSTEAD OF FULL URL.\n      let cheque = control.get('attachment');\n      // PUSH VALUES ARRAY TO MANUPLATE THE ARRAY ACCORDING TO FORMARRY LENGTH\n      let chequeValue = cheque.getRawValue();\n      this.filesArray.push(chequeValue);\n      if (chequeValue) {\n        cheque.setValue('Attachment');\n      }\n      let financeApp = control.get('tempFinanceAttachment');\n      // PUSH VALUES ARRAY TO MANUPLATE THE ARRAY ACCORDING TO FORMARRY LENGTH\n      let financeAppValue = financeApp.getRawValue();\n      this.financeApprovalFiles.push(financeAppValue);\n      if (financeAppValue) {\n        financeApp.setValue('Attachment');\n      }\n      // END HERE\n      let isNew = control.get('isNew').value;\n      if (!isNew)\n        control.disable();\n    })\n  }\n  ngOnDestroy() {\n    if (this.recentFormValues?.cheque?.chequeArray[0]?.chequeCollectionJod > 0)\n      this.formValueEvent.emit({ values: this.chequeForm.getRawValue(), touched: false });\n    this._subjectService.chequeFiles.next(this.filesArray);\n    this._subjectService.chequeFinanceApprovalFiles.next(this.financeApprovalFiles);\n    this.filesSubscription.unsubscribe();\n  }\n  initForm() {\n    this.chequeForm = this.fb.group({\n      chequeArray: this.fb.array([this.chequeFormControls()])\n    })\n    if (this.recentFormValues?.cheque?.chequeArray?.length) {\n      let values = this.recentFormValues['cheque'].chequeArray\n      let formArray = (this.chequeForm.get('chequeArray') as FormArray)\n      formArray.removeAt(0)\n      for (let item of values) {\n        formArray.push(this.chequeFormControls(item))\n      }\n    }\n\n    //this.subscribeToChequeDateChanges();\n  }\n  onDateValueChange(newDateValue, index) {\n    if (newDateValue) {\n      const normalizedDate = new Date(Date.UTC(\n        newDateValue.getFullYear(),\n        newDateValue.getMonth(),\n        newDateValue.getDate()\n      ));\n      let row = this.chequeArrControls.at(index);\n      setTimeout(() => {\n        row.get('chequeDate').setValue(normalizedDate, { emitEvent: false });\n      }, 1000)\n    }\n  }\n  chooseCurrency(event, i) {\n    this.chequeForm.markAllAsTouched();\n    let control = this.chequeArrControls.at(i).get('vjod');\n    let value = this.chequeArrControls.at(i).get('chequeCollectionJod').value;\n    this.chequeArrControls.at(i).get('rate').setValue(event?.rate);\n    if (event?.lookupId == 9001) {\n      control.patchValue((value * 1).toFixed(3));\n    } else if (event?.lookupId == 9002) {\n      control.patchValue((value * +(event?.rate)).toFixed(3));\n    } else if (event?.lookupId == 9003) {\n      control.patchValue((value * +(event?.rate)).toFixed(3));\n    }\n    this.calculateAmount();\n  }\n  convertCash(i) {\n    let control = this.chequeArrControls.at(i).get('vjod');\n    let value = this.chequeArrControls.at(i).get('chequeCollectionJod').value;\n    let currencyId = this.chequeArrControls.at(i).get('currencyId').value;\n    if (currencyId == 9001) {\n      control.patchValue((value * 1).toFixed(3));\n    } else if (currencyId == 9002) {\n      control.patchValue((value * 0.71).toFixed(3));\n    } else if (currencyId == 9003) {\n      control.patchValue((value * 0.76).toFixed(3));\n    }\n    this.calculateAmount();\n  }\n  fileAction(fileName, index, action, from) {\n    if (action == 'view') {\n      const modelRef = this._modalService.open(ViewFileComponent, { size: 'md' });\n      let isReversed = (this.chequeArrControls.at(index) as FormGroup).get('isReversed').getRawValue();\n      let isNew = (this.chequeArrControls.at(index) as FormGroup).get('isNew').getRawValue();\n      if (!this.otherData?.reverse || isReversed === false) {\n        let file;\n        if (from == 'chequeImage')\n          file = this.filesArray[index];\n        else\n          file = this.financeApprovalFiles[index];\n\n        if (isNew)\n          modelRef.componentInstance.imageUploadedView = file;\n        else\n          modelRef.componentInstance.imageUploadedView = { viewOnly: true, url: file };\n      }\n      else {\n        // IN CASE OF REVERSE ONLY\n        if (isReversed === null || isReversed) {\n          let file;\n          if (from == 'chequeImage')\n            file = this.filesArray[index];\n          else\n            file = this.financeApprovalFiles[index];\n          modelRef.componentInstance.imageUploadedView = { viewOnly: true, url: file }\n        }\n      }\n    }\n    else {\n      if (this.otherData?.reverse) {\n        let isNew = this.chequeArrControls.at(index).get('isNew').getRawValue();\n        if (!isNew) return;\n      }\n      if (from == 'chequeImage') {\n        let inputRef = this.inputRefList.toArray()[index] as ElementRef;\n        this.filesArray.splice(index, 1, {});\n        this.chequeArrControls.at(index).get('attachment')?.setValue('');\n        this.chequeArrControls.at(index).get('chequeImage')?.setValue('');\n        inputRef.nativeElement.value = null;\n      }\n      else {\n        let inputRef = this.input2RefList.toArray()[index] as ElementRef;\n        this.financeApprovalFiles.splice(index, 1, {});\n        this.chequeArrControls.at(index).get('financeApprovalAttachment')?.setValue('');\n        this.chequeArrControls.at(index).get('tempFinanceAttachment')?.setValue('');\n        inputRef.nativeElement.value = null;\n      }\n    }\n  }\n  onFileChange(event, i, from) {\n    let files = [...event.target.files];\n    if (files.length > 0) {\n      let isInvalid = this._commonService.checkInvalidImageFormat(files);\n      if (!isInvalid) {\n        files.forEach((file: File) => {\n          this.uploadFile(file, i, from);\n          this._commonService.fileToBase64(file).then(response => {\n            if (from == 'chequeImage')\n              this.filesArray.splice(i, 1, response)\n            else\n              this.financeApprovalFiles.splice(i, 1, response)\n          })\n        })\n      }\n    }\n  }\n  uploadFile(file, index, from) {\n    const formData = new FormData();\n    formData.append('Folder', 'Cheques');\n    formData.append('File', file);\n    this._collectService.uploadFile(formData).subscribe(response => {\n      if (response.isSuccess) {\n        if (from == 'chequeImage') {\n          this.uploadedFiles.splice(index, 1, response['data']);\n          this.chequeArrControls.at(index).get('chequeImage')?.setValue(response['data']);\n          this.chequeArrControls.at(index).get('attachment')?.setValue('Attachment');\n        }\n        else {\n          this.chequeArrControls.at(index).get('financeApprovalAttachment')?.setValue(response['data']);\n          this.chequeArrControls.at(index).get('tempFinanceAttachment')?.setValue('Attachment');\n        }\n      }\n    })\n  }\n  closeModal() {\n    if (this._activeModal)\n      this._activeModal.close()\n    else\n      this._commonService.NavigateToRoute(`/${this.otherData?.redirectRoute}`)\n  }\n  chequeFormControls(item?) {\n    if (item) {\n      return this.fb.group({\n        isChecked: [item?.isChecked],\n        chequeCollectionJod: [item?.chequeCollectionJod, [Validators.required, Validators.min(0.0000000000000001)]],\n        currencyId: [item?.currencyId, [Validators.required]],\n        chequeNo: [item?.chequeNo, [Validators.required, Validators.pattern('^[0-9]*$')]],\n        chequeDate: [item?.chequeDate, [Validators.required]],\n        bankId: [item?.bankId, [Validators.required]],\n        chequeDrawerName: [item?.chequeDrawerName, this.otherData.collectionType != 7004 && [Validators.required]],\n        chequeImage: [item?.chequeImage],\n        attachment: [item?.attachment, (this.otherData.collectionType == 7001 || this.otherData.collectionType == 7003) && [Validators.required]],\n        financeApprovalAttachment: [item?.financeApprovalAttachment],\n        tempFinanceAttachment: [item?.tempFinanceAttachment, (this.otherData.collectionType == 7001 || this.otherData.collectionType == 7003) && [Validators.required]],\n        rate: [item?.rate],\n        vjod: item?.vjod,\n        isReversed: [(item?.isReversed ?? item?.isReversed) || false],\n        isNew: [(item?.isNew ?? item?.isNew) || false],\n        lineNew: [(item?.lineNew ?? item?.lineNew) || false],\n      });\n    }\n    else {\n      return this.fb.group({\n        isChecked: [true],\n        chequeCollectionJod: ['', [Validators.required, Validators.min(0.0000000000000001)]],\n        currencyId: [9001, [Validators.required]],\n        chequeNo: ['', [Validators.required, Validators.pattern('^[0-9]*$')]],\n        chequeDate: ['', [Validators.required]],\n        bankId: [null, [Validators.required]],\n        chequeDrawerName: [localStorage.getItem('pmcn') || 'No Customer', this.otherData.collectionType != 7004 && [Validators.required]],\n        chequeImage: [''],\n        attachment: ['', (this.otherData.collectionType == 7001 || this.otherData.collectionType == 7003) && [Validators.required]],\n        financeApprovalAttachment: [''],\n        tempFinanceAttachment: ['', (this.otherData.collectionType == 7001 || this.otherData.collectionType == 7003) && [Validators.required]],\n        vjod: null,\n        rate: [1],\n        isReversed: [false],\n        isNew: [true],\n        lineNew: [true],\n      });\n    }\n  }\n  reverse(item: AbstractControl, index: number) {\n    const previousFormGroup = this.chequeArrControls.at(index) as FormGroup;\n    if (previousFormGroup.invalid)\n      return;\n    const newFormGroup = this.fb.group({});\n    Object.keys(previousFormGroup.controls).forEach(controlName => {\n      const controlValue = _.cloneDeep(previousFormGroup.get(controlName)?.value);\n      newFormGroup.addControl(controlName, new FormControl(controlValue));\n    });\n    let vjod = (previousFormGroup.get('vjod').value) * -1;\n    let chequeCollectionJod = (previousFormGroup.get('chequeCollectionJod').value) * -1;\n    newFormGroup.patchValue({\n      vjod,\n      chequeCollectionJod,\n      isReversed: true,\n      lineNew: true,\n    })\n    previousFormGroup.get('isReversed').setValue(true);\n    previousFormGroup.get('lineNew').setValue(false);\n    this.chequeArrControls.insert(index + 1, newFormGroup);\n    (this.chequeArrControls.at(index) as FormGroup).disable();\n    (this.chequeArrControls.at(index + 1) as FormGroup).disable();\n    let cheque = this.filesArray[index];\n    let finance = this.financeApprovalFiles[index];\n    this.filesArray.splice(index + 1, 0, cheque);\n    this.financeApprovalFiles.splice(index + 1, 0, finance);\n    this.sendAmount();\n  }\n  removeItem(i) {\n    if (this.otherData?.refund) return;\n    this.chequeArrControls.removeAt(i);\n    this.sendAmount();\n  }\n  get chequeArrControls() {\n    return this.chequeForm ? this.chequeForm.get('chequeArray') as FormArray : null;\n  }\n  handleTabKeyDown() {\n    if (this.otherData?.refund || this.chequeForm.invalid) {\n      return;\n    }\n    if (this.otherData['amountExceeded']) {\n      return;\n    }\n    if (!this.otherData?.isMultiCollect)\n      this.addNewRow();\n  }\n  addNewRow() {\n    this.chequeArrControls.push(this.chequeFormControls())\n    // Below code is to patch last formgroup data to newly added formgroup\n    const lastFormGroupValue = (this.chequeArrControls.at(this.chequeArrControls.length - 2) as FormGroup).getRawValue();\n    const currentFormGroup = this.chequeArrControls.at(this.chequeArrControls.length - 1) as FormGroup;\n    let values = {\n      bankId: lastFormGroupValue['bankId'],\n      chequeDrawerName: lastFormGroupValue['chequeDrawerName'],\n      isChecked: lastFormGroupValue['isChecked'],\n    }\n    currentFormGroup.patchValue(values);\n    this.chequeForm.markAsUntouched();\n  }\n\n  handleAmountFocus() {\n    this.chequeForm.markAllAsTouched();\n  }\n  isSameCustomer(event, index) {\n    let formGroup = this.chequeArrControls.at(index) as FormGroup;\n    if (event.target.checked) {\n      if (this.otherData.collectionType == 7004) {\n        formGroup.controls['chequeDrawerName'].setValue('No Customer');\n      } else {\n        let customerName = localStorage.getItem('pmcn');\n        formGroup.controls['chequeDrawerName'].setValue(customerName);\n      }\n    }\n    else {\n      formGroup.controls['chequeDrawerName'].setValue('');\n    }\n  }\n  handleSubmit() {\n    if (this.chequeForm.invalid) {\n      this.chequeForm.markAllAsTouched();\n    }\n    else {\n      this.formValueEvent.emit({ values: this.chequeForm.getRawValue(), submit: true })\n    }\n  }\n  get f() {\n    return this.chequeForm.controls;\n  }\n  sendAmount() {\n    this.calculateAmount();\n  }\n  calculateAmount() {\n    let amount = 0;\n    for (let item of this.chequeArrControls.controls) {\n      let formGroup = item as FormGroup;\n      let value = parseFloat(formGroup.controls['vjod'].getRawValue());\n      amount += value\n    }\n    this.amountEvent.emit({ amount });\n  }\n  resetForm() {\n    this.chequeArrControls.clear();\n    this.chequeArrControls.push(this.chequeFormControls())\n    this.chequeForm.markAsUntouched();\n    this.formValueEvent.emit({ values: this.chequeForm.getRawValue(), touched: false, reset: true });\n    this.amountEvent.emit({ amount: 0 });\n  }\n}\n","<div class=\"tab-item\">\n  <div class=\"row\">\n    <div class=\"col-md-12 text-end my-2\">\n      <button *ngIf=\"!otherData.reverse && !otherData?.refund\" type=\"button\" class=\"btn btn-trash\" (click)=\"resetForm()\">\n        <img style=\"width:25px\" src=\"assets/images/reload.png\" alt=\"\">\n      </button>\n    </div>\n    <!--{{chequeForm.getRawValue() | json}}-->\n    <form [formGroup]=\"chequeForm\" (submit)=\"handleSubmit()\">\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <div class=\"card-table\">\n            <div class=\"\">\n              <table class=\"table\">\n                <thead>\n                  <tr>\n                    <th width=\"10%\">Cheque Amount</th>\n                    <th>Currency</th>\n                    <th>Rate</th>\n                    <th>Value in JOD</th>\n                    <th>Due Date</th>\n                    <th>Cheque No</th>\n                    <th width=\"15%\">Cheque Bank</th>\n                    <th>Cheque<br />Image</th>\n                    <th *ngIf=\"otherData.collectionType == 7001 || otherData.collectionType == 7003\">Finance<br />Approval</th>\n                    <th>Drawer Name</th>\n                    <th>Same Customer</th>\n                    <th *ngIf=\"!otherData?.isMultiCollect\">Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <ng-container formArrayName=\"chequeArray\" *ngFor=\"let item of chequeArrControls?.controls;let i = index\">\n                    <tr [formGroupName]=\"i\">\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"number\" class=\"form-control\" placeholder=\"Amount\" formControlName=\"chequeCollectionJod\" (input)=\"handleAmountFocus()\"\n                                 (change)=\"convertCash(i)\" appDecimalNumber>\n                          <ng-container *ngIf=\"item?.get('chequeCollectionJod')?.errors\">\n                            <ng-container *ngIf=\"item?.get('chequeCollectionJod')?.invalid && item?.get('chequeCollectionJod')?.touched || item?.get('chequeCollectionJod')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('chequeCollectionJod')?.errors['required']\">Input is required</span>\n                              <span class=\"error\" *ngIf=\"item?.get('chequeCollectionJod')?.errors['min']\">Value must be greater than zero</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"ngselect-curruncy form-group\">\n                          <ng-select placeholder=\"Currency\" [items]=\"currencies\"\n                                     bindLabel=\"name\" bindValue=\"lookupId\" formControlName=\"currencyId\"\n                                     (change)=\"chooseCurrency($event,i)\">\n                          </ng-select>\n                          <ng-container *ngIf=\"item.get('currencyId')?.errors\">\n                            <ng-container *ngIf=\"item?.get('currencyId')?.invalid && item?.get('currencyId')?.touched || item?.get('currencyId')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('currencyId')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>{{item?.get('rate')?.value || 0}}</td>\n                      <td>\n                        {{item?.value?.vjod || 0}}\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"text\"\n                                 (bsValueChange)=\"onDateValueChange($event,i)\"\n                                 placeholder=\"Cheque Date\"\n                                 class=\"form-control\"\n                                 formControlName=\"chequeDate\"\n                                 [minDate]=\"minDate\"\n                                 [maxDate]=\"maxDate\" [bsConfig]=\"{ containerClass: 'theme-red',dateInputFormat: 'DD-MM-YYYY'}\"\n                                 placement=\"top\"\n                                 bsDatepicker />\n                          <ng-container *ngIf=\"item?.get('chequeDate')?.errors\">\n                            <ng-container *ngIf=\"item?.get('chequeDate')?.invalid && item?.get('chequeDate')?.touched || item?.get('chequeDate')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('chequeDate')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"text\" class=\"form-control\" placeholder=\"\" formControlName=\"chequeNo\" name=\"chequeNo\">\n                          <ng-container *ngIf=\"item?.get('chequeNo')?.errors\">\n                            <ng-container *ngIf=\"item?.get('chequeNo')?.invalid && item?.get('chequeNo')?.touched || item?.get('chequeNo')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('chequeNo')?.errors['required']\">Input is required</span>\n                              <span class=\"error\" *ngIf=\"item?.get('chequeNo')?.errors['pattern']\">Input allows only digits</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <ng-select placeholder=\" Select Bank \" [items]=\"banks\" bindLabel=\"name\" bindValue=\"id\"\n                                     formControlName=\"bankId\">\n                          </ng-select>\n                          <ng-container *ngIf=\"item?.get('bankId')?.errors\">\n                            <ng-container *ngIf=\"item?.get('bankId')?.invalid && item?.get('bankId')?.touched || item?.get('bankId')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('bankId')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"custom-file align-items-center\" [class.disable-elm]=\"otherData.refund\">\n                          <input *ngIf=\"item.get('isNew').value\" #fileInput type=\"file\" [id]=\"i+'file-input'\" class=\"file-input__input\"\n                                 (change)=\"onFileChange($event,i,'chequeImage')\" />\n                          <label class=\"file-input__label\" [class.text-success]=\"item?.value.attachment\" [attr.for]=\"i+'file-input'\">{{item?.value.attachment && item?.value.attachment || 'Upload'}}</label>\n                          <ng-container *ngIf=\"item?.value.attachment\">\n                            <img height=\"20\" class=\"cursor-pointer\" src=\"assets/images/eye.png\" (click)=\"fileAction(item?.value.attachment,i,'view','chequeImage')\" />\n                            <img height=\"20\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"fileAction(item?.value.attachment,i,'delete','chequeImage')\" />\n                          </ng-container>\n                        </div>\n                        <ng-container *ngIf=\"item?.get('attachment')?.errors\">\n                          <ng-container *ngIf=\"item?.get('attachment')?.invalid && item?.get('attachment')?.touched || item?.get('attachment')?.dirty\">\n                            <div class=\"form-group\">\n                              <span class=\"error\" *ngIf=\"item?.get('attachment')?.errors['required']\">Input is required</span>\n                            </div>\n                          </ng-container>\n                        </ng-container>\n                      </td>\n                      <td *ngIf=\"otherData.collectionType == 7001 || otherData.collectionType == 7003\">\n                        <div class=\"custom-file align-items-center\">\n                          <input *ngIf=\"item.get('isNew').value\" #fileInput2 type=\"file\" [id]=\"i+'file-input2'\"\n                                 class=\"file-input__input\" (change)=\"onFileChange($event,i,'financeApproval')\" />\n                          <label class=\"file-input__label\" [class.text-success]=\"item?.value.tempFinanceAttachment\" [attr.for]=\"i+'file-input2'\">\n                            {{item?.value.tempFinanceAttachment && item?.value.tempFinanceAttachment || 'Upload'}}\n                          </label>\n                          <ng-container *ngIf=\"item?.value.tempFinanceAttachment\">\n                            <img height=\"20\" class=\"cursor-pointer\" src=\"assets/images/eye.png\" (click)=\"fileAction(item?.value.tempFinanceAttachment,i,'view','financeApproval')\" />\n                            <img height=\"20\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"fileAction(item?.value.tempFinanceAttachment,i,'delete','financeApproval')\" />\n                          </ng-container>\n                        </div>\n                        <ng-container *ngIf=\"item?.get('tempFinanceAttachment')?.errors\">\n                          <ng-container *ngIf=\"item?.get('tempFinanceAttachment')?.invalid && item?.get('tempFinanceAttachment')?.touched || item?.get('tempFinanceAttachment')?.dirty\">\n                            <div class=\"form-group\">\n                              <span class=\"error\" *ngIf=\"item?.get('tempFinanceAttachment')?.errors['required']\">Input is required</span>\n                            </div>\n                          </ng-container>\n                        </ng-container>\n                      </td>\n                      <td>\n                        <div class=\"form-group\">\n                          <input type=\"text\" class=\"form-control\" placeholder=\"\" formControlName=\"chequeDrawerName\" OnlyCharacter />\n                          <ng-container *ngIf=\"item?.get('chequeDrawerName')?.errors\">\n                            <ng-container *ngIf=\"item?.get('chequeDrawerName')?.invalid && item?.get('chequeDrawerName')?.touched || item?.get('chequeDrawerName')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('chequeDrawerName')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <div class=\"form-check\">\n                          <input class=\"form-check-input\" type=\"checkbox\" formControlName=\"isChecked\" (change)=\"isSameCustomer($event,i)\">\n                        </div>\n                      </td>\n                      <td *ngIf=\"!otherData?.isMultiCollect && !otherData.refund\">\n                        <ng-container *ngIf=\"!otherData?.reverse;else reverseCase\">\n                          <img style=\"width:25px\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"removeItem(i)\" alt=\"\">\n                        </ng-container>\n                        <!--Reverse Case Only Start-->\n                        <ng-template #reverseCase>\n                          <ng-container *ngIf=\"item.get('isNew').value;else reverseTemp\">\n                            <img style=\"width:25px\" class=\"cursor-pointer\" src=\"assets/images/trash.png\" (click)=\"removeItem(i)\" alt=\"\">\n                          </ng-container>\n                          <ng-template #reverseTemp>\n                            <ng-container *ngIf=\"!item.get('isReversed').value\">\n                              <i (click)=\"reverse(item,i)\" class=\"cursor-pointer green-clr fas fa-rotate-left font-20\"></i>\n                            </ng-container>\n                          </ng-template>\n                        </ng-template>\n                        <!--Reverse Case Only End-->\n                      </td>\n                    </tr>\n                  </ng-container>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          <div class=\"col-md-12 d-flex mt-2\" *ngIf=\"!otherData?.isMultiCollect && !otherData?.refund\">\n            <p class=\"blue-clr d-flex align-items-center fw-500 gap-1\">\n              <i class=\"fa-solid fa-circle-plus primary-clr fa-2x\"></i>Press Tab to add payment in another currency\n            </p>\n          </div>\n        </div>\n      </div>\n      <!-----------------------------------TABLE END HERE----------------------------->\n      <div class=\"col-12 mb-4\" *ngIf=\"otherData.collectionType == 7001 || otherData.collectionType == 7004 || otherData.collectionType == 7005 || otherData.collectionType == 7008 || otherData.collectionType == 7009 || (otherData.collectionType == 7002 && otherData.refund)\">\n        <label class=\"input-label\">Cashier Notes</label>\n        <textarea class=\"form-control\" (change)=\"_subjectService.cashierNote.next($any($event).target.value)\"></textarea>\n      </div>\n      <div class=\"col-md-12\">\n        <div class=\"btns-group my-2 me-0\">\n          <button type=\"button\" class=\"btn btn-cancel\" [disabled]=\"colllectedViaMachine\" (click)=\"closeModal()\">Cancel</button>\n          <button type=\"submit\" class=\"btn btn-save\" [disabled]=\"isPending\">\n            {{isPending && 'Saving' || 'Confirm'}}\n            <i *ngIf=\"isPending\" class=\"fa-solid fa-circle-notch fa-spin\"></i>\n          </button>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n","<div class=\"modal-header\">\n  <h4 class=\"font-18 fw-600\">{{(!data?.refund) && 'Confirm Payment' || 'Confirm Refund Payment'}}</h4>\n</div>\n<div class=\"modal-body\">\n  <p class=\"m-0 font-16 fw-600\">{{(!data?.refund) && 'Do you want to continue?' || 'Are you sure you want to refund this payment?'}}</p>\n  <ng-container *ngIf=\"data.collectionType == 7001 || data.collectionType == 7002 || data.collectionType == 7003\">\n    <p class=\"mt-2 font-14 fw-500\">The remaining amount after this payment: {{data?.remainingAmount | number:'2.3-3'}} JOD</p>\n  </ng-container>\n</div>\n<div class=\"modal-footer\">\n  <div class=\"btns-group\">\n    <button type=\"button\" class=\"btn btn-save\" (click)=\"_activeModal.close('close')\">Yes</button>\n    <!--<button type=\"button\" class=\"btn btn-save\" (click)=\"_activeModal.close('close')\">Yes</button>-->\n    <button type=\"button\" class=\"btn btn-cancel\" (click)=\"_activeModal.dismiss('dissmiss')\">No</button>\n  </div>\n</div>\n\n","import { Component, Input } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\n\n@Component({\n  selector: 'app-confirm-payment-modal',\n  templateUrl: './confirm-payment-modal.component.html',\n  styleUrls: ['./confirm-payment-modal.component.scss']\n})\nexport class ConfirmPaymentModalComponent {\n  @Input() data;\n  constructor(public _activeModal: NgbActiveModal) {\n   \n  }\n  ngOnInit() {\n  }\n}\n","import { Component, EventEmitter, Input, Optional, Output } from '@angular/core';\nimport { NgbActiveModal, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { CommonService } from '../../../../../../services/common.service';\nimport { SubjectService } from '../../../../../../services/subject.service';\nimport { ModalPayDoneComponent } from '../../modal-payment/modal-pay-done/modal-pay-done.component';\nimport { CollectService } from '../../services/collect.service';\nimport { NgxSpinnerService } from 'ngx-spinner';\n\n@Component({\n  selector: 'on-account',\n  templateUrl: './on-account.component.html',\n  styleUrls: ['./on-account.component.scss']\n})\nexport class OnAccountComponent {\n  @Input() otherData;\n  isPending: boolean;\n  @Output() eventData = new EventEmitter();\n  cashierNotes = '';\n  constructor(\n    @Optional() public _activeModal: NgbActiveModal,\n    public _modalService: NgbModal,\n    public _collectService: CollectService,\n    public _subjectService: SubjectService,\n    private _commonService: CommonService,\n    private _spinner: NgxSpinnerService,\n\n  ) {\n\n  }\n  ngOnInit() {\n    console.log(this.otherData);\n  }\n  closeModal() {\n    if (this._activeModal)\n      this._activeModal.close()\n    else\n      this._commonService.NavigateToRoute(`/${this.otherData?.redirectRoute}`)\n  }\n  confirm() {\n    this._spinner.show();\n    if (this.otherData['isMultiCollect']) {\n      this.isPending = true;\n      let obj = {\n        ordersCollection: {\n          orderCollectionType: this.otherData?.collectionType,\n          orderNo: this.otherData?.orderNo,\n        },\n        ordersOnAccountCollection: {\n          onAccountCollectionJod: this.otherData?.grandAmount,\n          onAccountPayerName: this.otherData?.customerName,\n        }\n      }\n      this._collectService.collectionOrderV2MultiCollect(obj).subscribe(response => {\n        if (response.isSuccess) {\n          this.openSuccessModal('ok', response);\n        } else {\n          this.openSuccessModal('no', response);\n        }\n      }, (error: any) => {\n        this.openSuccessModal('no', error);\n      }).add(() => this._spinner.hide());\n    }\n    else {\n      let orderId = 0;\n      if (this.otherData?.collectionType == 7001) orderId = this.otherData.servicesSalesOrderNo || this.otherData.order?.servicesSalesOrderNo\n      else if (this.otherData?.collectionType == 7003) orderId = this.otherData?.sparePartsSalesOrderOpportunityNo || this.otherData?.order?.sparePartsSalesOrderOpportunityNo\n      this.isPending = true;\n      let obj = {\n        ordersCollection: {\n          orderCollectionType: this.otherData?.collectionType,\n          orderNo: orderId,\n          isReplace: this.otherData?.isFromReturn,\n          cashierNotes: this.cashierNotes,\n        },\n        ordersOnAccountCollection: {\n          onAccountCollectionJod: this.otherData?.grandAmount || this.otherData?.order?.grandAmount,\n          onAccountPayerName: this.otherData?.customer?.customerName,\n        }\n      }\n      this._collectService.collectionOrderV2(obj).subscribe(response => {\n        if (response.isSuccess) {\n          this._subjectService.isCollectionPaymentDone.next(true);\n          this._subjectService.collectedOrder.next({ orderId });\n          this.openSuccessModal('ok', response);\n        } else {\n          this.openSuccessModal('no', response);\n        }\n      }, (error: any) => {\n        this.openSuccessModal('no', error);\n      }).add(() => this._spinner.hide());\n    }\n  }\n  openSuccessModal(name, response?, error?) {\n    this.isPending = false;\n    const modalRef = this._modalService.open(ModalPayDoneComponent);\n    modalRef.componentInstance.name = name;\n    if ((this.otherData.collectionType == 7001 || this.otherData.collectionType == 7002 || this.otherData.collectionType == 7003) && !this.otherData['isMultiCollect']) {\n      let receipt, invoice, summary;\n      if (response.data.statusObj[0].lookupId == 10005) //partial status\n        receipt = response.data?.receipt;\n      else if (response.data.statusObj[0].lookupId == 10004) //collected status\n      {\n        receipt = response.data?.receipt;\n        invoice = response.data?.invoices;\n        summary = response.data?.summaryInvoice;\n      }\n      modalRef.componentInstance.data = {\n        collectionType: this.otherData.collectionType,\n        status: response.data.statusObj[0].lookupId,\n        invoice, receipt, summary,\n        invoiceType: this.otherData?.invoiceType?.toLowerCase()\n      }\n    }\n    else if (this.otherData['isMultiCollect']) {\n      modalRef.componentInstance.data = {\n        collectionType: this.otherData?.collectionType,\n        isMultiCollect: this.otherData['isMultiCollect'],\n      }\n    }\n    else {\n      modalRef.componentInstance.data = { collectionType: this.otherData.collectionType, invoices: response.data }\n    }\n    if (response) {\n      if (response.error)\n        modalRef.componentInstance.errors = response.error['errors'];\n      else\n        modalRef.componentInstance.response = response;\n    }\n    else\n      modalRef.componentInstance.errors = error.error.errors || error.error.Errors;\n  }\n\n}\n","<div class=\"col-12 mb-4\" *ngIf=\"otherData.collectionType == 7001 || otherData.collectionType == 7004 || otherData.collectionType == 7005\">\n  <label class=\"input-label\">Cashier Notes</label>\n  <textarea class=\"form-control\" [(ngModel)]=\"cashierNotes\"></textarea>\n</div>\n<div class=\"col-md-12\" *ngIf=\"otherData?.invoiceType?.toLowerCase() == 'credit' ||\n     otherData?.invoiceType?.toLowerCase() == 'internal' ||\n     otherData?.invoiceType?.toLowerCase() == 'tmc'\">\n  <div class=\"btns-group my-2 me-0\">\n    <button type=\"button\" class=\"btn btn-cancel\" (click)=\"closeModal()\">Cancel</button>\n    <button type=\"submit\" class=\"btn btn-save\" *ngIf=\"!isPending\" (click)=\"confirm()\">Confirm</button>\n    <saving-loader *ngIf=\"isPending\"></saving-loader>\n  </div>\n</div>\n","import { Component, EventEmitter, Output } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { CollectService } from '../../../../services/collect.service';\nimport { Subject, Subscription, debounceTime, distinctUntilChanged, switchMap } from 'rxjs';\n\n@Component({\n  selector: 'app-add-new-customer',\n  templateUrl: './add-new-customer.component.html',\n  styleUrls: ['./add-new-customer.component.scss']\n})\nexport class AddNewCustomerComponent {\n  responseMessage;\n  isSubmitted = false;\n  isNewCustomer = false;\n  isIndividual = true;\n  customerList = [];\n  formGroup: FormGroup;\n  selectedCustomer: number = 0;\n  selectedItem;\n  isCreditCustomer = false;\n  titleList = [/*{ value: 0, text: 'Messrs' }, */{ value: 1, text: 'Mr.' }, { value: 2, text: 'Ms.' }, { value: 11, text: 'Dr.' }, { value: 12, text: 'Eng.' }];\n  @Output() sendData = new EventEmitter();\n  private searchSubject = new Subject<string>();\n  private searchSubscription = new Subscription();\n  constructor(private _collectService: CollectService, private fb: FormBuilder, public _activeModal: NgbActiveModal) { }\n  ngOnInit() {\n    this.initCustomerForm();\n    this.searchSubscription = this.searchSubject.pipe(\n      debounceTime(500), distinctUntilChanged(), switchMap((value: string) => this._collectService.getMarkaziaCustomers(value, Number(this.isCreditCustomer)))\n    ).subscribe(response => {\n      this.customerList = response['data'];\n    });\n  }\n  initCustomerForm() {\n    this.formGroup = this.fb.group({\n      title: [null, [Validators.required]],\n      fname: ['', [Validators.required, Validators.pattern('^[a-zA-Z]*$')]],\n      sname: ['', [Validators.required, Validators.pattern('^[a-zA-Z]*$')]],\n      thName: ['', [Validators.required, Validators.pattern('^[a-zA-Z]*$')]],\n      fourthName: ['', [Validators.required, Validators.pattern('^[a-zA-Z]*$')]],\n      gender: ['0'],\n      customerCategory: ['1'],\n      mobile: ['', [Validators.required, Validators.minLength(9), Validators.maxLength(10)]],\n    })\n  }\n  ngOnDestroy() {\n    this.searchSubscription.unsubscribe();\n  }\n  handleCreditCustomerChange(event, value) {\n    if (value) {\n      this._collectService.getMarkaziaCustomers(value, Number(this.isCreditCustomer)).subscribe(response => {\n        this.customerList = response['data'];\n      });\n    }\n  }\n  handleSearch(event: any) {\n    const value = event.target.value;\n    this.searchSubject.next(value);\n  }\n  handleCetegoryChange(value) {\n    this.isIndividual = value == 1 ? true : false;\n    if (this.isIndividual) {\n      this.f.get('title').setValidators([Validators.required]);\n      this.f.get('title').updateValueAndValidity();\n      this.f.get('sname').setValidators([Validators.required, Validators.pattern('^[a-zA-Z]*$')]);\n      this.f.get('sname').updateValueAndValidity();\n      this.f.get('thName').setValidators([Validators.required, Validators.pattern('^[a-zA-Z]*$')]);\n      this.f.get('thName').updateValueAndValidity();\n      this.f.get('fourthName').setValidators([Validators.required, Validators.pattern('^[a-zA-Z]*$')]);\n      this.f.get('fourthName').updateValueAndValidity();\n    }\n    else {\n      this.f.get('title').clearValidators();\n      this.f.get('title').updateValueAndValidity();\n      this.f.get('sname').clearValidators();\n      this.f.get('sname').updateValueAndValidity();\n      this.f.get('thName').clearValidators();\n      this.f.get('thName').updateValueAndValidity();\n      this.f.get('fourthName').clearValidators();\n      this.f.get('fourthName').updateValueAndValidity();\n    }\n  }\n\n  removeByIndex(str, index) {\n    return str.slice(0, index) + str.slice(index + 1);\n  }\n  saveCustomer() {\n    if (this.formGroup.invalid) {\n      this.formGroup.markAllAsTouched();\n      return;\n    }\n    else {\n      this.isSubmitted = true;\n      let obj;\n      let values = this.formGroup.value;\n      let mobile = values?.mobile;\n      if (mobile.charAt(0) == 0) {\n        mobile = this.removeByIndex(values?.mobile, 0);\n      }\n      values = { ...values, customerCategory: +values?.customerCategory, gender: +values?.customerCategory, mobile: `962${mobile}` }\n      if (this.isIndividual)\n        obj = values;\n      else {\n        obj = {\n          corporateName: values?.fname,\n          customerCategory: values?.customerCategory,\n          mobile: values?.mobile,\n        }\n      }\n      this._collectService.addMarkaziaCustomer(obj).subscribe(response => {\n        this.isSubmitted = false;\n        console.log(response);\n        if (response['isSuccess']) {\n          this.sendData.emit(response['data'])\n          this._activeModal.close();\n        }\n      }, (error => {\n        this.isSubmitted = false;\n        this.responseMessage = error.error?.errors[0]?.ErrorMessageEn;\n        setTimeout(() => {\n          this.responseMessage = '';\n        }, 5000)\n      }))\n    }\n  }\n  selectCustomer(item) {\n    this.selectedItem = item;\n    this.selectedCustomer = item?.customerNo;\n  }\n  handleSelect() {\n    let data = { customerNo: this.selectedItem?.customerNo, corporateName: this.selectedItem?.customerName, mobile: this.selectedItem?.customerPhone }\n    this.sendData.emit(data);\n    this._activeModal.close();\n  }\n  addNewCustomer() {\n    this.isNewCustomer = true;\n  }\n  goBack() {\n    this.isNewCustomer = false;\n  }\n  get f() {\n    return this.formGroup;\n  }\n}\n","<div class=\"modal-body\">\n  <div class=\"d-flex mb-4 justify-content-between\">\n    <h4 class=\"fw-500 mb-0\">{{isNewCustomer && 'New Account' || 'Search Customer Account'}}</h4>\n    <i class=\"fas fa-times-circle fa-2x primary-clr cursor-pointer\" (click)=\"_activeModal.close('')\"></i>\n  </div>\n  <ng-container *ngIf=\"!isNewCustomer;else newCustomer\">\n    <div class=\"d-flex align-items-center\">\n      <p class=\"flex-grow-1 m-0\">Search (Account No. | Name | Mobile)</p>\n      <div class=\"flex-grow-1\">\n        <div class=\"input-group\">\n          <input type=\"text\" class=\"form-control\" (input)=\"handleSearch($event)\" #inputSearch placeholder=\"Search\">\n          <span class=\"input-group-text\"><i class=\"fas fa-search\"></i></span>\n        </div>\n      </div>\n    </div>\n    <div class=\"d-flex align-items-center gap-1\">\n      <label for=\"check\" class=\"font-13\">Credit Customers Only</label>\n      <input id=\"check\" type=\"checkbox\" class=\"ms-1 m-0 form-check-input input-checkbox\" [(ngModel)]=\"isCreditCustomer\" (change)=\"handleCreditCustomerChange($event,inputSearch.value)\">\n    </div>\n    <div class=\"scrollable-table-wrapper\">\n      <table class=\"table table-striped my-4 table-bordered\">\n        <thead>\n          <tr>\n            <th>Account No</th>\n            <th>Account Name</th>\n            <th>Phone 1</th>\n            <th>Customer Category</th>\n            <th>Credit Customer</th>\n            <th>Confirmed Customer</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngIf=\"customerList?.length;else noCustomers\">\n            <tr *ngFor=\"let item of customerList\" [class.selectedRow]=\"item?.customerNo == selectedCustomer\" class=\"cursor-pointer\" (click)=\"selectCustomer(item)\">\n              <td>{{item?.customerNo}}</td>\n              <td>{{item?.customerName}}</td>\n              <td>{{item?.customerPhone}}</td>\n              <td>{{item?.customerCategory == 1 ? 'Individual' : 'Corporate' }}</td>\n              <td>\n                <i class=\"fas cursor-pointer\" [ngClass]=\"item?.customerCredit == 1  && 'fa-check green-clr' || 'fa-times primary-clr'\"></i>\n              </td>\n              <td>\n                <i class=\"fas cursor-pointer\" [ngClass]=\"item?.confirmed && 'fa-check green-clr' || 'fa-times primary-clr'\"></i>\n              </td>\n            </tr>\n          </ng-container>\n          <ng-template #noCustomers>\n            <tr>\n              <td colspan=\"6\">No records to display</td>\n            </tr>\n          </ng-template>\n        </tbody>\n      </table>\n    </div>\n    <div class=\"d-flex gap-2\">\n      <button type=\"button\" class=\"redBtn\" (click)=\"handleSelect()\" [disabled]=\"selectedCustomer <= 0\">Select</button>\n      <button type=\"button\" class=\"redBtn\" (click)=\"addNewCustomer()\">Add New</button>\n    </div>\n  </ng-container>\n  <!--ADD NEW CUSTOMER START HERE-->\n  <ng-template #newCustomer>\n    <form [formGroup]=\"formGroup\" class=\"add-cutsomer\" (submit)=\"saveCustomer()\">\n      <div class=\"row\">\n        <div class=\"col-2\"><label>Customer Category</label></div>\n        <div class=\"col-10 d-flex gap-2\">\n          <div class=\"form-check\">\n            <input class=\"form-check-input\" value=\"1\" type=\"radio\" id=\"individual\" (change)=\"handleCetegoryChange(1)\" formControlName=\"customerCategory\">\n            <label class=\"form-check-label\" for=\"individual\">Individual</label>\n          </div>\n          <div class=\"form-check\">\n            <input class=\"form-check-input\" value=\"2\" type=\"radio\" id=\"corporate\" (change)=\"handleCetegoryChange(2)\" formControlName=\"customerCategory\">\n            <label class=\"form-check-label\" for=\"corporate\">Corporate</label>\n          </div>\n        </div>\n      </div>\n      <hr />\n      <!-- IN CASE OF CORPORATE THESE FIELDS WILL BE HIDDEN-->\n      <ng-container *ngIf=\"isIndividual\">\n        <div class=\"row\">\n          <div class=\"col-2\"><label>Title</label></div>\n          <div class=\"col-10\">\n            <select class=\"form-control\" formControlName=\"title\">\n              <option selected disabled value=\"null\">---Select Title---</option>\n              <option *ngFor=\"let item of titleList\" [value]=\"item?.value\">{{item?.text}}</option>\n            </select>\n            <ng-container *ngIf=\"f?.get('title')?.errors\">\n              <ng-container *ngIf=\"f?.get('title')?.invalid && f?.get('title')?.touched || f?.get('title')?.dirty\">\n                <span class=\"error\" *ngIf=\"f?.get('title')?.errors['required']\">Input is required</span>\n              </ng-container>\n            </ng-container>\n          </div>\n        </div>\n        <hr />\n      </ng-container>\n      <div class=\"row\">\n        <div class=\"col-2\"><label>Name</label></div>\n        <div class=\"col-10\">\n          <div class=\"row\">\n            <div class=\"col-3\" [class.col-12]=\"!isIndividual\">\n              <input type=\"text\" placeholder=\"{{isIndividual && 'First Name' || 'Full Name'}}\" class=\"form-control\" formControlName=\"fname\" />\n              <ng-container *ngIf=\"f?.get('fname')?.errors\">\n                <ng-container *ngIf=\"f?.get('fname')?.invalid && f?.get('fname')?.touched || f?.get('fname')?.dirty\">\n                  <span class=\"error\" *ngIf=\"f?.get('fname')?.errors['required']\">Input is required</span>\n                  <span class=\"error\" *ngIf=\"f?.get('fname')?.errors['pattern']\">Input allows only characters.</span>\n                </ng-container>\n              </ng-container>\n            </div>\n            <!-- IN CASE OF CORPORATE THESE FIELDS WILL BE HIDDEN-->\n            <ng-container *ngIf=\"isIndividual\">\n              <div class=\"col-3\">\n                <input type=\"text\" placeholder=\"Last Name\" class=\"form-control\" formControlName=\"sname\" />\n                <ng-container *ngIf=\"f?.get('sname')?.errors\">\n                  <ng-container *ngIf=\"f?.get('sname')?.invalid && f?.get('sname')?.touched || f?.get('sname')?.dirty\">\n                    <span class=\"error\" *ngIf=\"f?.get('sname')?.errors['required']\">Input is required</span>\n                    <span class=\"error\" *ngIf=\"f?.get('sname')?.errors['pattern']\">Input allows only characters.</span>\n                  </ng-container>\n                </ng-container>\n              </div>\n              <div class=\"col-3\">\n                <input type=\"text\" placeholder=\"Third Name\" class=\"form-control\" formControlName=\"thName\" />\n                <ng-container *ngIf=\"f?.get('thName')?.errors\">\n                  <ng-container *ngIf=\"f?.get('thName')?.invalid && f?.get('thName')?.touched || f?.get('thName')?.dirty\">\n                    <span class=\"error\" *ngIf=\"f?.get('thName')?.errors['required']\">Input is required</span>\n                    <span class=\"error\" *ngIf=\"f?.get('thName')?.errors['pattern']\">Input allows only characters.</span>\n\n                  </ng-container>\n                </ng-container>\n\n              </div>\n              <div class=\"col-3\">\n                <input type=\"text\" placeholder=\"Fourth Name\" class=\"form-control\" formControlName=\"fourthName\" />\n                <ng-container *ngIf=\"f?.get('fourthName')?.errors\">\n                  <ng-container *ngIf=\"f?.get('fourthName')?.invalid && f?.get('fourthName')?.touched || f?.get('fourthName')?.dirty\">\n                    <span class=\"error\" *ngIf=\"f?.get('fourthName')?.errors['required']\">Input is required</span>\n                    <span class=\"error\" *ngIf=\"f?.get('fourthName')?.errors['pattern']\">Input allows only characters.</span>\n                  </ng-container>\n                </ng-container>\n              </div>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n      <hr />\n      <!-- IN CASE OF CORPORATE THESE FIELDS WILL BE HIDDEN-->\n      <ng-container *ngIf=\"isIndividual\">\n        <div class=\"row\">\n          <div class=\"col-2\"><label>Gender</label></div>\n          <div class=\"col-10 d-flex gap-2\">\n            <div class=\"form-check\">\n              <input class=\"form-check-input\" value=\"0\" type=\"radio\" id=\"flexRadioDefault1\" formControlName=\"gender\">\n              <label class=\"form-check-label\" for=\"flexRadioDefault1\">Male</label>\n            </div>\n            <div class=\"form-check\">\n              <input class=\"form-check-input\" value=\"1\" type=\"radio\" id=\"flexRadioDefault2\" formControlName=\"gender\">\n              <label class=\"form-check-label\" for=\"flexRadioDefault2\">Female</label>\n            </div>\n          </div>\n        </div>\n        <hr />\n      </ng-container>\n      <div class=\"row\">\n        <div class=\"col-2\"><label>Mobile</label></div>\n        <div class=\"col-10\">\n          <div class=\"input-group\">\n            <span class=\"input-group-text\">962</span>\n            <input type=\"text\" class=\"form-control\" placeholder=\"e.g (7xxxxxxxx) or (07xxxxxxxx)\" numbersOnly formControlName=\"mobile\" />\n          </div>\n          <ng-container *ngIf=\"f?.get('mobile')?.errors\">\n            <ng-container *ngIf=\"f?.get('mobile')?.invalid && f?.get('mobile')?.touched || f?.get('mobile')?.dirty\">\n              <span class=\"error\" *ngIf=\"f?.get('mobile')?.errors['required']\">Input is required</span>\n              <span class=\"error\" *ngIf=\"f?.get('mobile')?.errors['minlength']\">Minimum 9 digits required</span>\n              <span class=\"error\" *ngIf=\"f?.get('mobile')?.errors['maxlength']\">Maximum 10 digits allowed</span>\n            </ng-container>\n          </ng-container>\n        </div>\n      </div>\n      <hr />\n      <p *ngIf=\"responseMessage\" class=\"alert alert-danger\">{{responseMessage}}</p>\n      <div class=\"d-flex gap-2\">\n        <button type=\"button\" class=\"redBtn\" (click)=\"goBack()\">Back</button>\n        <button type=\"submit\" class=\"redBtn\">\n          {{isSubmitted && 'Saving' || 'Save'}}\n          <i *ngIf=\"isSubmitted\" class=\"fa-solid fa-circle-notch fa-spin\"></i>\n        </button>\n      </div>\n    </form>\n  </ng-template>\n</div>\n","import { ChangeDetectorRef, Component, EventEmitter, Input, Output, SimpleChange, SimpleChanges, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { CommonService } from '../../../../../../services/common.service';\nimport { SharedService } from '../../../../../../services/shared.service';\nimport { CollectService } from '../../services/collect.service';\nimport { AddNewCustomerComponent } from './components/add-new-customer/add-new-customer.component';\nimport { catchError, forkJoin, of } from 'rxjs';\nimport { MarkaziaVoucherService } from '../../../markazia-vouchers/services/markazia-voucher.service';\nimport { SubjectService } from '../../../../../../services/subject.service';\nimport { GeneralService } from '../../../../../../services/general.service';\nimport { ModalMessageComponent } from '../../../../../../shared/components/modal-message/modal-message.component';\n\n@Component({\n  selector: 'otherRevenueForm',\n  templateUrl: './other-revenue-form.component.html',\n  styleUrls: ['./other-revenue-form.component.scss']\n})\nexport class OtherRevenueFormComponent {\n  revenueForm: FormGroup;\n  emittedValues;\n  categories;\n  customers;\n  @Input() data;\n  costCenterList = [];\n  taxesList = [];\n  noTotalAmount = false;\n  @Output() calcRevenueRemainingAmount: EventEmitter<any> = new EventEmitter();\n  constructor(private fb: FormBuilder,\n    private _vocuherService: MarkaziaVoucherService,\n    private collectService: CollectService,\n    private _subjectService: SubjectService,\n    private _generalService: GeneralService,\n    private cdRef: ChangeDetectorRef,\n    public sharedService: SharedService, private _commonService: CommonService, private _modalService: NgbModal) { }\n  ngOnInit() {\n    this.initRevenuForm();\n    this.getCategories();\n    //this.getCustomers();\n    this.getLookups();\n  }\n  ngOnChanges(changes: SimpleChanges) {\n    console.log(changes);\n    if (changes['data']) {\n      let value = changes['data'].currentValue?.totalCollectedAmount;\n      if (value > 0) {\n        this.calcuateTaxAndAmountFromTotalAmount(value)\n      }\n\n    }\n  }\n  initRevenuForm() {\n    this.revenueForm = this.fb.group({\n      customerId: [null],\n      customerName: ['', this.data.collectionType == 7005 && [Validators.required]],\n      revenueCategoryId: [null, [Validators.required]],\n      costCenterId: [null, this.data.collectionType == 7004 && [Validators.required]],\n      amount: [null, [Validators.min(0.0000000000000001), Validators.required]],\n      tax: [null, Validators.required],\n      taxPercent: '',\n      taxAmount: '',\n      totalAmount: '',\n      mobile: '',\n      note: [''],\n    })\n  }\n  calcuateTaxAndAmountFromTotalAmount(totalAmount) {\n    let taxPercentage = +this.f['taxPercent'].value;\n    const taxAmount = (((+totalAmount) * taxPercentage) / 100).toFixed(3);\n    const amount = (totalAmount - (+taxAmount)).toFixed(3);\n    this.f['taxAmount'].setValue(taxAmount);\n    this.f['amount'].setValue(amount);\n    this.f['totalAmount'].setValue(totalAmount);\n    let formValue = this.revenueForm.value;\n    formValue = { ...formValue, totalAmount: +totalAmount, amount: +formValue['amount'] };\n    this.calcRevenueRemainingAmount.emit({ formValue, noTotalAmount: true });\n  }\n  handleNoAmountChange(event) {\n    this.noTotalAmount = event.target.checked;\n    let value = { ...this.revenueForm.value }\n    if (this.noTotalAmount) {\n      let obj = { revenueCategoryId: value.revenueCategoryId, tax: value.tax, taxPercent: value.taxPercent }\n      if (this.data.collectionType == 7004 || this.data.collectionType == 7005) {\n        obj['customerId'] = value.customerId;\n        obj['customerName'] = value.customerName;\n      }\n      this.revenueForm.reset(obj);\n      this.calcRevenueRemainingAmount.emit({ noTotalAmount: true });\n    }\n    else {\n      this.calcRevenueRemainingAmount.emit({ formValue: {}, amount: 0 });\n    }\n    this.toggleValidation();\n  }\n  toggleValidation() {\n    let amountControl = this.f['amount'];\n    if (this.noTotalAmount) {\n      amountControl.removeValidators([Validators.required]);\n    }\n    else {\n      amountControl.addValidators([Validators.required]);\n    }\n    amountControl.updateValueAndValidity();\n  }\n  responseModal(type, message) {\n    const modalRef = this._modalService.open(ModalMessageComponent);\n    modalRef.componentInstance.type = type;\n    modalRef.componentInstance.message = message;\n  }\n  getLookups() {\n    const costCenter = this._vocuherService.getCostCenter(`?StatusId=2001&PageSize=1000`).pipe(catchError(error => of(error)));\n    let params = `?lookupTypeId=23&status=2001&pageSize=1000`;\n    const taxes = this._generalService.getLookupsWithParams(params)\n    forkJoin([costCenter, taxes]).subscribe(data => {\n      this.costCenterList = data[0].data;\n      this.taxesList = (data[1] as any).data.map(x => {\n        return {\n          ...x,\n          text: x.name[0].lookupName\n        }\n      });\n    })\n  }\n  handleTaxChange(event) {\n    if (event) {\n      this.revenueForm.get('taxPercent').setValue(event.text);\n      this.calcTotalAmount();\n    }\n    else {\n      this.noTotalAmount = false;\n      this.toggleValidation();\n      this.calcRevenueRemainingAmount.emit({ formValue: {}, amount: 0 });\n    }\n\n  }\n  searchForCustomer() {\n    let modalRef = this._modalService.open(AddNewCustomerComponent, {\n      size: 'lg',\n    })\n    modalRef.componentInstance.sendData.subscribe(data => {\n      let corporate = data?.corporateName;\n      let individual = `${data?.fname} ${data?.sname} ${data?.thName} ${data?.fourthName}`\n      let obj = { customerId: data?.customerNo, customerName: corporate || individual, mobile: data?.mobile }\n      localStorage.setItem('pmcn', obj?.customerName);\n      this.revenueForm.patchValue(obj);\n      if (this.emittedValues) {\n        let formValue = { ...this.emittedValues?.['formValue'], ...obj, };\n        this.emittedValues = { ...this.emittedValues, formValue };\n        if (this.emittedValues?.['formValue']['revenueCategoryId'])\n          this.calcRevenueRemainingAmount.emit({...this.emittedValues,fromCustomer:true});\n      }\n    })\n  }\n  calcTotalAmount() {\n    let amount = this.revenueForm.get('amount').value;\n    if (amount > 0) {\n      let taxAmount = (+(this.revenueForm.get('taxPercent').value) * amount) / 100;\n      this.revenueForm.get('taxAmount').patchValue(this._commonService.transformDecimal(taxAmount));\n      let totalAmount = +(this.revenueForm.get('amount').value) + (+(taxAmount));\n      this.revenueForm.get('totalAmount').setValue(this._commonService.transformDecimal(totalAmount));\n      let formValues = this.revenueForm.value;\n      formValues = { ...formValues, totalAmount: +totalAmount, amount: formValues['amount'] };\n      this.noTotalAmount = false;\n      this.emittedValues = { formValue: formValues, amount: +totalAmount, noTotalAmount: false }\n      if (this.data.collectionType == 7004) {\n        if (formValues['revenueCategoryId'])\n          this.calcRevenueRemainingAmount.emit(this.emittedValues);\n      }\n      else {\n        if (formValues['customerId'] && formValues['revenueCategoryId'])\n          this.calcRevenueRemainingAmount.emit(this.emittedValues);\n      }\n    }\n    else {\n      this.revenueForm.get('totalAmount').patchValue('');\n      this.calcRevenueRemainingAmount.emit({ formValue: {}, amount: 0 });\n    }\n  }\n  chooseCategory(e) {\n    this.revenueForm.markAllAsTouched();\n    this.revenueForm.get('taxPercent').patchValue(e?.taxPercent);\n    this.revenueForm.get('tax').setValue(e?.taxPercentId);\n    this.revenueForm.get('note').patchValue(e?.note);\n    let taxId = +this.revenueForm.get('tax').value;\n    let taxPercentage = +(this.taxesList.find(x => x.id == taxId)?.name[0]?.lookupName);\n    let amount = +this.revenueForm.get('amount').value;\n    let taxAmount = (taxPercentage / 100) * amount;\n    this.revenueForm.get('taxAmount').patchValue(this._commonService.transformDecimal(taxAmount));\n    let totalAmount = amount + taxAmount;\n    this.revenueForm.get('totalAmount').patchValue(this._commonService.transformDecimal(totalAmount));\n    let formValues = this.revenueForm.value;\n    formValues = { ...formValues, totalAmount: +totalAmount, amount: formValues['amount'] };\n    this.emittedValues = { formValue: formValues, amount: +totalAmount };\n    if (!this.noTotalAmount) {\n      if (this.data.collectionType == 7004) {\n        if (formValues['revenueCategoryId'])\n          this.calcRevenueRemainingAmount.emit(this.emittedValues);\n      }\n      else {\n        if (formValues['customerId'] && formValues['revenueCategoryId'])\n          this.calcRevenueRemainingAmount.emit(this.emittedValues);\n      }\n    }\n  }\n  clearCategory(e) {\n    if (!e) {\n      this.noTotalAmount = false;\n      this.toggleValidation();\n    }\n    this.revenueForm.get('taxPercent').patchValue(0);\n    this.revenueForm.get('tax').patchValue(null);\n    this.revenueForm.get('totalAmount').patchValue(0);\n    let revenueCategoryId = null\n    this.emittedValues = { formValue: { ...this.revenueForm.value, revenueCategoryId }, amount: 0 }\n    this.calcRevenueRemainingAmount.emit(this.emittedValues);\n  }\n  get f() {\n    return this.revenueForm.controls;\n  }\n  getCustomers() {\n    return this.collectService\n      .customersList('')\n      .subscribe((response: any) => {\n        if (response) {\n          this.customers = response.data;\n        }\n      });\n  }\n\n  getCategories() {\n    if (this.data['collectionType'] == 7004) {\n      this.collectService.GetCategories().subscribe((response: any) => {\n        if (response) {\n          this.categories = response.data;\n          console.log(this.categories);\n        }\n      });\n    }\n    else {\n      this.collectService.getCustomerPaymentCategories().subscribe((response: any) => {\n        if (response) {\n          this.categories = response.data;\n        }\n      });\n    }\n  }\n}\n","<div class=\"add-customer-container mb-5\">\n  <div class=\"d-flex align-items-center gap-5\">\n    <h6 class=\"font-18 fw-700 m-0\" ngbAutoFocus>Customer</h6>\n    <p class=\"text-decoration-underline blue-clr cursor-pointer\" (click)=\"searchForCustomer()\">Search for a Customer</p>\n    <div class=\"customer-info\">{{revenueForm.get('customerName')?.value || 'Customer Name'}}</div>\n    <div class=\"customer-info\">{{revenueForm.get('mobile')?.value || 'Mobile'}}</div>\n  </div>\n  <ng-container *ngIf=\"f['customerName']?.['errors']\">\n    <ng-container *ngIf=\"f['customerName']?.invalid && f['customerName']?.touched || f['customerName']?.dirty\">\n      <span class=\"text-danger font-14 fw-500\" *ngIf=\"f['customerName']?.errors?.['required']\">Customer info is required</span>\n    </ng-container>\n  </ng-container>\n</div>\n\n<form [formGroup]=\"revenueForm\">\n  <!--{{revenueForm.value| json}}-->\n  <div class=\"row\">\n    <div class=\"col\">\n      <div class=\"form-group\">\n        <label>Payment Category * </label>\n        <ng-select id=\"categoryId\" placeholder=\"Select category\" [items]=\"categories\" bindLabel=\"categoryName\"\n                   bindValue=\"categoryId\" formControlName=\"revenueCategoryId\" (change)=\"chooseCategory($event)\"\n                   (clear)=\"clearCategory($event)\"></ng-select>\n        <ng-container *ngIf=\"f['revenueCategoryId']?.['errors']\">\n          <ng-container *ngIf=\"f['revenueCategoryId']?.invalid && f['revenueCategoryId']?.touched || f['revenueCategoryId']?.dirty\">\n            <span class=\"error\" *ngIf=\"f['revenueCategoryId']?.errors?.['required']\">Input is required</span>\n          </ng-container>\n        </ng-container>\n      </div>\n    </div>\n    <div class=\"col\" *ngIf=\"data.collectionType == 7004\">\n      <label class=\"input-label\">Cost Center</label>\n      <ng-select placeholder=\"Cost Center\"\n                 [items]=\"costCenterList\"\n                 bindLabel=\"costCenterName\" bindValue=\"costCenterId\"\n                 formControlName=\"costCenterId\">\n      </ng-select>\n      <ng-container *ngIf=\"f['costCenterId']?.errors\">\n        <ng-container *ngIf=\"f['costCenterId']?.invalid && f['costCenterId']?.touched || f['costCenterId']?.dirty\">\n          <span class=\"validation-error\" *ngIf=\"f['costCenterId']?.errors['required']\">Input is required</span>\n        </ng-container>\n      </ng-container>\n    </div>\n    <div class=\"col\">\n      <div class=\"form-group\">\n        <label>Amount JOD</label>\n        <input type=\"text\" class=\"form-control\" formControlName=\"amount\" name=\"amount\" placeholder=\"\" [readOnly]=\"!revenueForm.get('revenueCategoryId').value\"\n               (change)=\"calcTotalAmount()\" appDecimalNumber />\n        <ng-container *ngIf=\"f['amount']?.['errors']\">\n          <ng-container *ngIf=\"f['amount']?.invalid && f['amount']?.touched || f['amount']?.dirty\">\n            <span class=\"error\" *ngIf=\"f['amount']?.errors?.['required']\">Input is required</span>\n            <span class=\"error d-block\" *ngIf=\"!revenueForm.get('revenueCategoryId').value\">Select payment category first</span>\n            <span class=\"error\" *ngIf=\"f['amount']?.errors?.['min']\">Can't be zero or negative</span>\n          </ng-container>\n        </ng-container>\n      </div>\n    </div>\n    <div class=\"col\">\n      <div class=\"form-group position-relative\">\n        <label>Tax Amount JOD</label>\n        <input type=\"text\" class=\"form-control bg-gray\" formControlName=\"taxAmount\" placeholder=\"\" readonly />\n        <!--<div class=\"tax-percent\"> {{revenueForm.get('taxPercent').value}} % </div>-->\n      </div>\n    </div>\n    <div class=\"col\">\n      <label class=\"input-label\">Tax Percentage %</label>\n      <ng-select class=\"flex-grow-1 mt-3 mt-md-0\" formControlName=\"tax\"\n                 placeholder=\"Tax Percentage\" [items]=\"taxesList\" (change)=\"handleTaxChange($event)\"\n                 bindLabel=\"text\" bindValue=\"id\">\n        <ng-template ng-option-tmp let-item=\"item\">\n          {{item.text}}%\n        </ng-template>\n        <ng-template ng-label-tmp let-item=\"item\">\n          <ng-container *ngIf=\"item?.text\">\n            {{item.text}}%\n          </ng-container>\n        </ng-template>\n      </ng-select>\n      <validation-error [control]=\"revenueForm.get('tax')\" [errorMessages]=\"{required:'Input is required'}\"></validation-error>\n    </div>\n    <div class=\"col\">\n      <div class=\"form-group\">\n        <label>Total Amount JOD</label>\n        <input type=\"text\" class=\"form-control bg-gray\" formControlName=\"totalAmount\" name=\"totalAmount\" placeholder=\"\" readonly />\n      </div>\n    </div>\n    <div class=\"col-12 mt-2\">\n      <div class=\"form-group\">\n        <label>Note </label>\n        <input type=\"text\" class=\"form-control bg-gray\" placeholder=\"Note\" readonly formControlName=\"note\" name=\"note\">\n      </div>\n    </div>\n    <div class=\"col-12 mt-2\" *ngIf=\"f['revenueCategoryId'].value && f['tax'].value\">\n      <div class=\"d-flex align-items-center gap-2\">\n        <input type=\"checkbox\" id=\"nta\" class=\"checkbox\" (change)=\"handleNoAmountChange($event)\" [(ngModel)]=\"noTotalAmount\" [ngModelOptions]=\"{standalone: true}\" />\n        <label for=\"nta\">No Total Amount</label>\n      </div>\n    </div>\n  </div>\n</form>\n","import { Component, EventEmitter, Input, Optional, Output } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NgbActiveModal, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { CommonService } from '../../../../../services/common.service';\nimport { SharedService } from '../../../../../services/shared.service';\nimport { ModalPayDoneComponent } from '../modal-payment/modal-pay-done/modal-pay-done.component';\nimport { CollectService } from '../services/collect.service';\nimport { ConfirmPaymentModalComponent } from './confirm-payment-modal/confirm-payment-modal.component';\nimport { DecimalPipe } from '@angular/common';\nimport { SubjectService } from '../../../../../services/subject.service';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { Observable, Subscription } from 'rxjs';\n@Component({\n  selector: 'app-payment-modal',\n  templateUrl: './payment-modal.component.html',\n  styleUrls: ['./payment-modal.component.scss']\n})\nexport class PaymentModalComponent {\n  selected: number = 0;\n  totalCash: number = 0;\n  totalCheque: number = 0;\n  totalVisa: number = 0;\n  totalMaster: number = 0;\n  totalExpress: number = 0;\n  totalAccount: number = 0;\n  totalBankTransfer: number = 0;\n  totalPledge: number = 0;\n  totalVoucher: number = 0;\n  remainingAmount: number = 0\n  grandAmount: number = 0\n  paymentSum = 0;\n\n  //USING THIS PROPERTY FOR SPAREPART AND SERVICE SALES ORDER TO CHECK WHETHER INOVICE TYPE IS CASH OR CREDIT\n  sparePartInvoiceType = '';\n  remainingAmountMessage = '';\n\n  isCash: boolean = true;\n  isCheque: boolean;\n  isVisa: boolean;\n  isMaster: boolean;\n  isExpress: boolean;\n  isBankTransfer: boolean = true;\n  isBankPledge: boolean = true;\n  isAccount: boolean;\n  touched: boolean;\n  isReset: boolean;\n  isPending: boolean;\n\n  paymentTabItem = {\n    isCash: true, isCheque: false, isVisa: false, isMaster: false,\n    isExpress: false, isAccount: false, bankTransfer: false, bankPledge: false\n  }\n  terminals = [];\n  banks = [];\n  paymentTypes = [];\n  cardsList = [];\n  cardCollectedAmount = [];\n  formGroups: FormGroup[] = [];\n\n  registers: any;\n  registerCurrencies: any;\n  jodCurrencyOnly: any;\n  details: any;\n  paymentFormsValue: any;\n  otherData: any;\n  revenueFormValue;\n  customerPaymentFormValue;\n  onAccountData;\n  ordersCollectionForm: FormGroup\n  @Input() detailsItem;\n  @Input() multiCollection;\n  @Input() collectionType;\n  @Output() sendtoLoadData = new EventEmitter();\n  subscription = new Subscription();\n  noTotalAmountFromOrAndCp = false;\n  otherRevenueData;\n  //REVERSE PROPS START\n  isReverse = false;\n  isRefund = false;\n  collectedOrderDetails;\n  reversedAmount = 0;\n  totalCollectedAmountByPaymentTypeList = [];\n  //REVERSE PROPS END\n  constructor(private collectService: CollectService,\n    public sharedService: SharedService,\n    @Optional() public activeModal: NgbActiveModal,\n    private modalService: NgbModal,\n    private _commonService: CommonService,\n    private _decimalPipe: DecimalPipe,\n    private _subjectService: SubjectService,\n    private _spinner: NgxSpinnerService,\n    private fb: FormBuilder) {\n  }\n  ngOnInit() {\n    // Reverse Case Start\n    this.isReverse = this.detailsItem?.reverse;\n    this.isRefund = this.detailsItem?.refund;\n    if (this.isReverse || this.isRefund) {\n      this.collectionType = this.detailsItem.collectionType;\n    }\n    // Reverse Case End\n    let sub = this._subjectService.cashierNote.subscribe(note => {\n      this.ordersCollectionForm.get('cashierNotes').setValue(note);\n    })\n    this.subscription.add(sub);\n    this.getRegisterDetails();\n    this.getTerminalProviders();\n    this.getBanks();\n    this.getRegisterPaymentTypesForOrders();\n    this.initForm();\n    this.sparePartInvoiceType = this.detailsItem?.invoiceType?.toLowerCase();\n    this.onAccountData = { ...this.detailsItem, collectionType: this.collectionType };\n    this.otherData = { ...this.detailsItem, collectionType: this.collectionType };\n    this.otherRevenueData = { ...this.otherRevenueData, collectionType: this.collectionType };\n    if (this.detailsItem && !this.isReverse && !this.isRefund) {\n      // FOR MULTI COLLECTION\n      if (this.detailsItem['isMultiCollect']) {\n        this.sparePartInvoiceType = this.detailsItem.invoiceType;\n        this.grandAmount = this.detailsItem['grandAmount'];\n        this.remainingAmount = this.detailsItem['remainingAmount'];\n        this.ordersCollectionForm.get('orderNo').setValue(this.detailsItem['orderNo']);\n        localStorage.setItem('pmcn', this.detailsItem?.customerName);\n      }\n      else {\n        //FOR SINGLE COLLECTION\n        localStorage.setItem('pmcn', this.detailsItem?.customer?.customerName || this.detailsItem?.customerName);\n        if (this.collectionType == 7002) {\n          this.GetDirectPaymentSalesOrdersDetails();\n        } else if (this.collectionType == 7001) {\n          this.GetServicesSalesOrderDetails();\n        } else if (this.collectionType == 7003) {\n          this.GetSparePartsSalesOrdersDetails();\n        }\n        else if (this.collectionType == 7006) {\n          this.getBanksUnderTakingSalesOrdersDetails();\n        } else if (this.collectionType == 7007) {\n          this.getInhouseFinancingOrderDetails();\n        }\n        else if (this.collectionType == 7008) {\n          this.getPnOrderDetails();\n        }\n        else if (this.collectionType == 7009) {\n          this.getTransferFeesOrderDetails();\n        }\n      }\n    }\n    // Clear POS Machine Collection Flag Because New Collection Process started;\n    localStorage.removeItem('pos_mc');\n    // Clear POS machine FormGroup isReset Flag Because New Collection Process started;\n    localStorage.removeItem('isMachineFgReset');\n  }\n  handleReverse() {\n    this.grandAmount = this.detailsItem.collectedAmount;\n    this.remainingAmount = this.detailsItem.collectedAmount;\n    this.paymentSum = this.detailsItem.collectedAmount;\n    this.collectedOrderDetails = this.detailsItem.collectedOrderDetails;\n    this.ordersCollectionForm.get('orderNo').setValue(this.detailsItem['orderNo']);\n    this.detailsItem.minAmount = 0;\n    localStorage.setItem('pmcn', this.detailsItem?.customerName);\n    this.bindCollectedValueToPaymentType(this.collectedOrderDetails?.ordersCashCollections, 'cash');\n    this.bindCollectedValueToPaymentType(this.collectedOrderDetails?.ordersChequeCollection, 'cheque');\n    this.bindCollectedValueToPaymentType(this.collectedOrderDetails?.bankPledge, 'bankPledge');\n    this.bindCollectedValueToPaymentType(this.collectedOrderDetails?.bankTransfere, 'bankTransfer');\n    this.bindCollectedValueToPaymentType(this.collectedOrderDetails?.ordersCardsCollection, 'card');\n  }\n  bindCollectedValueToPaymentType(values, type) {\n    if (!values?.length)\n      return\n    const getImageSavedPath = (URL: string) => {\n      if (URL) {\n        let path = URL.split('/').slice(-3).join('/');\n        return path;\n      }\n      else return '';\n    }\n    if (type == 'cash') {\n      let data = values.map(x => {\n        return {\n          currencyId: x?.currencyId,\n          collectedAmount: x?.collectedAmount,\n          vjod: x?.collectedAmountJOD,\n          sameCustomer: x?.cashPayerName == this.detailsItem.customerName,\n          cashPayerName: x?.cashPayerName,\n          rate: x?.rate,\n          isDisabled: true,\n        }\n      })\n      let cash = { cashArray: data, }\n      this.paymentFormsValue = { ...this.paymentFormsValue, ...{ cash } };\n      let amount = this.sumCollectedAmounts(data, 'vjod');\n      this.totalCash = amount;\n      this.totalCollectedAmountByPaymentTypeList.push({ id: 27001, amount })\n    }\n    else if (type == 'cheque') {\n      let data = values.map(x => {\n        return {\n          isChecked: x?.chequeDrawerName == this.detailsItem.customerName,\n          chequeCollectionJod: x?.collectedAmount,\n          currencyId: x?.currencyId,\n          chequeNo: x?.chequeNo,\n          chequeDate: new Date(x?.chequeDate),\n          bankId: x?.bankId,\n          chequeDrawerName: x?.chequeDrawerName,\n          chequeImage: getImageSavedPath(x?.chequeImage),\n          attachment: x?.chequeImage, //Req\n          financeApprovalAttachment: getImageSavedPath(x?.financeApprovalAttachment),\n          tempFinanceAttachment: x?.financeApprovalAttachment, // Req\n          vjod: x?.chequeCollectionJod,\n          rate: x?.rate ?? '',\n        }\n      })\n      let cheque = { chequeArray: data, }\n      this.paymentFormsValue = { ...this.paymentFormsValue, ...{ cheque } };\n      let amount = this.sumCollectedAmounts(data, 'vjod');\n      this.totalCheque = amount;\n      this.totalCollectedAmountByPaymentTypeList.push({ id: 27002, amount })\n    }\n    else if (type == 'bankPledge') {\n      let data = values.map(x => {\n        return {\n          pledgeAmountJod: x?.pledgeAmountJod,\n          bankPledgeDate: this._commonService.transformDate(x?.bankPledgeDate),\n          bankId: x?.bankId,\n          bankPledgeNumber: x?.bankPledgeNumber,\n          pledgeAttachment: getImageSavedPath(x?.pledgeAttachment),\n          attachment: x?.pledgeAttachment,\n          currencyId: 9001,\n          isNew: false,\n        }\n      })\n      let bankPledge = { pledgeArray: data, }\n      this.paymentFormsValue = { ...this.paymentFormsValue, ...{ bankPledge } };\n      let amount = this.sumCollectedAmounts(data, 'pledgeAmountJod');\n      this.totalPledge = amount;\n      this.totalCollectedAmountByPaymentTypeList.push({ id: 27005, amount })\n    }\n    else if (type == 'bankTransfer') {\n      let data = values.map(x => {\n        return {\n          sameCustomer: x?.cardPayerName == this.detailsItem.customerName,\n          paidAmountJod: x?.paidAmountJod,\n          transfereDate: this._commonService.transformDate(x?.transfereDate),\n          markaziaBankAccountId: x?.markaziaBankAccountId,\n          transfereReference: x?.transfereReference,\n          transfereAttachment: getImageSavedPath(x?.transfereAttachment),\n          attachment: x?.transfereAttachment,\n          cardPayerName: x?.cardPayerName,\n          currencyId: 9001,\n        }\n      })\n      let bankTransfer = { bankArray: data, }\n      this.paymentFormsValue = { ...this.paymentFormsValue, ...{ bankTransfer } };\n      let amount = this.sumCollectedAmounts(data, 'paidAmountJod');\n      this.totalBankTransfer = amount;\n      this.totalCollectedAmountByPaymentTypeList.push({ id: 27006, amount })\n    }\n    else if (type == 'card') {\n      this.cardsList.forEach((x, index) => {\n        let cardType = values.find(y => y.paymentCardTypeId == x.paymentTypeId);\n        if (!cardType) {\n          let obj = { paymentCardTypeId: x.paymentTypeId }\n          values.push(obj)\n        }\n      });\n      this.formGroups = [];\n      let cards = {};\n      values.forEach(card => {\n        if (!cards[card?.paymentCardTypeId]) {\n          cards[card?.paymentCardTypeId] = { items: [] }\n        }\n        cards[card?.paymentCardTypeId].items.push(card);\n      })\n      for (let key in cards) {\n        const formGroup: FormGroup = this.fb.group({ card: this.fb.array([]) });\n        let cardArray = formGroup.get('card') as FormArray;\n        let cardItems = cards[key]?.items;\n        let amount = 0\n        cardItems.forEach((x, index) => {\n          if (x?.cardCollectionJod > 0) {\n            let fg: FormGroup = this.fb.group({\n              isChecked: x?.cardPayerName == this.detailsItem.customerName,\n              cardCollectionJod: [x?.cardCollectionJod, [Validators.min(0.0000000000000001), Validators.required]],\n              machineReceiptNumber: [x?.machineReceiptNumber, [Validators.pattern('^[0-9]*$')]],\n              cardTerminalProviderId: [x?.cardTerminalProviderId, [Validators.required]],\n              machineID: [x?.machineID, [Validators.required, Validators.pattern('^[a-zA-Z0-9 ]*$')]],\n              cardPayerName: [x?.cardPayerName, [Validators.required]],\n              cardLast4Digits: [x?.cardLast4Digits, [Validators.required, Validators.pattern('^[0-9]{4}$')]],\n              paymentCardTypeId: x?.paymentCardTypeId,\n              currencyId: [x?.currencyId, [Validators.required]],\n              rate: x?.rate,\n              vjod: x?.cardCollectionJod,\n              isReversed: false,\n              isNew: (+x?.cardCollectionJod) > 0 ? false : true,\n              lineNew: false,\n            })\n            cardArray.push(fg);\n            amount += +(x?.cardCollectionJod || 0);\n            if (cardItems.length - 1 == index) {\n              this.totalCollectedAmountByPaymentTypeList.push({ id: x?.paymentCardTypeId, amount });\n              this.cardCollectedAmount.push({ paymentTypeId: x?.paymentCardTypeId, amount });\n              this.totalVisa += amount;\n              this.totalVisa = +(this.totalVisa.toFixed(3));\n            }\n          }\n        })\n        this.formGroups.push(formGroup);\n      }\n    }\n  }\n  updateCollectedAmountReverse() {\n    this.paymentTypes.forEach(type => {\n      let find = this.totalCollectedAmountByPaymentTypeList.find(item => item.id == type.paymentTypeId);\n      if (find)\n        type.currentAmount = find.amount;\n    })\n  }\n  sumCollectedAmounts(value, key) {\n    return value.reduce((acc, cur) => {\n      return acc += +(cur[key]);\n    }, 0)\n  }\n  chooseTab(val, cat) {\n    // Check if collection via POS machine then, don't allow user to navigate to other tab untill the collection is done via Machine\n    let collectedViaPOSMachine = localStorage.getItem('pos_mc');\n    let posMachine = this.cardCollectedAmount.length && this.cardCollectedAmount.find(x => x.paymentTypeId == 13013);\n    if (posMachine && (+posMachine?.amount) > 0 && !collectedViaPOSMachine) {\n      this.remainingAmountMessage = 'Complete the payment process via POS machine or reset to collect via other payment methods.';\n      setTimeout(() => { this.remainingAmountMessage = ''; }, 5000)\n      return;\n    }\n    // THIS CONDITION ONLY WOKS IN MULTI COLLECT\n    if (!this.touched && this.detailsItem?.['isMultiCollect'] && this.paymentSum > 0) {\n      this.remainingAmountMessage = 'You can collect order using single payment type only.';\n      setTimeout(() => { this.remainingAmountMessage = ''; }, 5000)\n      return;\n    }\n    if (!this.noTotalAmountFromOrAndCp) {\n      // noTotalAmountFromOrAndCp false means when the total amount is passed from other revenue or customer payment\n      if (this.touched || (this.paymentSum > this.remainingAmount)) {\n        if (this.paymentSum > this.remainingAmount) {\n          this.remainingAmountMessage = 'Collected amount exceeds the remaining amount,please correct your payment.';\n          setTimeout(() => { this.remainingAmountMessage = ''; }, 5000)\n        }\n        return;\n      }\n    }\n    this.selected = val;\n    this.remainingAmountMessage = '';\n    //Object.keys(this.paymentTabItem).forEach(v => this.paymentTabItem[v] = false);\n    this.paymentTabItem[val] = true;\n  }\n  getAmount(event, component, paymentTypeId?) {\n    if (component == 'cash') {\n      this.totalCash = event['amount'];\n      this.updateCollectedAmount(27001, event['amount']);\n    }\n    else if (component == 'cheque') {\n      this.totalCheque = event['amount'];\n      this.updateCollectedAmount(27002, event['amount']);\n    }\n    else if (component == 'card') {\n      let index = this.cardCollectedAmount.findIndex(x => x.paymentTypeId == paymentTypeId);\n      if (index >= 0) {\n        this.cardCollectedAmount[index].amount = event['amount'];\n      } else {\n        this.cardCollectedAmount.push({ paymentTypeId, amount: event['amount'] })\n      }\n      let totalCardCollection = +(+this.cardCollectedAmount.reduce((acc, obj) => acc + (obj.amount), 0)).toFixed(3);\n      this.totalVisa = totalCardCollection;\n      this.updateCollectedAmount(paymentTypeId, event['amount']);\n    }\n    else if (component == 'bankTransfer') {\n      this.totalBankTransfer = event['amount'];\n      this.updateCollectedAmount(27006, event['amount']);\n    }\n    else if (component == 'bankPledge') {\n      this.totalPledge = event['amount'];\n      this.updateCollectedAmount(27005, event['amount']);\n    }\n    else if (component == 'voucher') {\n      this.totalVoucher = event['amount'];\n      this.updateCollectedAmount(27007, event['amount']);\n    }\n    this.paymentSum = +(this.totalCash + this.totalCheque + this.totalVisa + this.totalBankTransfer + this.totalPledge + this.totalVoucher).toFixed(3);\n    // The amount remains after collection by different payment methods\n    this.otherData = { ...this.otherData, remainingAmountAfterSomeCollection: this._decimalPipe.transform((this.remainingAmount - this.paymentSum), '2.3-3') };\n\n    //this.paymentSum = +(this.totalCash + this.totalCheque + this.totalVisa + this.totalMaster + this.totalExpress + this.totalBankTransfer + this.totalPledge).toFixed(3);\n    // IF LESS THAN REMAINING AMOUNT\n    if (!this.isReset) {\n      if (this.collectionType != 7002) {\n        if (this.paymentSum == this.remainingAmount) {\n          this.remainingAmountMessage = '';\n        }\n      }\n    }\n    else {\n      this.remainingAmountMessage = '';\n    }\n    if (this.paymentSum > this.remainingAmount) {\n      this.otherData = { ...this.otherData, amountExceeded: true }\n    }\n    else {\n      this.otherData = { ...this.otherData, amountExceeded: false };\n    }\n    if (this.noTotalAmountFromOrAndCp) {\n      this.otherRevenueData = { ...this.otherRevenueData, totalCollectedAmount: this.paymentSum }\n      this.otherData = { ...this.otherData, amountExceeded: false };\n    }\n  }\n  updateCollectedAmount(id, amount) {\n    let itemIndex, updateItem;\n    itemIndex = this.paymentTypes.findIndex(x => x.paymentTypeId == id);\n    updateItem = this.paymentTypes[itemIndex];\n    updateItem.currentAmount = amount;\n    this.paymentTypes.splice(itemIndex, 1, updateItem)\n  }\n  getFormValue(event, component) {\n    let reset = event['reset'];\n    this.isReset = reset;\n    if (component == 'cash') {\n      reset ? delete this.paymentFormsValue['cash'] : this.paymentFormsValue = { ...this.paymentFormsValue, cash: event.values }\n      this.touched = event['touched'] || false;\n    }\n    else if (component == 'cheque') {\n      reset ? delete this.paymentFormsValue['cheque'] : this.paymentFormsValue = { ...this.paymentFormsValue, cheque: event.values }\n      this.touched = event['touched'] || false;\n    }\n    else if (component == 'card') {\n      this.touched = event['touched'] || false;\n    }\n    else if (component == 'bankTransfer') {\n      reset ? delete this.paymentFormsValue['bankTransfer'] : this.paymentFormsValue = { ...this.paymentFormsValue, bankTransfer: event.values }\n      this.touched = event['touched'] || false;\n    }\n    else if (component == 'bankPledge') {\n      reset ? delete this.paymentFormsValue['bankPledge'] : this.paymentFormsValue = { ...this.paymentFormsValue, bankPledge: event.values }\n      this.touched = event['touched'] || false;\n    }\n    else if (component == 'voucher') {\n      reset ? delete this.paymentFormsValue['voucher'] : this.paymentFormsValue = { ...this.paymentFormsValue, voucher: event.values }\n      this.touched = event['touched'] || false;\n    }\n    if (event['submit']) {\n      if (this.collectionType != 7001 && this.collectionType != 7002 && this.collectionType != 7003 && this.collectionType != 7008) {\n        if (this.remainingAmount == this.paymentSum) {\n          this.confirmPaymentModal();\n        }\n        else if (this.paymentSum > this.remainingAmount) {\n          this.remainingAmountMessage = `Collected amount exceeds the remaining amount (${this._decimalPipe.transform((this.remainingAmount - this.paymentSum), '2.3-3')}) JOD, please correct your payment.`;\n        }\n        else {\n          this.remainingAmountMessage = 'Collected amount must be equal to remaining amount';\n        }\n        setTimeout(() => { this.remainingAmountMessage = ''; }, 5000)\n      }\n      else {\n        if (this.paymentSum > this.remainingAmount) {\n          this.remainingAmountMessage = `Collected amount exceeds the remaining amount (${this._decimalPipe.transform((this.remainingAmount - this.paymentSum), '2.3-3')}) JOD, please correct your payment.`;\n        }\n        else {\n          if (this.paymentSum < this.detailsItem?.minAmount) {\n            this.remainingAmountMessage = `Minimum ${this.detailsItem.minAmount} is required`\n          }\n          // WILL WORK ONLY IN CASE OF SERVICE AND SPAREPARTS \n          else if (this.paymentSum < this.remainingAmount && this.detailsItem?.minAmount == 0 && this.collectionType != 7002) {\n            this.remainingAmountMessage = 'Collected amount must be equal to remaining amount';\n          }\n          else {\n            this.confirmPaymentModal();\n          }\n        }\n        setTimeout(() => { this.remainingAmountMessage = ''; }, 5000)\n      }\n    }\n  }\n  closeModal() {\n    let colllectedViaMachine = JSON.parse(localStorage.getItem('pos_mc'));\n    if (colllectedViaMachine) {\n      return;\n    }\n    if (this.activeModal)\n      this.activeModal.close();\n  }\n  ngOnDestroy() {\n    localStorage.removeItem('pmcn');\n    localStorage.removeItem('bpUploadedFiles');\n  }\n  initForm() {\n    this.ordersCollectionForm = this.fb.group({\n      orderCollectionType: [this.collectionType],\n      orderNo: 0,\n      isReplace: [false],\n      cashierNotes: [''],\n    })\n    if (this.collectionType == 7008) {\n      this.ordersCollectionForm.addControl('pnBoogkNotesIds', new FormControl(this.detailsItem?.pnBookNotesIds || ''));\n      this.ordersCollectionForm.addControl('earlysettlement', new FormControl(this.detailsItem?.earlysettlement));\n      if (!this.detailsItem?.pnBookNotesIds)\n        this.ordersCollectionForm.addControl('amountToPay', new FormControl(this.detailsItem?.grandAmount))\n    }\n  }\n  getRegisterPaymentTypesForOrders() {\n    this.collectService.getRegisterPaymentTypesForOrders(this.sharedService.getRegister.registerObj?.id, this.collectionType).subscribe(response => {\n      let data = response['data']\n      // Certain condition will work only is case of collection of direct payment.\n      //We are doing here show and hide payment collection type on the base of flag 'In-House' or 'Cash'.\n      let flagType = this.collectionType == 7002 && this.detailsItem?.flag?.toLowerCase();\n      if (this.collectionType == 7002 && flagType == 'in-house') {\n        this.selected = 27002;\n        this.paymentTypes = data.map(x => {\n          return { ...x, show: x.paymentTypeId == 27002 && true || false }\n        });\n      }\n      else {\n        this.paymentTypes = data.map(x => { return { ...x, show: true } });\n        this.cardsList = this.paymentTypes.filter(x => x.cat == 2); // 2 means cards type and 1 means other payment type. \n        if (this.cardsList.length > 0) {\n          for (let i = 0; i < this.cardsList.length; i++) {\n            const formGroup: FormGroup = this.fb.group({\n              card: this.fb.array([])\n            });\n            this.formGroups.push(formGroup);\n          }\n        }\n        let invoiceTypes = ['credit', 'internal', 'tmc'];\n        if (invoiceTypes.includes(this.sparePartInvoiceType) && (this.collectionType == 7003 || this.collectionType == 7001)) {\n          this.paymentTypes = this.paymentTypes.filter(x => x.paymentTypeId == 27004);\n          //Show grand amount as collected amount in case of sparepart order type is CREDIT OR INTERNAL\n          this.paymentTypes[0].currentAmount = this.detailsItem?.grandAmount || this.detailsItem?.order?.grandAmount;\n        }\n        else {\n          this.paymentTypes = this.paymentTypes.filter(x => x.paymentTypeId != 27004);\n        }\n        this.selected = this.paymentTypes[0]?.paymentTypeId;\n      }\n      if (this.isReverse || this.isRefund) {\n        this.handleReverse();\n        this.updateCollectedAmountReverse();\n      }\n    })\n  }\n  getBanks() {\n    this.collectService.getLookupsById(11).subscribe((response: any) => {\n      this.banks = response.data.map((x) => {\n        return {\n          id: x.id,\n          name: x.name[0].lookupName,\n        }\n      })\n    });\n  }\n  getTerminalProviders() {\n    this.collectService.getTerminalProviders().subscribe((response: any) => {\n      this.terminals = response.data.map(x => {\n        return {\n          id: x.providerId,\n          name: x.providerName,\n        }\n      })\n    })\n  }\n  //THIS FUNCTION WILL RUN IN REVENE AND CUSTOMER PAYMENT COLLECTION IN BOTH\n  calcRemainingAmount(event) {\n    this.noTotalAmountFromOrAndCp = event['noTotalAmount'];\n    let value = event['formValue'];\n    if (this.noTotalAmountFromOrAndCp && value?.totalAmount > 0 && value?.amount > 0) {\n      this.remainingAmount = this.paymentSum;\n      this.generateRevenueFormValue(event);\n    }\n    else if (this.noTotalAmountFromOrAndCp) {\n      return;\n    }\n    else {\n      this.remainingAmount = +(+event['amount']).toFixed(3);\n      this.otherData = { ...this.otherData, remainingAmount: this.remainingAmount };\n      this.generateRevenueFormValue(event);\n    }\n    // This code will execute only if we select or change the customer and we have total amount of revenue and customer payment.\n    //if (event?.formValue?.totalAmount > 0 && event?.fromCustomer) {\n    //let value = event?.formValue;\n    //console.log(value);\n    //}\n  }\n  generateRevenueFormValue(event) {\n    console.log(event);\n    if (this.collectionType == 7004) {\n      this.revenueFormValue = event['formValue'];\n      this.revenueFormValue = {\n        ...this.revenueFormValue,\n        totalAmount: (+this.revenueFormValue['totalAmount']).toFixed(3),\n        amount: (+this.revenueFormValue['amount']).toFixed(3),\n        //tax: this._commonService.replaceValue(this.revenueFormValue['tax'], ',', ''),\n        tax: this.revenueFormValue['tax'],\n      }\n    }\n    else {\n      let formValues = event['formValue'];\n      this.customerPaymentFormValue = { ...formValues, customerPaymentCategoryId: formValues['revenueCategoryId'] }\n      this.customerPaymentFormValue = {\n        ...this.customerPaymentFormValue,\n        amount: (+this.customerPaymentFormValue['amount']).toFixed(3),\n        totalAmount: (+this.customerPaymentFormValue['totalAmount']).toFixed(3)\n      }\n    }\n  }\n\n  confirmPaymentModal() {\n    const modalRef = this.modalService.open(ConfirmPaymentModalComponent, { centered: true, backdrop: 'static' })\n    modalRef.componentInstance.data = {\n      collectionType: this.collectionType,\n      reverse: this.isReverse,\n      refund: this.isRefund,\n      remainingAmount: (this.remainingAmount - this.paymentSum)\n    }\n    modalRef.result.then((resolve) => {\n      this.isPending = true;\n      this.collectPayments();\n    }, reject => { })\n  }\n  //Collected amount less than mimum allowed amount\n  collectPayments() {\n    this._spinner.show();\n    let cardsArray = [];\n    let markaziaVouchers = [];\n    this.formGroups.forEach(form => {\n      cardsArray.push(...form.getRawValue().card)\n    })\n    //Transform interger values to string because backend does not support some integer values that's why conversion to string needed\n    if (this.paymentFormsValue?.cheque?.chequeArray?.length > 0)\n      this.paymentFormsValue.cheque.chequeArray = [...this.paymentFormsValue.cheque?.chequeArray.map(x => { return { ...x, chequeNo: x.chequeNo.toString() } })]\n    if (this.paymentFormsValue?.bankTransfer?.bankArray?.length > 0)\n      this.paymentFormsValue.bankTransfer.bankArray = [...this.paymentFormsValue.bankTransfer?.bankArray?.map(x => { return { ...x, transfereReference: x.transfereReference.toString() } })]\n    if (this.paymentFormsValue?.bankPledge?.pledgeAmountJod > 0)\n      this.paymentFormsValue.bankPledge = { ...this.paymentFormsValue?.bankPledge, bankPledgeNumber: this.paymentFormsValue?.bankPledge?.bankPledgeNumber.toString() }\n    if (cardsArray?.length > 0) {\n      const cards = cardsArray.filter(x => x.cardCollectionJod).map(y => {\n        return {\n          ...y,\n          machineReceiptNumber: y?.machineReceiptNumber?.toString(),\n          cardLast4Digits: y?.cardLast4Digits?.toString()\n        }\n      })\n      cardsArray = [...cards];\n      //  cardsArray = [...cardsArray.map(x => { return { ...x, machineReceiptNumber: x?.machineReceiptNumber?.toString(), cardLast4Digits: x?.cardLast4Digits?.toString() } })]\n    }\n    if (this.paymentFormsValue?.voucher?.voucherArray?.length > 0) {\n      markaziaVouchers = this.paymentFormsValue?.voucher?.voucherArray.map(x => {\n        return {\n          amountJod: x.amountJod,\n          voucherNumber: x.voucherSequence,\n        }\n      })\n    }\n    let obj = {\n      //Added object properties conditionally\n      ordersCollection: this.ordersCollectionForm.value,\n      ...(this.paymentFormsValue?.cash?.cashArray[0].collectedAmount > 0 && { ordersCashCollections: this._commonService.roundValue(this.paymentFormsValue?.cash?.cashArray, 'collectedAmount') }),\n      ...(this.paymentFormsValue?.cheque?.chequeArray?.length > 0 && { ordersChequeCollection: this._commonService.roundValue(this.paymentFormsValue.cheque?.chequeArray, 'chequeCollectionJod') }),\n      ...((this.revenueFormValue?.revenueCategoryId > 0) && { revenueCollection: this.revenueFormValue }),\n      ...((this.customerPaymentFormValue?.customerId > 0 && this.customerPaymentFormValue?.customerPaymentCategoryId > 0) && { customerPaymentCollection: this.customerPaymentFormValue }),\n      ...(cardsArray?.length && { ordersCardsCollection: this._commonService.roundValue(cardsArray, 'cardCollectionJod') }),\n      ...(this.paymentFormsValue?.bankTransfer?.bankArray?.length > 0 && { orderBankTransfereCollections: this._commonService.roundValue(this.paymentFormsValue?.bankTransfer?.bankArray, 'paidAmountJod') }),\n      //...(this.paymentFormsValue?.bankPledge?.pledgeArray?.length > 0 && { ordersBanksPledgeCollectionModel: this._commonService.roundValue(this.paymentFormsValue?.bankPledge?.pledgeArray, 'pledgeAmountJod') }),\n      //...(this.paymentFormsValue?.bankPledge?.pledgeAmountJod > 0 && { ordersBanksPledgeCollectionModel: this._commonService.roundValue(this.paymentFormsValue?.bankPledge, 'pledgeAmountJod') }),\n      ...(this.paymentFormsValue?.voucher?.voucherArray?.length > 0 && { markaziaVouchers }),\n    }\n    // Data mapping for Bank pledge because in reverse case we ha an array but in collection case we have single obj\n    let ordersBanksPledgeCollectionModel;\n    if (this.isReverse || this.isRefund) {\n      let pledgeArray = this.paymentFormsValue?.bankPledge?.pledgeArray;\n      if (pledgeArray?.length) {\n        ordersBanksPledgeCollectionModel = this._commonService.roundValue(pledgeArray, 'pledgeAmountJod');\n        obj['ordersBanksPledgeCollectionModel'] = ordersBanksPledgeCollectionModel;\n      }\n    }\n    else {\n      let pledgeData = this.paymentFormsValue?.bankPledge?.pledgeArray[0];\n      if ((+pledgeData?.pledgeAmountJod) > 0) {\n        ordersBanksPledgeCollectionModel = this._commonService.roundValue(pledgeData, 'pledgeAmountJod');\n        obj['ordersBanksPledgeCollectionModel'] = ordersBanksPledgeCollectionModel;\n      }\n    }\n    console.log(obj);\n    if (!this.isReverse && !this.isRefund) {\n      if (this.collectionType == 7004) {\n        this.collectService.addOtherRevenueOrdersV2(obj).subscribe((response: any) => {\n          if (response.isSuccess) {\n            this.isPending = false;\n            const modalRef = this.modalService.open(ModalPayDoneComponent);\n\n            modalRef.componentInstance.name = 'ok';\n            modalRef.componentInstance.response = response;\n            modalRef.componentInstance.data = { collectionType: this.collectionType };\n            setTimeout(() => {\n              this.sendtoLoadData.emit();\n            }, 2000);\n          } else {\n            this.isPending = false;\n            const modalRef = this.modalService.open(ModalPayDoneComponent);\n            modalRef.componentInstance.name = 'no';\n            modalRef.componentInstance.errors =\n              response.Errors || response.errors;\n            // console.log(error), (this.errorMessage = error.statusText);\n          }\n        },\n          (error: any) => {\n            this.isPending = false;\n            const modalRef = this.modalService.open(ModalPayDoneComponent);\n            modalRef.componentInstance.name = 'no';\n            modalRef.componentInstance.errors = error.error.errors || error.error.Errors;\n          }\n        ).add(() => this._spinner.hide());\n      }\n      else if (this.collectionType == 7005) {\n        this.collectService.addCustomerPaymentOrders(obj).subscribe((response: any) => {\n          if (response.isSuccess) {\n            this.isPending = false;\n            const modalRef = this.modalService.open(ModalPayDoneComponent);\n\n            modalRef.componentInstance.name = 'ok';\n            modalRef.componentInstance.response = response;\n            modalRef.componentInstance.data = { collectionType: this.collectionType };\n            setTimeout(() => {\n              this.sendtoLoadData.emit();\n            }, 2000);\n          } else {\n            this.isPending = false;\n            const modalRef = this.modalService.open(ModalPayDoneComponent);\n            modalRef.componentInstance.name = 'no';\n            modalRef.componentInstance.errors =\n              response.Errors || response.errors;\n            // console.log(error), (this.errorMessage = error.statusText);\n          }\n        },\n          (error: any) => {\n            this.isPending = false;\n            const modalRef = this.modalService.open(ModalPayDoneComponent);\n            modalRef.componentInstance.name = 'no';\n            modalRef.componentInstance.errors = error.error.errors || error.error.Errors;\n          }\n        ).add(() => this._spinner.hide());\n      }\n      else if (this.collectionType == 7008) {\n        this.collectService.collectionOrderV2PNOrder(obj).subscribe((response: any) => {\n          if (response.isSuccess) {\n            this.isPending = false;\n            const modalRef = this.modalService.open(ModalPayDoneComponent);\n            modalRef.componentInstance.data = { collectionType: 7008 }\n            modalRef.componentInstance.name = 'ok';\n            modalRef.componentInstance.response = response;\n            //modalRef.componentInstance.routeName = 'collect';\n            modalRef.componentInstance.notAutoDismiss = true;\n            this.sendtoLoadData.emit();\n          } else {\n            this.isPending = false;\n            const modalRef = this.modalService.open(ModalPayDoneComponent);\n            modalRef.componentInstance.name = 'no';\n            modalRef.componentInstance.errors =\n              response.Errors || response.errors;\n            // console.log(error), (this.errorMessage = error.statusText);\n          }\n        },\n          (error: any) => {\n            this.isPending = false;\n            const modalRef = this.modalService.open(ModalPayDoneComponent);\n            modalRef.componentInstance.name = 'no';\n            modalRef.componentInstance.errors = error.error.errors || error.error.Errors;\n          }\n        ).add(() => this._spinner.hide());\n      }\n      else {\n        // IN CASE OF SINGLE COLLECTION\n        if (!this.detailsItem['isMultiCollect']) {\n          let URL: Observable<any>;\n          if (this.collectionType == 7001)\n            URL = this.collectService.servicesOrdersCollection(obj);\n          else\n            URL = this.collectService.collectionOrderV3(obj);\n          URL.subscribe(response => {\n            if (response.isSuccess) {\n              this.paymentSum = 0;\n              this.openSuccessModal('ok', response);\n              this.sendtoLoadData.emit();\n            } else {\n              this.openSuccessModal('no', response);\n            }\n          }, (error: any) => {\n            this.openSuccessModal('no', error);\n          }).add(() => this._spinner.hide());\n        }\n        // IN CASE OF MULTI COLLECTION \n        else {\n          this.collectService.collectionOrderV2MultiCollect(obj).subscribe(response => {\n            if (response.isSuccess) {\n              this.paymentSum = 0;\n              this.openSuccessModal('ok', response);\n              this.sendtoLoadData.emit();\n            } else {\n              this.openSuccessModal('no', response);\n            }\n          }, (error: any) => {\n            this.openSuccessModal('no', error);\n          }).add(() => this._spinner.hide());\n        }\n      }\n\n    }\n    else if (this.isReverse) {\n      let URL: Observable<any>;\n      obj.ordersCollection.reversedCollectionId = this.detailsItem.orderCollectionId;\n      obj.ordersCollection.corrospondingSessionId = this.detailsItem.corrospondingSessionId;\n      URL = this.collectService.reverseCollection(obj);\n      URL.subscribe({\n        next: response => {\n          if (response.isSuccess) {\n            this.openSuccessModal('ok', response);\n            this.sendtoLoadData.emit();\n          } else {\n            this.openSuccessModal('no', response);\n          }\n        }, error: error => {\n          this.openSuccessModal('no', error);\n        }\n      }).add(() => this._spinner.hide());\n    }\n    else if (this.isRefund) {\n      let URL: Observable<any>;\n      obj.ordersCollection.reversedCollectionId = this.detailsItem.orderCollectionId;\n      const currentSesssionID = +localStorage.getItem('current_session');\n      obj.ordersCollection.corrospondingSessionId = currentSesssionID;\n      URL = this.collectService.refundReciptsForAllOrders(obj);\n      URL.subscribe({\n        next: response => {\n          if (response.isSuccess) {\n            this.openSuccessModal('ok', response);\n            this.sendtoLoadData.emit();\n          } else {\n            this.openSuccessModal('no', response);\n          }\n        }, error: error => {\n          this.openSuccessModal('no', error);\n        }\n      }).add(() => this._spinner.hide());\n    }\n  }\n  openSuccessModal(name, response?, error?) {\n    this.isPending = false;\n    const modalRef = this.modalService.open(ModalPayDoneComponent);\n    modalRef.componentInstance.name = name;\n    if (response?.error) {\n      modalRef.componentInstance.errors = response.error['errors'] || response.error['Errors'];\n      return;\n    }\n    if ((this.collectionType == 7001 || this.collectionType == 7002 || this.collectionType == 7003) && !this.detailsItem['isMultiCollect']) {\n      let receipt, invoice, summary;\n      if (response.data.statusObj[0].lookupId == 10005) //partial status\n        receipt = response.data?.receipt;\n      else if (response.data.statusObj[0].lookupId == 10004) //collected status\n      {\n        receipt = response.data?.receipt;\n        invoice = response.data?.invoices;\n        summary = response.data?.summaryInvoice;\n      }\n      modalRef.componentInstance.data = {\n        collectionType: this.collectionType,\n        status: response.data.statusObj[0].lookupId, invoice, receipt, summary,\n        reverse: this.isReverse,\n        refund: this.isRefund,\n      }\n    }\n    else if (this.detailsItem['isMultiCollect']) {\n      modalRef.componentInstance.data = {\n        collectionType: this.collectionType,\n        isMultiCollect: this.detailsItem['isMultiCollect'],\n      }\n    }\n    else {\n      modalRef.componentInstance.data = {\n        collectionType: this.collectionType,\n        invoices: response.data,\n        reverse: this.isReverse,\n        refund: this.isRefund,\n      }\n    }\n    if (response) {\n      if (response.error) {\n        modalRef.componentInstance.errors = response.error['errors'];\n      }\n      else {\n        modalRef.componentInstance.response = response;\n      }\n    }\n    else {\n      modalRef.componentInstance.errors = error.error.errors || error.error.Errors;\n    }\n\n  }\n\n  GetServicesSalesOrderDetails() {\n    // INCASE OF RETURN ORDER \n    if (this.detailsItem?.isFromReturn) {\n      this.remainingAmount = this.detailsItem?.grandAmount;\n      this.grandAmount = this.detailsItem?.grandAmount;\n      this.ordersCollectionForm.controls['orderNo'].setValue(this.detailsItem?.servicesSalesOrderNo);\n      this.ordersCollectionForm.get('isReplace').setValue(true);\n    }\n    else {\n      const id = this.detailsItem.servicesSalesOrderNo || this.detailsItem.order.servicesSalesOrderNo;\n      this.collectService.GetServicesSalesOrderDetails(id).subscribe((response: any) => {\n        if (response) {\n          this.details = response.data;\n          if (this.sparePartInvoiceType !== 'credit' && this.sparePartInvoiceType !== 'internal')\n            this.remainingAmount = this.details.order.remainingAmount;\n          else\n            this.remainingAmount = 0;\n          this.grandAmount = this.details.order.grandAmount;\n          this.ordersCollectionForm.controls['orderNo'].setValue(this.details.order.servicesSalesOrderNo)\n        }\n      });\n    }\n  }\n\n  GetDirectPaymentSalesOrdersDetails() {\n    const id = this.detailsItem.directPaymentSalesOrderOpportunityNo || this.detailsItem.order.directPaymentSalesOrderOpportunityNo;\n    this.collectService.GetDirectPaymentSalesOrdersDetails(id).subscribe((response: any) => {\n      if (response) {\n        this.details = response.data;\n        this.remainingAmount = this.details.order.remainingAmount;\n        this.grandAmount = this.details.order.grandAmount;\n        this.ordersCollectionForm.controls['orderNo'].setValue(this.details.order.directPaymentSalesOrderOpportunityNo)\n      }\n    });\n  }\n\n  GetSparePartsSalesOrdersDetails() {\n    // INCASE OF RETURN ORDER \n    if (this.detailsItem?.isFromReturn) {\n      //Show remaining amount zero(0) in case of sparepart order type is CREDIT\n      if (this.sparePartInvoiceType !== 'credit' && this.sparePartInvoiceType !== 'internal')\n        this.remainingAmount = this.detailsItem?.grandAmount;\n      else\n        this.remainingAmount = 0;\n      this.grandAmount = this.detailsItem?.grandAmount;\n      this.ordersCollectionForm.controls['orderNo'].setValue(this.detailsItem?.sparePartsSalesOrderOpportunityNo);\n      this.ordersCollectionForm.get('isReplace').setValue(true);\n    }\n    else {\n      const id = this.detailsItem?.sparePartsSalesOrderOpportunityNo || this.detailsItem?.order?.sparePartsSalesOrderOpportunityNo;\n      this.collectService.GetSparePartsSalesOrdersDetails(id).subscribe((response: any) => {\n        if (response) {\n          this.details = response.data;\n          //Show remaining amount greter than zero in case of sparepart order type is CASH\n          if (this.sparePartInvoiceType !== 'credit' && this.sparePartInvoiceType !== 'internal')\n            this.remainingAmount = this.details.remainingAmount;\n          else\n            this.remainingAmount = 0;\n          this.grandAmount = this.details.order.grandAmount;\n          this.ordersCollectionForm.controls['orderNo'].setValue(this.details.order.sparePartsSalesOrderOpportunityNo)\n        }\n      });\n    }\n  }\n  getBanksUnderTakingSalesOrdersDetails() {\n    const id = this.detailsItem?.order?.banksUnderTakingSalesOrderOpportunityNo || this.detailsItem?.banksUnderTakingSalesOrderOpportunityNo;\n    this.remainingAmount = this.detailsItem?.order?.remainingAmount || this.detailsItem?.remainingAmount;\n    this.grandAmount = this.detailsItem?.order?.grandAmount || this.detailsItem?.grandAmount;\n    this.ordersCollectionForm.controls['orderNo'].setValue(id)\n  }\n  getInhouseFinancingOrderDetails() {\n    const id = this.detailsItem?.order?.banksUnderTakingSalesOrderOpportunityNo || this.detailsItem?.inHouceFinancingSalesOrderOpportunityNo;\n    this.remainingAmount = this.detailsItem?.order?.remainingAmount || this.detailsItem?.remainingAmount;\n    this.grandAmount = this.detailsItem?.order?.grandAmount || this.detailsItem?.grandAmount;\n    this.ordersCollectionForm.controls['orderNo'].setValue(id)\n  }\n  getTransferFeesOrderDetails() {\n    const id = this.detailsItem?.transferFeesOrderId;\n    this.remainingAmount = this.detailsItem?.feesAmount;\n    this.grandAmount = this.detailsItem?.feesAmount;\n    this.ordersCollectionForm.controls['orderNo'].setValue(id)\n  }\n  getPnOrderDetails() {\n    const id = this.detailsItem?.pnOrderId;\n    this.remainingAmount = this.detailsItem?.grandAmount;\n    this.grandAmount = this.detailsItem?.remainingAmount;\n    this.ordersCollectionForm.controls['orderNo'].setValue(id)\n  }\n  getRegisterDetails() {\n    return this.collectService\n      .GetRegisterDetails(this.sharedService.getRegister.registerObj?.id).subscribe((response: any) => {\n        if (response) {\n          this.registers = response.data;\n          this.registerCurrencies = this.registers.registerCurrencies.map((x) => ({\n            id: x.id,\n            name: x.currency[0].lookupName,\n            lookupId: x.currency[0].lookupId,\n            rate: x?.rate\n          })\n          );\n          this.jodCurrencyOnly = [...this.registerCurrencies.filter(x => x.lookupId == 9001)];\n          this.isCash = this.registers.cash;\n          this.isCheque = this.registers.cheque;\n          this.isVisa = this.registers.visa;\n          this.isMaster = this.registers.mastercard;\n          this.isExpress = this.registers.americanExpress;\n          this.isAccount = this.registers.onCustomerAccount;\n        }\n      });\n  }\n\n}\n","<div class=\"modal-body\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div class=\"d-flex justify-content-between align-items-center\">\n        <div>\n          <div class=\"payment-head\" *ngIf=\"detailsItem\">\n            <h3> Customer name </h3>\n            <p> {{detailsItem?.customer?.customerName || detailsItem?.customerName}} </p>\n          </div>\n          <div class=\"payment-head\" *ngIf=\"!detailsItem\">\n            <h3 class=\"py-2\"> Collection </h3>\n          </div>\n        </div>\n        <i class=\"fas fa-times-circle primary-clr cursor-pointer fa-2x\" (click)=\"closeModal()\"></i>\n      </div>\n      <hr />\n    </div>\n    <div class=\"col-md-12\">\n      <div class=\"card-payment\" *ngIf=\"detailsItem\">\n        <div class=\"row\">\n          <div class=\"col-sm-6\">\n            <div class=\"total-card\">\n              <div class=\"d-flex flex-column\">\n                <div class=\"d-flex align-items-center gap-1\">\n                  <p> Grand Amount</p>\n                  <div class=\"total\"> {{grandAmount| number:'2.3-3'}} JOD </div>\n                </div>\n                <span *ngIf=\"(collectionType == 7001 || collectionType == 7002 || collectionType == 7003)\" class=\"font-13\">\n                  Minimum Payment: {{(detailsItem?.minAmount || details?.order?.minAmount || 0) | number:'2.3-3'}} JOD\n                </span>\n                <!--<span *ngIf=\"(collectionType == 7001 || collectionType == 7002 || collectionType == 7003) && (detailsItem?.minAmount > 0 || details?.order?.minAmount > 0) \" class=\"font-13\">\n                  Minimum Payment: {{detailsItem?.minAmount || details?.order?.minAmount || 0}}\n                </span>-->\n              </div>\n            </div>\n          </div>\n          <div class=\"col-sm-6\">\n            <div class=\"total-card justify-content-end\">\n              <p>Remaining Amount</p>\n              <div class=\"total2\"> {{(remainingAmount - paymentSum) | number:'2.3-3'}} JOD </div>\n            </div>\n          </div>\n          <div class=\"col-12\" *ngIf=\"remainingAmountMessage\">\n            <p class=\"alert alert-danger\">{{remainingAmountMessage}}</p>\n          </div>\n        </div>\n      </div>\n      <!---------IN CASE OF REVENUE---------->\n      <div class=\"mb-4\" *ngIf=\"!detailsItem\">\n        <otherRevenueForm (calcRevenueRemainingAmount)=\"calcRemainingAmount($event)\" [data]=\"otherRevenueData\"></otherRevenueForm>\n        <!--hide in case of if no total amount passed from other revenue or customer payment-->\n        <ng-container *ngIf=\"!noTotalAmountFromOrAndCp\">\n          <div class=\"col-sm-12 card-payment mt-4\">\n            <div class=\"total-card justify-content-end\">\n              <p>Remaining Amount</p>\n              <div class=\"total2\"> {{(remainingAmount - paymentSum) | number:'2.3-3'}} JOD </div>\n            </div>\n            <div class=\"col-12 mt-3\" *ngIf=\"remainingAmountMessage\">\n              <p class=\"alert alert-danger\">{{remainingAmountMessage}}</p>\n            </div>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n    <ng-container *ngIf=\"remainingAmount > 0 ||\n                  isReverse || isRefund ||\n                  noTotalAmountFromOrAndCp ||\n                  (((sparePartInvoiceType == 'credit' || sparePartInvoiceType == 'internal') && (collectionType == 7003 || collectionType == 7001 )))\">\n      <ng-container *ngIf=\"selected > 0;else noPermissionToCollect\">\n        <div class=\"col-md-12\">\n          <div class=\"tab-nav\">\n            <ng-container *ngFor=\"let payItem of paymentTypes\">\n              <ng-container *ngIf=\"payItem?.show\">\n                <div class=\"payitem\">\n                  <button type=\"button\" class=\"btn\" (click)=\"chooseTab(payItem?.paymentTypeId ,payItem?.cat)\" [class.active]=\"selected == payItem?.paymentTypeId\">\n                    <div class=\"imag\"><img [src]=\"payItem?.paymentTypeImage\" [attr.alt]=\"payItem?.paymentTypeImage\"></div>\n                    <h5>{{payItem?.translations[0]?.lookupName}}</h5>\n                  </button>\n                  <h6>{{payItem?.currentAmount | number:'2.3-3'}}</h6>\n                </div>\n              </ng-container>\n            </ng-container>\n          </div>\n        </div>\n        <div class=\"col-md-12\">\n          <div class=\"tab-content\">\n            <paymentCashForm #cashComponent [otherData]=\"otherData\" [isPending]=\"isPending\" *ngIf=\"registerCurrencies && selected == 27001\"\n                             [currencies]=\"registerCurrencies\"\n                             (amountEvent)=\"getAmount($event,'cash')\"\n                             (formValueEvent)=\"getFormValue($event,'cash')\"\n                             [recentFormValues]=\"paymentFormsValue\">\n            </paymentCashForm>\n            <paymentChequeForm [otherData]=\"otherData\" [banks]=\"banks\" [isPending]=\"isPending\" [currencies]=\"registerCurrencies\" *ngIf=\"registerCurrencies && selected == 27002\" [recentFormValues]=\"paymentFormsValue\"\n                               (amountEvent)=\"getAmount($event,'cheque')\" (formValueEvent)=\"getFormValue($event,'cheque')\"></paymentChequeForm>\n            <ng-container *ngFor=\"let formGroup of formGroups;let index = index\">\n\n              <card-form *ngIf=\"selected == cardsList[index].paymentTypeId\"\n                         [form]=\"formGroup\"\n                         [currencies]=\"registerCurrencies\"\n                         [isPending]=\"isPending\"\n                         [otherData]=\"otherData\"\n                         [terminals]=\"terminals\"\n                         [paymentTypeId]=\"cardsList[index].paymentTypeId\"\n                         (amountEvent)=\"getAmount($event,'card',cardsList[index].paymentTypeId)\"\n                         (formValueEvent)=\"getFormValue($event,'card')\">\n              </card-form>\n            </ng-container>\n            <bankTransfer [otherData]=\"otherData\" [isPending]=\"isPending\" *ngIf=\"selected == 27006\" [currencies]=\"jodCurrencyOnly\"\n                          [recentFormValues]=\"paymentFormsValue\" (amountEvent)=\"getAmount($event,'bankTransfer')\"\n                          (formValueEvent)=\"getFormValue($event,'bankTransfer')\">\n\n            </bankTransfer>\n            <bankPledge [otherData]=\"otherData\" [banks]=\"banks\" [isPending]=\"isPending\" *ngIf=\"selected == 27005\" [currencies]=\"jodCurrencyOnly\"\n                        [recentFormValues]=\"paymentFormsValue\" (amountEvent)=\"getAmount($event,'bankPledge')\"\n                        (formValueEvent)=\"getFormValue($event,'bankPledge')\">\n\n            </bankPledge>\n            <on-account [otherData]=\"onAccountData\" *ngIf=\"selected == 27004\"></on-account>\n            <voucher [otherData]=\"otherData\" [isPending]=\"isPending\" *ngIf=\"selected == 27007\" [currencies]=\"jodCurrencyOnly\"\n                     [recentFormValues]=\"paymentFormsValue\" (amountEvent)=\"getAmount($event,'voucher')\"\n                     (formValueEvent)=\"getFormValue($event,'voucher')\">\n\n            </voucher>\n          </div>\n        </div>\n      </ng-container>\n    </ng-container>\n  </div>\n</div>\n<ng-template #noPermissionToCollect>\n  <h6 class=\"fw-600 primary-clr\">You have no permissions to collect from this type of order!</h6>\n</ng-template>\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { FormControl, Validators } from '@angular/forms';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\n\n@Component({\n  selector: 'app-terminal-provider-modal',\n  templateUrl: './terminal-provider-modal.component.html',\n  styleUrls: ['./terminal-provider-modal.component.scss']\n})\nexport class TerminalProviderModalComponent {\n  @Input() data;\n  @Output() eventData = new EventEmitter();\n  providerMachineID = new FormControl(null, [Validators.required]);\n  constructor(\n    public _activeModal: NgbActiveModal,\n\n  ) { }\n  handleConfirmClick() {\n    if (!this.providerMachineID.valid) {\n      this.providerMachineID.markAllAsTouched();\n      return;\n    }\n    this.eventData.emit({ ...this.providerMachineID.value });\n  }\n}\n","<div class=\"modal-header align-items-center justify-content-between\">\n  <h4 ngbAutoFocus class=\"modal-title font-20 fw-700\">Terminal Providers Machine</h4>\n</div>\n<div class=\"modal-body\">\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <label class=\"input-label\">Plese select the POS machine through which you want to process the payment.</label>\n      <ng-select placeholder=\"Select POS Machine\"\n                 [items]=\"data?.providerList\"\n                 bindLabel=\"machineName\"\n                 [formControl]=\"providerMachineID\">\n        <ng-template ng-label-tmp let-item=\"item\">\n          {{item?.machineName + ' - ' + item?.machineID}}\n        </ng-template>\n        <ng-template ng-option-tmp let-item=\"item\">\n          {{item?.machineName + ' - ' + item?.machineID}}\n        </ng-template>\n      </ng-select>\n      <validation-error [control]=\"providerMachineID\" [errorMessages]=\"{required:'Input is required'}\"></validation-error>\n    </div>\n  </div>\n</div>\n<div class=\"modal-footer mt-3\">\n  <button type=\"button\" class=\"redBtn\" (click)=\"_activeModal.close()\">Close</button>\n  <button type=\"button\" class=\"redBtn\" (click)=\"handleConfirmClick()\">Confirm</button>\n</div>\n","<!--FOR NEWLY UPLOADED FILE VIEW-->\n<ng-container *ngIf=\"!viewOnly;else viewOnlyURL\">\n  <div class=\"modal-body p-2\">\n    <ng-container *ngIf=\"(imageUploadedView?.fileType == 'image/png' || imageUploadedView?.fileType == 'image/jpeg' || imageUploadedView?.fileType == 'image/jpg');else pdf\">\n      <img class=\"w-100\" [src]=\"imageUploadedView?.base64\" />\n    </ng-container>\n    <ng-template #pdf>\n      <div class=\"d-flex justify-content-center flex-column align-items-center\">\n        <img height=\"80\" width=\"80\" src=\"assets/images/pdf.png\" alt=\"\" />\n        <br />\n        <a class=\"text-decoration-none text-capitalize\" [href]=\"viewPdf(imageUploadedView?.file)\" target=\"_blank\">click to open pdf </a>\n      </div>\n    </ng-template>\n  </div>\n  <div class=\"btns-group my-2 mx-0\">\n    <button type=\"button\"\n            class=\"btn btn-cancel\"\n            (click)=\"activeModal.close('Close click')\">\n      Close\n    </button>\n  </div>\n</ng-container>\n<!--IF FILE IS ALREADY UPLOADED ON SERVER THAN BELOW CODE WILL WORK-->\n<ng-template #viewOnlyURL>\n  <div class=\"modal-body p-2\">\n    <ng-container *ngIf=\"(fileType == 'png' || fileType == 'jpeg' || fileType == 'jpg' || fileType == 'svg');else elseExtViewBlock\">\n      <img class=\"w-100 mb-2\" [src]=\"fileURL\" />\n    </ng-container>\n    <ng-template #elseExtViewBlock>\n      <ng-container [ngSwitch]=\"fileType\">\n        <ng-container *ngSwitchCase=\"'pdf'\">\n          <div class=\"d-flex justify-content-center flex-column align-items-center\">\n            <img height=\"80\" width=\"80\" src=\"assets/images/pdf.png\" alt=\"\" />\n            <br />\n            <a class=\"text-decoration-none text-capitalize\" href=\"{{fileURL}}\" target=\"_blank\">click to open PDF </a>\n          </div>\n        </ng-container>\n      </ng-container>\n    </ng-template>\n  </div>\n  <div class=\"btns-group my-2 mx-0\">\n    <button type=\"button\" class=\"btn btn-cancel\" (click)=\"activeModal.close('Close click')\">\n      Close\n    </button>\n  </div>\n</ng-template>\n","import { Component, Input, Sanitizer } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Router } from '@angular/router';\nimport { NgbActiveModal, NgbModal } from '@ng-bootstrap/ng-bootstrap';\n\n\n@Component({\n  selector: 'app-view-file',\n  templateUrl: './view-file.component.html',\n  styleUrls: ['./view-file.component.scss']\n})\nexport class ViewFileComponent {\n  @Input() imageUploadedView: any;\n  viewOnly = false;\n  fileType = '';\n  fileURL = '';\n  constructor(\n    public activeModal: NgbActiveModal,\n    private sanitizer: DomSanitizer\n  ) { }\n\n  ngOnInit(): void {\n    console.log(this.imageUploadedView);\n    this.viewOnly = this.imageUploadedView?.viewOnly;\n    if (this.viewOnly) {\n      this.fileType = this.getFileType(this.imageUploadedView.url);\n      this.fileURL = this.imageUploadedView.url;\n    }\n  }\n  viewPdf(file) {\n    let src = URL.createObjectURL(file);\n    return this.sanitizer.bypassSecurityTrustResourceUrl(src)\n  }\n  getFileType(fileName) {\n    return fileName?.split('.').pop().trim().toLowerCase();\n  }\n}\n","import { Component, ElementRef, EventEmitter, HostListener, Input, Optional, Output, QueryList, ViewChildren } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { NgbActiveModal, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Subject, Subscription, debounceTime } from 'rxjs';\nimport { CommonService } from '../../../../../../services/common.service';\nimport { SubjectService } from '../../../../../../services/subject.service';\nimport { MarkaziaVoucherService } from '../../../markazia-vouchers/services/markazia-voucher.service';\nimport { DatePipe } from '@angular/common';\nimport { ToastrService } from 'ngx-toastr';\n\n@Component({\n  selector: 'voucher',\n  templateUrl: './voucher.component.html',\n  styleUrls: ['./voucher.component.scss']\n})\nexport class VoucherComponent {\n  invalidFileType = '';\n  fileTypes = ['image/jpeg', 'image/jpg', 'image/png', 'application/pdf'];\n  @Input() accounts = [];\n  @Input() currencies: [];\n  vouchersList = [];\n  filesArray = [];\n  voucherForm: FormGroup;\n  uploadedFiles: string[] = [];\n  @Input() recentFormValues\n  @Input() isPending: boolean;\n  @Input() otherData;\n  filesSubscription = new Subscription();\n  isLoading = false;\n  searchIndex: number;\n  markaziaVoucher;\n  @Output() amountEvent: EventEmitter<any> = new EventEmitter<any>();\n  @Output() formValueEvent: EventEmitter<any> = new EventEmitter<any>();\n  @HostListener('document:keydown.tab', ['$event']) onKeydownHandler() {\n    this.handleTabKeyDown();\n  }\n  private searchSequenceSubject = new Subject<string>();\n  @ViewChildren('fileInput') inputRefList: QueryList<any>;\n  constructor(private fb: FormBuilder,\n    private _modalService: NgbModal,\n    @Optional() public _activeModal: NgbActiveModal,\n    private _datePipe: DatePipe,\n    public _commonService: CommonService,\n    public _subjectService: SubjectService,\n    private _toastr: ToastrService,\n    private _vocuherService: MarkaziaVoucherService) {\n    this.searchSequenceSubject.pipe(debounceTime(1000)).subscribe((term: string) => { this.getMarkaziaVouchers(term); });\n  }\n  ngOnInit() {\n    console.log(this.otherData);\n    this.initForm();\n    this.voucherForm.statusChanges.subscribe(x => {\n      this.voucherForm.markAllAsTouched();\n      this.formValueEvent.emit({ values: this.voucherForm.getRawValue(), touched: x == 'VALID' ? false : true })\n    })\n  }\n  initForm() {\n    this.voucherForm = this.fb.group({\n      voucherArray: this.fb.array([this.initVoucherFormgroup()])\n    })\n    if (this.recentFormValues?.voucher?.voucherArray?.length) {\n      let values = this.recentFormValues['voucher'].voucherArray;\n      let formArray = (this.voucherForm.get('voucherArray') as FormArray);\n      formArray.removeAt(0);\n      for (let item of values) {\n        formArray.push(this.initVoucherFormgroup(item));\n      }\n    }\n  }\n  ngOnDestroy() {\n    if (this.recentFormValues?.voucher?.voucherArray[0]?.amountJod > 0) {\n      this.formValueEvent.emit({ values: this.voucherForm.getRawValue(), touched: false })\n    }\n  }\n  handleAmountFocus() {\n    this.voucherForm.markAllAsTouched();\n  }\n  initVoucherFormgroup(item?) {\n    return this.fb.group({\n      voucherSequence: [item?.voucherSequence || ''],\n      voucherNumber: [item?.voucherNumber || '', [Validators.required]],\n      amountJod: [{ value: item?.amountJod || '', disabled: true }, [Validators.required]],\n      currencyId: [{ value: 9001, disabled: true }],\n      brand: [{ value: item?.brand || '', disabled: true }],\n      campaign: [{ value: item?.campaign || '', disabled: true }],\n      validityTo: [{ value: item?.validityTo || '', disabled: true }],\n    });\n  }\n  handleSearch(event, index) {\n    let value = event.target.value;\n    this.searchIndex = index;\n    if (value) {\n      this.searchSequenceSubject.next(value);\n    }\n    else {\n      this.voucherArray.at(this.searchIndex).reset();\n    }\n  }\n  getMarkaziaVouchers(value) {\n    this.isLoading = true;\n    let params = `?pageSize=1000&sequence=${value}`;\n    this._vocuherService.getMarkaziaVoucherList(params).pipe(debounceTime(500)).subscribe((response: any) => {\n      let voucher = response.data[0];\n      this.markaziaVoucher = voucher;\n      let obj = {\n        amountJod: voucher?.markaziaVAmount,\n        voucherSequence: voucher?.markaziaVSequence,\n        brand: voucher?.brand?.brand,\n        campaign: voucher?.markaziaVCampaign,\n        validityTo: this._datePipe.transform(voucher?.markaziaVValidityTo, 'mediumDate'),\n      }\n      if (voucher) {\n        if (voucher.markaziaVStatus == 39001) { //VALID VOUCHER\n          this.voucherArray.at(this.searchIndex).patchValue(obj);\n          if (obj?.amountJod > this.otherData.grandAmount) {\n            this.voucherArray.at(this.searchIndex).get('amountJod').enable();\n          }\n          else {\n            this.voucherArray.at(this.searchIndex).get('amountJod').disable();\n            this.sendAmount();\n          }\n        }\n        else {\n          this._toastr.error('Invalid Voucher', 'Invalid');\n          this.voucherArray.at(this.searchIndex).reset();\n          this.sendAmount();\n        }\n      }\n      else {\n        this.voucherArray.at(this.searchIndex).reset();\n        this._toastr.error('No voucher found', 'Not Found');\n        this.sendAmount();\n      }\n    }).add(() => this.isLoading = false);\n  }\n  removeItem(i) {\n    this.voucherArray.removeAt(i);\n    this.sendAmount();\n  }\n  get voucherArray() {\n    return this.voucherForm ? this.voucherForm.get('voucherArray') as FormArray : null;\n  }\n  handleTabKeyDown() {\n    if (this.voucherForm.invalid) {\n      return;\n    }\n    if (this.otherData['amountExceeded']) {\n      return;\n    }\n    if (!this.otherData?.isMultiCollect)\n      this.addNewRow();\n\n  }\n  addNewRow() {\n    this.voucherArray.push(this.initVoucherFormgroup());\n    this.voucherForm.markAsUntouched();\n  }\n  handleSubmit() {\n    if (this.voucherForm.invalid) {\n      this.voucherForm.markAllAsTouched();\n    }\n    else {\n      this.formValueEvent.emit({ values: this.voucherForm.getRawValue(), submit: true })\n    }\n  }\n  get f() {\n    return this.voucherForm.controls;\n  }\n  sendAmount() {\n    this.calculateAmount();\n  }\n  calculateAmount() {\n    let amount = 0;\n    for (let item of this.voucherArray.controls) {\n      let formGroup = item as FormGroup;\n      amount += parseFloat((+formGroup.controls['amountJod'].value).toFixed(3));\n    }\n    this.amountEvent.emit({ amount });\n  }\n  resetForm() {\n    this.voucherForm.reset();\n    this.voucherForm.markAsUntouched();\n    this.formValueEvent.emit({ values: this.voucherForm.getRawValue(), touched: false, reset: true });\n    this.amountEvent.emit({ amount: 0 });\n  }\n  closeModal() {\n    if (this._activeModal)\n      this._activeModal.close()\n    else\n      this._commonService.NavigateToRoute(`/${this.otherData?.redirectRoute}`)\n  }\n}\n\n","<div class=\"tab-item\">\n  <div class=\"row\">\n    <div class=\"col-md-12 text-end my-2\">\n      <button type=\"button\" class=\"btn btn-trash\" (click)=\"resetForm()\">\n        <img style=\"width:25px\" src=\"assets/images/reload.png\" alt=\"\">\n      </button>\n    </div>\n    <form [formGroup]=\"voucherForm\" (submit)=\"handleSubmit()\">\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <div class=\"card-table\">\n            <div class=\"\">\n              <table class=\"table\">\n                <thead>\n                  <tr>\n                    <th>Voucher Sequence*</th>\n                    <th>Amount</th>\n                    <th>Currency</th>\n                    <th>Validity To</th>\n                    <th>Brand</th>\n                    <th>Campaign</th>\n                    <th *ngIf=\"!otherData?.isMultiCollect\">Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <ng-container formArrayName=\"voucherArray\" *ngFor=\"let item of voucherArray?.controls;let i = index\">\n                    <tr [formGroupName]=\"i\">\n                      <td>\n                        <div class=\"position-relative\">\n                          <input type=\"text\" class=\"form-control\" placeholder=\"Voucher Sequence\" formControlName=\"voucherNumber\"\n                                 (change)=\"handleSearch($event,i)\">\n                          <i *ngIf=\"isLoading && searchIndex == i\" class=\"fa-solid fa-circle-notch fa-spin fa-2x primary-clr search-loader\"></i>\n                        </div>\n                        <ng-container *ngIf=\"item?.get('voucherNumber')?.errors\">\n                          <ng-container *ngIf=\"item?.get('voucherNumber')?.invalid && item?.get('voucherNumber')?.touched || item?.get('voucherNumber')?.dirty\">\n                            <span class=\"error\" *ngIf=\"item?.get('voucherNumber')?.errors['required']\">Input is required</span>\n                          </ng-container>\n                        </ng-container>\n                      </td>\n                      <td>\n                        <input type=\"number\" class=\"form-control\" placeholder=\"Amount\" formControlName=\"amountJod\"\n                               (change)=\"sendAmount()\" appDecimalNumber (input)=\"handleAmountFocus()\">\n                        <small *ngIf=\"markaziaVoucher?.markaziaVAmount > otherData.grandAmount\" class=\"primary-clr d-block\">\n                          Voucher Amount: {{markaziaVoucher?.markaziaVAmount | number:'2.3-3'}} JOD\n                        </small>\n                        <ng-container *ngIf=\"item?.get('amountJod')?.errors\">\n                          <ng-container *ngIf=\"item?.get('amountJod')?.invalid && item?.get('amountJod')?.touched || item?.get('amountJod')?.dirty\">\n                            <span class=\"error\" *ngIf=\"item?.get('amountJod')?.errors['required']\">Input is required</span>\n                          </ng-container>\n                        </ng-container>\n                      </td>\n                      <td>\n                        <div class=\"ngselect-curruncy form-group\">\n                          <ng-select placeholder=\"Currency\" [items]=\"currencies\"\n                                     bindLabel=\"name\" bindValue=\"lookupId\" formControlName=\"currencyId\">\n                          </ng-select>\n                          <ng-container *ngIf=\"item.get('currencyId')?.errors\">\n                            <ng-container *ngIf=\"item?.get('currencyId')?.invalid && item?.get('currencyId')?.touched || item?.get('currencyId')?.dirty\">\n                              <span class=\"error\" *ngIf=\"item?.get('currencyId')?.errors['required']\">Input is required</span>\n                            </ng-container>\n                          </ng-container>\n                        </div>\n                      </td>\n                      <td>\n                        <input type=\"text\" class=\"form-control\" placeholder=\"Validiy To\" formControlName=\"validityTo\">\n                      </td>\n                      <td>\n                        <input type=\"text\" class=\"form-control\" placeholder=\"Brand\" formControlName=\"brand\">\n                      </td>\n                      <td>\n                        <input type=\"text\" class=\"form-control\" placeholder=\"Campaign\" formControlName=\"campaign\">\n                      </td>\n                      <td *ngIf=\"!otherData?.isMultiCollect\">\n                        <button type=\"button\" class=\"btn btn-trash\" (click)=\"removeItem(i)\">\n                          <img style=\"width:25px\" src=\"assets/images/trash.png\" alt=\"\">\n                        </button>\n                      </td>\n                    </tr>\n                  </ng-container>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          <div class=\"col-md-12 d-flex mt-2\" *ngIf=\"!otherData?.isMultiCollect\">\n            <p class=\"blue-clr d-flex align-items-center fw-500 gap-1\">\n              <i class=\"fa-solid fa-circle-plus primary-clr fa-2x\"></i>Press Tab to add payment in another currency\n            </p>\n          </div>\n        </div>\n      </div>\n      <!-----------------------------------TABLE END HERE----------------------------->\n      <div class=\"col-12 mb-4\" *ngIf=\"otherData.collectionType == 7001 || otherData.collectionType == 7004 || otherData.collectionType == 7005 || otherData.collectionType == 7008 || otherData.collectionType == 7009\">\n        <label class=\"input-label\">Cashier Notes</label>\n        <textarea class=\"form-control\" (change)=\"_subjectService.cashierNote.next($any($event).target.value)\"></textarea>\n      </div>\n      <div class=\"col-md-12\">\n        <div class=\"btns-group my-2 me-0\">\n          <button type=\"button\" class=\"btn btn-cancel\" (click)=\"closeModal()\">Cancel</button>\n          <button type=\"submit\" class=\"btn btn-save\" [disabled]=\"isPending\">\n            {{isPending && 'Saving' || 'Confirm'}}\n            <i *ngIf=\"isPending\" class=\"fa-solid fa-circle-notch fa-spin\"></i>\n          </button>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n","import { Injectable } from '@angular/core';\nimport { SharedService } from '../../../../../services/shared.service';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MarkaziaVoucherService {\n  apiUrl = this.sharedService.getUrl;\n  apiUrl2 = this.sharedService.getUrl2;\n  constructor(private http: HttpClient, public sharedService: SharedService) { }\n  getBrands(params?) {\n    return this.http.get(`${this.apiUrl2}Customer/GetBrands${params}`, this.sharedService.getHeaders());\n  }\n  getLookup(params: any) {\n    return this.http.get(`${this.apiUrl}Lookups/GetLookups${params}`, this.sharedService.getHeaders());\n  }\n  getCostCenter(params: any) {\n    return this.http.get(`${this.apiUrl}PettyCash/GetCostCenters${params}`, this.sharedService.getHeaders());\n  }\n  getMarkaziaVoucherList(params: any) {\n    return this.http.get(`${this.apiUrl}MarkaziaVouchers/GetMarkaziaVouchers${params}`, this.sharedService.getHeaders());\n  }\n  deleteMarkaziaVouchers(payload: any) {\n    return this.http.post(`${this.apiUrl}MarkaziaVouchers/DeleteMarkaziaVouchers`, payload, this.sharedService.getHeaders());\n  }\n  generateVoucher(payload: any) {\n    return this.http.post<any>(`${this.apiUrl}MarkaziaVouchers/GenerateMarkaziaVouchers`, payload, this.sharedService.getHeaders());\n  }\n}\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, map } from 'rxjs';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { IApiResponse } from '../shared/Interfaces/api-response';\nimport { CommonService } from './common.service';\nimport { environment } from '../../environments/environment';\nimport { AppRoutes } from '../shared/routes/appRoutes';\nimport { ApiUrls } from '../shared/routes/apiUrl';\nimport { SharedService } from './shared.service';\n@Injectable({\n  providedIn: 'root'\n})\nexport class HttpService {\n  appRoutes = AppRoutes;\n  apiUrl = ApiUrls;\n  constructor(private http: HttpClient,\n    public _spinnerService: NgxSpinnerService,\n    public _helperService: CommonService,\n    public _sharedService: SharedService,\n  ) { }\n  get getToken() {\n    return localStorage.getItem('token') || sessionStorage.getItem('token');\n  }\n  get(api: string, apiBaseUrl?: string): Observable<IApiResponse> {\n    let headers = new HttpHeaders({\n      'Content-Type': 'application/json; charset=utf-8', 'Access-Control-Allow-Origin': '*',\n      'Access-Control-Expose-Headers': '*', 'Access-Control-Allow-Methods': 'GET',\n      'Access-Control-Allow-Headers': '*',\n    });\n    headers = headers.set('Authorization', 'Bearer ' + this.getToken);\n    let options = { headers};\n    let baseUrl = '';\n    if (apiBaseUrl === 'admin') {\n      baseUrl = environment.apiUrl2\n    }\n    else if (apiBaseUrl === 'master') {\n      baseUrl = environment.masterBaseUrl;\n    }\n    else if (apiBaseUrl === 'cm') {\n      baseUrl = environment.cmBaseUrl\n    }\n    else {\n      baseUrl = environment.apiUrl;\n    }\n    return this.http.get<IApiResponse>(baseUrl + api, { ...options }).pipe(map((response: any) => {\n        if (typeof response == \"string\") {\n          return this.JsonParseData(response);\n        }\n        else {\n          return response;\n        }\n    }));\n  }\n  post(api: string, data: any, apiBaseUrl?: string): Observable<IApiResponse> {\n    let headers = new HttpHeaders({\n      ...(!(data instanceof FormData) && { 'Content-Type': 'application/json; charset=utf-8' }),\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Expose-Headers': '*',\n      'Access-Control-Allow-Methods': 'POST',\n      'Access-Control-Allow-Headers': '*'\n    });\n    headers = headers.set('Authorization', 'Bearer ' + this.getToken);\n    let options = { headers };\n    let baseUrl = '';\n    if (apiBaseUrl === 'admin') {\n      baseUrl = environment.apiUrl2\n    }\n    else if (apiBaseUrl === 'master') {\n      baseUrl = environment.masterBaseUrl\n    }\n    else if (apiBaseUrl === 'cm') {\n      baseUrl = environment.cmBaseUrl\n    }\n    else {\n      baseUrl = environment.apiUrl\n    }\n    // If data is a FormData object, send it directly; otherwise, stringify it\n    const requestData = data instanceof FormData ? data : JSON.stringify(data);\n    return this.http\n      .post<IApiResponse>(baseUrl + api, requestData, { ...options }).pipe(map(response => {\n        if (typeof response == \"string\") {\n          return this.JsonParseData(response);\n        }\n        else {\n          return response;\n        }\n      }));\n  }\n  public JsonParseData(data: any) {\n    let result = data;\n    try {\n      result = JSON.parse(data);\n    } catch (e) {\n      console.log(e);\n    }\n    return result;\n  }\n}\n","export enum Status {\n  Opened = 16001,\n  Unclosed = 16002,\n  Waiting = 16003,\n  Closed = 16004,\n  Partial = 16005,\n  Settled = 16006,\n  OnHold = 16007,\n  RegisterFullDeposit = 16008,\n  PartiallySettled = 16009,\n  Active = 2001,\n}\nexport enum OrderCollectionType {\n  ServicesSalesOrders = 7001,\n  DirectPaymentSalesOrders = 7002,\n  SparePartsSalesOrders = 7003,\n  OtherRevenues = 7004,\n  CustomerPayments = 7005,\n  BankUndertakingSalesOrders = 7006,\n  InHouseFinancingSalesOrders = 7007,\n  PromissoryNotes = 7008,\n}\nexport enum ReturnStatus {\n  Refunded = 33004,\n}\nexport enum RefundActionStatus {\n  Refund = 34002,\n  Sign = 34003,\n  View = 34004,\n}\n","export const ApiUrls = {\n  Lookup: {\n    GetLookups: \"Lookup/GetLookups\",\n    GetAdminLookup: \"Lookups/GetLookups\",\n    AddLookup: \"Lookup/AddLookup\",\n    EditLookup: \"Lookup/EditLookup\",\n    DeleteLookup: \"Lookup/DeleteLookup\",\n  },\n  PNsFollowUpControler: {\n    AddPNNoteFollowUp: 'PNsFollowUpControler/AddPNNoteFollowUp',\n  },\n  POSMachine: {\n    SendCreditCardRequest: 'POSMachine/send-credit-card-request',\n    GetTerminalProviderMachine: 'TerminalProviders/GetTerminalProviderMachine',\n  },\n  Treasury: {\n    GetRefundedOrders: 'Treasury/GetRefundedOrders',\n  },\n  Regenerate: {\n    RegenerateOrderOrigionalInvoiceServiceOrder: 'Cashier/RegenerateOrderOrigionalInvoiceServiceOrder',\n    RegenerateOrigionalReceiptServiceOrder: 'Cashier/RegenerateOrigionalReceiptServiceOrder',\n    RegenerateOrigionalReceiptDirectPayment: 'Cashier/RegenerateOrigionalReceiptDirectPayment',\n    RegenerateOrigionalInvoiceSpareParts: 'Cashier/RegenerateOrigionalInvoiceSpareParts',\n    RegenerateOrigionalReceiptSpareParts: 'Cashier/RegenerateOrigionalReceiptSpareParts',\n    RegenerateORReceipt: 'Cashier/RegenerateORReceipt',\n    RegenerateOrigionalReceiptCustomer: 'Cashier/RegenerateOrigionalReceiptCustomer',\n    RegenerateCashierFullRefundOrder: 'DirectPaymentReturnOrder/RegenerateCashierFullRefundOrder',\n    RegenerateCashierRefundServiceOrder: 'ServiceLayerReturnOrder/RegenerateCashierRefundServiceOrder',\n    RegenerateSparePartReturnOrderInvoice: 'SparePartsReturnOrder/RegenerateSparePartReturnOrderInvoice',\n  },\n}\n","export const AppRoutes = {\n\n}\n"],"names":["EventEmitter","i0","ctx_r12","ctx_r16","ctx_r18","ModalPayDoneComponent","constructor","router","modalService","activeModal","_subjectService","ngOnInit","name","setTimeout","navigateTo","data","collectionType","dismissAll","routeName","navigateByUrl","isCollectionPaymentDone","next","emitData","paymentDoneModalClosed","closed","downloadInvoices","isArray","Array","response","forEach","x","iterateData","notAutoDismiss","key","item","downloadURI","uri","split","pop","link","document","createElement","setAttribute","href","body","appendChild","click","remove","selectors","inputs","errors","outputs","eventData","decls","vars","consts","template","FormControl","Validators","Subscription","ViewFileComponent","_","BankPledgeComponent","onKeydownHandler","handleTabKeyDown","fb","_modalService","_activeModal","_commonService","_collectService","colllectedViaMachine","JSON","parse","localStorage","getItem","initForm","bankPledgeForm","statusChanges","subscribe","touched","otherData","reverse","markAllAsTouched","formValueEvent","emit","values","getRawValue","refund","pledgeArrControls","disable","emitEvent","disableReversedItems","controls","control","pledgeAttachment","get","pledgeAttachmentValue","filesArray","push","setValue","isNew","value","group","pledgeArray","array","pledgeFormControls","recentFormValues","bankPledge","length","formArray","removeAt","filesSub","bankPledgeFiles","files","filesSubscription","add","ngOnDestroy","pledgeAmountJod","unsubscribe","handleAmountFocus","console","log","min","required","bankPledgeDate","Date","toISOString","substring","bankId","bankPledgeNumber","pattern","attachment","currencyId","isReversed","lineNew","fileAction","fileName","index","action","modelRef","open","size","at","file","componentInstance","imageUploadedView","viewOnly","url","splice","inputRef","inputRefList","toArray","nativeElement","removeFileFromLocalStorage","uploadedFiles","setItem","stringify","onFileChange","event","i","target","isInvalid","checkInvalidImageFormat","uploadFile","fileToBase64","then","formData","FormData","append","isSuccess","getFiles","map","undefined","invalidExtentions","fileTypes","includes","type","invalidFileType","patchValue","removeItem","sendAmount","invalid","isMultiCollect","addNewRow","getDisabledFormGroupCount","obj","markAsUntouched","disabledCount","disabled","handleSubmit","submit","f","calculateAmount","amount","formGroup","amountEvent","previousFormGroup","newFormGroup","Object","keys","controlName","controlValue","cloneDeep","addControl","negativeValue","insert","resetForm","reset","closeModal","close","NavigateToRoute","redirectRoute","viewQuery","ctx","BankTransferComponent","getBankAccounts","accounts","id","bankTransferForm","bankArrControls","attachmentValue","params","accountId","bankNameEnglish","accountNumber","bankArray","bankFormControls","bankTransfer","bankTransferFiles","paidAmountJod","sameCustomer","transfereDate","markaziaBankAccountId","transfereReference","transfereAttachment","cardPayerName","isSameCustomer","checked","customerName","clear","Subject","takeUntil","ResponseModalComponent","ConfirmModalComponent","TerminalProviderModalComponent","CardFormComponent","collectService","_httpService","_sharedService","isMachineFgReset","isMachineResponse","paymentTypeId","currencyList","currencies","filter","lookupId","cardArrayControl","cardControls","initialAmount","remainingAmountAfterSomeCollection","remainingAmount","convertCash","form","pipe","destroy$","subscription","complete","isChecked","cardCollectionJod","machineReceiptNumber","cardTerminalProviderId","machineID","cardLast4Digits","paymentCardTypeId","rate","vjod","chooseCurrency","toFixed","row","getTerminalProviderMachine","registerId","getRegister","registerObj","_spinnerService","show","URL","apiUrl","POSMachine","GetTerminalProviderMachine","providerMachineList","handleConfirmCardRequest","ref","centered","providerList","res","responseModal","error","err","errorMessageEn","ErrorMessageEn","info","hide","terminalData","confirmCreditCardRequest","sendCreditCardRequest","posRespStatus","posPan","posInvoiceNumber","providerName","providerId","posRespText","webResponseErrorDesc","handlePOSMachineClick","terminalID","secretKey","SendCreditCardRequest","post","message","modalRef","headingText","_helperService","transformDecimal","hostBindings","CashComponent","cashForm","cash","cashArray","initCashForm","currenciesArray","cashArrControls","collectedAmount","cashPayerName","addNewCurrency","convertedAmount","handleAmountChange","amountJOD","negativeJODValue","PaymentChequeComponent","_datePipe","flagType","flag","toLowerCase","minDate","startDate","getFullYear","getMonth","maxDate","setDate","getDate","chequeForm","chequeImages","chequeFiles","financeApproval","chequeFinanceApprovalFiles","financeApprovalFiles","chequeArrControls","cheque","chequeValue","financeApp","financeAppValue","chequeArray","chequeCollectionJod","chequeFormControls","onDateValueChange","newDateValue","normalizedDate","UTC","from","input2RefList","chequeNo","chequeDate","chequeDrawerName","chequeImage","financeApprovalAttachment","tempFinanceAttachment","finance","lastFormGroupValue","currentFormGroup","parseFloat","ConfirmPaymentModalComponent","OnAccountComponent","_spinner","confirm","isPending","ordersCollection","orderCollectionType","orderNo","ordersOnAccountCollection","onAccountCollectionJod","grandAmount","onAccountPayerName","collectionOrderV2MultiCollect","openSuccessModal","orderId","servicesSalesOrderNo","order","sparePartsSalesOrderOpportunityNo","isReplace","isFromReturn","cashierNotes","customer","collectionOrderV2","collectedOrder","receipt","invoice","summary","statusObj","invoices","summaryInvoice","status","invoiceType","Errors","debounceTime","distinctUntilChanged","switchMap","AddNewCustomerComponent","text","initCustomerForm","searchSubscription","searchSubject","getMarkaziaCustomers","Number","isCreditCustomer","customerList","title","fname","sname","thName","fourthName","gender","customerCategory","mobile","minLength","maxLength","handleCreditCustomerChange","handleSearch","handleCetegoryChange","isIndividual","setValidators","updateValueAndValidity","clearValidators","removeByIndex","str","slice","saveCustomer","isSubmitted","charAt","corporateName","addMarkaziaCustomer","sendData","responseMessage","selectCustomer","selectedItem","selectedCustomer","customerNo","handleSelect","customerPhone","addNewCustomer","isNewCustomer","goBack","catchError","forkJoin","of","ModalMessageComponent","OtherRevenueFormComponent","_vocuherService","_generalService","cdRef","sharedService","initRevenuForm","getCategories","getLookups","ngOnChanges","changes","currentValue","totalCollectedAmount","calcuateTaxAndAmountFromTotalAmount","revenueForm","customerId","revenueCategoryId","costCenterId","tax","taxPercent","taxAmount","totalAmount","note","taxPercentage","formValue","calcRevenueRemainingAmount","noTotalAmount","handleNoAmountChange","toggleValidation","amountControl","removeValidators","addValidators","costCenter","getCostCenter","taxes","getLookupsWithParams","costCenterList","taxesList","lookupName","handleTaxChange","calcTotalAmount","searchForCustomer","corporate","individual","emittedValues","fromCustomer","formValues","chooseCategory","e","taxPercentId","taxId","find","clearCategory","getCustomers","customersList","customers","GetCategories","categories","getCustomerPaymentCategories","features","PaymentModalComponent","_decimalPipe","isCash","isCheque","isVisa","isMaster","isExpress","isAccount","isReverse","detailsItem","isRefund","sub","cashierNote","ordersCollectionForm","getRegisterDetails","getTerminalProviders","getBanks","getRegisterPaymentTypesForOrders","sparePartInvoiceType","onAccountData","otherRevenueData","GetDirectPaymentSalesOrdersDetails","GetServicesSalesOrderDetails","GetSparePartsSalesOrdersDetails","getBanksUnderTakingSalesOrdersDetails","getInhouseFinancingOrderDetails","getPnOrderDetails","getTransferFeesOrderDetails","handleReverse","paymentSum","collectedOrderDetails","minAmount","bindCollectedValueToPaymentType","ordersCashCollections","ordersChequeCollection","bankTransfere","ordersCardsCollection","getImageSavedPath","path","join","collectedAmountJOD","isDisabled","paymentFormsValue","sumCollectedAmounts","totalCash","totalCollectedAmountByPaymentTypeList","totalCheque","transformDate","totalPledge","totalBankTransfer","cardsList","cardType","y","formGroups","cards","card","items","cardArray","cardItems","fg","cardCollectedAmount","totalVisa","updateCollectedAmountReverse","paymentTypes","currentAmount","reduce","acc","cur","chooseTab","val","cat","collectedViaPOSMachine","posMachine","remainingAmountMessage","noTotalAmountFromOrAndCp","selected","paymentTabItem","getAmount","component","updateCollectedAmount","findIndex","totalCardCollection","totalVoucher","transform","isReset","amountExceeded","itemIndex","updateItem","getFormValue","voucher","confirmPaymentModal","pnBookNotesIds","earlysettlement","invoiceTypes","getLookupsById","banks","terminals","calcRemainingAmount","generateRevenueFormValue","revenueFormValue","customerPaymentFormValue","customerPaymentCategoryId","backdrop","result","resolve","collectPayments","reject","cardsArray","markaziaVouchers","toString","voucherArray","amountJod","voucherNumber","voucherSequence","roundValue","revenueCollection","customerPaymentCollection","orderBankTransfereCollections","ordersBanksPledgeCollectionModel","pledgeData","addOtherRevenueOrdersV2","sendtoLoadData","addCustomerPaymentOrders","collectionOrderV2PNOrder","servicesOrdersCollection","collectionOrderV3","reversedCollectionId","orderCollectionId","corrospondingSessionId","reverseCollection","currentSesssionID","refundReciptsForAllOrders","details","directPaymentSalesOrderOpportunityNo","banksUnderTakingSalesOrderOpportunityNo","inHouceFinancingSalesOrderOpportunityNo","transferFeesOrderId","feesAmount","pnOrderId","GetRegisterDetails","registers","registerCurrencies","currency","jodCurrencyOnly","visa","mastercard","americanExpress","onCustomerAccount","multiCollection","handleConfirmClick","providerMachineID","valid","sanitizer","fileType","getFileType","fileURL","viewPdf","src","createObjectURL","bypassSecurityTrustResourceUrl","trim","VoucherComponent","_toastr","searchSequenceSubject","term","getMarkaziaVouchers","voucherForm","initVoucherFormgroup","brand","campaign","validityTo","searchIndex","isLoading","getMarkaziaVoucherList","markaziaVoucher","markaziaVAmount","markaziaVSequence","markaziaVCampaign","markaziaVValidityTo","markaziaVStatus","enable","MarkaziaVoucherService","http","getUrl","getUrl2","getBrands","apiUrl2","getHeaders","getLookup","deleteMarkaziaVouchers","payload","generateVoucher","factory","providedIn","HttpHeaders","environment","AppRoutes","ApiUrls","HttpService","getToken","sessionStorage","api","apiBaseUrl","headers","set","options","baseUrl","masterBaseUrl","cmBaseUrl","JsonParseData","requestData","Status","OrderCollectionType","ReturnStatus","RefundActionStatus","Lookup","GetLookups","GetAdminLookup","AddLookup","EditLookup","DeleteLookup","PNsFollowUpControler","AddPNNoteFollowUp","Treasury","GetRefundedOrders","Regenerate","RegenerateOrderOrigionalInvoiceServiceOrder","RegenerateOrigionalReceiptServiceOrder","RegenerateOrigionalReceiptDirectPayment","RegenerateOrigionalInvoiceSpareParts","RegenerateOrigionalReceiptSpareParts","RegenerateORReceipt","RegenerateOrigionalReceiptCustomer","RegenerateCashierFullRefundOrder","RegenerateCashierRefundServiceOrder","RegenerateSparePartReturnOrderInvoice"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}